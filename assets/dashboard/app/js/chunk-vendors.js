(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},"0159":function(t,e,n){const r=n("bbfd"),i=(t,e,n,i)=>{"string"===typeof n&&(i=n,n=void 0);try{return new r(t,n).inc(e,i).version}catch(o){return null}};t.exports=i},"0366":function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},"06cf":function(t,e,n){var r=n("83ab"),i=n("d1e7"),o=n("5c6c"),a=n("fc6a"),s=n("c04e"),u=n("5135"),c=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},"0982":function(t,e,n){const r=n("3fce"),i=(t,e)=>{try{return new r(t,e).range||"*"}catch(n){return null}};t.exports=i},"0a67":function(t,e,n){const r=n("bbfd"),i=n("a236"),{re:o,t:a}=n("8cb5"),s=(t,e)=>{if(t instanceof r)return t;if("number"===typeof t&&(t=String(t)),"string"!==typeof t)return null;e=e||{};let n=null;if(e.rtl){let e;while((e=o[a.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length))n&&e.index+e[0].length===n.index+n[0].length||(n=e),o[a.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;o[a.COERCERTL].lastIndex=-1}else n=t.match(o[a.COERCE]);return null===n?null:i(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};t.exports=s},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d03":function(t,e,n){var r=n("6eeb"),i=Date.prototype,o="Invalid Date",a="toString",s=i[a],u=i.getTime;new Date(NaN)+""!=o&&r(i,a,(function(){var t=u.call(this);return t===t?s.call(this):o}))},1157:function(t,e,n){var r,i;
/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */(function(e,n){"use strict";"object"===typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)})("undefined"!==typeof window?window:this,(function(n,o){"use strict";var a=[],s=Object.getPrototypeOf,u=a.slice,c=a.flat?function(t){return a.flat.call(t)}:function(t){return a.concat.apply([],t)},l=a.push,f=a.indexOf,d={},h=d.toString,p=d.hasOwnProperty,g=p.toString,m=g.call(Object),v={},y=function(t){return"function"===typeof t&&"number"!==typeof t.nodeType},b=function(t){return null!=t&&t===t.window},x=n.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function O(t,e,n){n=n||x;var r,i,o=n.createElement("script");if(o.text=t,e)for(r in w)i=e[r]||e.getAttribute&&e.getAttribute(r),i&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function _(t){return null==t?t+"":"object"===typeof t||"function"===typeof t?d[h.call(t)]||"object":typeof t}var j="3.5.1",E=function(t,e){return new E.fn.init(t,e)};function k(t){var e=!!t&&"length"in t&&t.length,n=_(t);return!y(t)&&!b(t)&&("array"===n||0===e||"number"===typeof e&&e>0&&e-1 in t)}E.fn=E.prototype={jquery:j,constructor:E,length:0,toArray:function(){return u.call(this)},get:function(t){return null==t?u.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:a.sort,splice:a.splice},E.extend=E.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"===typeof a&&(c=a,a=arguments[s]||{},s++),"object"===typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(c&&r&&(E.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[e],o=i&&!Array.isArray(n)?[]:i||E.isPlainObject(n)?n:{},i=!1,a[e]=E.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},E.extend({expando:"jQuery"+(j+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==h.call(t))&&(e=s(t),!e||(n=p.call(e,"constructor")&&e.constructor,"function"===typeof n&&g.call(n)===m))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){O(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(k(t)){for(n=t.length;r<n;r++)if(!1===e.call(t[r],r,t[r]))break}else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(k(Object(t))?E.merge(n,"string"===typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:f.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,a=t.length,s=!n;o<a;o++)r=!e(t[o],o),r!==s&&i.push(t[o]);return i},map:function(t,e,n){var r,i,o=0,a=[];if(k(t))for(r=t.length;o<r;o++)i=e(t[o],o,n),null!=i&&a.push(i);else for(o in t)i=e(t[o],o,n),null!=i&&a.push(i);return c(a)},guid:1,support:v}),"function"===typeof Symbol&&(E.fn[Symbol.iterator]=a[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){d["[object "+e+"]"]=e.toLowerCase()}));var A=
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
function(t){var e,n,r,i,o,a,s,u,c,l,f,d,h,p,g,m,v,y,b,x="sizzle"+1*new Date,w=t.document,O=0,_=0,j=ut(),E=ut(),k=ut(),A=ut(),S=function(t,e){return t===e&&(f=!0),0},C={}.hasOwnProperty,D=[],M=D.pop,T=D.push,N=D.push,F=D.slice,$=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",L="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\["+R+"*("+L+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+R+"*\\]",B=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",I=new RegExp(R+"+","g"),U=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),q=new RegExp("^"+R+"*,"+R+"*"),H=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),W=new RegExp(R+"|>"),G=new RegExp(B),Y=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){d()},at=xt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{N.apply(D=F.call(w.childNodes),w.childNodes),D[w.childNodes.length].nodeType}catch(At){N={apply:D.length?function(t,e){T.apply(t,F.call(e))}:function(t,e){var n=t.length,r=0;while(t[n++]=e[r++]);t.length=n-1}}}function st(t,e,r,i){var o,s,c,l,f,p,v,y=e&&e.ownerDocument,w=e?e.nodeType:9;if(r=r||[],"string"!==typeof t||!t||1!==w&&9!==w&&11!==w)return r;if(!i&&(d(e),e=e||h,g)){if(11!==w&&(f=Z.exec(t)))if(o=f[1]){if(9===w){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&b(e,c)&&c.id===o)return r.push(c),r}else{if(f[2])return N.apply(r,e.getElementsByTagName(t)),r;if((o=f[3])&&n.getElementsByClassName&&e.getElementsByClassName)return N.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!A[t+" "]&&(!m||!m.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===w&&(W.test(t)||H.test(t))){y=tt.test(t)&&vt(e.parentNode)||e,y===e&&n.scope||((l=e.getAttribute("id"))?l=l.replace(rt,it):e.setAttribute("id",l=x)),p=a(t),s=p.length;while(s--)p[s]=(l?"#"+l:":scope")+" "+bt(p[s]);v=p.join(",")}try{return N.apply(r,y.querySelectorAll(v)),r}catch(O){A(t,!0)}finally{l===x&&e.removeAttribute("id")}}}return u(t.replace(U,"$1"),e,r,i)}function ut(){var t=[];function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}return e}function ct(t){return t[x]=!0,t}function lt(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(At){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ft(t,e){var n=t.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=e}function dt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ct((function(e){return e=+e,ct((function(n,r){var i,o=t([],n.length,e),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function vt(t){return t&&"undefined"!==typeof t.getElementsByTagName&&t}for(e in n=st.support={},o=st.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!X.test(e||n&&n.nodeName||"HTML")},d=st.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:w;return a!=h&&9===a.nodeType&&a.documentElement?(h=a,p=h.documentElement,g=!o(h),w!=h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ot,!1):i.attachEvent&&i.attachEvent("onunload",ot)),n.scope=lt((function(t){return p.appendChild(t).appendChild(h.createElement("div")),"undefined"!==typeof t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=lt((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=lt((function(t){return t.appendChild(h.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(h.getElementsByClassName),n.getById=lt((function(t){return p.appendChild(t).id=x,!h.getElementsByName||!h.getElementsByName(x).length})),n.getById?(r.filter["ID"]=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find["ID"]=function(t,e){if("undefined"!==typeof e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter["ID"]=function(t){var e=t.replace(et,nt);return function(t){var n="undefined"!==typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find["ID"]=function(t,e){if("undefined"!==typeof e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if(n=o.getAttributeNode("id"),n&&n.value===t)return[o];i=e.getElementsByName(t),r=0;while(o=i[r++])if(n=o.getAttributeNode("id"),n&&n.value===t)return[o]}return[]}}),r.find["TAG"]=n.getElementsByTagName?function(t,e){return"undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find["CLASS"]=n.getElementsByClassName&&function(t,e){if("undefined"!==typeof e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=K.test(h.querySelectorAll))&&(lt((function(t){var e;p.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+R+"*(?:value|"+P+")"),t.querySelectorAll("[id~="+x+"-]").length||m.push("~="),e=h.createElement("input"),e.setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),lt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=h.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+R+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=K.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",B)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=K.test(p.compareDocumentPosition),b=e||K.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)while(e=e.parentNode)if(e===t)return!0;return!1},S=e?function(t,e){if(t===e)return f=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&r||!n.sortDetached&&e.compareDocumentPosition(t)===r?t==h||t.ownerDocument==w&&b(w,t)?-1:e==h||e.ownerDocument==w&&b(w,e)?1:l?$(l,t)-$(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return f=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t==h?-1:e==h?1:i?-1:o?1:l?$(l,t)-$(l,e):0;if(i===o)return dt(t,e);n=t;while(n=n.parentNode)a.unshift(n);n=e;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?dt(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0},h):h},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(d(t),n.matchesSelector&&g&&!A[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(At){A(e,!0)}return st(e,h,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!=h&&d(t),b(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=h&&d(t);var i=r.attrHandle[e.toLowerCase()],o=i&&C.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.escape=function(t){return(t+"").replace(rt,it)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,r=[],i=0,o=0;if(f=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(S),f){while(e=t[o++])e===t[o]&&(i=r.push(o));while(i--)t.splice(r[i],1)}return l=null,t},i=st.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"===typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else while(e=t[r++])n+=i(e);return n},r=st.selectors={cacheLength:50,createPseudo:ct,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return V["CHILD"].test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=j[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&j(t,(function(t){return e.test("string"===typeof t.className&&t.className||"undefined"!==typeof t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=st.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(I," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,f,d,h,p,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(m){if(o){while(g){d=e;while(d=d[g])if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){d=m,f=d[x]||(d[x]={}),l=f[d.uniqueID]||(f[d.uniqueID]={}),c=l[t]||[],h=c[0]===O&&c[1],b=h&&c[2],d=h&&m.childNodes[h];while(d=++h&&d&&d[g]||(b=h=0)||p.pop())if(1===d.nodeType&&++b&&d===e){l[t]=[O,h,b];break}}else if(y&&(d=e,f=d[x]||(d[x]={}),l=f[d.uniqueID]||(f[d.uniqueID]={}),c=l[t]||[],h=c[0]===O&&c[1],b=h),!1===b)while(d=++h&&d&&d[g]||(b=h=0)||p.pop())if((s?d.nodeName.toLowerCase()===v:1===d.nodeType)&&++b&&(y&&(f=d[x]||(d[x]={}),l=f[d.uniqueID]||(f[d.uniqueID]={}),l[t]=[O,b]),d===e))break;return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return i[x]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,n){var r,o=i(t,e),a=o.length;while(a--)r=$(t,o[a]),t[r]=!(n[r]=o[a])})):function(t){return i(t,0,n)}):i}},pseudos:{not:ct((function(t){var e=[],n=[],r=s(t.replace(U,"$1"));return r[x]?ct((function(t,e,n,i){var o,a=r(t,null,i,[]),s=t.length;while(s--)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:ct((function(t){return function(e){return st(t,e).length>0}})),contains:ct((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||i(e)).indexOf(t)>-1}})),lang:ct((function(t){return Y.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos["empty"](t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:mt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},r.pseudos["nth"]=r.pseudos["eq"],{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function yt(){}function bt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function xt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=_++;return e.first?function(e,n,i){while(e=e[r])if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,u){var c,l,f,d=[O,s];if(u){while(e=e[r])if((1===e.nodeType||a)&&t(e,n,u))return!0}else while(e=e[r])if(1===e.nodeType||a)if(f=e[x]||(e[x]={}),l=f[e.uniqueID]||(f[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=l[o])&&c[0]===O&&c[1]===s)return d[2]=c[2];if(l[o]=d,d[2]=t(e,n,u))return!0}return!1}}function wt(t){return t.length>1?function(e,n,r){var i=t.length;while(i--)if(!t[i](e,n,r))return!1;return!0}:t[0]}function Ot(t,e,n){for(var r=0,i=e.length;r<i;r++)st(t,e[r],n);return n}function _t(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,c=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(s)));return a}function jt(t,e,n,r,i,o){return r&&!r[x]&&(r=jt(r)),i&&!i[x]&&(i=jt(i,o)),ct((function(o,a,s,u){var c,l,f,d=[],h=[],p=a.length,g=o||Ot(e||"*",s.nodeType?[s]:s,[]),m=!t||!o&&e?g:_t(g,d,t,s,u),v=n?i||(o?t:p||r)?[]:a:m;if(n&&n(m,v,s,u),r){c=_t(v,h),r(c,[],s,u),l=c.length;while(l--)(f=c[l])&&(v[h[l]]=!(m[h[l]]=f))}if(o){if(i||t){if(i){c=[],l=v.length;while(l--)(f=v[l])&&c.push(m[l]=f);i(null,v=[],c,u)}l=v.length;while(l--)(f=v[l])&&(c=i?$(o,f):d[l])>-1&&(o[c]=!(a[c]=f))}}else v=_t(v===a?v.splice(p,v.length):v),i?i(null,a,v,u):N.apply(a,v)}))}function Et(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],u=a?1:0,l=xt((function(t){return t===e}),s,!0),f=xt((function(t){return $(e,t)>-1}),s,!0),d=[function(t,n,r){var i=!a&&(r||n!==c)||((e=n).nodeType?l(t,n,r):f(t,n,r));return e=null,i}];u<o;u++)if(n=r.relative[t[u].type])d=[xt(wt(d),n)];else{if(n=r.filter[t[u].type].apply(null,t[u].matches),n[x]){for(i=++u;i<o;i++)if(r.relative[t[i].type])break;return jt(u>1&&wt(d),u>1&&bt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(U,"$1"),n,u<i&&Et(t.slice(u,i)),i<o&&Et(t=t.slice(i)),i<o&&bt(t))}d.push(n)}return wt(d)}function kt(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,u,l){var f,p,m,v=0,y="0",b=o&&[],x=[],w=c,_=o||i&&r.find["TAG"]("*",l),j=O+=null==w?1:Math.random()||.1,E=_.length;for(l&&(c=a==h||a||l);y!==E&&null!=(f=_[y]);y++){if(i&&f){p=0,a||f.ownerDocument==h||(d(f),s=!g);while(m=t[p++])if(m(f,a||h,s)){u.push(f);break}l&&(O=j)}n&&((f=!m&&f)&&v--,o&&b.push(f))}if(v+=y,n&&y!==v){p=0;while(m=e[p++])m(b,x,a,s);if(o){if(v>0)while(y--)b[y]||x[y]||(x[y]=M.call(u));x=_t(x)}N.apply(u,x),l&&!o&&x.length>0&&v+e.length>1&&st.uniqueSort(u)}return l&&(O=j,c=w),b};return n?ct(o):o}return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,a=st.tokenize=function(t,e){var n,i,o,a,s,u,c,l=E[t+" "];if(l)return e?0:l.slice(0);s=t,u=[],c=r.preFilter;while(s){for(a in n&&!(i=q.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=H.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(U," ")}),s=s.slice(n.length)),r.filter)!(i=V[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):E(t,u).slice(0)},s=st.compile=function(t,e){var n,r=[],i=[],o=k[t+" "];if(!o){e||(e=a(t)),n=e.length;while(n--)o=Et(e[n]),o[x]?r.push(o):i.push(o);o=k(t,kt(i,r)),o.selector=t}return o},u=st.select=function(t,e,n,i){var o,u,c,l,f,d="function"===typeof t&&t,h=!i&&a(t=d.selector||t);if(n=n||[],1===h.length){if(u=h[0]=h[0].slice(0),u.length>2&&"ID"===(c=u[0]).type&&9===e.nodeType&&g&&r.relative[u[1].type]){if(e=(r.find["ID"](c.matches[0].replace(et,nt),e)||[])[0],!e)return n;d&&(e=e.parentNode),t=t.slice(u.shift().value.length)}o=V["needsContext"].test(t)?0:u.length;while(o--){if(c=u[o],r.relative[l=c.type])break;if((f=r.find[l])&&(i=f(c.matches[0].replace(et,nt),tt.test(u[0].type)&&vt(e.parentNode)||e))){if(u.splice(o,1),t=i.length&&bt(u),!t)return N.apply(n,i),n;break}}}return(d||s(t,h))(i,e,!g,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=x.split("").sort(S).join("")===x,n.detectDuplicates=!!f,d(),n.sortDetached=lt((function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))})),lt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ft("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&lt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ft("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),lt((function(t){return null==t.getAttribute("disabled")}))||ft(P,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),st}(n);E.find=A,E.expr=A.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=A.uniqueSort,E.text=A.getText,E.isXMLDoc=A.isXML,E.contains=A.contains,E.escapeSelector=A.escape;var S=function(t,e,n){var r=[],i=void 0!==n;while((t=t[e])&&9!==t.nodeType)if(1===t.nodeType){if(i&&E(t).is(n))break;r.push(t)}return r},C=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},D=E.expr.match.needsContext;function M(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function N(t,e,n){return y(e)?E.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?E.grep(t,(function(t){return t===e!==n})):"string"!==typeof e?E.grep(t,(function(t){return f.call(e,t)>-1!==n})):E.filter(e,t,n)}E.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?E.find.matchesSelector(r,t)?[r]:[]:E.find.matches(t,E.grep(e,(function(t){return 1===t.nodeType})))},E.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!==typeof t)return this.pushStack(E(t).filter((function(){for(e=0;e<r;e++)if(E.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)E.find(t,i[e],n);return r>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(N(this,t||[],!1))},not:function(t){return this.pushStack(N(this,t||[],!0))},is:function(t){return!!N(this,"string"===typeof t&&D.test(t)?E(t):t||[],!1).length}});var F,$=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,P=E.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||F,"string"===typeof t){if(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:$.exec(t),!r||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:x,!0)),T.test(r[1])&&E.isPlainObject(e))for(r in e)y(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return i=x.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)};P.prototype=E.fn,F=E(x);var R=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function z(t,e){while((t=t[e])&&1!==t.nodeType);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!==typeof t&&E(t);if(!D.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(t){return t?"string"===typeof t?f.call(E(t),this[0]):f.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,n){return S(t,"parentNode",n)},next:function(t){return z(t,"nextSibling")},prev:function(t){return z(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,n){return S(t,"nextSibling",n)},prevUntil:function(t,e,n){return S(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(M(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},(function(t,e){E.fn[t]=function(n,r){var i=E.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=E.filter(r,i)),this.length>1&&(L[t]||E.uniqueSort(i),R.test(t)&&i.reverse()),this.pushStack(i)}}));var B=/[^\x20\t\r\n\f]+/g;function I(t){var e={};return E.each(t.match(B)||[],(function(t,n){e[n]=!0})),e}function U(t){return t}function q(t){throw t}function H(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"===typeof t?I(t):E.extend({},t);var e,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1)}t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){E.each(n,(function(n,r){y(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==_(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return E.each(arguments,(function(t,e){var n;while((n=E.inArray(e,o,n))>-1)o.splice(n,1),n<=s&&s--})),this},has:function(t){return t?E.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=n||[],n=[t,n.slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return E.Deferred((function(n){E.each(e,(function(e,r){var i=y(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,r,i){var o=0;function a(t,e,r,i){return function(){var s=this,u=arguments,c=function(){var n,c;if(!(t<o)){if(n=r.apply(s,u),n===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"===typeof n||"function"===typeof n)&&n.then,y(c)?i?c.call(n,a(o,e,U,i),a(o,e,q,i)):(o++,c.call(n,a(o,e,U,i),a(o,e,q,i),a(o,e,U,e.notifyWith))):(r!==U&&(s=void 0,u=[n]),(i||e.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(n){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(n,l.stackTrace),t+1>=o&&(r!==q&&(s=void 0,u=[n]),e.rejectWith(s,u))}};t?l():(E.Deferred.getStackHook&&(l.stackTrace=E.Deferred.getStackHook()),n.setTimeout(l))}}return E.Deferred((function(n){e[0][3].add(a(0,n,y(i)?i:U,n.notifyWith)),e[1][3].add(a(0,n,y(t)?t:U)),e[2][3].add(a(0,n,y(r)?r:q))})).promise()},promise:function(t){return null!=t?E.extend(t,i):i}},o={};return E.each(e,(function(t,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add((function(){r=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=u.call(arguments),o=E.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?u.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(H(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();while(n--)H(i[n],a(n),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&W.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){n.setTimeout((function(){throw t}))};var G=E.Deferred();function Y(){x.removeEventListener("DOMContentLoaded",Y),n.removeEventListener("load",Y),E.ready()}E.fn.ready=function(t){return G.then(t).catch((function(t){E.readyException(t)})),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||G.resolveWith(x,[E]))}}),E.ready.then=G.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?n.setTimeout(E.ready):(x.addEventListener("DOMContentLoaded",Y),n.addEventListener("load",Y));var V=function(t,e,n,r,i,o,a){var s=0,u=t.length,c=null==n;if("object"===_(n))for(s in i=!0,n)V(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(E(t),n)})),e))for(;s<u;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):u?e(t[0],n):o},X=/^-ms-/,J=/-([a-z])/g;function Q(t,e){return e.toUpperCase()}function K(t){return t.replace(X,"ms-").replace(J,Q)}var Z=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function tt(){this.expando=E.expando+tt.uid++}tt.uid=1,tt.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Z(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"===typeof e)i[K(e)]=n;else for(r in e)i[K(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"===typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){Array.isArray(e)?e=e.map(K):(e=K(e),e=e in r?[e]:e.match(B)||[]),n=e.length;while(n--)delete r[e[n]]}(void 0===e||E.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var et=new tt,nt=new tt,rt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,it=/[A-Z]/g;function ot(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:rt.test(t)?JSON.parse(t):t)}function at(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(it,"-$&").toLowerCase(),n=t.getAttribute(r),"string"===typeof n){try{n=ot(n)}catch(i){}nt.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return nt.hasData(t)||et.hasData(t)},data:function(t,e,n){return nt.access(t,e,n)},removeData:function(t,e){nt.remove(t,e)},_data:function(t,e,n){return et.access(t,e,n)},_removeData:function(t,e){et.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=nt.get(o),1===o.nodeType&&!et.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=K(r.slice(5)),at(o,r,i[r])));et.set(o,"hasDataAttrs",!0)}return i}return"object"===typeof t?this.each((function(){nt.set(this,t)})):V(this,(function(e){var n;if(o&&void 0===e)return n=nt.get(o,t),void 0!==n?n:(n=at(o,t),void 0!==n?n:void 0);this.each((function(){nt.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){nt.remove(this,t)}))}}),E.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=et.get(t,e),n&&(!r||Array.isArray(n)?r=et.access(t,e,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),r=n.length,i=n.shift(),o=E._queueHooks(t,e),a=function(){E.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return et.get(t,n)||et.access(t,n,{empty:E.Callbacks("once memory").add((function(){et.remove(t,[e+"queue",n])}))})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!==typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each((function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){E.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=E.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!==typeof t&&(e=t,t=void 0),t=t||"fx";while(a--)n=et.get(o[a],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var st=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ut=new RegExp("^(?:([+-])=|)("+st+")([a-z%]*)$","i"),ct=["Top","Right","Bottom","Left"],lt=x.documentElement,ft=function(t){return E.contains(t.ownerDocument,t)},dt={composed:!0};lt.getRootNode&&(ft=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(dt)===t.ownerDocument});var ht=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&ft(t)&&"none"===E.css(t,"display")};function pt(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return E.css(t,e,"")},u=s(),c=n&&n[3]||(E.cssNumber[e]?"":"px"),l=t.nodeType&&(E.cssNumber[e]||"px"!==c&&+u)&&ut.exec(E.css(t,e));if(l&&l[3]!==c){u/=2,c=c||l[3],l=+u||1;while(a--)E.style(t,e,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;l*=2,E.style(t,e,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var gt={};function mt(t){var e,n=t.ownerDocument,r=t.nodeName,i=gt[r];return i||(e=n.body.appendChild(n.createElement(r)),i=E.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),gt[r]=i,i)}function vt(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)r=t[o],r.style&&(n=r.style.display,e?("none"===n&&(i[o]=et.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ht(r)&&(i[o]=mt(r))):"none"!==n&&(i[o]="none",et.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}E.fn.extend({show:function(){return vt(this,!0)},hide:function(){return vt(this)},toggle:function(t){return"boolean"===typeof t?t?this.show():this.hide():this.each((function(){ht(this)?E(this).show():E(this).hide()}))}});var yt=/^(?:checkbox|radio)$/i,bt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,xt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var t=x.createDocumentFragment(),e=t.appendChild(x.createElement("div")),n=x.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",v.option=!!e.lastChild})();var wt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ot(t,e){var n;return n="undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!==typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&M(t,e)?E.merge([t],n):n}function _t(t,e){for(var n=0,r=t.length;n<r;n++)et.set(t[n],"globalEval",!e||et.get(e[n],"globalEval"))}wt.tbody=wt.tfoot=wt.colgroup=wt.caption=wt.thead,wt.th=wt.td,v.option||(wt.optgroup=wt.option=[1,"<select multiple='multiple'>","</select>"]);var jt=/<|&#?\w+;/;function Et(t,e,n,r,i){for(var o,a,s,u,c,l,f=e.createDocumentFragment(),d=[],h=0,p=t.length;h<p;h++)if(o=t[h],o||0===o)if("object"===_(o))E.merge(d,o.nodeType?[o]:o);else if(jt.test(o)){a=a||f.appendChild(e.createElement("div")),s=(bt.exec(o)||["",""])[1].toLowerCase(),u=wt[s]||wt._default,a.innerHTML=u[1]+E.htmlPrefilter(o)+u[2],l=u[0];while(l--)a=a.lastChild;E.merge(d,a.childNodes),a=f.firstChild,a.textContent=""}else d.push(e.createTextNode(o));f.textContent="",h=0;while(o=d[h++])if(r&&E.inArray(o,r)>-1)i&&i.push(o);else if(c=ft(o),a=Ot(f.appendChild(o),"script"),c&&_t(a),n){l=0;while(o=a[l++])xt.test(o.type||"")&&n.push(o)}return f}var kt=/^key/,At=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,St=/^([^.]*)(?:\.(.+)|)/;function Ct(){return!0}function Dt(){return!1}function Mt(t,e){return t===Tt()===("focus"===e)}function Tt(){try{return x.activeElement}catch(t){}}function Nt(t,e,n,r,i,o){var a,s;if("object"===typeof e){for(s in"string"!==typeof n&&(r=r||n,n=void 0),e)Nt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Dt;else if(!i)return t;return 1===o&&(a=i,i=function(t){return E().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=E.guid++)),t.each((function(){E.event.add(this,e,i,r,n)}))}function Ft(t,e,n){n?(et.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var r,i,o=et.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=u.call(arguments),et.set(this,e,o),r=n(this,e),this[e](),i=et.get(this,e),o!==i||r?et.set(this,e,!1):i={},o!==i)return t.stopImmediatePropagation(),t.preventDefault(),i.value}else o.length&&(et.set(this,e,{value:E.event.trigger(E.extend(o[0],E.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===et.get(t,e)&&E.event.add(t,e,Ct)}E.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,c,l,f,d,h,p,g,m=et.get(t);if(Z(t)){n.handler&&(o=n,n=o.handler,i=o.selector),i&&E.find.matchesSelector(lt,i),n.guid||(n.guid=E.guid++),(u=m.events)||(u=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(e){return"undefined"!==typeof E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(B)||[""],c=e.length;while(c--)s=St.exec(e[c])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h&&(f=E.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=E.event.special[h]||{},l=E.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=u[h])||(d=u[h]=[],d.delegateCount=0,f.setup&&!1!==f.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(h,a)),f.add&&(f.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,l):d.push(l),E.event.global[h]=!0)}},remove:function(t,e,n,r,i){var o,a,s,u,c,l,f,d,h,p,g,m=et.hasData(t)&&et.get(t);if(m&&(u=m.events)){e=(e||"").match(B)||[""],c=e.length;while(c--)if(s=St.exec(e[c])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){f=E.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,d=u[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;while(o--)l=d[o],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(d.splice(o,1),l.selector&&d.delegateCount--,f.remove&&f.remove.call(t,l));a&&!d.length&&(f.teardown&&!1!==f.teardown.call(t,p,m.handle)||E.removeEvent(t,h,m.handle),delete u[h])}else for(h in u)E.event.remove(t,h+e[c],n,r,!0);E.isEmptyObject(u)&&et.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=new Array(arguments.length),u=E.event.fix(t),c=(et.get(this,"events")||Object.create(null))[u.type]||[],l=E.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){a=E.event.handlers.call(this,u,c),e=0;while((i=a[e++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,r=((E.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,a,s=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)r=e[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?E(i,this).index(c)>-1:E.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<e.length&&s.push({elem:c,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return yt.test(e.type)&&e.click&&M(e,"input")&&Ft(e,"click",Ct),!1},trigger:function(t){var e=this||t;return yt.test(e.type)&&e.click&&M(e,"input")&&Ft(e,"click"),!0},_default:function(t){var e=t.target;return yt.test(e.type)&&e.click&&M(e,"input")&&et.get(e,"click")||M(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ct:Dt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Dt,isPropagationStopped:Dt,isImmediatePropagationStopped:Dt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ct,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ct,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ct,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&kt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&At.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(t,e){E.event.special[t]={setup:function(){return Ft(this,t,Mt),!1},trigger:function(){return Ft(this,t),!0},delegateType:e}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||E.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),E.fn.extend({on:function(t,e,n,r){return Nt(this,t,e,n,r)},one:function(t,e,n,r){return Nt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,E(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!==typeof e||(n=e,e=void 0),!1===n&&(n=Dt),this.each((function(){E.event.remove(this,t,n,e)}))}});var $t=/<script|<style|<link/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Lt(t,e){return M(t,"table")&&M(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function zt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Bt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function It(t,e){var n,r,i,o,a,s,u;if(1===e.nodeType){if(et.hasData(t)&&(o=et.get(t),u=o.events,u))for(i in et.remove(e,"handle events"),u)for(n=0,r=u[i].length;n<r;n++)E.event.add(e,i,u[i][n]);nt.hasData(t)&&(a=nt.access(t),s=E.extend({},a),nt.set(e,s))}}function Ut(t,e){var n=e.nodeName.toLowerCase();"input"===n&&yt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function qt(t,e,n,r){e=c(e);var i,o,a,s,u,l,f=0,d=t.length,h=d-1,p=e[0],g=y(p);if(g||d>1&&"string"===typeof p&&!v.checkClone&&Pt.test(p))return t.each((function(i){var o=t.eq(i);g&&(e[0]=p.call(this,i,o.html())),qt(o,e,n,r)}));if(d&&(i=Et(e,t[0].ownerDocument,!1,t,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=E.map(Ot(i,"script"),zt),s=a.length;f<d;f++)u=i,f!==h&&(u=E.clone(u,!0,!0),s&&E.merge(a,Ot(u,"script"))),n.call(t[f],u,f);if(s)for(l=a[a.length-1].ownerDocument,E.map(a,Bt),f=0;f<s;f++)u=a[f],xt.test(u.type||"")&&!et.access(u,"globalEval")&&E.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?E._evalUrl&&!u.noModule&&E._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):O(u.textContent.replace(Rt,""),u,l))}return t}function Ht(t,e,n){for(var r,i=e?E.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||E.cleanData(Ot(r)),r.parentNode&&(n&&ft(r)&&_t(Ot(r,"script")),r.parentNode.removeChild(r));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=ft(t);if(!v.noCloneChecked&&(1===t.nodeType||11===t.nodeType)&&!E.isXMLDoc(t))for(a=Ot(s),o=Ot(t),r=0,i=o.length;r<i;r++)Ut(o[r],a[r]);if(e)if(n)for(o=o||Ot(t),a=a||Ot(s),r=0,i=o.length;r<i;r++)It(o[r],a[r]);else It(t,s);return a=Ot(s,"script"),a.length>0&&_t(a,!u&&Ot(t,"script")),s},cleanData:function(t){for(var e,n,r,i=E.event.special,o=0;void 0!==(n=t[o]);o++)if(Z(n)){if(e=n[et.expando]){if(e.events)for(r in e.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,e.handle);n[et.expando]=void 0}n[nt.expando]&&(n[nt.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Ht(this,t,!0)},remove:function(t){return Ht(this,t)},text:function(t){return V(this,(function(t){return void 0===t?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return qt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Lt(this,t);e.appendChild(t)}}))},prepend:function(){return qt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Lt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return qt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return qt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(Ot(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return E.clone(this,t,e)}))},html:function(t){return V(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"===typeof t&&!$t.test(t)&&!wt[(bt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<r;n++)e=this[n]||{},1===e.nodeType&&(E.cleanData(Ot(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return qt(this,arguments,(function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(Ot(this)),n&&n.replaceChild(e,this))}),t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){E.fn[t]=function(t){for(var n,r=[],i=E(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),E(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}}));var Wt=new RegExp("^("+st+")(?!px)[a-z%]+$","i"),Gt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Yt=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Vt=new RegExp(ct.join("|"),"i");function Xt(t,e,n){var r,i,o,a,s=t.style;return n=n||Gt(t),n&&(a=n.getPropertyValue(e)||n[e],""!==a||ft(t)||(a=E.style(t,e)),!v.pixelBoxStyles()&&Wt.test(a)&&Vt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Jt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}(function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",lt.appendChild(c).appendChild(l);var t=n.getComputedStyle(l);r="1%"!==t.top,u=12===e(t.marginLeft),l.style.right="60%",a=36===e(t.right),i=36===e(t.width),l.style.position="absolute",o=12===e(l.offsetWidth/3),lt.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var r,i,o,a,s,u,c=x.createElement("div"),l=x.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,E.extend(v,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,r,i;return null==s&&(t=x.createElement("table"),e=x.createElement("tr"),r=x.createElement("div"),t.style.cssText="position:absolute;left:-11111px",e.style.height="1px",r.style.height="9px",lt.appendChild(t).appendChild(e).appendChild(r),i=n.getComputedStyle(e),s=parseInt(i.height)>3,lt.removeChild(t)),s}}))})();var Qt=["Webkit","Moz","ms"],Kt=x.createElement("div").style,Zt={};function te(t){var e=t[0].toUpperCase()+t.slice(1),n=Qt.length;while(n--)if(t=Qt[n]+e,t in Kt)return t}function ee(t){var e=E.cssProps[t]||Zt[t];return e||(t in Kt?t:Zt[t]=te(t)||t)}var ne=/^(none|table(?!-c[ea]).+)/,re=/^--/,ie={position:"absolute",visibility:"hidden",display:"block"},oe={letterSpacing:"0",fontWeight:"400"};function ae(t,e,n){var r=ut.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function se(t,e,n,r,i,o){var a="width"===e?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=E.css(t,n+ct[a],!0,i)),r?("content"===n&&(u-=E.css(t,"padding"+ct[a],!0,i)),"margin"!==n&&(u-=E.css(t,"border"+ct[a]+"Width",!0,i))):(u+=E.css(t,"padding"+ct[a],!0,i),"padding"!==n?u+=E.css(t,"border"+ct[a]+"Width",!0,i):s+=E.css(t,"border"+ct[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))||0),u}function ue(t,e,n){var r=Gt(t),i=!v.boxSizingReliable()||n,o=i&&"border-box"===E.css(t,"boxSizing",!1,r),a=o,s=Xt(t,e,r),u="offset"+e[0].toUpperCase()+e.slice(1);if(Wt.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&o||!v.reliableTrDimensions()&&M(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===E.css(t,"display",!1,r))&&t.getClientRects().length&&(o="border-box"===E.css(t,"boxSizing",!1,r),a=u in t,a&&(s=t[u])),s=parseFloat(s)||0,s+se(t,e,n||(o?"border":"content"),a,r,s)+"px"}function ce(t,e,n,r,i){return new ce.prototype.init(t,e,n,r,i)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Xt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=K(e),u=re.test(e),c=t.style;if(u||(e=ee(s)),a=E.cssHooks[e]||E.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:c[e];o=typeof n,"string"===o&&(i=ut.exec(n))&&i[1]&&(n=pt(t,e,i),o="number"),null!=n&&n===n&&("number"!==o||u||(n+=i&&i[3]||(E.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,a,s=K(e),u=re.test(e);return u||(e=ee(s)),a=E.cssHooks[e]||E.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Xt(t,e,r)),"normal"===i&&e in oe&&(i=oe[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),E.each(["height","width"],(function(t,e){E.cssHooks[e]={get:function(t,n,r){if(n)return!ne.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ue(t,e,r):Yt(t,ie,(function(){return ue(t,e,r)}))},set:function(t,n,r){var i,o=Gt(t),a=!v.scrollboxSize()&&"absolute"===o.position,s=a||r,u=s&&"border-box"===E.css(t,"boxSizing",!1,o),c=r?se(t,e,r,u,o):0;return u&&a&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-se(t,e,"border",!1,o)-.5)),c&&(i=ut.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),ae(t,n,c)}}})),E.cssHooks.marginLeft=Jt(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Xt(t,"marginLeft"))||t.getBoundingClientRect().left-Yt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(t,e){E.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"===typeof n?n.split(" "):[n];r<4;r++)i[t+ct[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(E.cssHooks[t+e].set=ae)})),E.fn.extend({css:function(t,e){return V(this,(function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Gt(t),i=e.length;a<i;a++)o[e[a]]=E.css(t,e[a],!1,r);return o}return void 0!==n?E.style(t,e,n):E.css(t,e)}),t,e,arguments.length>1)}}),E.Tween=ce,ce.prototype={constructor:ce,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var t=ce.propHooks[this.prop];return t&&t.get?t.get(this):ce.propHooks._default.get(this)},run:function(t){var e,n=ce.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ce.propHooks._default.set(this),this}},ce.prototype.init.prototype=ce.prototype,ce.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[ee(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},ce.propHooks.scrollTop=ce.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=ce.prototype.init,E.fx.step={};var le,fe,de=/^(?:toggle|show|hide)$/,he=/queueHooks$/;function pe(){fe&&(!1===x.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(pe):n.setTimeout(pe,E.fx.interval),E.fx.tick())}function ge(){return n.setTimeout((function(){le=void 0})),le=Date.now()}function me(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)n=ct[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ve(t,e,n){for(var r,i=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function ye(t,e,n){var r,i,o,a,s,u,c,l,f="width"in e||"height"in e,d=this,h={},p=t.style,g=t.nodeType&&ht(t),m=et.get(t,"fxshow");for(r in n.queue||(a=E._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always((function(){d.always((function(){a.unqueued--,E.queue(t,"fx").length||a.empty.fire()}))}))),e)if(i=e[r],de.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}h[r]=m&&m[r]||E.style(t,r)}if(u=!E.isEmptyObject(e),u||!E.isEmptyObject(h))for(r in f&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=m&&m.display,null==c&&(c=et.get(t,"display")),l=E.css(t,"display"),"none"===l&&(c?l=c:(vt([t],!0),c=t.style.display||c,l=E.css(t,"display"),vt([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===E.css(t,"float")&&(u||(d.done((function(){p.display=c})),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,h)u||(m?"hidden"in m&&(g=m.hidden):m=et.access(t,"fxshow",{display:c}),o&&(m.hidden=!g),g&&vt([t],!0),d.done((function(){for(r in g||vt([t]),et.remove(t,"fxshow"),h)E.style(t,r,h[r])}))),u=ve(g?m[r]:0,r,d),r in m||(m[r]=u.start,g&&(u.end=u.start,u.start=0))}function be(t,e){var n,r,i,o,a;for(n in t)if(r=K(n),i=e[r],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),a=E.cssHooks[r],a&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}function xe(t,e,n){var r,i,o=0,a=xe.prefilters.length,s=E.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=le||ge(),n=Math.max(0,c.startTime+c.duration-e),r=n/c.duration||0,o=1-r,a=0,u=c.tweens.length;a<u;a++)c.tweens[a].run(o);return s.notifyWith(t,[c,o,n]),o<1&&u?n:(u||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:le||ge(),duration:n.duration,tweens:[],createTween:function(e,n){var r=E.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),l=c.props;for(be(l,c.opts.specialEasing);o<a;o++)if(r=xe.prefilters[o].call(c,t,l,c.opts),r)return y(r.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return E.map(l,ve,c),y(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(xe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return pt(n.elem,t,ut.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(B);for(var n,r=0,i=t.length;r<i;r++)n=t[r],xe.tweeners[n]=xe.tweeners[n]||[],xe.tweeners[n].unshift(e)},prefilters:[ye],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),E.speed=function(t,e,n){var r=t&&"object"===typeof t?E.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return E.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in E.fx.speeds?r.duration=E.fx.speeds[r.duration]:r.duration=E.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(t,e,n,r){return this.filter(ht).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=E.isEmptyObject(t),o=E.speed(e,n,r),a=function(){var e=xe(this,E.extend({},t),o);(i||et.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!==typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=E.timers,a=et.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&he.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||E.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=et.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=E.timers,a=r?r.length:0;for(n.finish=!0,E.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(t,e){var n=E.fn[e];E.fn[e]=function(t,r,i){return null==t||"boolean"===typeof t?n.apply(this,arguments):this.animate(me(e,!0),t,r,i)}})),E.each({slideDown:me("show"),slideUp:me("hide"),slideToggle:me("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){E.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(le=Date.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),le=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){fe||(fe=!0,pe())},E.fx.stop=function(){fe=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,r){var i=n.setTimeout(e,t);r.stop=function(){n.clearTimeout(i)}}))},function(){var t=x.createElement("input"),e=x.createElement("select"),n=e.appendChild(x.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=n.selected,t=x.createElement("input"),t.value="t",t.type="radio",v.radioValue="t"===t.value}();var we,Oe=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return V(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){E.removeAttr(this,t)}))}}),E.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof t.getAttribute?E.prop(t,e,n):(1===o&&E.isXMLDoc(t)||(i=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?we:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=E.find.attr(t,e),null==r?void 0:r))},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&M(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(B);if(i&&1===t.nodeType)while(n=i[r++])t.removeAttribute(n)}}),we={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=Oe[e]||E.find.attr;Oe[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=Oe[a],Oe[a]=i,i=null!=n(t,e,r)?a:null,Oe[a]=o),i}}));var _e=/^(?:input|select|textarea|button)$/i,je=/^(?:a|area)$/i;function Ee(t){var e=t.match(B)||[];return e.join(" ")}function ke(t){return t.getAttribute&&t.getAttribute("class")||""}function Ae(t){return Array.isArray(t)?t:"string"===typeof t&&t.match(B)||[]}E.fn.extend({prop:function(t,e){return V(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[E.propFix[t]||t]}))}}),E.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(t)||(e=E.propFix[e]||e,i=E.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):_e.test(t.nodeName)||je.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(y(t))return this.each((function(e){E(this).addClass(t.call(this,e,ke(this)))}));if(e=Ae(t),e.length)while(n=this[u++])if(i=ke(n),r=1===n.nodeType&&" "+Ee(i)+" ",r){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=Ee(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(y(t))return this.each((function(e){E(this).removeClass(t.call(this,e,ke(this)))}));if(!arguments.length)return this.attr("class","");if(e=Ae(t),e.length)while(n=this[u++])if(i=ke(n),r=1===n.nodeType&&" "+Ee(i)+" ",r){a=0;while(o=e[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");s=Ee(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"===typeof e&&r?e?this.addClass(t):this.removeClass(t):y(t)?this.each((function(n){E(this).toggleClass(t.call(this,n,ke(this),e),e)})):this.each((function(){var e,i,o,a;if(r){i=0,o=E(this),a=Ae(t);while(e=a[i++])o.hasClass(e)?o.removeClass(e):o.addClass(e)}else void 0!==t&&"boolean"!==n||(e=ke(this),e&&et.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":et.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;e=" "+t+" ";while(n=this[r++])if(1===n.nodeType&&(" "+Ee(ke(n))+" ").indexOf(e)>-1)return!0;return!1}});var Se=/\r/g;E.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each((function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,E(this).val()):t,null==i?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=E.map(i,(function(t){return null==t?"":t+""}))),e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"===typeof n?n.replace(Se,""):null==n?"":n)):void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:Ee(E.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(n=i[r],(n.selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!M(n.parentNode,"optgroup"))){if(e=E(n).val(),a)return e;s.push(e)}return s},set:function(t,e){var n,r,i=t.options,o=E.makeArray(e),a=i.length;while(a--)r=i[a],(r.selected=E.inArray(E.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},v.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),v.focusin="onfocusin"in n;var Ce=/^(?:focusinfocus|focusoutblur)$/,De=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,r,i){var o,a,s,u,c,l,f,d,h=[r||x],g=p.call(t,"type")?t.type:t,m=p.call(t,"namespace")?t.namespace.split("."):[];if(a=d=s=r=r||x,3!==r.nodeType&&8!==r.nodeType&&!Ce.test(g+E.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),c=g.indexOf(":")<0&&"on"+g,t=t[E.expando]?t:new E.Event(g,"object"===typeof t&&t),t.isTrigger=i?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:E.makeArray(e,[t]),f=E.event.special[g]||{},i||!f.trigger||!1!==f.trigger.apply(r,e))){if(!i&&!f.noBubble&&!b(r)){for(u=f.delegateType||g,Ce.test(u+g)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||x)&&h.push(s.defaultView||s.parentWindow||n)}o=0;while((a=h[o++])&&!t.isPropagationStopped())d=a,t.type=o>1?u:f.bindType||g,l=(et.get(a,"events")||Object.create(null))[t.type]&&et.get(a,"handle"),l&&l.apply(a,e),l=c&&a[c],l&&l.apply&&Z(a)&&(t.result=l.apply(a,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(h.pop(),e)||!Z(r)||c&&y(r[g])&&!b(r)&&(s=r[c],s&&(r[c]=null),E.event.triggered=g,t.isPropagationStopped()&&d.addEventListener(g,De),r[g](),t.isPropagationStopped()&&d.removeEventListener(g,De),E.event.triggered=void 0,s&&(r[c]=s)),t.result}},simulate:function(t,e,n){var r=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(r,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each((function(){E.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}}),v.focusin||E.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){E.event.simulate(e,t.target,E.event.fix(t))};E.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=et.access(r,e);i||r.addEventListener(t,n,!0),et.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=et.access(r,e)-1;i?et.access(r,e,i):(r.removeEventListener(t,n,!0),et.remove(r,e))}}}));var Me=n.location,Te={guid:Date.now()},Ne=/\?/;E.parseXML=function(t){var e;if(!t||"string"!==typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(r){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+t),e};var Fe=/\[\]$/,$e=/\r?\n/g,Pe=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;function Le(t,e,n,r){var i;if(Array.isArray(e))E.each(e,(function(e,i){n||Fe.test(t)?r(t,i):Le(t+"["+("object"===typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==_(e))r(t,e);else for(i in e)Le(t+"["+i+"]",e[i],n,r)}E.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,(function(){i(this.name,this.value)}));else for(n in t)Le(n,t[n],e,i);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Re.test(this.nodeName)&&!Pe.test(t)&&(this.checked||!yt.test(t))})).map((function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(t){return{name:e.name,value:t.replace($e,"\r\n")}})):{name:e.name,value:n.replace($e,"\r\n")}})).get()}});var ze=/%20/g,Be=/#.*$/,Ie=/([?&])_=[^&]*/,Ue=/^(.*?):[ \t]*([^\r\n]*)$/gm,qe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,He=/^(?:GET|HEAD)$/,We=/^\/\//,Ge={},Ye={},Ve="*/".concat("*"),Xe=x.createElement("a");function Je(t){return function(e,n){"string"!==typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(B)||[];if(y(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Qe(t,e,n,r){var i={},o=t===Ye;function a(s){var u;return i[s]=!0,E.each(t[s]||[],(function(t,s){var c=s(e,n,r);return"string"!==typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),a(c),!1)})),u}return a(e.dataTypes[0])||!i["*"]&&a("*")}function Ke(t,e){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&E.extend(!0,t,r),t}function Ze(t,e,n){var r,i,o,a,s=t.contents,u=t.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function tn(t,e,n,r){var i,o,a,s,u,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];o=l.shift();while(o)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift(),o)if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]],a)){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}Xe.href=Me.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Me.href,type:"GET",isLocal:qe.test(Me.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ke(Ke(t,E.ajaxSettings),e):Ke(E.ajaxSettings,t)},ajaxPrefilter:Je(Ge),ajaxTransport:Je(Ye),ajax:function(t,e){"object"===typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,a,s,u,c,l,f,d,h=E.ajaxSetup({},e),p=h.context||h,g=h.context&&(p.nodeType||p.jquery)?E(p):E.event,m=E.Deferred(),v=E.Callbacks("once memory"),y=h.statusCode||{},b={},w={},O="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a){a={};while(e=Ue.exec(o))a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2])}e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)_.always(t[_.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||O;return r&&r.abort(e),j(0,e),this}};if(m.promise(_),h.url=((t||h.url||Me.href)+"").replace(We,Me.protocol+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(B)||[""],null==h.crossDomain){u=x.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=Xe.protocol+"//"+Xe.host!==u.protocol+"//"+u.host}catch(k){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!==typeof h.data&&(h.data=E.param(h.data,h.traditional)),Qe(Ge,h,e,_),c)return _;for(f in l=E.event&&h.global,l&&0===E.active++&&E.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!He.test(h.type),i=h.url.replace(Be,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(ze,"+")):(d=h.url.slice(i.length),h.data&&(h.processData||"string"===typeof h.data)&&(i+=(Ne.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Ie,"$1"),d=(Ne.test(i)?"&":"?")+"_="+Te.guid+++d),h.url=i+d),h.ifModified&&(E.lastModified[i]&&_.setRequestHeader("If-Modified-Since",E.lastModified[i]),E.etag[i]&&_.setRequestHeader("If-None-Match",E.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||e.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ve+"; q=0.01":""):h.accepts["*"]),h.headers)_.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(p,_,h)||c))return _.abort();if(O="abort",v.add(h.complete),_.done(h.success),_.fail(h.error),r=Qe(Ye,h,e,_),r){if(_.readyState=1,l&&g.trigger("ajaxSend",[_,h]),c)return _;h.async&&h.timeout>0&&(s=n.setTimeout((function(){_.abort("timeout")}),h.timeout));try{c=!1,r.send(b,j)}catch(k){if(c)throw k;j(-1,k)}}else j(-1,"No Transport");function j(t,e,a,u){var f,d,b,x,w,O=e;c||(c=!0,s&&n.clearTimeout(s),r=void 0,o=u||"",_.readyState=t>0?4:0,f=t>=200&&t<300||304===t,a&&(x=Ze(h,_,a)),!f&&E.inArray("script",h.dataTypes)>-1&&(h.converters["text script"]=function(){}),x=tn(h,x,_,f),f?(h.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(E.lastModified[i]=w),w=_.getResponseHeader("etag"),w&&(E.etag[i]=w)),204===t||"HEAD"===h.type?O="nocontent":304===t?O="notmodified":(O=x.state,d=x.data,b=x.error,f=!b)):(b=O,!t&&O||(O="error",t<0&&(t=0))),_.status=t,_.statusText=(e||O)+"",f?m.resolveWith(p,[d,O,_]):m.rejectWith(p,[_,O,b]),_.statusCode(y),y=void 0,l&&g.trigger(f?"ajaxSuccess":"ajaxError",[_,h,f?d:b]),v.fireWith(p,[_,O]),l&&(g.trigger("ajaxComplete",[_,h]),--E.active||E.event.trigger("ajaxStop")))}return _},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],(function(t,e){E[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:i,data:n,success:r},E.isPlainObject(t)&&t))}})),E.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),E._evalUrl=function(t,e,n){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,n)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){var t=this;while(t.firstElementChild)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){E(this).wrapInner(t.call(this,e))})):this.each((function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){E(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var en={0:200,1223:204},nn=E.ajaxSettings.xhr();v.cors=!!nn&&"withCredentials"in nn,v.ajax=nn=!!nn,E.ajaxTransport((function(t){var e,r;if(v.cors||nn&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!==typeof s.status?o(0,"error"):o(s.status,s.statusText):o(en[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),r=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){e&&r()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(u){if(e)throw u}},abort:function(){e&&e()}}})),E.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),E.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),x.head.appendChild(e[0])},abort:function(){n&&n()}}}));var rn=[],on=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=rn.pop()||E.expando+"_"+Te.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",(function(t,e,r){var i,o,a,s=!1!==t.jsonp&&(on.test(t.url)?"url":"string"===typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&on.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(on,"$1"+i):!1!==t.jsonp&&(t.url+=(Ne.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||E.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always((function(){void 0===o?E(n).removeProp(i):n[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,rn.push(i)),a&&y(o)&&o(a[0]),a=o=void 0})),"script"})),v.createHTMLDocument=function(){var t=x.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),E.parseHTML=function(t,e,n){return"string"!==typeof t?[]:("boolean"===typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?(e=x.implementation.createHTMLDocument(""),r=e.createElement("base"),r.href=x.location.href,e.head.appendChild(r)):e=x),i=T.exec(t),o=!n&&[],i?[e.createElement(i[1])]:(i=Et([t],e,o),o&&o.length&&E(o).remove(),E.merge([],i.childNodes)));var r,i,o},E.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=Ee(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"===typeof e&&(i="POST"),a.length>0&&E.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,a.html(r?E("<div>").append(E.parseHTML(t)).find(r):t)})).always(n&&function(t,e){a.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,(function(e){return t===e.elem})).length},E.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,c,l=E.css(t,"position"),f=E(t),d={};"static"===l&&(t.style.position="relative"),s=f.offset(),o=E.css(t,"top"),u=E.css(t,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),y(e)&&(e=e.call(t,n,E.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+i),"using"in e?e.using.call(t,d):("number"===typeof d.top&&(d.top+="px"),"number"===typeof d.left&&(d.left+="px"),f.css(d))}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){E.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===E.css(r,"position"))e=r.getBoundingClientRect();else{e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;while(t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position"))t=t.parentNode;t&&t!==r&&1===t.nodeType&&(i=E(t).offset(),i.top+=E.css(t,"borderTopWidth",!0),i.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-E.css(r,"marginTop",!0),left:e.left-i.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){var t=this.offsetParent;while(t&&"static"===E.css(t,"position"))t=t.offsetParent;return t||lt}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;E.fn[t]=function(r){return V(this,(function(t,r,i){var o;if(b(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),E.each(["top","left"],(function(t,e){E.cssHooks[e]=Jt(v.pixelPosition,(function(t,n){if(n)return n=Xt(t,e),Wt.test(n)?E(t).position()[e]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){E.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!==typeof i),s=n||(!0===i||!0===o?"margin":"border");return V(this,(function(e,n,i){var o;return b(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?E.css(e,n,s):E.style(e,n,i,s)}),e,a?i:void 0,a)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){E.fn[e]=function(t){return this.on(e,t)}})),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var an=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,r,i;if("string"===typeof e&&(n=t[e],e=t,t=n),y(t))return r=u.call(arguments,2),i=function(){return t.apply(e||this,r.concat(u.call(arguments)))},i.guid=t.guid=t.guid||E.guid++,i},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=M,E.isFunction=y,E.isWindow=b,E.camelCase=K,E.type=_,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(an,"")},r=[],i=function(){return E}.apply(e,r),void 0===i||(t.exports=i);var sn=n.jQuery,un=n.$;return E.noConflict=function(t){return n.$===E&&(n.$=un),t&&n.jQuery===E&&(n.jQuery=sn),E},"undefined"===typeof o&&(n.jQuery=n.$=E),E}))},"13af":function(t,e,n){const r=n("bbfd"),i=n("3fce"),o=(t,e,n)=>{let o=null,a=null,s=null;try{s=new i(e,n)}catch(u){return null}return t.forEach(t=>{s.test(t)&&(o&&-1!==a.compare(t)||(o=t,a=new r(o,n)))}),o};t.exports=o},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("17c2"),a=n("9112");for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(l){c.forEach=o}}},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=n("ae40"),a=i("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,n){var r=n("b622"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(u){}return n}},"1cc6":function(t,e,n){const r=n("bbfd"),i=(t,e,n)=>{const i=new r(t,n),o=new r(e,n);return i.compare(o)||i.compareBuild(o)};t.exports=i},"1cdc":function(t,e,n){var r=n("342f");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},"1d1c":function(t,e,n){var r=n("23e7"),i=n("83ab"),o=n("37e8");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:o})},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7");function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}},"1dde":function(t,e,n){var r=n("d039"),i=n("b622"),o=n("2d00"),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1fb5":function(t,e,n){"use strict";e.byteLength=l,e.toByteArray=d,e.fromByteArray=g;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function l(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function f(t,e,n){return 3*(e+n)/4-n}function d(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(f(t,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u}function h(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function p(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(h(r));return i.join("")}function g(t){for(var e,n=t.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(p(t,s,s+a>u?u:s+a));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},2266:function(t,e,n){var r=n("825a"),i=n("e95a"),o=n("50c4"),a=n("0366"),s=n("35a1"),u=n("2a62"),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,f,d,h,p,g,m,v=n&&n.that,y=!(!n||!n.AS_ENTRIES),b=!(!n||!n.IS_ITERATOR),x=!(!n||!n.INTERRUPTED),w=a(e,v,1+y+x),O=function(t){return l&&u(l),new c(!0,t)},_=function(t){return y?(r(t),x?w(t[0],t[1],O):w(t[0],t[1])):x?w(t,O):w(t)};if(b)l=t;else{if(f=s(t),"function"!=typeof f)throw TypeError("Target is not iterable");if(i(f)){for(d=0,h=o(t.length);h>d;d++)if(p=_(t[d]),p&&p instanceof c)return p;return new c(!1)}l=f.call(t)}g=l.next;while(!(m=g.call(l)).done){try{p=_(m.value)}catch(j){throw u(l),j}if("object"==typeof p&&p&&p instanceof c)return p}return new c(!1)}},"236d":function(t,e,n){"use strict";function r(t){var e=this;if(e instanceof r||(e=new r),e.tail=null,e.head=null,e.length=0,t&&"function"===typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)e.push(arguments[n]);return e}function i(t,e,n){var r=e===t.head?new s(n,null,e,t):new s(n,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function o(t,e){t.tail=new s(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function a(t,e){t.head=new s(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function s(t,e,n,r){if(!(this instanceof s))return new s(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}t.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},r.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},r.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},r.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},r.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)a(this,arguments[t]);return this.length},r.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},r.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},r.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},r.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},r.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},r.prototype.map=function(t,e){e=e||this;for(var n=new r,i=this.head;null!==i;)n.push(t.call(e,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(t,e){e=e||this;for(var n=new r,i=this.tail;null!==i;)n.push(t.call(e,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=t(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=t(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},r.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},r.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,o=this.head;null!==o&&i<t;i++)o=o.next;for(;null!==o&&i<e;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,o=this.tail;null!==o&&i>e;i--)o=o.prev;for(;null!==o&&i>t;i--,o=o.prev)n.push(o.value);return n},r.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,o=this.head;null!==o&&r<t;r++)o=o.next;var a=[];for(r=0;o&&r<e;r++)a.push(o.value),o=this.removeNode(o);null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(r=0;r<n.length;r++)o=i(this,o,n[r]);return a},r.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{n("2eb0")(r)}catch(u){}},"23cb":function(t,e,n){var r=n("a691"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),a=n("6eeb"),s=n("ce4e"),u=n("e893"),c=n("94ca");t.exports=function(t,e){var n,l,f,d,h,p,g=t.target,m=t.global,v=t.stat;if(l=m?r:v?r[g]||s(g,{}):(r[g]||{}).prototype,l)for(f in e){if(h=e[f],t.noTargetGet?(p=i(l,f),d=p&&p.value):d=l[f],n=c(m?f:g+(v?".":"#")+f,t.forced),!n&&void 0!==d){if(typeof h===typeof d)continue;u(h,d)}(t.sham||d&&d.sham)&&o(h,"sham",!0),a(l,f,h,t)}}},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},2626:function(t,e,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),a=n("83ab"),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},2877:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},"2a2e":function(t,e,n){const r=n("1cc6"),i=(t,e)=>t.sort((t,n)=>r(t,n,e));t.exports=i},"2a62":function(t,e,n){var r=n("825a");t.exports=function(t){var e=t["return"];if(void 0!==e)return r(e.call(t)).value}},"2a83":function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return Gb})),n.d(e,"compile",(function(){return qb})),n.d(e,"normalize",(function(){return Mf})),n.d(e,"deepEqual",(function(){return v})),n.d(e,"duplicate",(function(){return y})),n.d(e,"pick",(function(){return b})),n.d(e,"omit",(function(){return x})),n.d(e,"stringify",(function(){return w})),n.d(e,"hash",(function(){return O})),n.d(e,"isNullOrFalse",(function(){return _})),n.d(e,"contains",(function(){return j})),n.d(e,"some",(function(){return E})),n.d(e,"every",(function(){return k})),n.d(e,"mergeDeep",(function(){return A})),n.d(e,"unique",(function(){return C})),n.d(e,"isEqual",(function(){return D})),n.d(e,"setEqual",(function(){return M})),n.d(e,"hasIntersection",(function(){return T})),n.d(e,"prefixGenerator",(function(){return N})),n.d(e,"fieldIntersection",(function(){return F})),n.d(e,"isEmpty",(function(){return $})),n.d(e,"keys",(function(){return P})),n.d(e,"vals",(function(){return R})),n.d(e,"entries",(function(){return L})),n.d(e,"isBoolean",(function(){return z})),n.d(e,"varName",(function(){return B})),n.d(e,"logicalExpr",(function(){return I})),n.d(e,"deleteNestedProperty",(function(){return U})),n.d(e,"titleCase",(function(){return q})),n.d(e,"accessPathWithDatum",(function(){return H})),n.d(e,"flatAccessWithDatum",(function(){return W})),n.d(e,"replacePathInField",(function(){return Y})),n.d(e,"replaceAll",(function(){return V})),n.d(e,"removePathFromField",(function(){return X})),n.d(e,"accessPathDepth",(function(){return J})),n.d(e,"getFirstDefined",(function(){return Q})),n.d(e,"uniqueId",(function(){return Z})),n.d(e,"resetIdCounter",(function(){return tt})),n.d(e,"internalField",(function(){return et})),n.d(e,"isInternalField",(function(){return nt})),n.d(e,"normalizeAngle",(function(){return rt})),n.d(e,"isNumeric",(function(){return it}));var r={};n.r(r),n.d(r,"invalidSpec",(function(){return Kn})),n.d(r,"FIT_NON_SINGLE",(function(){return Zn})),n.d(r,"containerSizeNonSingle",(function(){return tr})),n.d(r,"containerSizeNotCompatibleWithAutosize",(function(){return er})),n.d(r,"droppingFit",(function(){return nr})),n.d(r,"unknownField",(function(){return rr})),n.d(r,"cannotProjectOnChannelWithoutField",(function(){return ir})),n.d(r,"cannotProjectAggregate",(function(){return or})),n.d(r,"nearestNotSupportForContinuous",(function(){return ar})),n.d(r,"selectionNotSupported",(function(){return sr})),n.d(r,"selectionNotFound",(function(){return ur})),n.d(r,"SCALE_BINDINGS_CONTINUOUS",(function(){return cr})),n.d(r,"LEGEND_BINDINGS_MUST_HAVE_PROJECTION",(function(){return lr})),n.d(r,"cannotLookupVariableParameter",(function(){return fr})),n.d(r,"noSameUnitLookup",(function(){return dr})),n.d(r,"NEEDS_SAME_SELECTION",(function(){return hr})),n.d(r,"INTERVAL_INITIALIZED_WITH_X_Y",(function(){return pr})),n.d(r,"noSuchRepeatedValue",(function(){return gr})),n.d(r,"columnsNotSupportByRowCol",(function(){return mr})),n.d(r,"CONCAT_CANNOT_SHARE_AXIS",(function(){return vr})),n.d(r,"unrecognizedParse",(function(){return yr})),n.d(r,"differentParse",(function(){return br})),n.d(r,"ADD_SAME_CHILD_TWICE",(function(){return xr})),n.d(r,"invalidTransformIgnored",(function(){return wr})),n.d(r,"NO_FIELDS_NEEDS_AS",(function(){return Or})),n.d(r,"customFormatTypeNotAllowed",(function(){return _r})),n.d(r,"projectionOverridden",(function(){return jr})),n.d(r,"REPLACE_ANGLE_WITH_THETA",(function(){return Er})),n.d(r,"primitiveChannelDef",(function(){return kr})),n.d(r,"invalidFieldType",(function(){return Ar})),n.d(r,"invalidFieldTypeForCountAggregate",(function(){return Sr})),n.d(r,"invalidAggregate",(function(){return Cr})),n.d(r,"missingFieldType",(function(){return Dr})),n.d(r,"droppingColor",(function(){return Mr})),n.d(r,"relativeBandSizeNotSupported",(function(){return Tr})),n.d(r,"emptyFieldDef",(function(){return Nr})),n.d(r,"LINE_WITH_VARYING_SIZE",(function(){return Fr})),n.d(r,"incompatibleChannel",(function(){return $r})),n.d(r,"invalidEncodingChannel",(function(){return Pr})),n.d(r,"channelShouldBeDiscrete",(function(){return Rr})),n.d(r,"channelShouldBeDiscreteOrDiscretizing",(function(){return Lr})),n.d(r,"facetChannelDropped",(function(){return zr})),n.d(r,"discreteChannelCannotEncode",(function(){return Br})),n.d(r,"rangeMarkAlignmentCannotBeExpression",(function(){return Ir})),n.d(r,"lineWithRange",(function(){return Ur})),n.d(r,"orientOverridden",(function(){return qr})),n.d(r,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return Hr})),n.d(r,"cannotUseScalePropertyWithNonColor",(function(){return Wr})),n.d(r,"cannotUseRelativeBandSizeWithNonBandScale",(function(){return Gr})),n.d(r,"unaggregateDomainHasNoEffectForRawField",(function(){return Yr})),n.d(r,"unaggregateDomainWithNonSharedDomainOp",(function(){return Vr})),n.d(r,"unaggregatedDomainWithLogScale",(function(){return Xr})),n.d(r,"cannotApplySizeToNonOrientedMark",(function(){return Jr})),n.d(r,"scaleTypeNotWorkWithChannel",(function(){return Qr})),n.d(r,"scaleTypeNotWorkWithFieldDef",(function(){return Kr})),n.d(r,"scalePropertyNotWorkWithScaleType",(function(){return Zr})),n.d(r,"scaleTypeNotWorkWithMark",(function(){return ti})),n.d(r,"stepDropped",(function(){return ei})),n.d(r,"mergeConflictingProperty",(function(){return ni})),n.d(r,"mergeConflictingDomainProperty",(function(){return ri})),n.d(r,"independentScaleMeansIndependentGuide",(function(){return ii})),n.d(r,"domainSortDropped",(function(){return oi})),n.d(r,"MORE_THAN_ONE_SORT",(function(){return ai})),n.d(r,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return si})),n.d(r,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return ui})),n.d(r,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return ci})),n.d(r,"INVALID_CHANNEL_FOR_AXIS",(function(){return li})),n.d(r,"cannotStackRangedMark",(function(){return fi})),n.d(r,"cannotStackNonLinearScale",(function(){return di})),n.d(r,"stackNonSummativeAggregate",(function(){return hi})),n.d(r,"invalidTimeUnit",(function(){return pi})),n.d(r,"droppedDay",(function(){return gi})),n.d(r,"errorBarCenterAndExtentAreNotNeeded",(function(){return mi})),n.d(r,"errorBarCenterIsUsedWithWrongExtent",(function(){return vi})),n.d(r,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return yi})),n.d(r,"errorBand1DNotSupport",(function(){return bi})),n.d(r,"channelRequiredForBinned",(function(){return xi})),n.d(r,"channelShouldNotBeUsedForBinned",(function(){return wi})),n.d(r,"domainRequiredForThresholdScale",(function(){return Oi}));var i=n("a87b"),o=n("fc17");Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,t.call(r,e-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var a=n("6715"),s=n.n(a),u=n("694b"),c=n.n(u),l=n("f71e"),f=n.n(l);function d(t){return!!t.or}function h(t){return!!t.and}function p(t){return!!t.not}function g(t,e){if(p(t))g(t.not,e);else if(h(t))for(const n of t.and)g(n,e);else if(d(t))for(const n of t.or)g(n,e);else e(t)}function m(t,e){return p(t)?{not:m(t.not,e)}:h(t)?{and:t.and.map(t=>m(t,e))}:d(t)?{or:t.or.map(t=>m(t,e))}:e(t)}const v=c.a,y=s.a;function b(t,e){const n={};for(const r of e)Object(o["w"])(t,r)&&(n[r]=t[r]);return n}function x(t,e){const n=Object.assign({},t);for(const r of e)delete n[r];return n}Set.prototype["toJSON"]=function(){return`Set(${[...this].map(t=>f()(t)).join(",")})`};const w=f.a;function O(t){if(Object(o["G"])(t))return t;const e=Object(o["J"])(t)?t:f()(t);if(e.length<250)return e;let n=0;for(let r=0;r<e.length;r++){const t=e.charCodeAt(r);n=(n<<5)-n+t,n&=n}return n}function _(t){return!1===t||null===t}function j(t,e){return t.includes(e)}function E(t,e){let n=0;for(const[r,i]of t.entries())if(e(i,r,n++))return!0;return!1}function k(t,e){let n=0;for(const[r,i]of t.entries())if(!e(i,r,n++))return!1;return!0}function A(t,...e){for(const n of e)S(t,null!==n&&void 0!==n?n:{});return t}function S(t,e){for(const n of P(e))Object(o["lb"])(t,n,e[n],!0)}function C(t,e){const n=[],r={};let i;for(const o of t)i=e(o),i in r||(r[i]=1,n.push(o));return n}function D(t,e){const n=P(t),r=P(e);if(n.length!==r.length)return!1;for(const i of n)if(t[i]!==e[i])return!1;return!0}function M(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function T(t,e){for(const n of t)if(e.has(n))return!0;return!1}function N(t){const e=new Set;for(const n of t){const t=Object(o["ab"])(n),r=t.map((t,e)=>0===e?t:`[${t}]`),i=r.map((t,e)=>r.slice(0,e+1).join(""));for(const n of i)e.add(n)}return e}function F(t,e){return void 0===t||void 0===e||T(N(t),N(e))}function $(t){return 0===P(t).length}const P=Object.keys,R=Object.values,L=Object.entries;function z(t){return!0===t||!1===t}function B(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function I(t,e){return p(t)?`!(${I(t.not,e)})`:h(t)?`(${t.and.map(t=>I(t,e)).join(") && (")})`:d(t)?`(${t.or.map(t=>I(t,e)).join(") || (")})`:e(t)}function U(t,e){if(0===e.length)return!0;const n=e.shift();return n in t&&U(t[n],e)&&delete t[n],$(t)}function q(t){return t.charAt(0).toUpperCase()+t.substr(1)}function H(t,e="datum"){const n=Object(o["ab"])(t),r=[];for(let i=1;i<=n.length;i++){const t=`[${n.slice(0,i).map(o["bb"]).join("][")}]`;r.push(`${e}${t}`)}return r.join(" && ")}function W(t,e="datum"){return`${e}[${Object(o["bb"])(Object(o["ab"])(t).join("."))}]`}function G(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Y(t){return""+Object(o["ab"])(t).map(G).join("\\.")}function V(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function X(t){return""+Object(o["ab"])(t).join(".")}function J(t){return t?Object(o["ab"])(t).length:0}function Q(...t){for(const e of t)if(void 0!==e)return e}let K=42;function Z(t){const e=++K;return t?String(t)+e:e}function tt(){K=42}function et(t){return nt(t)?t:"__"+t}function nt(t){return t.startsWith("__")}function rt(t){if(void 0!==t)return(t%360+360)%360}function it(t){return!!Object(o["G"])(t)||!isNaN(t)&&!isNaN(parseFloat(t))}var ot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const at="row",st="column",ut="facet",ct="x",lt="y",ft="x2",dt="y2",ht="radius",pt="radius2",gt="theta",mt="theta2",vt="latitude",yt="longitude",bt="latitude2",xt="longitude2",wt="color",Ot="fill",_t="stroke",jt="shape",Et="size",kt="angle",At="opacity",St="fillOpacity",Ct="strokeOpacity",Dt="strokeWidth",Mt="strokeDash",Tt="text",Nt="order",Ft="detail",$t="key",Pt="tooltip",Rt="href",Lt="url",zt="description",Bt={x:1,y:1,x2:1,y2:1},It={theta:1,theta2:1,radius:1,radius2:1};function Ut(t){return t in It}const qt={longitude:1,longitude2:1,latitude:1,latitude2:1};function Ht(t){switch(t){case vt:return"y";case bt:return"y2";case yt:return"x";case xt:return"x2"}}function Wt(t){return t in qt}const Gt=P(qt),Yt=Object.assign(Object.assign(Object.assign(Object.assign({},Bt),It),qt),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function Vt(t){return t===wt||t===Ot||t===_t}const Xt={row:1,column:1,facet:1},Jt=P(Xt),Qt=Object.assign(Object.assign({},Yt),Xt),Kt=P(Qt),{order:Zt,detail:te,tooltip:ee}=Qt,ne=ot(Qt,["order","detail","tooltip"]),{row:re,column:ie,facet:oe}=ne,ae=ot(ne,["row","column","facet"]);P(ne),P(ae);function se(t){return!!ae[t]}function ue(t){return!!Qt[t]}const ce=[ft,dt,bt,xt,mt,pt];function le(t){const e=fe(t);return e!==t}function fe(t){switch(t){case ft:return ct;case dt:return lt;case bt:return vt;case xt:return yt;case mt:return gt;case pt:return ht}return t}function de(t){if(Ut(t))switch(t){case gt:return"startAngle";case mt:return"endAngle";case ht:return"outerRadius";case pt:return"innerRadius"}return t}function he(t){switch(t){case ct:return ft;case lt:return dt;case vt:return bt;case yt:return xt;case gt:return mt;case ht:return pt}}function pe(t){switch(t){case ct:case ft:return"width";case lt:case dt:return"height"}}function ge(t){switch(t){case ct:return"xOffset";case lt:return"yOffset";case ft:return"x2Offset";case dt:return"y2Offset";case gt:return"thetaOffset";case ht:return"radiusOffset";case mt:return"theta2Offset";case pt:return"radius2Offset"}}P(Yt);const{x:me,y:ve,x2:ye,y2:be,latitude:xe,longitude:we,latitude2:Oe,longitude2:_e,theta:je,theta2:Ee,radius:ke,radius2:Ae}=Yt,Se=ot(Yt,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Ce=P(Se),De={x:1,y:1},Me=P(De);function Te(t){return t in De}const Ne={theta:1,radius:1},Fe=P(Ne);function $e(t){return"width"===t?ct:lt}const{text:Pe,tooltip:Re,href:Le,url:ze,description:Be,detail:Ie,key:Ue,order:qe}=Se,He=ot(Se,["text","tooltip","href","url","description","detail","key","order"]),We=P(He);function Ge(t){return!!Se[t]}function Ye(t){switch(t){case wt:case Ot:case _t:case Et:case jt:case At:case Dt:case Mt:return!0;case St:case Ct:case kt:return!1}}const Ve=Object.assign(Object.assign(Object.assign({},De),Ne),He),Xe=P(Ve);function Je(t){return!!Ve[t]}function Qe(t,e){return en(t)[e]}const Ke={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Ze}=Ke,tn=ot(Ke,["geoshape"]);function en(t){switch(t){case wt:case Ot:case _t:case zt:case Ft:case $t:case Pt:case Rt:case Nt:case At:case St:case Ct:case Dt:case ut:case at:case st:return Ke;case ct:case lt:case vt:case yt:return tn;case ft:case dt:case bt:case xt:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Et:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Mt:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case jt:return{point:"always",geoshape:"always"};case Tt:return{text:"always"};case kt:return{point:"always",square:"always",text:"always"};case Lt:return{image:"always"};case gt:return{text:"always",arc:"always"};case ht:return{text:"always",arc:"always"};case mt:case pt:return{arc:"always"}}}function nn(t){switch(t){case ct:case lt:case gt:case ht:case Et:case kt:case Dt:case At:case St:case Ct:case ft:case dt:case mt:case pt:return;case ut:case at:case st:case jt:case Mt:case Tt:case Pt:case Rt:case Lt:case zt:return"discrete";case wt:case Ot:case _t:return"flexible";case vt:case yt:case bt:case xt:case Ft:case $t:case Nt:return}}const rn={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},on={count:1,min:1,max:1};function an(t){return!!t&&!!t["argmin"]}function sn(t){return!!t&&!!t["argmax"]}P(rn);function un(t){return Object(o["J"])(t)&&!!rn[t]}const cn=["count","valid","missing","distinct"];function ln(t){return Object(o["J"])(t)&&j(cn,t)}function fn(t){return Object(o["J"])(t)&&j(["min","max"],t)}const dn=["count","sum","distinct","valid","missing"],hn=["mean","average","median","q1","q3","min","max"],pn=Object(o["fb"])(hn);function gn(t){return Object(o["C"])(t)&&(t=pu(t,void 0)),"bin"+P(t).map(e=>bn(t[e])?B(`_${e}_${L(t[e])}`):B(`_${e}_${t[e]}`)).join("")}function mn(t){return!0===t||yn(t)&&!t.binned}function vn(t){return"binned"===t||yn(t)&&!0===t.binned}function yn(t){return Object(o["H"])(t)}function bn(t){return null===t||void 0===t?void 0:t["param"]}function xn(t){switch(t){case at:case st:case Et:case wt:case Ot:case _t:case Dt:case At:case St:case Ct:case jt:return 6;case Mt:return 4;default:return 10}}function wn(t){return t&&!!t["expr"]}function On(t){const e=P(t||{}),n={};for(const r of e)n[r]=Rn(t[r]);return n}var _n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function jn(t){const{anchor:e,frame:n,offset:r,orient:i,color:o,subtitleColor:a,subtitleFont:s,subtitleFontSize:u,subtitleFontStyle:c,subtitleFontWeight:l,subtitleLineHeight:f,subtitlePadding:d}=t,h=_n(t,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),p=Object.assign(Object.assign({},h),o?{fill:o}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign({},e?{anchor:e}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a?{subtitleColor:a}:{}),s?{subtitleFont:s}:{}),u?{subtitleFontSize:u}:{}),c?{subtitleFontStyle:c}:{}),l?{subtitleFontWeight:l}:{}),f?{subtitleLineHeight:f}:{}),d?{subtitlePadding:d}:{}),v=b(p,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:p,subtitleMarkConfig:v,nonMark:g,subtitle:m}}function En(t){return Object(o["J"])(t)||Object(o["B"])(t)&&Object(o["J"])(t[0])}function kn(t){return t&&!!t["signal"]}function An(t){return!!t["step"]}function Sn(t){return!Object(o["B"])(t)&&("fields"in t&&!("data"in t))}function Cn(t){return!Object(o["B"])(t)&&("fields"in t&&"data"in t)}function Dn(t){return!Object(o["B"])(t)&&("field"in t&&"data"in t)}const Mn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Tn=P(Mn),Nn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Fn=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var $n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Pn(t){const e=Object(o["B"])(t.condition)?t.condition.map(Ln):Ln(t.condition);return Object.assign(Object.assign({},Rn(t)),{condition:e})}function Rn(t){if(wn(t)){const{expr:e}=t,n=$n(t,["expr"]);return Object.assign({signal:e},n)}return t}function Ln(t){if(wn(t)){const{expr:e}=t,n=$n(t,["expr"]);return Object.assign({signal:e},n)}return t}function zn(t){if(wn(t)){const{expr:e}=t,n=$n(t,["expr"]);return Object.assign({signal:e},n)}return kn(t)?t:void 0!==t?{value:t}:void 0}function Bn(t){return kn(t)?t.signal:Object(o["bb"])(t.value)}function In(t){return kn(t)?t.signal:null==t?null:Object(o["bb"])(t)}function Un(t,e,n){for(const r of n){const n=Wn(r,e.markDef,e.config);void 0!==n&&(t[r]=zn(n))}return t}function qn(t){var e;return[].concat(t.type,null!==(e=t.style)&&void 0!==e?e:[])}function Hn(t,e,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&void 0!==e[i]?e[i]:void 0!==e[t]?e[t]:!o||i&&i!==t?Wn(t,e,n,r):void 0}function Wn(t,e,n,{vgChannel:r}={}){return Q(r?Gn(t,e,n.style):void 0,Gn(t,e,n.style),r?n[e.type][r]:void 0,n[e.type][t],r?n.mark[r]:n.mark[t])}function Gn(t,e,n){return Yn(t,qn(e),n)}function Yn(t,e,n){let r;e=Object(o["i"])(e);for(const i of e){const e=n[i];e&&void 0!==e[t]&&(r=e[t])}return r}function Vn(t,e){return Object(o["i"])(t).reduce((t,n)=>{var r;return t.field.push(Ys(n,e)),t.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),t},{field:[],order:[]})}function Xn(t,e){const n=[...t];return e.forEach(t=>{for(const e of n)if(v(e,t))return;n.push(t)}),n}function Jn(t,e){return v(t,e)||!e?t:t?[...Object(o["i"])(t),...Object(o["i"])(e)].join(", "):e}function Qn(t,e){const n=t.value,r=e.value;if(null==n||null===r)return{explicit:t.explicit,value:null};if((En(n)||kn(n))&&(En(r)||kn(r)))return{explicit:t.explicit,value:Jn(n,r)};if(En(n)||kn(n))return{explicit:t.explicit,value:n};if(En(r)||kn(r))return{explicit:t.explicit,value:r};if(!En(n)&&!kn(n)&&!En(r)&&!kn(r))return{explicit:t.explicit,value:Xn(n,r)};throw new Error("It should never reach here")}function Kn(t){return`Invalid specification ${w(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Zn='Autosize "fit" only works for single views and layered views.';function tr(t){const e="width"==t?"Width":"Height";return e+' "container" only works for single views and layered views.'}function er(t){const e="width"==t?"Width":"Height",n="width"==t?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${n}".`}function nr(t){return t?`Dropping "fit-${t}" because spec has discrete ${pe(t)}.`:'Dropping "fit" because spec has discrete size.'}function rr(t){return`Unknown field for ${t}. Cannot calculate view size.`}function ir(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function or(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function ar(t){return`The "nearest" transform is not supported for ${t} marks.`}function sr(t){return`Selection not supported for ${t} yet.`}function ur(t){return`Cannot find a selection named "${t}".`}const cr="Scale bindings are currently only supported for scales with unbinned, continuous domains.",lr="Legend bindings are only supported for selections over an individual field or encoding channel.";function fr(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function dr(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}const hr="The same selection must be used to override scale domains in a layered view.",pr='Interval selections should be initialized using "x" and/or "y" keys.';function gr(t){return`Unknown repeated value "${t}".`}function mr(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const vr="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function yr(t){return`Unrecognized parse "${t}".`}function br(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}const xr="Attempt to add the same child twice.";function wr(t){return`Ignoring an invalid transform: ${w(t)}.`}const Or='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function _r(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function jr(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${w(e)} is overridden by a child projection ${w(n)}.`}const Er="Arc marks uses theta channel rather than angle, replacing angle with theta.";function kr(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${w(n)}}.`}function Ar(t){return`Invalid field type "${t}".`}function Sr(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function Cr(t){return`Invalid aggregation operator "${t}".`}function Dr(t,e){return`Missing type for channel "${t}", using "${e}" instead.`}function Mr(t,e){const{fill:n,stroke:r}=e;return`Dropping color ${t} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Tr(t){return`Position range does not support relative band size for ${t}.`}function Nr(t,e){return`Dropping ${w(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}const Fr="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function $r(t,e,n){return`${t} dropped as it is incompatible with "${e}"${n?" when "+n:""}.`}function Pr(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function Rr(t){return t+" encoding should be discrete (ordinal / nominal / binned)."}function Lr(t){return t+" encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold)."}function zr(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function Br(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${"ordinal"===e?"order":"magnitude"}.`}function Ir(t){return`The ${t} for range marks cannot be an expression`}function Ur(t,e){const n=t&&e?"x2 and y2":t?"x2":"y2";return`Line mark is for continuous lines and thus cannot be used with ${n}. We will use the rule mark (line segments) instead.`}function qr(t,e){return`Specified orient "${t}" overridden with "${e}".`}const Hr="Custom domain scale cannot be unioned with default field-based domain.";function Wr(t){return`Cannot use the scale property "${t}" with non-color channel.`}function Gr(t){return`Cannot use the relative band size with ${t} scale.`}function Yr(t){return`Using unaggregated domain with raw field has no effect (${w(t)}).`}function Vr(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function Xr(t){return`Unaggregated domain is currently unsupported for log scale (${w(t)}).`}function Jr(t){return`Cannot apply size to non-oriented mark "${t}".`}function Qr(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}function Kr(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function Zr(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function ti(t,e){return`Scale type "${e}" does not work with mark "${t}".`}function ei(t){return`The step for "${t}" is dropped because the ${"width"===t?"x":"y"} is continuous.`}function ni(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${w(n)} and ${w(r)}). Using ${w(n)}.`}function ri(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${w(n)} and ${w(r)}). Using the union of the two domains.`}function ii(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function oi(t){return`Dropping sort property ${w(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const ai="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",si="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",ui="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",ci="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",li="Invalid channel for axis.";function fi(t){return`Cannot stack "${t}" if there is already "${t}2".`}function di(t){return`Cannot stack non-linear scale (${t}).`}function hi(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function pi(t,e){return`Invalid ${t}: ${w(e)}.`}function gi(t){return`Dropping day from datetime ${w(t)} as day cannot be combined with other units.`}function mi(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function vi(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}function yi(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function bi(t){return`1D error band does not support ${t}.`}function xi(t){return`Channel ${t} is required for "binned" bin.`}function wi(t){return`Channel ${t} should not be used with "binned" bin.`}function Oi(t){return`Domain for ${t} is required for threshold scale.`}const _i=Object(o["M"])(o["e"]);let ji=_i;function Ei(t){return ji=t,ji}function ki(){return ji=_i,ji}function Ai(...t){ji.warn(...t)}function Si(...t){ji.debug(...t)}function Ci(t){if(t&&Object(o["H"])(t))for(const e of qi)if(e in t)return!0;return!1}new WeakMap;const Di=["january","february","march","april","may","june","july","august","september","october","november","december"],Mi=Di.map(t=>t.substr(0,3)),Ti=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Ni=Ti.map(t=>t.substr(0,3));function Fi(t){if(it(t)&&(t=+t),Object(o["G"])(t))return t>4&&Ai(r.invalidTimeUnit("quarter",t)),t-1;throw new Error(r.invalidTimeUnit("quarter",t))}function $i(t){if(it(t)&&(t=+t),Object(o["G"])(t))return t-1;{const e=t.toLowerCase(),n=Di.indexOf(e);if(-1!==n)return n;const i=e.substr(0,3),o=Mi.indexOf(i);if(-1!==o)return o;throw new Error(r.invalidTimeUnit("month",t))}}function Pi(t){if(it(t)&&(t=+t),Object(o["G"])(t))return t%7;{const e=t.toLowerCase(),n=Ti.indexOf(e);if(-1!==n)return n;const i=e.substr(0,3),o=Ni.indexOf(i);if(-1!==o)return o;throw new Error(r.invalidTimeUnit("day",t))}}function Ri(t,e){const n=[];if(e&&void 0!==t.day&&P(t).length>1&&(Ai(r.droppedDay(t)),t=y(t),delete t.day),void 0!==t.year?n.push(t.year):n.push(2012),void 0!==t.month){const r=e?$i(t.month):t.month;n.push(r)}else if(void 0!==t.quarter){const r=e?Fi(t.quarter):t.quarter;n.push(Object(o["G"])(r)?3*r:r+"*3")}else n.push(0);if(void 0!==t.date)n.push(t.date);else if(void 0!==t.day){const r=e?Pi(t.day):t.day;n.push(Object(o["G"])(r)?r+1:r+"+1")}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const e=t[r];n.push("undefined"===typeof e?0:e)}return n}function Li(t){const e=Ri(t,!0),n=e.join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function zi(t){const e=Ri(t,!1),n=e.join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function Bi(t){const e=Ri(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}var Ii=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Ui={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},qi=P(Ui);function Hi(t){return!!Ui[t]}function Wi(t){return t.startsWith("utc")}function Gi(t){return t.substr(3)}const Yi={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Vi(t){return qi.filter(e=>Xi(t,e))}function Xi(t,e){const n=t.indexOf(e);return!(n<0)&&(!(n>0&&"seconds"===e&&"i"===t.charAt(n-1))&&(!(t.length>n+3&&"day"===e&&"o"===t.charAt(n+3))&&!(n>0&&"year"===e&&"f"===t.charAt(n-1))))}function Ji(t,e,{end:n}={end:!1}){const r=H(e),i=Wi(t)?"utc":"";function o(t){return"quarter"===t?`(${i}quarter(${r})-1)`:`${i}${t}(${r})`}let a;const s={};for(const u of qi)Xi(t,u)&&(s[u]=o(u),a=u);return n&&(s[a]+="+1"),zi(s)}function Qi(t){if(!t)return;const e=Vi(t);return`timeUnitSpecifier(${w(e)}, ${w(Yi)})`}function Ki(t,e,n){if(!t)return;const r=Qi(t),i=n||Wi(t);return`${i?"utc":"time"}Format(${e}, ${r})`}function Zi(t){if(!t)return;let e;return Object(o["J"])(t)?e={unit:t}:Object(o["H"])(t)&&(e=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),Wi(e.unit)&&(e.utc=!0,e.unit=Gi(e.unit)),e}function to(t){const e=Zi(t),{utc:n}=e,r=Ii(e,["utc"]);return r.unit?(n?"utc":"")+P(r).map(t=>B(`${"unit"===t?"":`_${t}_`}${r[t]}`)).join(""):(n?"utc":"")+"timeunit"+P(r).map(t=>B(`_${t}_${r[t]}`)).join("")}function eo(t){return null===t||void 0===t?void 0:t["param"]}function no(t){return t&&!!t.field&&void 0!==t.equal}function ro(t){return t&&!!t.field&&void 0!==t.lt}function io(t){return t&&!!t.field&&void 0!==t.lte}function oo(t){return t&&!!t.field&&void 0!==t.gt}function ao(t){return t&&!!t.field&&void 0!==t.gte}function so(t){if(t&&t.field){if(Object(o["B"])(t.range)&&2===t.range.length)return!0;if(kn(t.range))return!0}return!1}function uo(t){return t&&!!t.field&&(Object(o["B"])(t.oneOf)||Object(o["B"])(t.in))}function co(t){return t&&!!t.field&&void 0!==t.valid}function lo(t){return uo(t)||no(t)||so(t)||ro(t)||oo(t)||io(t)||ao(t)}function fo(t,e){return bu(t,{timeUnit:e,wrapTime:!0})}function ho(t,e){return t.map(t=>fo(t,e))}function po(t,e=!0){var n;const{field:r}=t,i=null===(n=Zi(t.timeUnit))||void 0===n?void 0:n.unit,o=i?`time(${Ji(i,r)})`:Ys(t,{expr:"datum"});if(no(t))return`${o}===${fo(t.equal,i)}`;if(ro(t)){const e=t.lt;return`${o}<${fo(e,i)}`}if(oo(t)){const e=t.gt;return`${o}>${fo(e,i)}`}if(io(t)){const e=t.lte;return`${o}<=${fo(e,i)}`}if(ao(t)){const e=t.gte;return`${o}>=${fo(e,i)}`}if(uo(t))return`indexof([${ho(t.oneOf,i).join(",")}], ${o}) !== -1`;if(co(t))return go(o,t.valid);if(so(t)){const{range:n}=t,r=kn(n)?{signal:n.signal+"[0]"}:n[0],a=kn(n)?{signal:n.signal+"[1]"}:n[1];if(null!==r&&null!==a&&e)return"inrange("+o+", ["+fo(r,i)+", "+fo(a,i)+"])";const s=[];return null!==r&&s.push(`${o} >= ${fo(r,i)}`),null!==a&&s.push(`${o} <= ${fo(a,i)}`),s.length>0?s.join(" && "):"true"}throw new Error("Invalid field predicate: "+w(t))}function go(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function mo(t){var e;return lo(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:null===(e=Zi(t.timeUnit))||void 0===e?void 0:e.unit}):t}const vo={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};const yo=vo.quantitative,bo=vo.ordinal,xo=vo.temporal,wo=vo.nominal,Oo=vo.geojson;P(vo);function _o(t){if(t)switch(t=t.toLowerCase(),t){case"q":case yo:return"quantitative";case"t":case xo:return"temporal";case"o":case bo:return"ordinal";case"n":case wo:return"nominal";case Oo:return"geojson"}}var jo=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Eo={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},ko={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};P(ko);function Ao(t,e){const n=ko[t],r=ko[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const So={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Co(t){return So[t]}const Do=["linear","log","pow","sqrt","symlog","time","utc"],Mo=Object(o["fb"])(Do),To=["linear","log","pow","sqrt","symlog"],No=Object(o["fb"])(To);function Fo(t){return t in No}const $o=["quantile","quantize","threshold"],Po=Object(o["fb"])($o),Ro=Do.concat(["quantile","quantize","threshold","sequential","identity"]),Lo=Object(o["fb"])(Ro),zo=["ordinal","bin-ordinal","point","band"],Bo=Object(o["fb"])(zo);function Io(t){return t in Bo}function Uo(t){return t in Lo}function qo(t){return t in Mo}function Ho(t){return t in Po}const Wo={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function Go(t){return!Object(o["J"])(t)&&!!t["name"]}function Yo(t){return null===t||void 0===t?void 0:t["param"]}function Vo(t){return t&&t["unionWith"]}const Xo={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Jo,domain:Qo,range:Ko,rangeMax:Zo,rangeMin:ta,scheme:ea}=(P(Xo),Xo),na=jo(Xo,["type","domain","range","rangeMax","rangeMin","scheme"]),ra=P(na);function ia(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return qo(t)||"band"===t||"point"===t;case"padding":case"rangeMin":case"rangeMax":return qo(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return"band"===t;case"domainMax":case"domainMid":case"domainMin":case"clamp":return qo(t);case"nice":return qo(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return Uo(t)&&!j(["log","time","utc","threshold","quantile"],t)}}function oa(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return Vt(t)?void 0:r.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function aa(t,e){return j([bo,wo],e)?void 0===t||Io(t):e===xo?j([Eo.TIME,Eo.UTC,void 0],t):e!==yo||j([Eo.LOG,Eo.POW,Eo.SQRT,Eo.SYMLOG,Eo.QUANTILE,Eo.QUANTIZE,Eo.THRESHOLD,Eo.LINEAR,void 0],t)}function sa(t,e){if(!Je(t))return!1;switch(t){case ct:case lt:case gt:case ht:return qo(e)||j(["band","point"],e);case Et:case Dt:case At:case St:case Ct:case kt:return qo(e)||Ho(e)||j(["band","point","ordinal"],e);case wt:case Ot:case _t:return"band"!==e;case Mt:case jt:return"ordinal"===e||Ho(e)}}const ua={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},ca=ua.arc,la=ua.area,fa=ua.bar,da=ua.image,ha=ua.line,pa=ua.point,ga=ua.rect,ma=ua.rule,va=ua.text,ya=ua.tick,ba=ua.trail,xa=ua.circle,wa=ua.square,Oa=ua.geoshape;function _a(t){return["line","area","trail"].includes(t)}function ja(t){return["rect","bar","image","arc"].includes(t)}const Ea=P(ua);function ka(t){return t["type"]}Object(o["fb"])(Ea);const Aa=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Sa=["fill","fillOpacity"],Ca=[...Aa,...Sa],Da={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Ma=P(Da),Ta={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},Na={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},Fa={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},$a=P(Fa);function Pa(t){return t&&void 0!=t["band"]}const Ra={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},La=5,za={binSpacing:1,continuousBandSize:La,timeUnitBandPosition:.5},Ba={binSpacing:0,continuousBandSize:La,timeUnitBandPosition:.5},Ia={thickness:1};function Ua(t){return ka(t)?t.type:t}function qa(t){const{channel:e,channelDef:n,markDef:r,scale:i,config:o}=t,a=Ja(t);return Ns(n)&&!ln(n.aggregate)&&i&&qo(i.get("type"))&&!1===i.get("zero")?Ha({fieldDef:n,channel:e,markDef:r,ref:a,config:o}):a}function Ha({fieldDef:t,channel:e,markDef:n,ref:r,config:i}){if(_a(n.type))return r;const o=Hn("invalid",n,i);return null===o?r:[Wa(t,e),r]}function Wa(t,e){const n=Ga(t,!0),r=fe(e),i="y"===r?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function Ga(t,e=!0){return go(Object(o["J"])(t)?t:Ys(t,{expr:"datum"}),!e)}function Ya(t){const{datum:e}=t;return Ci(e)?Li(e):""+w(e)}function Va(t,e,n,r){const i={};if(e&&(i.scale=e),$s(t)){const{datum:e}=t;Ci(e)?i.signal=Li(e):kn(e)?i.signal=e.signal:wn(e)?i.signal=e.expr:i.value=e}else i.field=Ys(t,n);if(r){const{offset:t,band:e}=r;t&&(i.offset=t),e&&(i.band=e)}return i}function Xa({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const a=0<o&&o<1?"datum":void 0,s=Ys(e,{expr:a,suffix:i}),u=void 0!==n?Ys(n,{expr:a}):Ys(e,{suffix:"end",expr:a}),c={};if(0===o||1===o){c.scale=t;const e=0===o?s:u;c.field=e}else{const e=kn(o)?`${o.signal} * ${s} + (1-${o.signal}) * ${u}`:`${o} * ${s} + ${1-o} * ${u}`;c.signal=`scale("${t}", ${e})`}return r&&(c.offset=r),c}function Ja({channel:t,channelDef:e,channel2Def:n,markDef:i,config:a,scaleName:s,scale:u,stack:c,offset:l,defaultRef:f,bandPosition:d}){var h;if(e){if(Ls(e)){if(zs(e)){null!==d&&void 0!==d||(d=ks({fieldDef:e,fieldDef2:n,markDef:i,config:a}));const{bin:o,timeUnit:u,type:f}=e;if(mn(o)||d&&u&&f===xo)return c&&c.impute?Va(e,s,{binSuffix:"mid"},{offset:l}):d?Xa({scaleName:s,fieldOrDatumDef:e,bandPosition:d,offset:l}):Va(e,s,wu(e,t)?{binSuffix:"range"}:{},{offset:l});if(vn(o)){if(Ns(n))return Xa({scaleName:s,fieldOrDatumDef:e,fieldOrDatumDef2:n,bandPosition:d,offset:l});{const e=t===ct?ft:dt;Ai(r.channelRequiredForBinned(e))}}}const o=null===u||void 0===u?void 0:u.get("type");return Va(e,s,Io(o)?{binSuffix:"range"}:{},{offset:l,band:"band"===o?null!==(h=null!==d&&void 0!==d?d:e.bandPosition)&&void 0!==h?h:.5:void 0})}if(Bs(e)){const n=e.value,r=l?{offset:l}:{};return Object.assign(Object.assign({},Qa(t,n)),r)}}return Object(o["E"])(f)&&(f=f()),f?Object.assign(Object.assign({},f),l?{offset:l}:{}):f}function Qa(t,e){return j(["x","x2"],t)&&"width"===e?{field:{group:"width"}}:j(["y","y2"],t)&&"height"===e?{field:{group:"height"}}:zn(e)}function Ka(t){return t&&"number"!==t&&"time"!==t}function Za(t,e,n){return`${t}(${e}${n?", "+w(n):""})`}const ts=" â ";function es({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:o}){var a,s;if(Ka(n))return rs({fieldOrDatumDef:t,format:e,formatType:n,expr:r,config:o});const u=ns(t,r,i);if(vu(t)){const n=fs(u,Ns(t)?null===(a=Zi(t.timeUnit))||void 0===a?void 0:a.unit:void 0,e,o.timeFormat,Is(t)&&(null===(s=t.scale)||void 0===s?void 0:s.type)===Eo.UTC);return n?{signal:n}:void 0}if(e=as(Fs(t),e,o),Ns(t)&&mn(t.bin)){const i=Ys(t,{expr:r,binSuffix:"end"});return{signal:ls(u,i,e,n,o)}}return e||"quantitative"===Fs(t)?{signal:""+us(u,e)}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function ns(t,e,n){return Ns(t)?n?`${Ys(t,{expr:e,suffix:"end"})}-${Ys(t,{expr:e,suffix:"start"})}`:Ys(t,{expr:e}):Ya(t)}function rs({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(null!==a&&void 0!==a||(a=ns(t,r,i)),Ns(t)&&mn(t.bin)){const i=Ys(t,{expr:r,binSuffix:"end"});return{signal:ls(a,i,e,n,o)}}return{signal:Za(n,a,e)}}function is(t,e,n,r,i,o){var a;if(!Ka(r)){if(vu(t)){const e=Ns(t)?null===(a=Zi(t.timeUnit))||void 0===a?void 0:a.unit:void 0;return ss(n,e,i,o)}return as(e,n,i)}}function os(t,e,n){return t&&(kn(t)||"number"===t||"time"===t)?t:vu(e)&&"time"!==n&&"utc"!==n?"time":void 0}function as(t,e,n){return Object(o["J"])(e)?e:t===yo?n.numberFormat:void 0}function ss(t,e,n,r){return t||(e?{signal:Qi(e)}:r?void 0:n.timeFormat)}function us(t,e){return`format(${t}, "${e||""}")`}function cs(t,e,n,r){var i;return Ka(n)?Za(n,t,e):us(t,null!==(i=Object(o["J"])(e)?e:void 0)&&void 0!==i?i:r.numberFormat)}function ls(t,e,n,r,i){const o=cs(t,n,r,i),a=cs(e,n,r,i);return`${go(t,!1)} ? "null" : ${o} + "${ts}" + ${a}`}function fs(t,e,n,r,i){return!e||n?(n=Object(o["J"])(n)?n:r,`${i?"utc":"time"}Format(${t}, '${n}')`):Ki(e,t,i)}const ds="min",hs={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function ps(t){return t in hs}function gs(t){return!!t&&!!t["encoding"]}function ms(t){return!!t&&("count"===t["op"]||!!t["field"])}function vs(t){return!!t&&Object(o["B"])(t)}function ys(t){return"row"in t||"column"in t}function bs(t){return!!t&&"header"in t}function xs(t){return"facet"in t}var ws=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Os(t){return t["param"]}function _s(t){return t&&!Object(o["J"])(t)&&"repeat"in t}function js(t){const{field:e,timeUnit:n,bin:r,aggregate:i}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:e})}function Es(t){return"sort"in t}function ks({fieldDef:t,fieldDef2:e,markDef:n,config:r}){if(Ls(t)&&void 0!==t.bandPosition)return t.bandPosition;if(Ns(t)){const{timeUnit:i,bin:o}=t;if(i&&!e)return ja(n.type)?0:Wn("timeUnitBandPosition",n,r);if(mn(o))return.5}}function As({channel:t,fieldDef:e,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){var s,u,c;const l=pe(t),f=Hn(a?"size":l,r,i,{vgChannel:l});if(void 0!==f)return f;if(Ns(e)){const{timeUnit:t,bin:a}=e;if(t&&!n)return{band:Wn("timeUnitBandSize",r,i)};if(mn(a)&&!Io(o))return{band:1}}return ja(r.type)?o?Io(o)?(null===(s=i[r.type])||void 0===s?void 0:s.discreteBandSize)||{band:1}:null===(u=i[r.type])||void 0===u?void 0:u.continuousBandSize:null===(c=i[r.type])||void 0===c?void 0:c.discreteBandSize:void 0}function Ss(t,e,n,r){return!!(mn(t.bin)||t.timeUnit&&zs(t)&&"temporal"===t.type)&&void 0!==ks({fieldDef:t,fieldDef2:e,markDef:n,config:r})}function Cs(t){return!!t&&"condition"in t}function Ds(t){const e=t&&t["condition"];return!!e&&!Object(o["B"])(e)&&Ns(e)}function Ms(t){const e=t&&t["condition"];return!!e&&!Object(o["B"])(e)&&Ls(e)}function Ts(t){const e=t&&t["condition"];return!!e&&(Object(o["B"])(e)||Bs(e))}function Ns(t){return!!t&&(!!t["field"]||"count"===t["aggregate"])}function Fs(t){return t&&t["type"]}function $s(t){return!!t&&"datum"in t}function Ps(t){return zs(t)&&!Vs(t)||Rs(t)}function Rs(t){return $s(t)&&Object(o["G"])(t.datum)}function Ls(t){return Ns(t)||$s(t)}function zs(t){return!!t&&("field"in t||"count"===t["aggregate"])&&"type"in t}function Bs(t){return t&&"value"in t&&"value"in t}function Is(t){return!!t&&("scale"in t||"sort"in t)}function Us(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function qs(t){return!!t&&"legend"in t}function Hs(t){return!!t&&("format"in t||"formatType"in t)}function Ws(t){return x(t,["legend","axis","header","scale"])}function Gs(t){return"op"in t}function Ys(t,e={}){var n,r,i;let o=t.field;const a=e.prefix;let s=e.suffix,u="";if(Js(t))o=et("count");else{let a;if(!e.nofn)if(Gs(t))a=t.op;else{const{bin:c,aggregate:l,timeUnit:f}=t;mn(c)?(a=gn(c),s=(null!==(n=e.binSuffix)&&void 0!==n?n:"")+(null!==(r=e.suffix)&&void 0!==r?r:"")):l?sn(l)?(u=`["${o}"]`,o="argmax_"+l.argmax):an(l)?(u=`["${o}"]`,o="argmin_"+l.argmin):a=String(l):f&&(a=to(f),s=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+(null!==(i=e.suffix)&&void 0!==i?i:""))}a&&(o=o?`${a}_${o}`:a)}return s&&(o=`${o}_${s}`),a&&(o=`${a}_${o}`),e.forAs?X(o):e.expr?W(o,e.expr)+u:Y(o)+u}function Vs(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ns(t)&&!!t.bin;case"temporal":return!1}throw new Error(r.invalidFieldType(t.type))}function Xs(t){var e;return Is(t)&&Ho(null===(e=t.scale)||void 0===e?void 0:e.type)}function Js(t){return"count"===t.aggregate}function Qs(t,e){var n;const{field:r,bin:i,timeUnit:o,aggregate:a}=t;if("count"===a)return e.countTitle;if(mn(i))return r+" (binned)";if(o){const t=null===(n=Zi(o))||void 0===n?void 0:n.unit;if(t)return`${r} (${Vi(t).join("-")})`}else if(a)return sn(a)?`${r} for max ${a.argmax}`:an(a)?`${r} for min ${a.argmin}`:`${q(a)} of ${r}`;return r}function Ks(t){const{aggregate:e,bin:n,timeUnit:r,field:i}=t;if(sn(e))return`${i} for argmax(${e.argmax})`;if(an(e))return`${i} for argmin(${e.argmin})`;const o=Zi(r),a=e||(null===o||void 0===o?void 0:o.unit)||(null===o||void 0===o?void 0:o.maxbins)&&"timeunit"||mn(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}const Zs=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return Ks(t);default:return Qs(t,e)}};let tu=Zs;function eu(t){tu=t}function nu(){eu(Zs)}function ru(t,e,{allowDisabling:n,includeDefault:r=!0}){var i,o;const a=null===(i=iu(t))||void 0===i?void 0:i.title;if(!Ns(t))return a;const s=t,u=r?ou(s,e):void 0;return n?Q(a,s.title,u):null!==(o=null!==a&&void 0!==a?a:s.title)&&void 0!==o?o:u}function iu(t){return Us(t)&&t.axis?t.axis:qs(t)&&t.legend?t.legend:bs(t)&&t.header?t.header:void 0}function ou(t,e){return tu(t,e)}function au(t){var e;if(Hs(t)){const{format:e,formatType:n}=t;return{format:e,formatType:n}}{const n=null!==(e=iu(t))&&void 0!==e?e:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function su(t,e){var n;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Es(t)&&Object(o["B"])(t.sort))return"ordinal";const{aggregate:r,bin:i,timeUnit:a}=t;if(a)return"temporal";if(i||r&&!sn(r)&&!an(r))return"quantitative";if(Is(t)&&(null===(n=t.scale)||void 0===n?void 0:n.type))switch(ko[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function uu(t){return Ns(t)?t:Ds(t)?t.condition:void 0}function cu(t){return Ls(t)?t:Ms(t)?t.condition:void 0}function lu(t,e,n,i={}){if(Object(o["J"])(t)||Object(o["G"])(t)||Object(o["C"])(t)){const n=Object(o["J"])(t)?"string":Object(o["G"])(t)?"number":"boolean";return Ai(r.primitiveChannelDef(e,n,t)),{value:t}}return Ls(t)?fu(t,e,n,i):Ms(t)?Object.assign(Object.assign({},t),{condition:fu(t.condition,e,n,i)}):t}function fu(t,e,n,i){if(Hs(t)){const{format:o,formatType:a}=t,s=ws(t,["format","formatType"]);if(Ka(a)&&!n.customFormatTypes)return Ai(r.customFormatTypeNotAllowed(e)),fu(s,e,n,i)}else{const o=Us(t)?"axis":qs(t)?"legend":bs(t)?"header":null;if(o&&t[o]){const a=t[o],{format:s,formatType:u}=a,c=ws(a,["format","formatType"]);if(Ka(u)&&!n.customFormatTypes)return Ai(r.customFormatTypeNotAllowed(e)),fu(Object.assign(Object.assign({},t),{[o]:c}),e,n,i)}}return Ns(t)?hu(t,e,i):du(t)}function du(t){let e=t["type"];if(e)return t;const{datum:n}=t;return e=Object(o["G"])(n)?"quantitative":Object(o["J"])(n)?"nominal":Ci(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:e})}function hu(t,e,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:a,bin:s,field:u}=t,c=Object.assign({},t);if(n||!i||un(i)||sn(i)||an(i)||(Ai(r.invalidAggregate(i)),delete c.aggregate),a&&(c.timeUnit=Zi(a)),u&&(c.field=""+u),mn(s)&&(c.bin=pu(s,e)),vn(s)&&!Te(e)&&Ai(r.channelShouldNotBeUsedForBinned(e)),zs(c)){const{type:t}=c,e=_o(t);t!==e&&(c.type=e),"quantitative"!==t&&ln(i)&&(Ai(r.invalidFieldTypeForCountAggregate(t,i)),c.type="quantitative")}else if(!le(e)){const t=su(c,e);c["type"]=t}if(zs(c)){const{compatible:t,warning:n}=mu(c,e)||{};!1===t&&Ai(n)}if(Es(c)&&Object(o["J"])(c.sort)){const{sort:t}=c;if(ps(t))return Object.assign(Object.assign({},c),{sort:{encoding:t}});const e=t.substr(1);if("-"===t.charAt(0)&&ps(e))return Object.assign(Object.assign({},c),{sort:{encoding:e,order:"descending"}})}if(bs(c)){const{header:t}=c;if(t){const{orient:e}=t,n=ws(t,["orient"]);if(e)return Object.assign(Object.assign({},c),{header:Object.assign(Object.assign({},n),{labelOrient:t.labelOrient||e,titleOrient:t.titleOrient||e})})}}return c}function pu(t,e){return Object(o["C"])(t)?{maxbins:xn(e)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:Object.assign(Object.assign({},t),{maxbins:xn(e)})}const gu={compatible:!0};function mu(t,e){const n=t.type;if("geojson"===n&&"shape"!==e)return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case at:case st:case ut:return Vs(t)?gu:{compatible:!1,warning:r.channelShouldBeDiscrete(e)};case ct:case lt:case wt:case Ot:case _t:case Tt:case Ft:case $t:case Pt:case Rt:case Lt:case kt:case gt:case ht:case zt:return gu;case yt:case xt:case vt:case bt:return n!==yo?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:gu;case At:case St:case Ct:case Dt:case Et:case mt:case pt:case ft:case dt:return"nominal"!==n||t["sort"]?gu:{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`};case jt:case Mt:return Vs(t)||Xs(t)?gu:{compatible:!1,warning:r.channelShouldBeDiscreteOrDiscretizing(e)};case Nt:return"nominal"!==t.type||"sort"in t?gu:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}function vu(t){const{formatType:e}=au(t);return"time"===e||!e&&yu(t)}function yu(t){return t&&("temporal"===t["type"]||Ns(t)&&!!t.timeUnit)}function bu(t,{timeUnit:e,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var a;const s=e&&(null===(a=Zi(e))||void 0===a?void 0:a.unit);let u,c=s||"temporal"===n;return wn(t)?u=t.expr:kn(t)?u=t.signal:Ci(t)?(c=!0,u=Li(t)):(Object(o["J"])(t)||Object(o["G"])(t))&&c&&(u=`datetime(${w(t)})`,Hi(s)&&(Object(o["G"])(t)&&t<1e4||Object(o["J"])(t)&&isNaN(Date.parse(t)))&&(u=Li({[s]:t}))),u?r&&c?`time(${u})`:u:i?void 0:w(t)}function xu(t,e){const{type:n}=t;return e.map(e=>{const r=bu(e,{timeUnit:Ns(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:e})}function wu(t,e){return mn(t.bin)?Je(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}const Ou={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function _u(t){return t&&t["condition"]}const ju=["domain","grid","labels","ticks","title"],Eu={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},ku={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Au=Object.assign(Object.assign({},ku),{style:1,labelExpr:1,encoding:1});function Su(t){return!!Au[t]}P(Au);const Cu={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Du=P(Cu);function Mu(t){return"mark"in t}class Tu{constructor(t,e){this.name=t,this.run=e}hasMatchingType(t){return!!Mu(t)&&Ua(t.mark)===this.name}}var Nu=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Fu(t,e){const n=t&&t[e];return!!n&&(Object(o["B"])(n)?E(n,t=>!!t.field):Ns(n)||Ds(n))}function $u(t){return E(Kt,e=>{if(Fu(t,e)){const n=t[e];if(Object(o["B"])(n))return E(n,t=>!!t.aggregate);{const t=uu(n);return t&&!!t.aggregate}}return!1})}function Pu(t,e){const n=[],r=[],i=[],o=[],a={};return Iu(t,(s,u)=>{if(Ns(s)){const{field:c,aggregate:l,bin:f,timeUnit:d}=s,h=Nu(s,["field","aggregate","bin","timeUnit"]);if(l||d||f){const t=iu(s),p=t&&t.title;let g=Ys(s,{forAs:!0});const m=Object.assign(Object.assign(Object.assign({},p?[]:{title:ru(s,e,{allowDisabling:!0})}),h),{field:g});if(l){let t;if(sn(l)?(t="argmax",g=Ys({op:"argmax",field:l.argmax},{forAs:!0}),m.field=`${g}.${c}`):an(l)?(t="argmin",g=Ys({op:"argmin",field:l.argmin},{forAs:!0}),m.field=`${g}.${c}`):"boxplot"!==l&&"errorbar"!==l&&"errorband"!==l&&(t=l),t){const e={op:t,as:g};c&&(e.field=c),o.push(e)}}else if(n.push(g),zs(s)&&mn(f)){if(r.push({bin:f,field:c,as:g}),n.push(Ys(s,{binSuffix:"end"})),wu(s,u)&&n.push(Ys(s,{binSuffix:"range"})),Te(u)){const t={field:g+"_end"};a[u+"2"]=t}m.bin="binned",le(u)||(m["type"]=yo)}else if(d){i.push({timeUnit:d,field:c,as:g});const t=zs(s)&&s.type!==xo&&"time";t&&(u===Tt||u===Pt?m["formatType"]=t:Ge(u)?m["legend"]=Object.assign({formatType:t},m["legend"]):Te(u)&&(m["axis"]=Object.assign({formatType:t},m["axis"])))}a[u]=m}else n.push(c),a[u]=t[u]}else a[u]=t[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function Ru(t,e,n){const r=Qe(e,n);if(!r)return!1;if("binned"===r){const n=t[e===ft?ct:lt];return!!(Ns(n)&&Ns(t[e])&&vn(n.bin))}return!0}function Lu(t,e,n,i){return P(t).reduce((a,s)=>{if(!ue(s))return Ai(r.invalidEncodingChannel(s)),a;const u=t[s];if("angle"!==s||"arc"!==e||t.theta||(Ai(r.REPLACE_ANGLE_WITH_THETA),s=gt),!Ru(t,s,e))return Ai(r.incompatibleChannel(s,e)),a;if(s===Et&&"line"===e){const e=uu(t[s]);if(null===e||void 0===e?void 0:e.aggregate)return Ai(r.LINE_WITH_VARYING_SIZE),a}if(s===wt&&(n?"fill"in t:"stroke"in t))return Ai(r.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),a;if(s===Ft||s===Nt&&!Object(o["B"])(u)&&!Bs(u)||s===Pt&&Object(o["B"])(u))u&&(a[s]=Object(o["i"])(u).reduce((t,e)=>(Ns(e)?t.push(hu(e,s)):Ai(r.emptyFieldDef(e,s)),t),[]));else{if(s===Pt&&null===u)a[s]=null;else if(!Ns(u)&&!$s(u)&&!Bs(u)&&!Cs(u)&&!kn(u))return Ai(r.emptyFieldDef(u,s)),a;a[s]=lu(u,s,i)}return a},{})}function zu(t,e){const n={};for(const r of P(t)){const i=lu(t[r],r,e,{compositeMark:!0});n[r]=i}return n}function Bu(t){const e=[];for(const n of P(t))if(Fu(t,n)){const r=t[n],i=Object(o["i"])(r);for(const t of i)Ns(t)?e.push(t):Ds(t)&&e.push(t.condition)}return e}function Iu(t,e,n){if(t)for(const r of P(t)){const i=t[r];if(Object(o["B"])(i))for(const t of i)e.call(n,t,r);else e.call(n,i,r)}}function Uu(t,e,n,r){return t?P(t).reduce((n,i)=>{const a=t[i];return Object(o["B"])(a)?a.reduce((t,n)=>e.call(r,t,n,i),n):e.call(r,n,a,i)},n):n}function qu(t,e){return P(e).reduce((n,r)=>{switch(r){case ct:case lt:case Rt:case zt:case Lt:case ft:case dt:case gt:case mt:case ht:case pt:case vt:case yt:case bt:case xt:case Tt:case jt:case kt:case Pt:return n;case Nt:if("line"===t||"trail"===t)return n;case Ft:case $t:{const t=e[r];if(Object(o["B"])(t)||Ns(t))for(const e of Object(o["i"])(t))e.aggregate||n.push(Ys(e,{}));return n}case Et:if("trail"===t)return n;case wt:case Ot:case _t:case At:case St:case Ct:case Mt:case Dt:{const t=uu(e[r]);return t&&!t.aggregate&&n.push(Ys(t,{})),n}}},[])}var Hu=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Wu(t){const{tooltip:e}=t,n=Hu(t,["tooltip"]);if(!e)return{filteredEncoding:n};let r,i;if(Object(o["B"])(e)){for(const t of e)t.aggregate?(r||(r=[]),r.push(t)):(i||(i=[]),i.push(t));r&&(n.tooltip=r)}else e["aggregate"]?n.tooltip=e:i=e;return Object(o["B"])(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function Gu(t,e,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=t.map(({fieldPrefix:t,titlePrefix:n})=>{const i=r?" of "+Yu(e):"";return{field:t+e.field,type:e.type,title:kn(n)?{signal:`${n}"${escape(i)}"`}:n+i}}),o=Bu(n).map(Ws);return{tooltip:[...i,...C(o,O)]}}function Yu(t){const{title:e,field:n}=t;return Q(e,n)}function Vu(t,e,n,r,i){const{scale:a,axis:s}=n;return({partName:u,mark:c,positionPrefix:l,endPositionPrefix:f,extraEncoding:d={}})=>{const h=Yu(n);return Xu(t,u,i,{mark:c,encoding:Object.assign(Object.assign(Object.assign({[e]:Object.assign(Object.assign(Object.assign({field:`${l}_${n.field}`,type:n.type},void 0!==h?{title:h}:{}),void 0!==a?{scale:a}:{}),void 0!==s?{axis:s}:{})},Object(o["J"])(f)?{[e+"2"]:{field:`${f}_${n.field}`}}:{}),r),d)})}}function Xu(t,e,n,r){const{clip:i,color:a,opacity:s}=t,u=t.type;return t[e]||void 0===t[e]&&n[e]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[e]),i?{clip:i}:{}),a?{color:a}:{}),s?{opacity:s}:{}),ka(r.mark)?r.mark:{type:r.mark}),{style:`${u}-${e}`}),Object(o["C"])(t[e])?{}:t[e])})]:[]}function Ju(t,e,n){const{encoding:r}=t,i="vertical"===e?"y":"x",o=r[i],a=r[i+"2"],s=r[i+"Error"],u=r[i+"Error2"];return{continuousAxisChannelDef:Qu(o,n),continuousAxisChannelDef2:Qu(a,n),continuousAxisChannelDefError:Qu(s,n),continuousAxisChannelDefError2:Qu(u,n),continuousAxis:i}}function Qu(t,e){if(t&&t.aggregate){const{aggregate:n}=t,i=Hu(t,["aggregate"]);return n!==e&&Ai(r.errorBarContinuousAxisHasCustomizedAggregate(n,e)),i}return t}function Ku(t,e){const{mark:n,encoding:r}=t,{x:i,y:o}=r;if(ka(n)&&n.orient)return n.orient;if(Ps(i)){if(Ps(o)){const t=Ns(i)&&i.aggregate,n=Ns(o)&&o.aggregate;if(t||n!==e){if(n||t!==e){if(t===e&&n===e)throw new Error("Both x and y cannot have aggregate");return vu(o)&&!vu(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(Ps(o))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}var Zu=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const tc="boxplot",ec=["box","median","outliers","rule","ticks"],nc=new Tu(tc,ic);function rc(t){return Object(o["G"])(t)?"tukey":t}function ic(t,{config:e}){var n,i;t=Object.assign(Object.assign({},t),{encoding:zu(t.encoding,e)});const{mark:a,encoding:s,params:u,projection:c}=t,l=Zu(t,["mark","encoding","params","projection"]),f=ka(a)?a:{type:a};u&&Ai(r.selectionNotSupported("boxplot"));const d=null!==(n=f.extent)&&void 0!==n?n:e.boxplot.extent,h=Hn("size",f,e),p=rc(d),{bins:g,timeUnits:m,transform:v,continuousAxisChannelDef:y,continuousAxis:b,groupby:w,aggregate:O,encodingWithoutContinuousAxis:_,ticksOrient:j,boxOrient:E,customTooltipWithoutAggregatedField:k}=ac(t,d,e),{color:A,size:S}=_,C=Zu(_,["color","size"]),D=t=>Vu(f,b,y,t,e.boxplot),M=D(C),T=D(_),N=D(Object.assign(Object.assign({},C),S?{size:S}:{})),F=Gu([{fieldPrefix:"min-max"===p?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===p?"lower_whisker_":"min_",titlePrefix:"Min"}],y,_),P={type:"tick",color:"black",opacity:1,orient:j,invalid:null,aria:!1},R="min-max"===p?F:Gu([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],y,_),L=[...M({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:R}),...M({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:R}),...M({partName:"ticks",mark:P,positionPrefix:"lower_whisker",extraEncoding:R}),...M({partName:"ticks",mark:P,positionPrefix:"upper_whisker",extraEncoding:R})],z=[..."tukey"!==p?L:[],...T({partName:"box",mark:Object.assign(Object.assign({type:"bar"},h?{size:h}:{}),{orient:E,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:F}),...N({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Object(o["H"])(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{}),h?{size:h}:{}),{orient:j,aria:!1}),positionPrefix:"mid_box",extraEncoding:F})];if("min-max"===p)return Object.assign(Object.assign({},l),{transform:(null!==(i=l.transform)&&void 0!==i?i:[]).concat(v),layer:z});const B=`datum["lower_box_${y.field}"]`,I=`datum["upper_box_${y.field}"]`,U=`(${I} - ${B})`,q=`${B} - ${d} * ${U}`,H=`${I} + ${d} * ${U}`,W=`datum["${y.field}"]`,G={joinaggregate:oc(y.field),groupby:w},Y={transform:[{filter:`(${q} <= ${W}) && (${W} <= ${H})`},{aggregate:[{op:"min",field:y.field,as:"lower_whisker_"+y.field},{op:"max",field:y.field,as:"upper_whisker_"+y.field},{op:"min",field:"lower_box_"+y.field,as:"lower_box_"+y.field},{op:"max",field:"upper_box_"+y.field,as:"upper_box_"+y.field},...O],groupby:w}],layer:L},{tooltip:V}=C,X=Zu(C,["tooltip"]),{scale:J,axis:Q}=y,K=Yu(y),Z=x(Q,["title"]),tt=Xu(f,"outliers",e.boxplot,{transform:[{filter:`(${W} < ${q}) || (${W} > ${H})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[b]:Object.assign(Object.assign(Object.assign({field:y.field,type:y.type},void 0!==K?{title:K}:{}),void 0!==J?{scale:J}:{}),$(Z)?{}:{axis:Z})},X),A?{color:A}:{}),k?{tooltip:k}:{})})[0];let et;const nt=[...g,...m,G];return tt?et={transform:nt,layer:[tt,Y]}:(et=Y,et.transform.unshift(...nt)),Object.assign(Object.assign({},l),{layer:[et,{transform:v,layer:z}]})}function oc(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}function ac(t,e,n){const r=Ku(t,tc),{continuousAxisChannelDef:i,continuousAxis:o}=Ju(t,r,tc),a=i.field,s=rc(e),u=[...oc(a),{op:"median",field:a,as:"mid_box_"+a},{op:"min",field:a,as:("min-max"===s?"lower_whisker_":"min_")+a},{op:"max",field:a,as:("min-max"===s?"upper_whisker_":"max_")+a}],c="min-max"===s||"tukey"===s?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:"iqr_"+a},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${e}, datum["max_${a}"])`,as:"upper_whisker_"+a},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${e}, datum["min_${a}"])`,as:"lower_whisker_"+a}],l=t.encoding,f=o,d=(l[f],Zu(l,["symbol"===typeof f?f:f+""])),{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Wu(d),{bins:g,timeUnits:m,aggregate:v,groupby:y,encoding:b}=Pu(p,n),x="vertical"===r?"horizontal":"vertical",w=r,O=[...g,...m,{aggregate:[...v,...u],groupby:y},...c];return{bins:g,timeUnits:m,transform:O,groupby:y,aggregate:v,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:h}}var sc=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const uc="errorbar",cc=["ticks","rule"],lc=new Tu(uc,fc);function fc(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:zu(t.encoding,e)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:u,tooltipEncoding:c}=mc(t,uc,e);delete o["size"];const l=Vu(s,i,r,o,e.errorbar),f=s.thickness,d=s.size,h=Object.assign(Object.assign({type:"tick",orient:a,aria:!1},void 0!==f?{thickness:f}:{}),void 0!==d?{size:d}:{}),p=[...l({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:c}),...l({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:c}),...l({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},void 0!==f?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),p.length>1?{layer:p}:Object.assign({},p[0]))}function dc(t,e){const{encoding:n}=t;if(hc(n))return{orient:Ku(t,e),inputType:"raw"};const r=pc(n),i=gc(n),o=n.x,a=n.y;if(r){if(i)throw new Error(e+" cannot be both type aggregated-upper-lower and aggregated-error");const t=n.x2,r=n.y2;if(Ls(t)&&Ls(r))throw new Error(e+" cannot have both x2 and y2");if(Ls(t)){if(Ps(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+e)}if(Ls(r)){if(Ps(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+e)}throw new Error("No ranged axis")}{const t=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(Ls(r)&&!Ls(t))throw new Error(e+" cannot have xError2 without xError");if(Ls(s)&&!Ls(i))throw new Error(e+" cannot have yError2 without yError");if(Ls(t)&&Ls(i))throw new Error(e+" cannot have both xError and yError with both are quantiative");if(Ls(t)){if(Ps(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(Ls(i)){if(Ps(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function hc(t){return(Ls(t.x)||Ls(t.y))&&!Ls(t.x2)&&!Ls(t.y2)&&!Ls(t.xError)&&!Ls(t.xError2)&&!Ls(t.yError)&&!Ls(t.yError2)}function pc(t){return Ls(t.x2)||Ls(t.y2)}function gc(t){return Ls(t.xError)||Ls(t.xError2)||Ls(t.yError)||Ls(t.yError2)}function mc(t,e,n){var i;const{mark:o,encoding:a,params:s,projection:u}=t,c=sc(t,["mark","encoding","params","projection"]),l=ka(o)?o:{type:o};s&&Ai(r.selectionNotSupported(e));const{orient:f,inputType:d}=dc(t,e),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:g,continuousAxisChannelDefError2:m,continuousAxis:v}=Ju(t,f,e),{errorBarSpecificAggregate:y,postAggregateCalculates:b,tooltipSummary:x,tooltipTitleWithFieldName:w}=vc(l,h,p,g,m,d,e,n),O=a,_=v,j=(O[_],"x"===v?"x2":"y2"),E=(O[j],"x"===v?"xError":"yError"),k=(O[E],"x"===v?"xError2":"yError2"),A=(O[k],sc(O,["symbol"===typeof _?_:_+"","symbol"===typeof j?j:j+"","symbol"===typeof E?E:E+"","symbol"===typeof k?k:k+""])),{bins:S,timeUnits:C,aggregate:D,groupby:M,encoding:T}=Pu(A,n),N=[...D,...y],F="raw"!==d?[]:M,$=Gu(x,h,T,w);return{transform:[...null!==(i=c.transform)&&void 0!==i?i:[],...S,...C,...0===N.length?[]:[{aggregate:N,groupby:F}],...b],groupby:F,continuousAxisChannelDef:h,continuousAxis:v,encodingWithoutContinuousAxis:T,ticksOrient:"vertical"===f?"horizontal":"vertical",markDef:l,outerSpec:c,tooltipEncoding:$}}function vc(t,e,n,i,o,a,s,u){let c=[],l=[];const f=e.field;let d,h=!1;if("raw"===a){const e=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":u.errorbar.center,n=t.extent?t.extent:"mean"===e?"stderr":"iqr";if("median"===e!==("iqr"===n)&&Ai(r.errorBarCenterIsUsedWithWrongExtent(e,n,s)),"stderr"===n||"stdev"===n)c=[{op:n,field:f,as:"extent_"+f},{op:e,field:f,as:"center_"+f}],l=[{calculate:`datum["center_${f}"] + datum["extent_${f}"]`,as:"upper_"+f},{calculate:`datum["center_${f}"] - datum["extent_${f}"]`,as:"lower_"+f}],d=[{fieldPrefix:"center_",titlePrefix:q(e)},{fieldPrefix:"upper_",titlePrefix:yc(e,n,"+")},{fieldPrefix:"lower_",titlePrefix:yc(e,n,"-")}],h=!0;else{let t,e,r;"ci"===n?(t="mean",e="ci0",r="ci1"):(t="median",e="q1",r="q3"),c=[{op:e,field:f,as:"lower_"+f},{op:r,field:f,as:"upper_"+f},{op:t,field:f,as:"center_"+f}],d=[{fieldPrefix:"upper_",titlePrefix:ru({field:f,aggregate:r,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ru({field:f,aggregate:e,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ru({field:f,aggregate:t,type:"quantitative"},u,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&Ai(r.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),"aggregated-upper-lower"===a?(d=[],l=[{calculate:`datum["${n.field}"]`,as:"upper_"+f},{calculate:`datum["${f}"]`,as:"lower_"+f}]):"aggregated-error"===a&&(d=[{fieldPrefix:"",titlePrefix:f}],l=[{calculate:`datum["${f}"] + datum["${i.field}"]`,as:"upper_"+f}],o?l.push({calculate:`datum["${f}"] + datum["${o.field}"]`,as:"lower_"+f}):l.push({calculate:`datum["${f}"] - datum["${i.field}"]`,as:"lower_"+f}));for(const t of l)d.push({fieldPrefix:t.as.substring(0,6),titlePrefix:V(V(t.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:d,tooltipTitleWithFieldName:h}}function yc(t,e,n){return`${q(t)} ${n} ${e}`}const bc="errorband",xc=["band","borders"],wc=new Tu(bc,Oc);function Oc(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:zu(t.encoding,e)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:u,tooltipEncoding:c}=mc(t,bc,e),l=s,f=Vu(l,o,i,a,e.errorband),d=void 0!==t.encoding.x&&void 0!==t.encoding.y;let h={type:d?"area":"rect"},p={type:d?"line":"rule"};const g=Object.assign(Object.assign({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return d?(h=Object.assign(Object.assign(Object.assign({},h),g),{ariaRoleDescription:"errorband"}),p=Object.assign(Object.assign(Object.assign({},p),g),{aria:!1})):l.interpolate?Ai(r.errorBand1DNotSupport("interpolate")):l.tension&&Ai(r.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},u),{transform:n,layer:[...f({partName:"band",mark:h,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...f({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:c}),...f({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:c})]})}const _c={};function jc(t,e,n){const r=new Tu(t,e);_c[t]={normalizer:r,parts:n}}function Ec(){return P(_c)}jc(tc,ic,ec),jc(uc,fc,cc),jc(bc,Oc,xc);const kc=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Ac={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Sc={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Cc=P(Ac),Dc=P(Sc),Mc={header:1,headerRow:1,headerColumn:1,headerFacet:1},Tc=P(Mc),Nc=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Fc={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},$c={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Pc=(P($c),"_vgsid_"),Rc={point:{on:"click",fields:[Pc],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Lc(t){return!!t&&("legend"===t||!!t.legend)}function zc(t){return Lc(t)&&Object(o["H"])(t)}function Bc(t){return!!t["select"]}var Ic=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Uc(t){const e=[];for(const n of t||[]){if(Bc(n))continue;const{expr:t,bind:r}=n,i=Ic(n,["expr","bind"]);if(r&&t){const n=Object.assign(Object.assign({},i),{bind:r,init:t});e.push(n)}else{const n=Object.assign(Object.assign(Object.assign({},i),t?{update:t}:{}),r?{bind:r}:{});e.push(n)}}return e}function qc(t){return Wc(t)||Gc(t)||Hc(t)}function Hc(t){return"concat"in t}function Wc(t){return"vconcat"in t}function Gc(t){return"hconcat"in t}function Yc(t){return Object(o["H"])(t)&&void 0!==t["step"]}function Vc(t){return t["view"]||t["width"]||t["height"]}const Xc=20,Jc={align:1,bounds:1,center:1,columns:1,spacing:1},Qc=P(Jc);function Kc(t,e,n){var r,i;const a=n[e],s={},{spacing:u,columns:c}=a;void 0!==u&&(s.spacing=u),void 0!==c&&(xs(t)&&!ys(t.facet)||Hc(t))&&(s.columns=c),Wc(t)&&(s.columns=1);for(const l of Qc)if(void 0!==t[l])if("spacing"===l){const e=t[l];s[l]=Object(o["G"])(e)?e:{row:null!==(r=e.row)&&void 0!==r?r:u,column:null!==(i=e.column)&&void 0!==i?i:u}}else s[l]=t[l];return s}var Zc=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function tl(t,e){var n;return null!==(n=t[e])&&void 0!==n?n:t["width"===e?"continuousWidth":"continuousHeight"]}function el(t,e){const n=nl(t,e);return Yc(n)?n.step:rl}function nl(t,e){var n;const r=null!==(n=t[e])&&void 0!==n?n:t["width"===e?"discreteWidth":"discreteHeight"];return Q(r,{step:t.step})}const rl=20,il={continuousWidth:200,continuousHeight:200,step:rl};const ol={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:il,mark:Na,arc:{},area:{},bar:za,circle:{},geoshape:{},image:{},line:{},point:{},rect:Ba,rule:{color:"black"},square:{},text:{color:"black"},tick:Ia,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Wo,projection:{},legend:Fc,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Rc,style:{},title:{},facet:{spacing:Xc},concat:{spacing:Xc}},al=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],sl={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},ul={blue:al[0],orange:al[1],red:al[2],teal:al[3],green:al[4],yellow:al[5],purple:al[6],pink:al[7],brown:al[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function cl(t={}){return{signals:[{name:"color",value:Object(o["H"])(t)?Object.assign(Object.assign({},ul),t):ul}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function ll(t){return{signals:[{name:"fontSize",value:Object(o["H"])(t)?Object.assign(Object.assign({},sl),t):sl}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function fl(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function dl(t){const e=P(t||{}),n={};for(const r of e){const e=t[r];n[r]=_u(e)?Pn(e):Rn(e)}return n}function hl(t){const e=P(t),n={};for(const r of e)n[r]=dl(t[r]);return n}const pl=[...$a,...Du,...Tc,"background","padding","legend","lineBreak","scale","style","title","view"];function gl(t={}){const{color:e,font:n,fontSize:r}=t,i=Zc(t,["color","font","fontSize"]),a=Object(o["P"])({},ol,n?fl(n):{},e?cl(e):{},r?ll(r):{},i||{}),s=x(a,pl);for(const o of["background","lineBreak","padding"])a[o]&&(s[o]=Rn(a[o]));for(const o of $a)a[o]&&(s[o]=On(a[o]));for(const o of Du)a[o]&&(s[o]=dl(a[o]));for(const o of Tc)a[o]&&(s[o]=On(a[o]));return a.legend&&(s.legend=On(a.legend)),a.scale&&(s.scale=On(a.scale)),a.style&&(s.style=hl(a.style)),a.title&&(s.title=On(a.title)),a.view&&(s.view=On(a.view)),s}const ml=["view",...Ea],vl=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],yl=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},Ta);function bl(t){t=y(t);for(const e of vl)delete t[e];if(t.axis)for(const e in t.axis)_u(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of kc)delete t.legend[e];if(t.mark){for(const e of Ma)delete t.mark[e];t.mark.tooltip&&Object(o["H"])(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(Uc(t.params)),delete t.params);for(const e of ml){for(const r of Ma)delete t[e][r];const n=yl[e];if(n)for(const r of n)delete t[e][r];wl(t,e)}for(const e of Ec())delete t[e];xl(t);for(const e in t)Object(o["H"])(t[e])&&$(t[e])&&delete t[e];return $(t)?void 0:t}function xl(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:r}=jn(t.title);$(e)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),e)),$(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),$(r)?delete t.title:t.title=r}function wl(t,e,n,r){const i=r?t[e][r]:t[e];"view"===e&&(n="cell");const o=Object.assign(Object.assign({},i),t.style[null!==n&&void 0!==n?n:e]);$(o)||(t.style[null!==n&&void 0!==n?n:e]=o),r||delete t[e]}function Ol(t){return"layer"in t}function _l(t){return"repeat"in t}function jl(t){return!Object(o["B"])(t.repeat)&&t.repeat["layer"]}var El=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class kl{map(t,e){return xs(t)?this.mapFacet(t,e):_l(t)?this.mapRepeat(t,e):Gc(t)?this.mapHConcat(t,e):Wc(t)?this.mapVConcat(t,e):Hc(t)?this.mapConcat(t,e):this.mapLayerOrUnit(t,e)}mapLayerOrUnit(t,e){if(Ol(t))return this.mapLayer(t,e);if(Mu(t))return this.mapUnit(t,e);throw new Error(r.invalidSpec(t))}mapLayer(t,e){return Object.assign(Object.assign({},t),{layer:t.layer.map(t=>this.mapLayerOrUnit(t,e))})}mapHConcat(t,e){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(t=>this.map(t,e))})}mapVConcat(t,e){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(t=>this.map(t,e))})}mapConcat(t,e){const{concat:n}=t,r=El(t,["concat"]);return Object.assign(Object.assign({},r),{concat:n.map(t=>this.map(t,e))})}mapFacet(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}mapRepeat(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}}const Al={zero:1,center:1,normalize:1};function Sl(t){return t in Al}const Cl=new Set([ca,fa,la,ma,pa,xa,wa,ha,va,ya]),Dl=new Set([fa,la,ca]);function Ml(t,e){var n,r;const i="x"===e?"y":"radius",o=t[e],a=t[i];if(Ns(o)&&Ns(a))if("quantitative"===Fs(o)&&"quantitative"===Fs(a)){if(o.stack)return e;if(a.stack)return i;const t=Ns(o)&&!!o.aggregate,s=Ns(a)&&!!a.aggregate;if(t!==s)return t?e:i;{const t=null===(n=o.scale)||void 0===n?void 0:n.type,s=null===(r=a.scale)||void 0===r?void 0:r.type;if(t&&"linear"!==t)return i;if(s&&"linear"!==s)return e}}else{if("quantitative"===Fs(o))return e;if("quantitative"===Fs(a))return i}else{if("quantitative"===Fs(o))return e;if("quantitative"===Fs(a))return i}}function Tl(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Nl(t,e,n={}){var i,a;const s=ka(t)?t.type:t;if(!Cl.has(s))return null;const u=Ml(e,"x")||Ml(e,"theta");if(!u)return null;const c=e[u],l=Ns(c)?Ys(c,{}):void 0;let f=Tl(u),d=e[f],h=Ns(d)?Ys(d,{}):void 0;h===l&&(h=void 0,d=void 0,f=void 0);const p=Ce.reduce((t,n)=>{if("tooltip"!==n&&Fu(e,n)){const r=e[n];for(const e of Object(o["i"])(r)){const r=uu(e);if(r.aggregate)continue;const i=Ys(r,{});i&&i===h||t.push({channel:n,fieldDef:r})}}return t},[]);let g;if(void 0!==c.stack?g=Object(o["C"])(c.stack)?c.stack?"zero":null:c.stack:Dl.has(s)&&(g="zero"),!g||!Sl(g))return null;if($u(e)&&0===p.length)return null;if((null===(i=null===c||void 0===c?void 0:c.scale)||void 0===i?void 0:i.type)&&(null===(a=null===c||void 0===c?void 0:c.scale)||void 0===a?void 0:a.type)!==Eo.LINEAR){if(n.disallowNonLinearStack)return null;Ai(r.cannotStackNonLinearScale(c.scale.type))}return Ls(e[he(u)])?(void 0!==c.stack&&Ai(r.cannotStackRangedMark(u)),null):(Ns(c)&&c.aggregate&&!j(dn,c.aggregate)&&Ai(r.stackNonSummativeAggregate(c.aggregate)),{groupbyChannel:d?f:void 0,groupbyField:h,fieldChannel:u,impute:null!==c.impute&&_a(s),stackBy:p,offset:g})}var Fl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function $l(t){const{point:e,line:n}=t,r=Fl(t,["point","line"]);return P(r).length>1?r:r.type}function Pl(t){for(const e of["line","area","rule","trail"])t[e]&&(t=Object.assign(Object.assign({},t),{[e]:x(t[e],["point","line"])}));return t}function Rl(t,e={},n){return"transparent"===t.point?{opacity:0}:t.point?Object(o["H"])(t.point)?t.point:{}:void 0!==t.point?null:e.point||n.shape?Object(o["H"])(e.point)?e.point:{}:void 0}function Ll(t,e={}){return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:e.line?!0===e.line?{}:e.line:void 0}class zl{constructor(){this.name="path-overlay"}hasMatchingType(t,e){if(Mu(t)){const{mark:n,encoding:r}=t,i=ka(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!Rl(i,e[i.type],r);case"area":return!!Rl(i,e[i.type],r)||!!Ll(i,e[i.type])}}return!1}run(t,e,n){const{config:r}=e,{params:i,projection:o,mark:a,encoding:s}=t,u=Fl(t,["params","projection","mark","encoding"]),c=zu(s,r),l=ka(a)?a:{type:a},f=Rl(l,r[l.type],c),d="area"===l.type&&Ll(l,r[l.type]),h=[Object.assign(Object.assign({},i?{params:i}:{}),{mark:$l(Object.assign(Object.assign({},"area"===l.type&&void 0===l.opacity&&void 0===l.fillOpacity?{opacity:.7}:{}),l)),encoding:x(c,["shape"])})],p=Nl(l,c);let g=c;if(p){const{fieldChannel:t,offset:e}=p;g=Object.assign(Object.assign({},c),{[t]:Object.assign(Object.assign({},c[t]),e?{stack:e}:{})})}return d&&h.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"line"},b(l,["clip","interpolate","tension","tooltip"])),d),encoding:g})),f&&h.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},b(l,["clip","tooltip"])),f),encoding:g})),n(Object.assign(Object.assign({},u),{layer:h}),Object.assign(Object.assign({},e),{config:Pl(r)}))}}var Bl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Il(t,e){return e?ys(t)?Yl(t,e):Hl(t,e):t}function Ul(t,e){return e?Yl(t,e):t}function ql(t,e,n){const i=e[t];return _s(i)?i.repeat in n?Object.assign(Object.assign({},e),{[t]:n[i.repeat]}):void Ai(r.noSuchRepeatedValue(i.repeat)):e}function Hl(t,e){if(t=ql("field",t,e),void 0!==t){if(null===t)return null;if(Es(t)&&ms(t.sort)){const n=ql("field",t.sort,e);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function Wl(t,e){if(Ns(t))return Hl(t,e);{const n=ql("datum",t,e);return n===t||n.type||(n.type="nominal"),n}}function Gl(t,e){if(!Ls(t)){if(Ms(t)){const n=Wl(t.condition,e);if(n)return Object.assign(Object.assign({},t),{condition:n});{const{condition:e}=t,n=Bl(t,["condition"]);return n}}return t}{const n=Wl(t,e);if(n)return n;if(Cs(t))return{condition:t.condition}}}function Yl(t,e){const n={};for(const r in t)if(Object(o["w"])(t,r)){const i=t[r];if(Object(o["B"])(i))n[r]=i.map(t=>Gl(t,e)).filter(t=>t);else{const t=Gl(i,e);void 0!==t&&(n[r]=t)}}return n}class Vl{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Mu(t)){const{encoding:e,mark:n}=t;if("line"===n||ka(n)&&"line"===n.type)for(const t of ce){const n=fe(t),r=e[n];if(e[t]&&(Ns(r)&&!vn(r.bin)||$s(r)))return!0}}return!1}run(t,e,n){const{encoding:i,mark:a}=t;return Ai(r.lineWithRange(!!i.x2,!!i.y2)),console.log(a),n(Object.assign(Object.assign({},t),{mark:Object(o["H"])(a)?Object.assign(Object.assign({},a),{type:"rule"}):"rule"}),e)}}var Xl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class Jl extends kl{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[nc,lc,wc,new zl,new Vl]}map(t,e){if(Mu(t)){const n=Fu(t.encoding,at),r=Fu(t.encoding,st),i=Fu(t.encoding,ut);if(n||r||i)return this.mapFacetedUnit(t,e)}return super.map(t,e)}mapUnit(t,e){const{parentEncoding:n,parentProjection:r}=e,i=Ul(t.encoding,e.repeater),o=Object.assign(Object.assign({},t),i?{encoding:i}:{});if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,e);const a=this.mapLayerOrUnit.bind(this);for(const s of this.nonFacetUnitNormalizers)if(s.hasMatchingType(o,e.config))return s.run(o,e,a);return o}mapRepeat(t,e){return jl(t)?this.mapLayerRepeat(t,e):this.mapNonLayerRepeat(t,e)}mapLayerRepeat(t,e){const{repeat:n,spec:r}=t,i=Xl(t,["repeat","spec"]),{row:o,column:a,layer:s}=n,{repeater:u={},repeaterPrefix:c=""}=e;return o||a?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),a?{column:a}:{}),spec:{repeat:{layer:s},spec:r}}),e):Object.assign(Object.assign({},i),{layer:s.map(t=>{const n=Object.assign(Object.assign({},u),{layer:t}),i=`${(r.name||"")+c}child__layer_${B(t)}`,o=this.mapLayerOrUnit(r,Object.assign(Object.assign({},e),{repeater:n,repeaterPrefix:i}));return o.name=i,o})})}mapNonLayerRepeat(t,e){var n;const{repeat:i,spec:a,data:s}=t,u=Xl(t,["repeat","spec","data"]);!Object(o["B"])(i)&&t.columns&&(t=x(t,["columns"]),Ai(r.columnsNotSupportByRowCol("repeat")));const c=[],{repeater:l={},repeaterPrefix:f=""}=e,d=!Object(o["B"])(i)&&i.row||[l?l.row:null],h=!Object(o["B"])(i)&&i.column||[l?l.column:null],p=Object(o["B"])(i)&&i||[l?l.repeat:null];for(const r of p)for(const t of d)for(const n of h){const s={repeat:r,row:t,column:n,layer:l.layer},u=(a.name||"")+f+"child__"+(Object(o["B"])(i)?""+B(r):(i.row?"row_"+B(t):"")+(i.column?"column_"+B(n):"")),d=this.map(a,Object.assign(Object.assign({},e),{repeater:s,repeaterPrefix:u}));d.name=u,c.push(x(d,["data"]))}const g=Object(o["B"])(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:null!==(n=a.data)&&void 0!==n?n:s,align:"all"},u),{columns:g,concat:c})}mapFacet(t,e){const{facet:n}=t;return ys(n)&&t.columns&&(t=x(t,["columns"]),Ai(r.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,e)}mapUnitWithParentEncodingOrProjection(t,e){const{encoding:n,projection:r}=t,{parentEncoding:i,parentProjection:o,config:a}=e,s=Kl({parentProjection:o,projection:r}),u=Ql({parentEncoding:i,encoding:Ul(n,e.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),s?{projection:s}:{}),u?{encoding:u}:{}),{config:a})}mapFacetedUnit(t,e){const n=t.encoding,{row:r,column:i,facet:o}=n,a=Xl(n,["row","column","facet"]),{mark:s,width:u,projection:c,height:l,view:f,params:d,encoding:h}=t,p=Xl(t,["mark","width","projection","height","view","params","encoding"]),{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},e),v=Ul(a,e.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},p),m),{facet:g,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),l?{height:l}:{}),f?{view:f}:{}),c?{projection:c}:{}),{mark:s,encoding:v}),d?{params:d}:{})}),e)}getFacetMappingAndLayout(t,e){var n;const{row:i,column:o,facet:a}=t;if(i||o){a&&Ai(r.facetChannelDropped([...i?[at]:[],...o?[st]:[]]));const e={},s={};for(const r of[at,st]){const i=t[r];if(i){const{align:t,center:o,spacing:a,columns:u}=i,c=Xl(i,["align","center","spacing","columns"]);e[r]=c;for(const e of["align","center","spacing"])void 0!==i[e]&&(null!==(n=s[e])&&void 0!==n||(s[e]={}),s[e][r]=i[e])}}return{facetMapping:e,layout:s}}{const{align:t,center:n,spacing:r,columns:i}=a,o=Xl(a,["align","center","spacing","columns"]);return{facetMapping:Il(o,e.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},t?{align:t}:{}),n?{center:n}:{}),r?{spacing:r}:{}),i?{columns:i}:{})}}}mapLayer(t,e){var{parentEncoding:n,parentProjection:r}=e,i=Xl(e,["parentEncoding","parentProjection"]);const{encoding:o,projection:a}=t,s=Xl(t,["encoding","projection"]),u=Object.assign(Object.assign({},i),{parentEncoding:Ql({parentEncoding:n,encoding:o,layer:!0}),parentProjection:Kl({parentProjection:r,projection:a})});return super.mapLayer(s,u)}}function Ql({parentEncoding:t,encoding:e={},layer:n}){let r={};if(t){const i=new Set([...P(t),...P(e)]);for(const a of i){const i=e[a],s=t[a];if(Ls(i)){const t=Object.assign(Object.assign({},s),i);r[a]=t}else Ms(i)?r[a]=Object.assign(Object.assign({},i),{condition:Object.assign(Object.assign({},s),i.condition)}):i||null===i?r[a]=i:(n||Bs(s)||kn(s)||Ls(s)||Object(o["B"])(s))&&(r[a]=s)}}else r=e;return!r||$(r)?void 0:r}function Kl(t){const{parentProjection:e,projection:n}=t;return e&&n&&Ai(r.projectionOverridden({parentProjection:e,projection:n})),null!==n&&void 0!==n?n:e}var Zl=n("e1a1");function tf(t){return"filter"in t}function ef(t){return void 0!==(null===t||void 0===t?void 0:t["stop"])}function nf(t){return"lookup"in t}function rf(t){return"data"in t}function of(t){return"param"in t}function af(t){return"pivot"in t}function sf(t){return"density"in t}function uf(t){return"quantile"in t}function cf(t){return"regression"in t}function lf(t){return"loess"in t}function ff(t){return"sample"in t}function df(t){return"window"in t}function hf(t){return"joinaggregate"in t}function pf(t){return"flatten"in t}function gf(t){return"calculate"in t}function mf(t){return"bin"in t}function vf(t){return"impute"in t}function yf(t){return"timeUnit"in t}function bf(t){return"aggregate"in t}function xf(t){return"stack"in t}function wf(t){return"fold"in t}function Of(t){return t.map(t=>tf(t)?{filter:m(t.filter,mo)}:t)}var _f=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class jf extends kl{map(t,e){var n,r;return null!==(n=e.emptySelections)&&void 0!==n||(e.emptySelections={}),null!==(r=e.selectionPredicates)&&void 0!==r||(e.selectionPredicates={}),t=Ef(t,e),super.map(t,e)}mapLayerOrUnit(t,e){if(t=Ef(t,e),t.encoding){const n={};for(const[r,i]of L(t.encoding))n[r]=kf(i,e);t=Object.assign(Object.assign({},t),{encoding:n})}return super.mapLayerOrUnit(t,e)}mapUnit(t,e){const n=t,{selection:r}=n,i=_f(n,["selection"]);return r?Object.assign(Object.assign({},i),{params:L(r).map(([t,n])=>{var r;const i=n,{init:o,bind:a,empty:s}=i,u=_f(i,["init","bind","empty"]);"single"===u.type?(u.type="point",u.toggle=!1):"multi"===u.type&&(u.type="point"),e.emptySelections[t]="none"!==s;for(const c of R(null!==(r=e.selectionPredicates[t])&&void 0!==r?r:{}))c.empty="none"!==s;return{name:t,value:o,select:u,bind:a}})}):t}}function Ef(t,e){const{transform:n}=t,r=_f(t,["transform"]);if(n){const t=n.map(t=>{if(tf(t))return{filter:Sf(t,e)};if(mf(t)&&yn(t.bin))return Object.assign(Object.assign({},t),{bin:Af(t.bin)});if(nf(t)){const e=t.from,{selection:n}=e,r=_f(e,["selection"]);return n?Object.assign(Object.assign({},t),{from:Object.assign({param:n},r)}):t}return t});return Object.assign(Object.assign({},r),{transform:t})}return t}function kf(t,e){var n,r;const i=y(t);if(Ns(i)&&yn(i.bin)&&(i.bin=Af(i.bin)),Is(i)&&(null===(r=null===(n=i.scale)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.selection)){const t=i.scale.domain,{selection:e}=t,n=_f(t,["selection"]);i.scale.domain=Object.assign(Object.assign({},n),e?{param:e}:{})}if(Cs(i))if(Object(Zl["isArray"])(i.condition))i.condition=i.condition.map(t=>{const{selection:n,param:r,test:i}=t,o=_f(t,["selection","param","test"]);return r?t:Object.assign(Object.assign({},o),{test:Sf(t,e)})});else{const t=kf(i.condition,e),{selection:n,param:r,test:o}=t,a=_f(t,["selection","param","test"]);i.condition=r?i.condition:Object.assign(Object.assign({},a),{test:Sf(i.condition,e)})}return i}function Af(t){const e=t.extent;if(null===e||void 0===e?void 0:e.selection){const{selection:n}=e,r=_f(e,["selection"]);return Object.assign(Object.assign({},t),{extent:Object.assign(Object.assign({},r),{param:n})})}return t}function Sf(t,e){const n=t=>m(t,t=>{var n,r,i;const o=null===(n=e.emptySelections[t])||void 0===n||n,a={param:t,empty:o};return null!==(r=(i=e.selectionPredicates)[t])&&void 0!==r||(i[t]=[]),e.selectionPredicates[t].push(a),a});return t.selection?n(t.selection):m(t.test||t.filter,t=>t.selection?n(t.selection):t)}class Cf extends kl{map(t,e){var n;const r=null!==(n=e.selections)&&void 0!==n?n:[];if(t.params&&!Mu(t)){const e=[];for(const n of t.params)Bc(n)?r.push(n):e.push(n);t.params=e}return e.selections=r,super.map(t,Df(t,e))}mapUnit(t,e){var n;const r=e.selections;if(!r||!r.length)return t;const i=(null!==(n=e.path)&&void 0!==n?n:[]).concat(t.name),o=[];for(const a of r)if(a.views&&a.views.length)for(const e of a.views)(Object(Zl["isString"])(e)&&(e===t.name||i.indexOf(e)>=0)||Object(Zl["isArray"])(e)&&e.map(t=>i.indexOf(t)).every((t,e,n)=>-1!==t&&(0===e||t>n[e-1])))&&o.push(a);else o.push(a);return o.length&&(t.params=o),t}}for(const Yb of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Cf.prototype[Yb];Cf.prototype[Yb]=function(e,n){return t.call(this,e,Df(e,n))}}function Df(t,e){var n;return t.name?Object.assign(Object.assign({},e),{path:(null!==(n=e.path)&&void 0!==n?n:[]).concat(t.name)}):e}function Mf(t,e){void 0===e&&(e=gl(t.config));const n=$f(t,e),{width:r,height:i}=t,o=Rf(n,{width:r,height:i,autosize:t.autosize},e);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const Tf=new Jl,Nf=new jf,Ff=new Cf;function $f(t,e={}){const n={config:e};return Ff.map(Tf.map(Nf.map(t,n),n),n)}function Pf(t){return Object(o["J"])(t)?{type:t}:null!==t&&void 0!==t?t:{}}function Rf(t,e,n){let{width:i,height:o}=e;const a=Mu(t)||Ol(t),s={};a?"container"==i&&"container"==o?(s.type="fit",s.contains="padding"):"container"==i?(s.type="fit-x",s.contains="padding"):"container"==o&&(s.type="fit-y",s.contains="padding"):("container"==i&&(Ai(r.containerSizeNonSingle("width")),i=void 0),"container"==o&&(Ai(r.containerSizeNonSingle("height")),o=void 0));const u=Object.assign(Object.assign(Object.assign({type:"pad"},s),n?Pf(n.autosize):{}),Pf(t.autosize));if("fit"!==u.type||a||(Ai(r.FIT_NON_SINGLE),u.type="pad"),"container"==i&&"fit"!=u.type&&"fit-x"!=u.type&&Ai(r.containerSizeNotCompatibleWithAutosize("width")),"container"==o&&"fit"!=u.type&&"fit-y"!=u.type&&Ai(r.containerSizeNotCompatibleWithAutosize("height")),!v(u,{type:"pad"}))return u}function Lf(t){return"fit"===t||"fit-x"===t||"fit-y"===t}function zf(t){return t?"fit-"+$e(t):"fit"}const Bf=["background","padding"];function If(t,e){const n={};for(const r of Bf)t&&void 0!==t[r]&&(n[r]=Rn(t[r]));return e&&(n.params=t.params),n}class Uf{constructor(t={},e={}){this.explicit=t,this.implicit=e}clone(){return new Uf(y(this.explicit),y(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return Q(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:e,explicit:n}){void 0!==e&&this.set(t,e,n)}set(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this}copyKeyFromSplit(t,{explicit:e,implicit:n}){void 0!==e[t]?this.set(t,e[t],!0):void 0!==n[t]&&this.set(t,n[t],!1)}copyKeyFromObject(t,e){void 0!==e[t]&&this.set(t,e[t],!0)}copyAll(t){for(const e of P(t.combine())){const n=t.getWithExplicit(e);this.setWithExplicit(e,n)}}}function qf(t){return{explicit:!0,value:t}}function Hf(t){return{explicit:!1,value:t}}function Wf(t){return(e,n,r,i)=>{const o=t(e.value,n.value);return o>0?e:o<0?n:Gf(e,n,r,i)}}function Gf(t,e,n,i){return t.explicit&&e.explicit&&Ai(r.mergeConflictingProperty(n,i,t.value,e.value)),t}function Yf(t,e,n,r,i=Gf){return void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:v(t.value,e.value)?t:i(t,e,n,r)}class Vf extends Uf{constructor(t={},e={},n=!1){super(t,e),this.explicit=t,this.implicit=e,this.parseNothing=n}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Xf(t){return"url"in t}function Jf(t){return"values"in t}function Qf(t){return"name"in t&&!Xf(t)&&!Jf(t)&&!Kf(t)}function Kf(t){return t&&(Zf(t)||td(t)||ed(t))}function Zf(t){return"sequence"in t}function td(t){return"sphere"in t}function ed(t){return"graticule"in t}var nd;(function(t){t[t["Raw"]=0]="Raw",t[t["Main"]=1]="Main",t[t["Row"]=2]="Row",t[t["Column"]=3]="Column",t[t["Lookup"]=4]="Lookup"})(nd||(nd={}));var rd=n("5554"),id=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function od(t,e=!0,n=o["y"]){if(Object(o["B"])(t)){const r=t.map(t=>od(t,e,n));return e?`[${r.join(", ")}]`:r}return Ci(t)?n(e?Li(t):Bi(t)):e?n(w(t)):t}function ad(t,e){var n;for(const r of R(null!==(n=t.component.selection)&&void 0!==n?n:{})){const n=r.name;let i=`${n}${Hh}, `+("global"===r.resolve?"true":`{unit: ${Xh(t)}}`);for(const o of Yh)o.defined(r)&&(o.signals&&(e=o.signals(t,r,e)),o.modifyExpr&&(i=o.modifyExpr(t,r,i)));e.push({name:n+Wh,on:[{events:{signal:r.name+Hh},update:`modify(${Object(o["bb"])(r.name+qh)}, ${i})`}]})}return hd(e)}function sd(t,e){if(t.component.selection&&P(t.component.selection).length){const n=Object(o["bb"])(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:Object(rd["a"])("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return hd(e)}function ud(t,e){var n;let r=!1;for(const i of R(null!==(n=t.component.selection)&&void 0!==n?n:{})){const n=i.name,a=Object(o["bb"])(n+qh),s=e.filter(t=>t.name===n);if(0===s.length){const t="global"===i.resolve?"union":i.resolve,n="point"===i.type?", true, true)":")";e.push({name:i.name,update:`${Gh}(${a}, ${Object(o["bb"])(t)}${n}`})}r=!0;for(const r of Yh)r.defined(i)&&r.topLevelSignals&&(e=r.topLevelSignals(t,i,e))}if(r){const t=e.filter(t=>"unit"===t.name);0===t.length&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return hd(e)}function cd(t,e){var n;const r=[...e];for(const i of R(null!==(n=t.component.selection)&&void 0!==n?n:{})){const e={name:i.name+qh};if(i.init){const n=i.project.items.map(t=>{const{signals:e}=t,n=id(t,["signals"]);return n});e.values=i.init.map(e=>({unit:Xh(t,{escape:!1}),fields:n,values:od(e,!1)}))}const n=r.filter(t=>t.name===i.name+qh);n.length||r.push(e)}return r}function ld(t,e){var n;for(const r of R(null!==(n=t.component.selection)&&void 0!==n?n:{}))for(const n of Yh)n.defined(r)&&n.marks&&(e=n.marks(t,r,e));return e}function fd(t,e){for(const n of t.children)Zv(n)&&(e=ld(n,e));return e}function dd(t,e,n,r){const i=ap(t,e.param,e);return{signal:Uo(n.get("type"))&&Object(o["B"])(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function hd(t){return t.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class pd{constructor(t,e){this.debugName=e,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,e){this._children.includes(t)?Ai(r.ADD_SAME_CHILD_TWICE):void 0!==e?this._children.splice(e,0,t):this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);return this._children.splice(e,1),e}remove(){let t=this._parent.removeChild(this);for(const e of this._children)e._parent=this._parent,this._parent.addChild(e,t++)}insertAsParentOf(t){const e=t.parent;e.removeChild(this),this.parent=e,t.parent=this}swapWithParent(){const t=this._parent,e=t.parent;for(const n of this._children)n.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=e,t.parent=this}}class gd extends pd{constructor(t,e,n,r){super(t,e),this.type=n,this.refCounts=r,this._source=this._name=e,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash="Output "+Z()),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}var md=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class vd extends pd{constructor(t,e){super(t),this.formula=e}clone(){return new vd(null,y(this.formula))}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,e)=>{const{field:n,timeUnit:r}=e;if(r){const i=Ys(e,{forAs:!0});t[O({as:i,field:n,timeUnit:r})]={as:i,field:n,timeUnit:r}}return t},{});return $(n)?null:new vd(t,n)}static makeFromTransform(t,e){const n=Object.assign({},e),{timeUnit:r}=n,i=md(n,["timeUnit"]),o=Zi(r),a=Object.assign(Object.assign({},i),{timeUnit:o});return new vd(t,{[O(a)]:a})}merge(t){this.formula=Object.assign({},this.formula);for(const e in t.formula)this.formula[e]||(this.formula[e]=t.formula[e]);for(const e of t.children)t.removeChild(e),e.parent=this;t.remove()}removeFormulas(t){const e={};for(const[n,r]of L(this.formula))t.has(r.as)||(e[n]=r);this.formula=e}producedFields(){return new Set(R(this.formula).map(t=>t.as))}dependentFields(){return new Set(R(this.formula).map(t=>t.field))}hash(){return"TimeUnit "+O(this.formula)}assemble(){const t=[];for(const e of R(this.formula)){const{field:n,as:r,timeUnit:i}=e,o=Zi(i),{unit:a,utc:s}=o,u=md(o,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Y(n),type:"timeunit"},a?{units:Vi(a)}:{}),s?{timezone:"utc"}:{}),u),{as:[r,r+"_end"]}))}return t}}var yd=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const bd="_tuple_fields";class xd{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const wd={defined:()=>!0,parse:(t,e,n)=>{var i;const a=e.name,s=null!==(i=e.project)&&void 0!==i?i:e.project=new xd,u={},c={},l=new Set,f=(t,e)=>{const n="visual"===e?t.channel:t.field;let r=B(`${a}_${n}`);for(let i=1;l.has(r);i++)r=B(`${a}_${n}_${i}`);return l.add(r),{[e]:r}},d=e.type,h=t.config.selection[d],p=void 0!==n.value?Object(o["i"])(n.value):null;let{fields:g,encodings:m}=Object(o["H"])(n.select)?n.select:{};if(!g&&!m&&p)for(const v of p)if(Object(o["H"])(v))for(const t of P(v))se(t)?(m||(m=[])).push(t):"interval"===d?(Ai(r.INTERVAL_INITIALIZED_WITH_X_Y),m=h.encodings):(g||(g=[])).push(t);g||m||(m=h.encodings,g=h.fields);for(const o of null!==m&&void 0!==m?m:[]){const e=t.fieldDef(o);if(e){let n=e.field;if(e.aggregate){Ai(r.cannotProjectAggregate(o,e.aggregate));continue}if(!n){Ai(r.cannotProjectOnChannelWithoutField(o));continue}if(e.timeUnit){n=t.vgField(o);const r={timeUnit:e.timeUnit,as:n,field:e.field};c[O(r)]=r}if(!u[n]){let r="E";if("interval"===d){const e=t.getScaleComponent(o).get("type");Uo(e)&&(r="R")}else e.bin&&(r="R-RE");const i={field:n,channel:o,type:r};i.signals=Object.assign(Object.assign({},f(i,"data")),f(i,"visual")),s.items.push(u[n]=i),s.hasField[n]=s.hasChannel[o]=u[n]}}else Ai(r.cannotProjectOnChannelWithoutField(o))}for(const r of null!==g&&void 0!==g?g:[]){if(s.hasField[r])continue;const t={type:"E",field:r};t.signals=Object.assign({},f(t,"data")),s.items.push(t),s.hasField[r]=t}p&&(e.init=p.map(t=>s.items.map(e=>Object(o["H"])(t)?void 0!==t[e.channel]?t[e.channel]:t[e.field]:t))),$(c)||(s.timeUnit=new vd(null,c))},signals:(t,e,n)=>{const r=e.name+bd,i=n.filter(t=>t.name===r);return i.length>0?n:n.concat({name:r,value:e.project.items.map(t=>{const{signals:e,hasLegend:n}=t,r=yd(t,["signals","hasLegend"]);return r.field=Y(r.field),r})})}};var Od=wd;const _d={defined:t=>"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind,parse:(t,e)=>{const n=e.scales=[];for(const i of e.project.items){const o=i.channel;if(!Je(o))continue;const a=t.getScaleComponent(o),s=a?a.get("type"):void 0;a&&Uo(s)?(a.set("selectionExtent",{param:e.name,field:i.field},!0),n.push(i)):Ai(r.SCALE_BINDINGS_CONTINUOUS)}},topLevelSignals:(t,e,n)=>{const r=e.scales.filter(t=>0===n.filter(e=>e.name===t.signals.data).length);if(!t.parent||kd(t)||0===r.length)return n;const i=n.filter(t=>t.name===e.name)[0];let a=i.update;if(a.indexOf(Gh)>=0)i.update=`{${r.map(t=>`${Object(o["bb"])(Y(t.field))}: ${t.signals.data}`).join(", ")}}`;else{for(const t of r){const e=`${Object(o["bb"])(Y(t.field))}: ${t.signals.data}`;a.includes(e)||(a=`${a.substring(0,a.length-1)}, ${e}}`)}i.update=a}return n.concat(r.map(t=>({name:t.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!kd(t))for(const r of e.scales){const t=n.filter(t=>t.name===r.signals.data)[0];t.push="outer",delete t.value,delete t.update}return n}};var jd=_d;function Ed(t,e){const n=Object(o["bb"])(t.scaleName(e));return`domain(${n})`}function kd(t){var e;return t.parent&&ny(t.parent)&&(null!==(e=!t.parent.parent)&&void 0!==e?e:kd(t.parent.parent))}var Ad=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Sd="_brush",Cd="_scale_trigger",Dd={defined:t=>"interval"===t.type,signals:(t,e,n)=>{const r=e.name,i=r+bd,a=jd.defined(e),s=e.init?e.init[0]:null,u=[],c=[];if(e.translate&&!a){const t="!event.item || event.item.mark.name !== "+Object(o["bb"])(r+Sd);Nd(e,(e,n)=>{var r,i;const a=Object(o["i"])(null!==(r=(i=n.between[0]).filter)&&void 0!==r?r:i.filter=[]);return a.includes(t)||a.push(t),e})}e.project.items.forEach((r,i)=>{const a=r.channel;if(a!==ct&&a!==lt)return void Ai("Interval selections only support x and y encoding channels.");const l=s?s[i]:null,f=Td(t,e,r,l),d=r.signals.data,h=r.signals.visual,p=Object(o["bb"])(t.scaleName(a)),g=t.getScaleComponent(a).get("type"),m=Uo(g)?"+":"";n.push(...f),u.push(d),c.push({scaleName:t.scaleName(a),expr:`(!isArray(${d}) || (${m}invert(${p}, ${h})[0] === ${m}${d}[0] && ${m}invert(${p}, ${h})[1] === ${m}${d}[1]))`})}),a||n.push({name:r+Cd,value:{},on:[{events:c.map(t=>({scale:t.scaleName})),update:`${c.map(t=>t.expr).join(" && ")} ? ${r+Cd} : {}`}]});const l=`unit: ${Xh(t)}, fields: ${i}, values`;return n.concat(Object.assign(Object.assign({name:r+Hh},s?{init:`{${l}: ${od(s)}}`}:{}),{on:[{events:[{signal:u.join(" || ")}],update:`${u.join(" && ")} ? {${l}: [${u}]} : null`}]}))},marks:(t,e,n)=>{const r=e.name,{x:i,y:a}=e.project.hasChannel,s=i&&i.signals.visual,u=a&&a.signals.visual,c=`data(${Object(o["bb"])(e.name+qh)})`;if(jd.defined(e))return n;const l={x:void 0!==i?{signal:s+"[0]"}:{value:0},y:void 0!==a?{signal:u+"[0]"}:{value:0},x2:void 0!==i?{signal:s+"[1]"}:{field:{group:"width"}},y2:void 0!==a?{signal:u+"[1]"}:{field:{group:"height"}}};if("global"===e.resolve)for(const o of P(l))l[o]=[Object.assign({test:`${c}.length && ${c}[0].unit === ${Xh(t)}`},l[o]),{value:0}];const f=e.mark,{fill:d,fillOpacity:h,cursor:p}=f,g=Ad(f,["fill","fillOpacity","cursor"]),m=P(g).reduce((t,e)=>(t[e]=[{test:[void 0!==i&&`${s}[0] !== ${s}[1]`,void 0!==a&&`${u}[0] !== ${u}[1]`].filter(t=>t).join(" && "),value:g[e]},{value:null}],t),{});return[{name:r+Sd+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:l}},...n,{name:r+Sd,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},p?{cursor:{value:p}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},l),m)}}]}};var Md=Dd;function Td(t,e,n,r){const i=n.channel,a=n.signals.visual,s=n.signals.data,u=jd.defined(e),c=Object(o["bb"])(t.scaleName(i)),l=t.getScaleComponent(i),f=l?l.get("type"):void 0,d=t=>`scale(${c}, ${t})`,h=t.getSizeSignalRef(i===ct?"width":"height").signal,p=i+"(unit)",g=Nd(e,(t,e)=>[...t,{events:e.between[0],update:`[${p}, ${p}]`},{events:e,update:`[${a}[0], clamp(${p}, 0, ${h})]`}]);return g.push({events:{signal:e.name+Cd},update:Uo(f)?`[${d(s+"[0]")}, ${d(s+"[1]")}]`:"[0, 0]"}),u?[{name:s,on:[]}]:[Object.assign(Object.assign({name:a},r?{init:od(r,!0,d)}:{value:[]}),{on:g}),Object.assign(Object.assign({name:s},r?{init:od(r)}:{}),{on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${c}, ${a})`}]})]}function Nd(t,e){return t.events.reduce((t,n)=>n.between?e(t,n):(Ai(n+" is not an ordered event stream for interval selections."),t),[])}const Fd={defined:t=>"point"===t.type,signals:(t,e,n)=>{const r=e.name,i=r+bd,a=e.project,s="(item().isVoronoi ? datum.datum : datum)",u=a.items.map(e=>{const n=t.fieldDef(e.channel);return n&&n.bin?`[${s}[${Object(o["bb"])(t.vgField(e.channel,{}))}], ${s}[${Object(o["bb"])(t.vgField(e.channel,{binSuffix:"end"}))}]]`:`${s}[${Object(o["bb"])(e.field)}]`}).join(", "),c=`unit: ${Xh(t)}, fields: ${i}, values`,l=e.events;return n.concat([{name:r+Hh,on:l?[{events:l,update:`datum && item().mark.marktype !== 'group' ? {${c}: [${u}]} : null`,force:!0}]:[]}])}};var $d=Fd;function Pd(t,e,n,r){const i=Cs(e)&&e.condition,a=r(e);if(i){const e=Object(o["i"])(i),s=e.map(e=>{const n=r(e);if(Os(e)){const{param:r,empty:i}=e,o=op(t,{param:r,empty:i});return Object.assign({test:o},n)}{const r=up(t,e.test);return Object.assign({test:r},n)}});return{[n]:[...s,...void 0!==a?[a]:[]]}}return void 0!==a?{[n]:a}:{}}function Rd(t,e="text"){const n=t.encoding[e];return Pd(t,n,e,e=>Ld(e,t.config))}function Ld(t,e,n="datum"){if(t){if(Bs(t))return zn(t.value);if(Ls(t)){const{format:r,formatType:i}=au(t);return es({fieldOrDatumDef:t,format:r,formatType:i,expr:n,config:e})}}}function zd(t,e={}){const{encoding:n,markDef:r,config:i,stack:a}=t,s=n.tooltip;if(Object(o["B"])(s))return{tooltip:Id({tooltip:s},a,i,e)};{const u=e.reactiveGeom?"datum.datum":"datum";return Pd(t,s,"tooltip",t=>{const s=Ld(t,i,u);if(s)return s;if(null===t)return;let c=Hn("tooltip",r,i);return!0===c&&(c={content:"encoding"}),Object(o["J"])(c)?{value:c}:Object(o["H"])(c)?kn(c)?c:"encoding"===c.content?Id(n,a,i,e):{signal:u}:void 0})}}function Bd(t,e,n,{reactiveGeom:r}={}){const i={},a=r?"datum.datum":"datum",s=[];function u(r,u){const c=fe(u),l=zs(r)?r:Object.assign(Object.assign({},r),{type:t[c].type}),f=l.title||ou(l,n),d=Object(o["i"])(f).join(", ");let h;if(Te(u)){const r="x"===u?"x2":"y2",o=uu(t[r]);if(vn(l.bin)&&o){const t=Ys(l,{expr:a}),e=Ys(o,{expr:a}),{format:s,formatType:u}=au(l);h=ls(t,e,s,u,n),i[r]=!0}else if(e&&e.fieldChannel===u&&"normalize"===e.offset){const{format:t,formatType:e}=au(l);h=es({fieldOrDatumDef:l,format:t,formatType:e,expr:a,config:n,normalizeStack:!0}).signal}}null!==h&&void 0!==h||(h=Ld(l,n,a).signal),s.push({channel:u,key:d,value:h})}Iu(t,(t,e)=>{Ns(t)?u(t,e):Ds(t)&&u(t.condition,e)});const c={};for(const{channel:o,key:l,value:f}of s)i[o]||c[l]||(c[l]=f);return c}function Id(t,e,n,{reactiveGeom:r}={}){const i=Bd(t,e,n,{reactiveGeom:r}),o=L(i).map(([t,e])=>`"${t}": ${e}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Ud(t){const{markDef:e,config:n}=t,r=Hn("aria",e,n);return!1===r?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),qd(t)),Hd(t))}function qd(t){const{mark:e,markDef:n,config:r}=t;if(!1===r.aria)return{};const i=Hn("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:e in Nn?{}:{ariaRoleDescription:{value:e}}}function Hd(t){const{encoding:e,markDef:n,config:r,stack:i}=t,o=e.description;if(o)return Pd(t,o,"description",e=>Ld(e,t.config));const a=Hn("description",n,r);if(null!=a)return{description:zn(a)};if(!1===r.aria)return{};const s=Bd(e,i,r);return $(s)?void 0:{description:{signal:L(s).map(([t,e],n)=>`"${n>0?"; ":""}${t}: " + (${e})`).join(" + ")}}}function Wd(t,e,n={}){const{markDef:r,encoding:i,config:o}=e,{vgChannel:a}=n;let{defaultRef:s,defaultValue:u}=n;void 0===s&&(null!==u&&void 0!==u||(u=Hn(t,r,o,{vgChannel:a,ignoreVgConfig:!0})),void 0!==u&&(s=zn(u)));const c=i[t];return Pd(e,c,null!==a&&void 0!==a?a:t,n=>Ja({channel:t,channelDef:n,markDef:r,config:o,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:s}))}function Gd(t,e={filled:void 0}){var n,i,o,a;const{markDef:s,encoding:u,config:c}=t,{type:l}=s,f=null!==(n=e.filled)&&void 0!==n?n:Hn("filled",s,c),d=j(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,h=null!==(o=null!==(i=Hn(!0===f?"color":void 0,s,c,{vgChannel:"fill"}))&&void 0!==i?i:c.mark[!0===f&&"color"])&&void 0!==o?o:d,p=null!==(a=Hn(!1===f?"color":void 0,s,c,{vgChannel:"stroke"}))&&void 0!==a?a:c.mark[!1===f&&"color"],g=f?"fill":"stroke",m=Object.assign(Object.assign({},h?{fill:zn(h)}:{}),p?{stroke:zn(p)}:{});return s.color&&(f?s.fill:s.stroke)&&Ai(r.droppingColor("property",{fill:"fill"in s,stroke:"stroke"in s})),Object.assign(Object.assign(Object.assign(Object.assign({},m),Wd("color",t,{vgChannel:g,defaultValue:f?h:p})),Wd("fill",t,{defaultValue:u.fill?h:void 0})),Wd("stroke",t,{defaultValue:u.stroke?p:void 0}))}function Yd(t){const{encoding:e,mark:n}=t,r=e.order;return!_a(n)&&Bs(r)?Pd(t,r,"zindex",t=>zn(t.value)):{}}function Vd(t,e){const n=ge(t),r=e[n];if(r)return r}function Xd(t,e,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=e,u=i[t],c=i[he(t)],l=e.scaleName(t),f=e.getScaleComponent(t),d=Vd(t,o),h=Qd({model:e,defaultPos:n,channel:t,scaleName:l,scale:f}),p=!u&&Te(t)&&(i.latitude||i.longitude)?{field:e.getName(t)}:Jd({channel:t,channelDef:u,channel2Def:c,markDef:o,config:a,scaleName:l,scale:f,stack:s,offset:d,defaultRef:h});return p?{[r||t]:p}:void 0}function Jd(t){const{channel:e,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=t;if(Ls(n)&&i&&e===i.fieldChannel){if(Ns(n)){let t=n.bandPosition;if(void 0!==t||"text"!==a.type||"radius"!==e&&"theta"!==e||(t=.5),void 0!==t)return Xa({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:t,offset:o})}return Va(n,r,{suffix:"end"},{offset:o})}return qa(t)}function Qd({model:t,defaultPos:e,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=t;return()=>{const s=fe(n),u=de(n),c=Hn(n,o,a,{vgChannel:u});if(void 0!==c)return Qa(n,c);switch(e){case"zeroOrMin":case"zeroOrMax":if(r){const t=i.get("type");if(j([Eo.LOG,Eo.TIME,Eo.UTC],t));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===e)return"y"===s?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const e=t[pe(n)];return Object.assign(Object.assign({},e),{mult:.5})}}}}const Kd={left:"x",center:"xc",right:"x2"},Zd={top:"y",middle:"yc",bottom:"y2"};function th(t,e,n,i="middle"){if("radius"===t||"theta"===t)return de(t);const o="x"===t?"align":"baseline",a=Hn(o,e,n);let s;return kn(a)?(Ai(r.rangeMarkAlignmentCannotBeExpression(o)),s=void 0):s=a,"x"===t?Kd[s||("top"===i?"left":"center")]:Zd[s||i]}function eh(t,e,{defaultPos:n,defaultPos2:r,range:i}){return i?nh(t,e,{defaultPos:n,defaultPos2:r}):Xd(t,e,{defaultPos:n})}function nh(t,e,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=e,a=he(t),s=pe(t),u=rh(e,r,a),c=u[s]?th(t,i,o):de(t);return Object.assign(Object.assign({},Xd(t,e,{defaultPos:n,vgChannel:c})),u)}function rh(t,e,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=t,u=fe(n),c=pe(n),l=de(n),f=r[u],d=t.scaleName(u),h=t.getScaleComponent(u),p=Vd(n in r||n in o?n:u,t.markDef);if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude))return{[l]:{field:t.getName(n)}};const g=ih({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:h,stack:a,offset:p,defaultRef:void 0});return void 0!==g?{[l]:g}:oh(n,o)||oh(n,{[n]:Gn(n,o,s.style),[c]:Gn(c,o,s.style)})||oh(n,s[i])||oh(n,s.mark)||{[l]:Qd({model:t,defaultPos:e,channel:n,scaleName:d,scale:h})()}}function ih({channel:t,channelDef:e,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:c}){return Ls(e)&&s&&t.charAt(0)===s.fieldChannel.charAt(0)?Va(e,o,{suffix:"start"},{offset:u}):qa({channel:t,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:c})}function oh(t,e){const n=pe(t),i=de(t);if(void 0!==e[i])return{[i]:Qa(t,e[i])};if(void 0!==e[t])return{[i]:Qa(t,e[t])};if(e[n]){const i=e[n];if(!Pa(i))return{[n]:Qa(t,i)};Ai(r.relativeBandSizeNotSupported(n))}}function ah(t,e,n){var r,i,o,a;const{config:s,encoding:u,markDef:c}=t,l=he(e),f=pe(e),d=u[e],h=u[l],p=t.getScaleComponent(e),g=p?p.get("type"):void 0,m=t.scaleName(e),v=c.orient,y=null!==(i=null!==(r=u[f])&&void 0!==r?r:u.size)&&void 0!==i?i:Hn("size",c,s,{vgChannel:f}),b="bar"===n&&("x"===e?"vertical"===v:"horizontal"===v);if(!Ns(d)||!(mn(d.bin)||vn(d.bin)||d.timeUnit&&!h)||y&&!Pa(y)||Io(g))return(Ls(d)&&Io(g)||b)&&!h?uh(n,d,e,t):nh(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});{const n=As({channel:e,fieldDef:d,markDef:c,config:s,scaleType:g}),r=null===(o=t.component.axes[e])||void 0===o?void 0:o[0],i=null!==(a=null===r||void 0===r?void 0:r.get("translate"))&&void 0!==a?a:.5;return lh({fieldDef:d,fieldDef2:h,channel:e,markDef:c,scaleName:m,bandSize:n,axisTranslate:i,spacing:Te(e)?Hn("binSpacing",c,s):void 0,reverse:p.get("reverse"),config:s})}}function sh(t,e,n,i,a){if(Pa(a)){if(!n)return{mult:a.band,field:{group:t}};{const t=n.get("type");if("band"===t)return{scale:e,band:a.band};1!==a.band&&(Ai(r.cannotUseRelativeBandSizeWithNonBandScale(t)),a=void 0)}}else{if(kn(a))return a;if(a)return{value:a}}if(n){const t=n.get("range");if(An(t)&&Object(o["G"])(t.step))return{value:t.step-2}}const s=el(i.view,t);return{value:s-2}}function uh(t,e,n,i){const{markDef:a,encoding:s,config:u,stack:c}=i,l=a.orient,f=i.scaleName(n),d=i.getScaleComponent(n),h=pe(n),p=he(n),g="horizontal"===l&&"y"===n||"vertical"===l&&"x"===n;let m;(s.size||a.size)&&(g?m=Wd("size",i,{vgChannel:h,defaultRef:zn(a.size)}):Ai(r.cannotApplySizeToNonOrientedMark(a.type)));const v=As({channel:n,fieldDef:e,markDef:a,config:u,scaleType:null===d||void 0===d?void 0:d.get("type"),useVlSizeChannel:g});m=m||{[h]:sh(h,f,d,u,v)};const y="band"===(null===d||void 0===d?void 0:d.get("type"))&&"band"in m[h]?"top":"middle",b=th(n,a,u,y),x="xc"===b||"yc"===b,w=Vd(n,a),O=qa({channel:n,channelDef:e,markDef:a,config:u,scaleName:f,scale:d,stack:c,offset:w,defaultRef:Qd({model:i,defaultPos:"mid",channel:n,scaleName:f,scale:d}),bandPosition:x?.5:kn(v)?{signal:`(1-${v})/2`}:Pa(v)?(1-v.band)/2:0});if(h)return Object.assign({[b]:O},m);{const t=de(p),e=m[h],n=w?Object.assign(Object.assign({},e),{offset:w}):e;return{[b]:O,[t]:Object(o["B"])(O)?[O[0],Object.assign(Object.assign({},O[1]),{offset:n})]:Object.assign(Object.assign({},O),{offset:n})}}}function ch(t,e,n,r,i){if(Ut(t))return 0;const o="x"===t||"y2"===t?-e/2:e/2;if(kn(n)||kn(i)||kn(r)){const t=In(n),e=In(i),a=In(r),s=a?a+" + ":"",u=t?`(${t} ? -1 : 1) * `:"",c=e?`(${e} + ${o})`:o;return{signal:s+u+c}}return i=i||0,r+(n?-i-o:+i+o)}function lh({fieldDef:t,fieldDef2:e,channel:n,bandSize:i,scaleName:o,markDef:a,spacing:s=0,axisTranslate:u,reverse:c,config:l}){const f=he(n),d=de(n),h=de(f),p=Vd(n,a),g=kn(i)?{signal:`(1-${i.signal})/2`}:Pa(i)?(1-i.band)/2:.5;if(mn(t.bin)||t.timeUnit)return{[h]:fh({channel:n,fieldDef:t,scaleName:o,markDef:a,bandPosition:g,offset:ch(f,s,c,u,p),config:l}),[d]:fh({channel:n,fieldDef:t,scaleName:o,markDef:a,bandPosition:kn(g)?{signal:"1-"+g.signal}:1-g,offset:ch(n,s,c,u,p),config:l})};if(vn(t.bin)){const r=Va(t,o,{},{offset:ch(f,s,c,u,p)});if(Ns(e))return{[h]:r,[d]:Va(e,o,{},{offset:ch(n,s,c,u,p)})};if(yn(t.bin)&&t.bin.step)return{[h]:r,[d]:{signal:`scale("${o}", ${Ys(t,{expr:"datum"})} + ${t.bin.step})`,offset:ch(n,s,c,u,p)}}}Ai(r.channelRequiredForBinned(f))}function fh({channel:t,fieldDef:e,scaleName:n,markDef:r,bandPosition:i,offset:o,config:a}){const s=Xa({scaleName:n,fieldOrDatumDef:e,bandPosition:i,offset:o});return Ha({fieldDef:e,channel:t,markDef:r,ref:s,config:a})}const dh=new Set(["aria","width","height"]);function hh(t,e){const{fill:n,stroke:r}="include"===e.color?Gd(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},gh(t.markDef,e)),ph(t,"fill",n)),ph(t,"stroke",r)),Wd("opacity",t)),Wd("fillOpacity",t)),Wd("strokeOpacity",t)),Wd("strokeWidth",t)),Wd("strokeDash",t)),Yd(t)),zd(t)),Rd(t,"href")),Ud(t))}function ph(t,e,n){const{config:r,mark:i,markDef:a}=t,s=Hn("invalid",a,r);if("hide"===s&&n&&!_a(i)){const r=mh(t,{invalid:!0,channels:Xe});if(r)return{[e]:[{test:r,value:null},...Object(o["i"])(n)]}}return n?{[e]:n}:{}}function gh(t,e){return Tn.reduce((n,r)=>(dh.has(r)||void 0===t[r]||"ignore"===e[r]||(n[r]=zn(t[r])),n),{})}function mh(t,{invalid:e=!1,channels:n}){const r=n.reduce((e,n)=>{const r=t.getScaleComponent(n);if(r){const i=r.get("type"),o=t.vgField(n,{expr:"datum"});o&&Uo(i)&&(e[o]=!0)}return e},{}),i=P(r);if(i.length>0){const t=e?"||":"&&";return i.map(t=>Ga(t,e)).join(` ${t} `)}}function vh(t){const{config:e,markDef:n}=t,r=Hn("invalid",n,e);if(r){const e=yh(t,{channels:Me});if(e)return{defined:{signal:e}}}return{}}function yh(t,{invalid:e=!1,channels:n}){const r=n.reduce((e,n)=>{const r=t.getScaleComponent(n);if(r){const i=r.get("type"),o=t.vgField(n,{expr:"datum"});o&&Uo(i)&&(e[o]=!0)}return e},{}),i=P(r);if(i.length>0){const t=e?"||":"&&";return i.map(t=>Ga(t,e)).join(` ${t} `)}}function bh(t,e){if(void 0!==e)return{[t]:zn(e)}}const xh="voronoi",wh={defined:t=>"point"===t.type&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName(xh)},marks:(t,e,n)=>{const{x:i,y:o}=e.project.hasChannel,a=t.mark;if(_a(a))return Ai(r.nearestNotSupportForContinuous(a)),n;const s={name:t.getName(xh),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},zd(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!o?"datum.datum.x || 0":"0"},y:{expr:o||!i?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let u=0,c=!1;return n.forEach((e,n)=>{var r;const i=null!==(r=e.name)&&void 0!==r?r:"";i===t.component.mark[0].name?u=n:i.indexOf(xh)>=0&&(c=!0)}),c||n.splice(u+1,0,s),n}};var Oh=wh;const _h={defined:t=>"point"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind&&!Lc(t.bind),parse:(t,e,n)=>Qh(e,n),topLevelSignals:(t,e,n)=>{const r=e.name,i=e.project,a=e.bind,s=e.init&&e.init[0],u=Oh.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((t,i)=>{var c,l;const f=B(`${r}_${t.field}`),d=n.filter(t=>t.name===f);d.length||n.unshift(Object.assign(Object.assign({name:f},s?{init:od(s[i])}:{value:null}),{on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${u}[${Object(o["bb"])(t.field)}] : null`}]:[],bind:null!==(l=null!==(c=a[t.field])&&void 0!==c?c:a[t.channel])&&void 0!==l?l:a}))}),n},signals:(t,e,n)=>{const r=e.name,i=e.project,o=n.filter(t=>t.name===r+Hh)[0],a=r+bd,s=i.items.map(t=>B(`${r}_${t.field}`)),u=s.map(t=>t+" !== null").join(" && ");return s.length&&(o.update=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}};var jh=_h;const Eh="_toggle",kh={defined:t=>"point"===t.type&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+Eh,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+Hh,r=e.name+Eh;return`${r} ? null : ${n}, `+("global"===e.resolve?r+" ? null : true, ":`${r} ? null : {unit: ${Xh(t)}}, `)+`${r} ? ${n} : null`}};var Ah=kh;const Sh={defined:t=>void 0!==t.clear&&!1!==t.clear,parse:(t,e)=>{e.clear&&(e.clear=Object(o["J"])(e.clear)?Object(rd["a"])(e.clear,"view"):e.clear)},topLevelSignals:(t,e,n)=>{if(jh.defined(e))for(const r of e.project.items){const t=n.findIndex(t=>t.name===B(`${e.name}_${r.field}`));-1!==t&&n[t].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function r(t,r){-1!==t&&n[t].on&&n[t].on.push({events:e.clear,update:r})}if("interval"===e.type)for(const i of e.project.items){const t=n.findIndex(t=>t.name===i.signals.visual);if(r(t,"[0, 0]"),-1===t){const t=n.findIndex(t=>t.name===i.signals.data);r(t,"null")}}else{let t=n.findIndex(t=>t.name===e.name+Hh);r(t,"null"),Ah.defined(e)&&(t=n.findIndex(t=>t.name===e.name+Eh),r(t,"false"))}return n}};var Ch=Sh;const Dh={defined:t=>{const e="global"===t.resolve&&t.bind&&Lc(t.bind),n=1===t.project.items.length&&t.project.items[0].field!==Pc;return e&&!n&&Ai(r.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),e&&n},parse:(t,e,n)=>{var r;const i=y(n);if(i.select=Object(o["J"])(i.select)?{type:i.select,toggle:e.toggle}:Object.assign(Object.assign({},i.select),{toggle:e.toggle}),Qh(e,i),Object(Zl["isObject"])(n.select)&&(n.select.on||n.select.clear)){const t='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of e.events)n.filter=Object(o["i"])(null!==(r=n.filter)&&void 0!==r?r:[]),n.filter.includes(t)||n.filter.push(t)}const a=zc(e.bind)?e.bind.legend:"click",s=Object(o["J"])(a)?Object(rd["a"])(a,"view"):Object(o["i"])(a);e.bind={legend:{merge:s}}},topLevelSignals:(t,e,n)=>{const r=e.name,i=zc(e.bind)&&e.bind.legend,o=t=>e=>{const n=y(e);return n.markname=t,n};for(const a of e.project.items){if(!a.hasLegend)continue;const t=B(a.field)+"_legend",s=`${r}_${t}`,u=n.filter(t=>t.name===s);if(0===u.length){const r=i.merge.map(o(t+"_symbols")).concat(i.merge.map(o(t+"_labels"))).concat(i.merge.map(o(t+"_entries")));n.unshift(Object.assign(Object.assign({name:s},e.init?{}:{value:null}),{on:[{events:r,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:"!event.item || !datum ? null : "+s,force:!0}]}))}}return n},signals:(t,e,n)=>{const r=e.name,i=e.project,o=n.find(t=>t.name===r+Hh),a=r+bd,s=i.items.filter(t=>t.hasLegend).map(t=>B(`${r}_${B(t.field)}_legend`)),u=s.map(t=>t+" !== null").join(" && "),c=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;e.events&&s.length>0?o.on.push({events:s.map(t=>({signal:t})),update:c}):s.length>0&&(o.update=c,delete o.value,delete o.on);const l=n.find(t=>t.name===r+Eh),f=zc(e.bind)&&e.bind.legend;return l&&(e.events?l.on.push(Object.assign(Object.assign({},l.on[0]),{events:f})):l.on[0].events=f),n}};var Mh=Dh;function Th(t,e,n){var r,i,o,a;const s=null===(r=t.fieldDef(e))||void 0===r?void 0:r.field;for(const u of R(null!==(i=t.component.selection)&&void 0!==i?i:{})){const t=null!==(o=u.project.hasField[s])&&void 0!==o?o:u.project.hasChannel[e];if(t&&Dh.defined(u)){const e=null!==(a=n.get("selections"))&&void 0!==a?a:[];e.push(u.name),n.set("selections",e,!1),t.hasLegend=!0}}}const Nh="_translate_anchor",Fh="_translate_delta",$h={defined:t=>"interval"===t.type&&t.translate,signals:(t,e,n)=>{const r=e.name,i=jd.defined(e),o=r+Nh,{x:a,y:s}=e.project.hasChannel;let u=Object(rd["a"])(e.translate,"scope");return i||(u=u.map(t=>(t.between[0].markname=r+Sd,t))),n.push({name:o,value:{},on:[{events:u.map(t=>t.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==a?", extent_x: "+(i?Ed(t,ct):`slice(${a.signals.visual})`):"")+(void 0!==s?", extent_y: "+(i?Ed(t,lt):`slice(${s.signals.visual})`):"")+"}"}]},{name:r+Fh,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&Rh(t,e,a,"width",n),void 0!==s&&Rh(t,e,s,"height",n),n}};var Ph=$h;function Rh(t,e,n,r,i){var o,a;const s=e.name,u=s+Nh,c=s+Fh,l=n.channel,f=jd.defined(e),d=i.filter(t=>t.name===n.signals[f?"data":"visual"])[0],h=t.getSizeSignalRef(r).signal,p=t.getScaleComponent(l),g=p.get("type"),m=p.get("reverse"),v=f?l===ct?m?"":"-":m?"-":"":"",y=`${u}.extent_${l}`,b=`${v}${c}.${l} / ${f?""+h:`span(${y})`}`,x=f?"log"===g?"panLog":"symlog"===g?"panSymlog":"pow"===g?"panPow":"panLinear":"panLinear",w=f?"pow"===g?", "+(null!==(o=p.get("exponent"))&&void 0!==o?o:1):"symlog"===g?", "+(null!==(a=p.get("constant"))&&void 0!==a?a:1):"":"",O=`${x}(${y}, ${b}${w})`;d.on.push({events:{signal:c},update:f?O:`clampRange(${O}, 0, ${h})`})}const Lh="_zoom_anchor",zh="_zoom_delta",Bh={defined:t=>"interval"===t.type&&t.zoom,signals:(t,e,n)=>{const r=e.name,i=jd.defined(e),a=r+zh,{x:s,y:u}=e.project.hasChannel,c=Object(o["bb"])(t.scaleName(ct)),l=Object(o["bb"])(t.scaleName(lt));let f=Object(rd["a"])(e.zoom,"scope");return i||(f=f.map(t=>(t.markname=r+Sd,t))),n.push({name:r+Lh,on:[{events:f,update:i?"{"+[c?`x: invert(${c}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(t=>!!t).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&Uh(t,e,s,"width",n),void 0!==u&&Uh(t,e,u,"height",n),n}};var Ih=Bh;function Uh(t,e,n,r,i){var o,a;const s=e.name,u=n.channel,c=jd.defined(e),l=i.filter(t=>t.name===n.signals[c?"data":"visual"])[0],f=t.getSizeSignalRef(r).signal,d=t.getScaleComponent(u),h=d.get("type"),p=c?Ed(t,u):l.name,g=s+zh,m=`${s}${Lh}.${u}`,v=c?"log"===h?"zoomLog":"symlog"===h?"zoomSymlog":"pow"===h?"zoomPow":"zoomLinear":"zoomLinear",y=c?"pow"===h?", "+(null!==(o=d.get("exponent"))&&void 0!==o?o:1):"symlog"===h?", "+(null!==(a=d.get("constant"))&&void 0!==a?a:1):"":"",b=`${v}(${p}, ${m}, ${g}${y})`;l.on.push({events:{signal:g},update:c?b:`clampRange(${b}, 0, ${f})`})}const qh="_store",Hh="_tuple",Wh="_modify",Gh="vlSelectionResolve",Yh=[$d,Md,Od,Ah,jh,jd,Mh,Ch,Ph,Ih,Oh];function Vh(t){let e=t.parent;while(e){if(ty(e))break;e=e.parent}return e}function Xh(t,{escape:e}={escape:!0}){let n=e?Object(o["bb"])(t.name):t.name;const r=Vh(t);if(r){const{facet:t}=r;for(const e of Jt)t[e]&&(n+=` + '__facet_${e}_' + (facet[${Object(o["bb"])(r.vgField(e))}])`)}return n}function Jh(t){var e;return R(null!==(e=t.component.selection)&&void 0!==e?e:{}).reduce((t,e)=>t||e.project.items.some(t=>t.field===Pc),!1)}function Qh(t,e){!Object(Zl["isString"])(e.select)&&e.select.on||delete t.events,!Object(Zl["isString"])(e.select)&&e.select.clear||delete t.clear,!Object(Zl["isString"])(e.select)&&e.select.toggle||delete t.toggle}var Kh=n("f7ac");function Zh(t){const e=[];return"Identifier"===t.type?[t.name]:"Literal"===t.type?[t.value]:("MemberExpression"===t.type&&(e.push(...Zh(t.object)),e.push(...Zh(t.property))),e)}function tp(t){return"MemberExpression"===t.object.type?tp(t.object):"datum"===t.object.name}function ep(t){const e=Object(Kh["f"])(t),n=new Set;return e.visit(t=>{"MemberExpression"===t.type&&tp(t)&&n.add(Zh(t).slice(1).join("."))}),n}class np extends pd{constructor(t,e,n){super(t),this.model=e,this.filter=n,this.expr=up(this.model,this.filter,this),this._dependentFields=ep(this.expr)}clone(){return new np(null,this.model,y(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return"Filter "+this.expr}}var rp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function ip(t,e){var n;const r={},i=t.config.selection;if(!e||!e.length)return r;for(const a of e){const e=B(a.name),s=a.select,u=Object(o["J"])(s)?s:s.type,c=Object(o["H"])(s)?y(s):{type:u},l=i[u],{fields:f,encodings:d}=l,h=rp(l,["fields","encodings"]);for(const t in h)"mark"===t&&(c[t]=Object.assign(Object.assign({},h[t]),c[t])),void 0!==c[t]&&!0!==c[t]||(c[t]=null!==(n=h[t])&&void 0!==n?n:c[t]);const p=r[e]=Object.assign(Object.assign({},c),{name:e,type:u,init:a.value,bind:a.bind,events:Object(o["J"])(c.on)?Object(rd["a"])(c.on,"scope"):Object(o["i"])(y(c.on))});for(const n of Yh)n.defined(p)&&n.parse&&n.parse(t,p,a)}return r}function op(t,e,n,r="datum"){const i=Object(o["J"])(e)?e:e.param,a=B(i),s=Object(o["bb"])(a+qh);let u;try{u=t.getSelectionComponent(a,i)}catch(f){return"!!"+a}if(u.project.timeUnit){const e=null!==n&&void 0!==n?n:t.component.data.raw,r=u.project.timeUnit.clone();e.parent?r.insertAsParentOf(e):e.parent=r}const c=`vlSelectionTest(${s}, ${r}`+("global"===u.resolve?")":`, ${Object(o["bb"])(u.resolve)})`),l=`length(data(${s}))`;return!1===e.empty?`${l} && ${c}`:`!${l} || ${c}`}function ap(t,e,n){const r=B(e),i=n["encoding"];let a,s=n["field"];try{a=t.getSelectionComponent(r,e)}catch(u){return r}if(i||s){if(i&&!s){const t=a.project.items.filter(t=>t.channel===i);!t.length||t.length>1?(s=a.project.items[0].field,Ai((t.length?"Multiple ":"No ")+`matching ${Object(o["bb"])(i)} encoding found for selection ${Object(o["bb"])(n.param)}. `+`Using "field": ${Object(o["bb"])(s)}.`)):s=t[0].field}}else s=a.project.items[0].field,a.project.items.length>1&&Ai(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Object(o["bb"])(s)}.`);return`${a.name}[${Object(o["bb"])(Y(s))}]`}function sp(t,e){var n;for(const[r,i]of L(null!==(n=t.component.selection)&&void 0!==n?n:{})){const n=t.getName("lookup_"+r);t.component.data.outputNodes[n]=i.materialized=new gd(new np(e,t,{param:r}),n,nd.Lookup,t.component.data.outputNodeRefCounts)}}function up(t,e,n){return I(e,e=>Object(o["J"])(e)?e:eo(e)?op(t,e,n):po(e))}var cp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function lp(t,e){if(t)return Object(o["B"])(t)&&!En(t)?t.map(t=>ou(t,e)).join(", "):t}function fp(t,e,n,r){var i,o,a,s,u;null!==(i=t.encode)&&void 0!==i||(t.encode={}),null!==(o=(s=t.encode)[e])&&void 0!==o||(s[e]={}),null!==(a=(u=t.encode[e]).update)&&void 0!==a||(u.update={}),t.encode[e].update[n]=r}function dp(t,e,n,r={header:!1}){var i,a;const s=t.combine(),{disable:u,orient:c,scale:l,labelExpr:f,title:d,zindex:h}=s,p=cp(s,["disable","orient","scale","labelExpr","title","zindex"]);if(!u){for(const t in p){const n=Eu[t],r=p[t];if(n&&n!==e&&"both"!==n)delete p[t];else if(_u(r)){const{condition:e}=r,n=cp(r,["condition"]),i=Object(o["i"])(e),a=Ou[t];if(a){const{vgProp:e,part:r}=a,o=[...i.map(t=>{const{test:e}=t,n=cp(t,["test"]);return Object.assign({test:up(null,e)},n)}),n];fp(p,r,e,o),delete p[t]}else if(null===a){const e={signal:i.map(t=>{const{test:e}=t,n=cp(t,["test"]);return`${up(null,e)} ? ${Bn(n)} : `}).join("")+Bn(n)};p[t]=e}}else if(kn(r)){const e=Ou[t];if(e){const{vgProp:n,part:i}=e;fp(p,i,n,r),delete p[t]}}j(["labelAlign","labelBaseline"],t)&&null===p[t]&&delete p[t]}if("grid"===e){if(!p.grid)return;if(p.encode){const{grid:t}=p.encode;p.encode=Object.assign({},t?{grid:t}:{}),$(p.encode)&&delete p.encode}return Object.assign(Object.assign({scale:l,orient:c},p),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Q(h,0)})}{if(!r.header&&t.mainExtracted)return;if(void 0!==f){let t=f;(null===(a=null===(i=p.encode)||void 0===i?void 0:i.labels)||void 0===a?void 0:a.update)&&kn(p.encode.labels.update.text)&&(t=V(f,"datum.label",p.encode.labels.update.text.signal)),fp(p,"labels","text",{signal:t})}if(null===p.labelAlign&&delete p.labelAlign,p.encode){for(const e of ju)t.hasAxisPart(e)||delete p.encode[e];$(p.encode)&&delete p.encode}const e=lp(d,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:l,orient:c,grid:!1},e?{title:e}:{}),p),!1===n.aria?{aria:!1}:{}),{zindex:Q(h,0)})}}}function hp(t){const{axes:e}=t.component,n=[];for(const r of Me)if(e[r])for(const i of e[r])if(!i.get("disable")&&!i.get("gridScale")){const e="x"===r?"height":"width",i=t.getSizeSignalRef(e).signal;e!==i&&n.push({name:e,update:i})}return n}function pp(t,e){const{x:n=[],y:r=[]}=t;return[...n.map(t=>dp(t,"grid",e)),...r.map(t=>dp(t,"grid",e)),...n.map(t=>dp(t,"main",e)),...r.map(t=>dp(t,"main",e))].filter(t=>t)}function gp(t,e,n,r){return Object.assign.apply(null,[{},...t.map(t=>{if("axisOrient"===t){const t="x"===n?"bottom":"left",i=e["x"===n?"axisBottom":"axisLeft"]||{},o=e["x"===n?"axisTop":"axisRight"]||{},a=new Set([...P(i),...P(o)]),s={};for(const e of a.values())s[e]={signal:`${r["signal"]} === "${t}" ? ${In(i[e])} : ${In(o[e])}`};return s}return e[t]})])}function mp(t,e,n,r){const i="band"===e?["axisDiscrete","axisBand"]:"point"===e?["axisDiscrete","axisPoint"]:Fo(e)?["axisQuantitative"]:"time"===e||"utc"===e?["axisTemporal"]:[],o="x"===t?"axisX":"axisY",a=kn(n)?"axisOrient":"axis"+q(n),s=[...i,...i.map(t=>o+t.substr(4))],u=["axis",a,o];return{vlOnlyAxisConfig:gp(s,r,t,n),vgAxisConfig:gp(u,r,t,n),axisConfigStyle:vp([...u,...s],r)}}function vp(t,e){var n;const r=[{}];for(const i of t){let t=null===(n=e[i])||void 0===n?void 0:n.style;if(t){t=Object(o["i"])(t);for(const n of t)r.push(e.style[n])}}return Object.assign.apply(null,r)}function yp(t,e,n,r={}){var i;const o=Yn(t,n,e);if(void 0!==o)return{configFrom:"style",configValue:o};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==(null===(i=r[a])||void 0===i?void 0:i[t]))return{configFrom:a,configValue:r[a][t]};return{}}const bp={scale:({model:t,channel:e})=>t.scaleName(e),format:({fieldOrDatumDef:t,config:e,axis:n})=>{const{format:r,formatType:i}=n;return is(t,t.type,r,i,e,!0)},formatType:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:r}=t;return os(r,e,n)},grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>{var r;return null!==(r=e.grid)&&void 0!==r?r:xp(n,t)},gridScale:({model:t,channel:e})=>wp(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelAlign||Ep(e,n,r),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelBaseline||jp(e,n,r),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>{var r;return null!==(r=t.labelFlush)&&void 0!==r?r:kp(e.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{var r;return null!==(r=t.labelOverlap)&&void 0!==r?r:Ap(e.type,n,Ns(e)&&!!e.timeUnit,Ns(e)?e.sort:void 0)},orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var o;const a="x"===t?"width":"y"===t?"height":void 0,s=a?e.getSizeSignalRef(a):void 0;return null!==(o=n.tickCount)&&void 0!==o?o:Cp({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},title:({axis:t,model:e,channel:n})=>{if(void 0!==t.title)return t.title;const r=Dp(e,n);if(void 0!==r)return r;const i=e.typedFieldDef(n),o="x"===n?"x2":"y2",a=e.fieldDef(o);return Xn(i?[js(i)]:[],Ns(a)?[js(a)]:[])},values:({axis:t,fieldOrDatumDef:e})=>Mp(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>{var r;return null!==(r=t.zindex)&&void 0!==r?r:Tp(n,e)}};function xp(t,e){return!Io(t)&&Ns(e)&&!mn(null===e||void 0===e?void 0:e.bin)&&!vn(null===e||void 0===e?void 0:e.bin)}function wp(t,e){const n="x"===e?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function Op(t,e,n,r,i){const o=null===e||void 0===e?void 0:e.labelAngle;if(void 0!==o)return kn(o)?o:rt(o);{const{configValue:o}=yp("labelAngle",r,null===e||void 0===e?void 0:e.style,i);return void 0!==o?rt(o):n!==ct||!j([wo,bo],t.type)||Ns(t)&&t.timeUnit?void 0:270}}function _p(t){return`(((${t.signal} % 360) + 360) % 360)`}function jp(t,e,n,r){if(void 0!==t){if("x"===n){if(kn(t)){const n=_p(t),r=kn(e)?`(${e.signal} === "top")`:"top"===e;return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${r} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(kn(e)){const n=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${n} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)===("top"===e)?"bottom":"top"}if(kn(t)){const n=_p(t),i=kn(e)?`(${e.signal} === "left")`:"left"===e,o=r?'"middle"':"null";return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${o} : (45 <= ${n} && ${n} <= 135) === ${i} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return r?"middle":null;if(kn(e)){const n=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)===("left"===e)?"top":"bottom"}}function Ep(t,e,n){if(void 0===t)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(kn(t)){const n=_p(t),a=kn(e)?`(${e.signal} === "${o}")`:e===o;return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${a} ? "left" : "right"`}}if((t+i)%180===0)return r?null:"center";if(kn(e)){const n=i<t&&t<180+i?"===":"!==",r=`${e.signal} ${n} "${o}"`;return{signal:r+' ? "left" : "right"'}}return(i<t&&t<180+i)===(e===o)?"left":"right"}function kp(t,e){if("x"===e&&j(["quantitative","temporal"],t))return!0}function Ap(t,e,n,r){if(n&&!Object(o["H"])(r)||"nominal"!==t&&"ordinal"!==t)return"log"!==e&&"symlog"!==e||"greedy"}function Sp(t){return"x"===t?"bottom":"left"}function Cp({fieldOrDatumDef:t,scaleType:e,size:n,values:r}){var i;if(!r&&!Io(e)&&"log"!==e){if(Ns(t)){if(mn(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&j(["month","hours","day","quarter"],null===(i=Zi(t.timeUnit))||void 0===i?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Dp(t,e){const n="x"===e?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?Jn(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}function Mp(t,e){const n=t.values;return Object(o["B"])(n)?xu(e,n):kn(n)?n:void 0}function Tp(t,e){return"rect"===t&&Vs(e)?1:0}class Np extends pd{constructor(t,e){super(t),this.transform=e,this._dependentFields=ep(this.transform.calculate)}clone(){return new Np(null,y(this.transform))}static parseAllForSortIndex(t,e){return e.forEachFieldDef((e,n)=>{if(Is(e)&&vs(e.sort)){const{field:r,timeUnit:i}=e,o=e.sort,a=o.map((t,e)=>`${po({field:r,timeUnit:i,equal:t})} ? ${e} : `).join("")+o.length;t=new Np(t,{calculate:a,as:Fp(e,n,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return"Calculate "+O(this.transform)}}function Fp(t,e,n){return Ys(t,Object.assign({prefix:e,suffix:"sort_index"},null!==n&&void 0!==n?n:{}))}function $p(t,e){return j(["top","bottom"],e)?"column":j(["left","right"],e)||"row"===t?"row":"column"}function Pp(t,e,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return Q((e||{})[t],i[t],n.header[t])}function Rp(t,e,n,r){const i={};for(const o of t){const t=Pp(o,e||{},n,r);void 0!==t&&(i[o]=t)}return i}const Lp=["row","column"],zp=["header","footer"];function Bp(t,e){const n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Rp(["titleAnchor","titleAngle","titleOrient"],i.header,r,e),u=$p(e,s),c=rt(a);return{name:e+"-title",type:"group",role:u+"-title",title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===e?{orient:"left"}:{}),{style:"guide-title"}),Up(c,u)),Ip(u,c,o)),Jp(r,i,e,Cc,Ac))}}function Ip(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Ep(e,"row"===t?"left":"top","row"===t?"y":"x");return r?{align:r}:{}}function Up(t,e){const n=jp(t,"row"===e?"left":"top","row"===e?"y":"x",!0);return n?{baseline:n}:{}}function qp(t,e){const n=t.component.layoutHeaders[e],r=[];for(const i of zp)if(n[i])for(const o of n[i]){const a=Gp(t,e,i,n,o);null!=a&&r.push(a)}return r}function Hp(t,e){var n;const{sort:r}=t;return ms(r)?{field:Ys(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:Object(o["B"])(r)?{field:Fp(t,e,{expr:"datum"}),order:"ascending"}:{field:Ys(t,{expr:"datum"}),order:null!==r&&void 0!==r?r:"ascending"}}function Wp(t,e,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:u}=Rp(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,n,e),c=es({fieldOrDatumDef:t,format:r,formatType:i,expr:"parent",config:n}).signal,l=$p(e,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?V(V(u,"datum.label",c),"datum.value",Ys(t,{expr:"parent"})):c}},"row"===e?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Up(o,l)),Ip(l,o,a)),Jp(n,t,e,Dc,Sc))}function Gp(t,e,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=t.config?t.config:void 0;if(a&&i.labels){const{labelOrient:t}=Rp(["labelOrient"],a.header,s,e);("row"===e&&!j(["top","bottom"],t)||"column"===e&&!j(["left","right"],t))&&(o=Wp(a,e,s))}const u=ty(t)&&!ys(t.facet),c=i.axes,l=(null===c||void 0===c?void 0:c.length)>0;if(o||l){const s="row"===e?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`},r.facetFieldDef?{from:{data:t.getName(e+"_domain")},sort:Hp(a,e)}:{}),l&&u?{from:{data:t.getName("facet_domain_"+e)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{}),l?{axes:c}:{})}}return null}const Yp={column:{start:0,end:1},row:{start:1,end:0}};function Vp(t,e){return Yp[e][t]}function Xp(t,e){const n={};for(const r of Jt){const i=t[r];if(null===i||void 0===i?void 0:i.facetFieldDef){const{titleAnchor:t,titleOrient:o}=Rp(["titleAnchor","titleOrient"],i.facetFieldDef.header,e,r),a=$p(r,o),s=Vp(t,a);void 0!==s&&(n[a]=s)}}return $(n)?void 0:n}function Jp(t,e,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=Pp(a,null===e||void 0===e?void 0:e.header,t,n);void 0!==r&&(o[i[a]]=r)}return o}function Qp(t){return[...Kp(t,"width"),...Kp(t,"height"),...Kp(t,"childWidth"),...Kp(t,"childHeight")]}function Kp(t,e){const n="width"===e?"x":"y",r=t.component.layoutSize.get(e);if(!r||"merged"===r)return[];const i=t.getSizeSignalRef(e).signal;if("step"===r){const e=t.getScaleComponent(n);if(e){const r=e.get("type"),o=e.get("range");if(Io(r)&&An(o)){const r=t.scaleName(n);if(ty(t.parent)){const e=t.parent.component.resolve;if("independent"===e.scale[n])return[Zp(r,o)]}return[Zp(r,o),{name:i,update:tg(r,e,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const e=i.endsWith("width"),n=e?"containerSize()[0]":"containerSize()[1]",r=tl(t.config.view,e?"width":"height"),o=`isFinite(${n}) ? ${n} : ${r}`;return[{name:i,init:o,on:[{update:o,events:"window:resize"}]}]}return[{name:i,value:r}]}function Zp(t,e){return{name:t+"_step",value:e.step}}function tg(t,e,n){const r=e.get("type"),i=e.get("padding"),o=Q(e.get("paddingOuter"),i);let a=e.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,`bandspace(${n}, ${In(a)}, ${In(o)}) * ${t}_step`}function eg(t){return"childWidth"===t?"width":"childHeight"===t?"height":t}function ng(t,e){return P(t).reduce((n,r)=>{const i=t[r];return Object.assign(Object.assign({},n),Pd(e,i,r,t=>zn(t.value)))},{})}function rg(t,e){if(ny(e)||ty(e))return"shared";if(ey(e))return Te(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function ig(t,e){const n=t.scale[e],i=Te(e)?"axis":"legend";return"independent"===n?("shared"===t[i][e]&&Ai(r.independentScaleMeansIndependentGuide(e)),"independent"):t[i][e]||"shared"}const og=Object.assign(Object.assign({},$c),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),ag=P(og);class sg extends Uf{}const ug={symbols:cg,gradient:lg,labels:fg,entries:dg};function cg(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i,legendType:a}){var s,u,c,l,f,d,h,p;if("symbol"!==a)return;const{markDef:g,encoding:m,config:v,mark:y}=n,b=g.filled&&"trail"!==y;let x=Object.assign(Object.assign({},Un({},n,Ca)),Gd(n,{filled:b}));const w=null!==(s=i.get("symbolOpacity"))&&void 0!==s?s:v.legend.symbolOpacity,O=null!==(u=i.get("symbolFillColor"))&&void 0!==u?u:v.legend.symbolFillColor,_=null!==(c=i.get("symbolStrokeColor"))&&void 0!==c?c:v.legend.symbolStrokeColor,j=void 0===w?null!==(l=hg(m.opacity))&&void 0!==l?l:g.opacity:void 0;if(x.fill)if("fill"===r||b&&r===wt)delete x.fill;else if(x.fill["field"])O?delete x.fill:(x.fill=zn(null!==(f=v.legend.symbolBaseFillColor)&&void 0!==f?f:"black"),x.fillOpacity=zn(null!==j&&void 0!==j?j:1));else if(Object(o["B"])(x.fill)){const t=null!==(p=null!==(h=pg(null!==(d=m.fill)&&void 0!==d?d:m.color))&&void 0!==h?h:g.fill)&&void 0!==p?p:b&&g.color;t&&(x.fill=zn(t))}if(x.stroke)if("stroke"===r||!b&&r===wt)delete x.stroke;else if(x.stroke["field"]||_)delete x.stroke;else if(Object(o["B"])(x.stroke)){const t=Q(pg(m.stroke||m.color),g.stroke,b?g.color:void 0);t&&(x.stroke={value:t})}if(r!==At){const t=Ns(e)&&mg(n,i,e);t?x.opacity=[Object.assign({test:t},zn(null!==j&&void 0!==j?j:1)),zn(v.legend.unselectedOpacity)]:j&&(x.opacity=zn(j))}return x=Object.assign(Object.assign({},x),t),$(x)?void 0:x}function lg(t,{model:e,legendType:n,legendCmpt:r}){var i;if("gradient"!==n)return;const{config:o,markDef:a,encoding:s}=e;let u={};const c=null!==(i=r.get("gradientOpacity"))&&void 0!==i?i:o.legend.gradientOpacity,l=void 0===c?hg(s.opacity)||a.opacity:void 0;return l&&(u.opacity=zn(l)),u=Object.assign(Object.assign({},u),t),$(u)?void 0:u}function fg(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=Ns(e)?mg(n,i,e):void 0,u=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:c,formatType:l}=o,f=Ka(l)?rs({fieldOrDatumDef:e,field:"datum.value",format:c,formatType:l,config:a}):void 0,d=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),f?{text:f}:{}),t);return $(d)?void 0:d}function dg(t,{legendCmpt:e}){const n=e.get("selections");return(null===n||void 0===n?void 0:n.length)?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function hg(t){return gg(t,(t,e)=>Math.max(t,e.value))}function pg(t){return gg(t,(t,e)=>Q(t,e.value))}function gg(t,e){return Ts(t)?Object(o["i"])(t.condition).reduce(e,t.value):Bs(t)?t.value:void 0}function mg(t,e,n){const r=e.get("selections");if(!(null===r||void 0===r?void 0:r.length))return;const i=Object(o["bb"])(n.field);return r.map(t=>{const e=Object(o["bb"])(B(t)+qh);return`(!length(data(${e})) || (${t}[${i}] && indexof(${t}[${i}], datum.value) >= 0))`}).join(" || ")}const vg={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:r,formatType:i}=e;return is(t,t.type,r,i,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:r}=t;return os(r,e,n)},gradientLength:t=>{var e,n;const{legend:r,legendConfig:i}=t;return null!==(n=null!==(e=r.gradientLength)&&void 0!==e?e:i.gradientLength)&&void 0!==n?n:jg(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>{var r,i;return null!==(i=null!==(r=t.labelOverlap)&&void 0!==r?r:e.labelOverlap)&&void 0!==i?i:kg(n)},symbolType:({legend:t,markDef:e,channel:n,encoding:r})=>{var i;return null!==(i=t.symbolType)&&void 0!==i?i:bg(e.type,n,r.shape,e.shape)},title:({fieldOrDatumDef:t,config:e})=>ru(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if(Vt(n)&&qo(e)){if("gradient"===t)return}else if("symbol"===t)return;return t},values:({fieldOrDatumDef:t,legend:e})=>yg(e,t)};function yg(t,e){const n=t.values;return Object(o["B"])(n)?xu(e,n):kn(n)?n:void 0}function bg(t,e,n,r){var i;if("shape"!==e){const t=null!==(i=pg(n))&&void 0!==i?i:r;if(t)return t}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function xg(t){const{legend:e}=t;return Q(e.type,wg(t))}function wg({channel:t,timeUnit:e,scaleType:n}){if(Vt(t)){if(j(["quarter","month","day"],e))return"symbol";if(qo(n))return"gradient"}return"symbol"}function Og({legendConfig:t,legendType:e,orient:n,legend:r}){var i,o;return null!==(o=null!==(i=r.direction)&&void 0!==i?i:t[e?"gradientDirection":"symbolDirection"])&&void 0!==o?o:_g(n,e)}function _g(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===e?"horizontal":void 0}}function jg({legendConfig:t,model:e,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=t;if(qo(i))return"horizontal"===n?"top"===r||"bottom"===r?Eg(e,"width",a,o):a:Eg(e,"height",u,s)}function Eg(t,e,n,r){const i=t.getSizeSignalRef(e).signal;return{signal:`clamp(${i}, ${n}, ${r})`}}function kg(t){if(j(["quantile","threshold","log","symlog"],t))return"greedy"}function Ag(t){const e=Zv(t)?Sg(t):Tg(t);return t.component.legends=e,e}function Sg(t){const{encoding:e}=t,n={};for(const r of[wt,...Nc]){const i=cu(e[r]);i&&t.getScaleComponent(r)&&(r===jt&&Ns(i)&&i.type===Oo||(n[r]=Mg(t,r)))}return n}function Cg(t,e){const n=t.scaleName(e);if("trail"===t.mark){if("color"===e)return{stroke:n};if("size"===e)return{strokeWidth:n}}return"color"===e?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}function Dg(t,e,n,r){switch(e){case"disable":return void 0!==n;case"values":return!!(null===n||void 0===n?void 0:n.values);case"title":if("title"===e&&t===(null===r||void 0===r?void 0:r.title))return!0}return t===(n||{})[e]}function Mg(t,e){var n,r,i;let o=t.legend(e);const{markDef:a,encoding:s,config:u}=t,c=u.legend,l=new sg({},Cg(t,e));Th(t,e,l);const f=void 0!==o?!o:c.disable;if(l.set("disable",f,void 0!==o),f)return l;o=o||{};const d=t.getScaleComponent(e).get("type"),h=cu(s[e]),p=Ns(h)?null===(n=Zi(h.timeUnit))||void 0===n?void 0:n.unit:void 0,g=o.orient||u.legend.orient||"right",m=xg({legend:o,channel:e,timeUnit:p,scaleType:d}),v=Og({legend:o,legendType:m,orient:g,legendConfig:c}),y={legend:o,channel:e,model:t,markDef:a,encoding:s,fieldOrDatumDef:h,legendConfig:c,config:u,scaleType:d,orient:g,legendType:m,direction:v};for(const _ of ag){if("gradient"===m&&_.startsWith("symbol")||"symbol"===m&&_.startsWith("gradient"))continue;const n=_ in vg?vg[_](y):o[_];if(void 0!==n){const r=Dg(n,_,o,t.fieldDef(e));(r||void 0===u.legend[_])&&l.set(_,n,r)}}const b=null!==(r=null===o||void 0===o?void 0:o.encoding)&&void 0!==r?r:{},x=l.get("selections"),w={},O={fieldOrDatumDef:h,model:t,channel:e,legendCmpt:l,legendType:m};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const e=ng(null!==(i=b[_])&&void 0!==i?i:{},t),n=_ in ug?ug[_](e,O):e;void 0===n||$(n)||(w[_]=Object.assign(Object.assign(Object.assign({},(null===x||void 0===x?void 0:x.length)&&Ns(h)?{name:`${B(h.field)}_legend_${_}`}:{}),(null===x||void 0===x?void 0:x.length)?{interactive:!!x}:{}),{update:n}))}return $(w)||l.set("encode",w,!!(null===o||void 0===o?void 0:o.encoding)),l}function Tg(t){const{legends:e,resolve:n}=t.component;for(const r of t.children){Ag(r);for(const i of P(r.component.legends))n.legend[i]=ig(t.component.resolve,i),"shared"===n.legend[i]&&(e[i]=Ng(e[i],r.component.legends[i]),e[i]||(n.legend[i]="independent",delete e[i]))}for(const r of P(e))for(const e of t.children)e.component.legends[r]&&"shared"===n.legend[r]&&delete e.component.legends[r];return e}function Ng(t,e){var n,r,i,o;if(!t)return e.clone();const a=t.getWithExplicit("orient"),s=e.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;let u=!1;for(const c of ag){const n=Yf(t.getWithExplicit(c),e.getWithExplicit(c),c,"legend",(t,e)=>{switch(c){case"symbolType":return Fg(t,e);case"title":return Qn(t,e);case"type":return u=!0,Hf("symbol")}return Gf(t,e,c,"legend")});t.setWithExplicit(c,n)}return u&&((null===(r=null===(n=t.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&U(t.implicit,["encode","gradient"]),(null===(o=null===(i=t.explicit)||void 0===i?void 0:i.encode)||void 0===o?void 0:o.gradient)&&U(t.explicit,["encode","gradient"])),t}function Fg(t,e){return"circle"===e.value?e:t}var $g=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Pg(t,e,n,r){var i,o,a,s,u;null!==(i=t.encode)&&void 0!==i||(t.encode={}),null!==(o=(s=t.encode)[e])&&void 0!==o||(s[e]={}),null!==(a=(u=t.encode[e]).update)&&void 0!==a||(u.update={}),t.encode[e].update[n]=r}function Rg(t){const e=t.component.legends,n={};for(const i of P(e)){const r=t.getScaleComponent(i),o=w(r.get("domains"));if(n[o])for(const t of n[o]){const r=Ng(t,e[i]);r||n[o].push(e[i])}else n[o]=[e[i].clone()]}const r=R(n).flat().map(e=>Lg(e,t.config)).filter(t=>void 0!==t);return r}function Lg(t,e){var n,r,i;const o=t.combine(),{disable:a,labelExpr:s,selections:u}=o,c=$g(o,["disable","labelExpr","selections"]);if(!a){if(!1===e.aria&&void 0==c.aria&&(c.aria=!1),null===(n=c.encode)||void 0===n?void 0:n.symbols){const t=c.encode.symbols.update;!t.fill||"transparent"===t.fill["value"]||t.stroke||c.stroke||(t.stroke={value:"transparent"});for(const e of Nc)c[e]&&delete t[e]}if(c.title||delete c.title,void 0!==s){let t=s;(null===(i=null===(r=c.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&kn(c.encode.labels.update.text)&&(t=V(s,"datum.label",c.encode.labels.update.text.signal)),Pg(c,"labels","text",{signal:t})}return c}}function zg(t){return ny(t)||ey(t)?Bg(t):Ig(t)}function Bg(t){return t.children.reduce((t,e)=>t.concat(e.assembleProjections()),Ig(t))}function Ig(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:r}=n;if(e.data){const i={signal:`[${e.size.map(t=>t.signal).join(", ")}]`},o=e.data.reduce((e,n)=>{const r=kn(n)?n.signal:`data('${t.lookupDataSource(n)}')`;return j(e,r)||e.push(r),e},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const Ug=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class qg extends Uf{constructor(t,e,n,r){super(Object.assign({},e),{name:t}),this.specifiedProjection=e,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function Hg(t){t.component.projection=Zv(t)?Wg(t):Vg(t)}function Wg(t){var e;if(t.hasProjection){const n=On(t.specifiedProjection),r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,o=r?Gg(t):void 0,a=new qg(t.projectionName(!0),Object.assign(Object.assign({},null!==(e=On(t.config.projection))&&void 0!==e?e:{}),null!==n&&void 0!==n?n:{}),i,o);return a.get("type")||a.set("type","equalEarth",!1),a}}function Gg(t){const e=[],{encoding:n}=t;for(const r of[[yt,vt],[xt,bt]])(cu(n[r[0]])||cu(n[r[1]]))&&e.push({signal:t.getName("geojson_"+e.length)});return t.channelHasField(jt)&&t.typedFieldDef(jt).type===Oo&&e.push({signal:t.getName("geojson_"+e.length)}),0===e.length&&e.push(t.requestDataName(nd.Main)),e}function Yg(t,e){const n=k(Ug,n=>!Object(o["w"])(t.explicit,n)&&!Object(o["w"])(e.explicit,n)||!!(Object(o["w"])(t.explicit,n)&&Object(o["w"])(e.explicit,n)&&v(t.get(n),e.get(n)))),r=v(t.size,e.size);if(r){if(n)return t;if(v(t.explicit,{}))return e;if(v(e.explicit,{}))return t}return null}function Vg(t){if(0===t.children.length)return;let e;for(const r of t.children)Hg(r);const n=k(t.children,t=>{const n=t.component.projection;if(n){if(e){const t=Yg(e,n);return t&&(e=t),!!t}return e=n,!0}return!0});if(e&&n){const n=t.projectionName(!0),r=new qg(n,e.specifiedProjection,e.size,y(e.data));for(const e of t.children){const t=e.component.projection;t&&(t.isFit&&r.data.push(...e.component.projection.data),e.renameProjection(t.get("name"),n),t.merged=!0)}return r}}var Xg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Jg(t,e,n,r){var i,o;if(wu(e,n)){const a=Zv(t)&&null!==(o=null!==(i=t.axis(n))&&void 0!==i?i:t.legend(n))&&void 0!==o?o:{},s=Ys(e,{expr:"datum"}),u=Ys(e,{expr:"datum",binSuffix:"end"});return{formulaAs:Ys(e,{binSuffix:"range",forAs:!0}),formula:ls(s,u,a.format,a.formatType,r)}}return{}}function Qg(t,e){return`${gn(t)}_${e}`}function Kg(t,e){return{signal:t.getName(e+"_bins"),extentSignal:t.getName(e+"_extent")}}function Zg(t,e,n){var r;const i=null!==(r=pu(n,void 0))&&void 0!==r?r:{},o=Qg(i,e);return t.getName(o+"_bins")}function tm(t){return"as"in t}function em(t,e,n){let r,i;r=tm(t)?Object(o["J"])(t.as)?[t.as,t.as+"_end"]:[t.as[0],t.as[1]]:[Ys(t,{forAs:!0}),Ys(t,{binSuffix:"end",forAs:!0})];const a=Object.assign({},pu(e,void 0)),s=Qg(a,t.field),{signal:u,extentSignal:c}=Kg(n,s);if(bn(a.extent)){const t=a.extent;i=ap(n,t.param,t),delete a.extent}const l=Object.assign(Object.assign(Object.assign({bin:a,field:t.field,as:[r]},u?{signal:u}:{}),c?{extentSignal:c}:{}),i?{span:i}:{});return{key:s,binComponent:l}}class nm extends pd{constructor(t,e){super(t),this.bins=e}clone(){return new nm(null,y(this.bins))}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,n,r)=>{if(zs(n)&&mn(n.bin)){const{key:i,binComponent:o}=em(n,n.bin,e);t[i]=Object.assign(Object.assign(Object.assign({},o),t[i]),Jg(e,n,r,e.config))}return t},{});return $(n)?null:new nm(t,n)}static makeFromTransform(t,e,n){const{key:r,binComponent:i}=em(e,e.bin,n);return new nm(t,{[r]:i})}merge(t,e){for(const n of P(t.bins))n in this.bins?(e(t.bins[n].signal,this.bins[n].signal),this.bins[n].as=C([...this.bins[n].as,...t.bins[n].as],O)):this.bins[n]=t.bins[n];for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}producedFields(){return new Set(R(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(R(this.bins).map(t=>t.field))}hash(){return"Bin "+O(this.bins)}assemble(){return R(this.bins).flatMap(t=>{const e=[],[n,...r]=t.as,i=t.bin,{extent:o}=i,a=Xg(i,["extent"]),s=Object.assign(Object.assign(Object.assign({type:"bin",field:Y(t.field),as:n,signal:t.signal},bn(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!o&&t.extentSignal&&(e.push({type:"extent",field:Y(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),e.push(s);for(const u of r)for(let t=0;t<2;t++)e.push({type:"formula",expr:Ys({field:n[t]},{expr:"datum"}),as:u[t]});return t.formula&&e.push({type:"formula",expr:t.formula,as:t.formulaAs}),e})}}function rm(t,e,n,r){const i=Zv(r)?r.encoding[he(e)]:void 0;if(zs(n)&&Zv(r)&&Ss(n,i,r.markDef,r.config))t.add(Ys(n,{})),t.add(Ys(n,{suffix:"end"})),n.bin&&wu(n,e)&&t.add(Ys(n,{binSuffix:"range"}));else if(Wt(e)){const n=Ht(e);t.add(r.getName(n))}else t.add(Ys(n));return t}function im(t,e){var n;for(const r of P(e)){const i=e[r];for(const e of P(i))r in t?t[r][e]=new Set([...null!==(n=t[r][e])&&void 0!==n?n:[],...i[e]]):t[r]={[e]:i[e]}}}class om extends pd{constructor(t,e,n){super(t),this.dimensions=e,this.measures=n}clone(){return new om(null,new Set(this.dimensions),y(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,e){let n=!1;e.forEachFieldDef(t=>{t.aggregate&&(n=!0)});const r={},i=new Set;return n?(e.forEachFieldDef((t,n)=>{var o,a,s,u;const{aggregate:c,field:l}=t;if(c)if("count"===c)null!==(o=r["*"])&&void 0!==o||(r["*"]={}),r["*"]["count"]=new Set([Ys(t,{forAs:!0})]);else{if(an(c)||sn(c)){const t=an(c)?"argmin":"argmax",e=c[t];null!==(a=r[e])&&void 0!==a||(r[e]={}),r[e][t]=new Set([Ys({op:t,field:e},{forAs:!0})])}else null!==(s=r[l])&&void 0!==s||(r[l]={}),r[l][c]=new Set([Ys(t,{forAs:!0})]);Je(n)&&"unaggregated"===e.scaleDomain(n)&&(null!==(u=r[l])&&void 0!==u||(r[l]={}),r[l]["min"]=new Set([Ys({field:l,aggregate:"min"},{forAs:!0})]),r[l]["max"]=new Set([Ys({field:l,aggregate:"max"},{forAs:!0})]))}else rm(i,n,t,e)}),i.size+P(r).length===0?null:new om(t,i,r)):null}static makeFromTransform(t,e){var n,r,i;const o=new Set,a={};for(const s of e.aggregate){const{op:t,field:e,as:i}=s;t&&("count"===t?(null!==(n=a["*"])&&void 0!==n||(a["*"]={}),a["*"]["count"]=new Set([i||Ys(s,{forAs:!0})])):(null!==(r=a[e])&&void 0!==r||(a[e]={}),a[e][t]=new Set([i||Ys(s,{forAs:!0})])))}for(const s of null!==(i=e.groupby)&&void 0!==i?i:[])o.add(s);return o.size+P(a).length===0?null:new om(t,o,a)}merge(t){return M(this.dimensions,t.dimensions)?(im(this.measures,t.measures),!0):(Si("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...P(this.measures)])}producedFields(){const t=new Set;for(const e of P(this.measures))for(const n of P(this.measures[e])){const r=this.measures[e][n];0===r.size?t.add(`${n}_${e}`):r.forEach(t.add,t)}return t}hash(){return"Aggregate "+O({dimensions:this.dimensions,measures:this.measures})}assemble(){const t=[],e=[],n=[];for(const i of P(this.measures))for(const r of P(this.measures[i]))for(const o of this.measures[i][r])n.push(o),t.push(r),e.push("*"===i?null:Y(i));const r={type:"aggregate",groupby:[...this.dimensions].map(Y),ops:t,fields:e,as:n};return r}}class am extends pd{constructor(t,e,n,r){super(t),this.model=e,this.name=n,this.data=r;for(const i of Jt){const t=e.facet[i];if(t){const{bin:n,sort:r}=t;this[i]=Object.assign({name:e.getName(i+"_domain"),fields:[Ys(t),...mn(n)?[Ys(t,{binSuffix:"end"})]:[]]},ms(r)?{sortField:r}:Object(o["B"])(r)?{sortIndexField:Fp(t,i)}:{})}}this.childModel=e.child}hash(){let t="Facet";for(const e of Jt)this[e]&&(t+=` ${e.charAt(0)}:${O(this[e])}`);return t}get fields(){var t;const e=[];for(const n of Jt)(null===(t=this[n])||void 0===t?void 0:t.fields)&&e.push(...this[n].fields);return e}dependentFields(){const t=new Set(this.fields);for(const e of Jt)this[e]&&(this[e].sortField&&t.add(this[e].sortField.field),this[e].sortIndexField&&t.add(this[e].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const e of Me){const n=this.childModel.component.scales[e];if(n&&!n.merged){const i=n.get("type"),o=n.get("range");if(Io(i)&&An(o)){const n=dv(this.childModel,e),i=fv(n);i?t[e]=i:Ai(r.unknownField(e))}}}return t}assembleRowColumnHeaderData(t,e,n){const r={row:"y",column:"x",facet:void 0}[t],i=[],o=[],a=[];r&&n&&n[r]&&(e?(i.push("distinct_"+n[r]),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push("distinct_"+n[r]));const{sortField:s,sortIndexField:u}=this[t];if(s){const{op:t=ds,field:e}=s;i.push(e),o.push(t),a.push(Ys(s,{forAs:!0}))}else u&&(i.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:null!==e&&void 0!==e?e:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},i.length?{fields:i,ops:o,as:a}:{})]}}assembleFacetHeaderData(t){var e,n;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,o=[],a={};for(const c of Lp){for(const t of zp){const r=null!==(e=i[c]&&i[c][t])&&void 0!==e?e:[];for(const t of r)if((null===(n=t.axes)||void 0===n?void 0:n.length)>0){a[c]=!0;break}}if(a[c]){const t=`length(data("${this.facet.name}"))`,e="row"===c?r?{signal:`ceil(${t} / ${r})`}:1:r?{signal:`min(${t}, ${r})`}:{signal:t};o.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:e}]})}}const{row:s,column:u}=a;return(s||u)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,t)),o}assemble(){var t,e;const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:o,row:a,facet:s}=this;if(o&&a&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(null!==(t=i.x)&&void 0!==t?t:[],null!==(e=i.y)&&void 0!==e?e:[]),a=o.map(()=>"distinct");n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:a}]})}for(const u of[st,at])this[u]&&n.push(this.assembleRowColumnHeaderData(u,r,i));if(s){const t=this.assembleFacetHeaderData(i);t&&n.push(...t)}return n}}function sm(t){return"'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]?t.slice(1,-1):t}function um(t,e){const n=H(t);if("number"===e)return`toNumber(${n})`;if("boolean"===e)return`toBoolean(${n})`;if("string"===e)return`toString(${n})`;if("date"===e)return`toDate(${n})`;if("flatten"===e)return n;if(e.startsWith("date:")){const t=sm(e.slice(5,e.length));return`timeParse(${n},'${t}')`}if(e.startsWith("utc:")){const t=sm(e.slice(4,e.length));return`utcParse(${n},'${t}')`}return Ai(r.unrecognizedParse(e)),null}function cm(t){const e={};return g(t.filter,t=>{var n;if(lo(t)){let r=null;no(t)?r=Rn(t.equal):io(t)?r=Rn(t.lte):ro(t)?r=Rn(t.lt):oo(t)?r=Rn(t.gt):ao(t)?r=Rn(t.gte):so(t)?r=t.range[0]:uo(t)&&(r=(null!==(n=t.oneOf)&&void 0!==n?n:t["in"])[0]),r&&(Ci(r)?e[t.field]="date":Object(o["G"])(r)?e[t.field]="number":Object(o["J"])(r)&&(e[t.field]="string")),t.timeUnit&&(e[t.field]="date")}}),e}function lm(t){const e={};function n(t){vu(t)?e[t.field]="date":"quantitative"===t.type&&fn(t.aggregate)?e[t.field]="number":J(t.field)>1?t.field in e||(e[t.field]="flatten"):Is(t)&&ms(t.sort)&&J(t.sort.field)>1&&(t.sort.field in e||(e[t.sort.field]="flatten"))}if((Zv(t)||ty(t))&&t.forEachFieldDef((e,r)=>{if(zs(e))n(e);else{const i=fe(r),o=t.fieldDef(i);n(Object.assign(Object.assign({},e),{type:o.type}))}}),Zv(t)){const{mark:n,markDef:r,encoding:i}=t;if(_a(n)&&!t.encoding.order){const t="horizontal"===r.orient?"y":"x",n=i[t];Ns(n)&&"quantitative"===n.type&&!(n.field in e)&&(e[n.field]="number")}}return e}function fm(t){const e={};if(Zv(t)&&t.component.selection)for(const n of P(t.component.selection)){const r=t.component.selection[n];for(const t of r.project.items)!t.channel&&J(t.field)>1&&(e[t.field]="flatten")}return e}class dm extends pd{constructor(t,e){super(t),this._parse=e}clone(){return new dm(null,y(this._parse))}hash(){return"Parse "+O(this._parse)}static makeExplicit(t,e,n){let r={};const i=e.data;return!Kf(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(t,r,{},n)}static makeWithAncestors(t,e,n,i){for(const s of P(n)){const t=i.getWithExplicit(s);void 0!==t.value&&(t.explicit||t.value===n[s]||"derived"===t.value||"flatten"===n[s]?delete n[s]:Ai(r.differentParse(s,n[s],t.value)))}for(const s of P(e)){const t=i.get(s);void 0!==t&&(t===e[s]?delete e[s]:Ai(r.differentParse(s,e[s],t)))}const o=new Uf(e,n);i.copyAll(o);const a={};for(const r of P(o.combine())){const t=o.get(r);null!==t&&(a[r]=t)}return 0===P(a).length||i.parseNothing?null:new dm(t,a)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const e of P(this._parse)){const n=this._parse[e];1===J(e)&&(t[e]=n)}return t}producedFields(){return new Set(P(this._parse))}dependentFields(){return new Set(P(this._parse))}assembleTransforms(t=!1){return P(this._parse).filter(e=>!t||J(e)>1).map(t=>{const e=um(t,this._parse[t]);if(!e)return null;const n={type:"formula",expr:e,as:X(t)};return n}).filter(t=>null!==t)}}class hm extends pd{clone(){return new hm(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Pc])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Pc}}}class pm extends pd{constructor(t,e){super(t),this.params=e}clone(){return new pm(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return"Graticule "+O(this.params)}assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}class gm extends pd{constructor(t,e){super(t),this.params=e}clone(){return new gm(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([null!==(t=this.params.as)&&void 0!==t?t:"data"])}hash(){return"Hash "+O(this.params)}assemble(){return Object.assign({type:"sequence"},this.params)}}class mm extends pd{constructor(t){let e;if(super(null),null!==t&&void 0!==t||(t={name:"source"}),Kf(t)||(e=t.format?Object.assign({},x(t.format,["parse"])):{}),Jf(t))this._data={values:t.values};else if(Xf(t)){if(this._data={url:t.url},!e.type){let n=/(?:\.([^.]+))?$/.exec(t.url)[1];j(["json","csv","tsv","dsv","topojson"],n)||(n="json"),e.type=n}}else td(t)?this._data={values:[{type:"Sphere"}]}:(Qf(t)||Kf(t))&&(this._data={});this._generator=Kf(t),t.name&&(this._name=t.name),e&&!$(e)&&(this._data.format=e)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var vm,ym=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},bm=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};function xm(t){return t instanceof mm||t instanceof pm||t instanceof gm}class wm{constructor(){vm.set(this,void 0),ym(this,vm,!1)}setModified(){ym(this,vm,!0)}get modifiedFlag(){return bm(this,vm)}}vm=new WeakMap;class Om extends wm{getNodeDepths(t,e,n){n.set(t,e);for(const r of t.children)this.getNodeDepths(r,e+1,n);return n}optimize(t){const e=this.getNodeDepths(t,0,new Map),n=[...e.entries()].sort((t,e)=>e[1]-t[1]);for(const r of n)this.run(r[0]);return this.modifiedFlag}}class _m extends wm{optimize(t){this.run(t);for(const e of t.children)this.optimize(e);return this.modifiedFlag}}class jm extends _m{mergeNodes(t,e){const n=e.shift();for(const r of e)t.removeChild(r),r.parent=n,r.remove()}run(t){const e=t.children.map(t=>t.hash()),n={};for(let r=0;r<e.length;r++)void 0===n[e[r]]?n[e[r]]=[t.children[r]]:n[e[r]].push(t.children[r]);for(const r of P(n))n[r].length>1&&(this.setModified(),this.mergeNodes(t,n[r]))}}class Em extends _m{constructor(t){super(),this.requiresSelectionId=t&&Jh(t)}run(t){t instanceof hm&&(this.requiresSelectionId&&(xm(t.parent)||t.parent instanceof om||t.parent instanceof dm)||(this.setModified(),t.remove()))}}class km extends wm{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,e){let n=new Set;t instanceof vd&&(n=t.producedFields(),T(n,e)&&(this.setModified(),t.removeFormulas(e),0===t.producedFields.length&&t.remove()));for(const r of t.children)this.run(r,new Set([...e,...n]))}}class Am extends _m{constructor(){super()}run(t){t instanceof gd&&!t.isRequired()&&(this.setModified(),t.remove())}}class Sm extends Om{run(t){if(!xm(t)&&!(t.numChildren()>1))for(const e of t.children)if(e instanceof dm)if(t instanceof dm)this.setModified(),t.merge(e);else{if(F(t.producedFields(),e.dependentFields()))continue;this.setModified(),e.swapWithParent()}}}class Cm extends Om{run(t){const e=[...t.children],n=t.children.filter(t=>t instanceof dm);if(t.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const t of n){const e=t.parse;for(const t of P(e))t in r?r[t]!==e[t]&&i.add(t):r[t]=e[t]}for(const t of i)delete r[t];if(!$(r)){this.setModified();const n=new dm(t,r);for(const i of e){if(i instanceof dm)for(const t of P(r))delete i.parse[t];t.removeChild(i),i.parent=n,i instanceof dm&&0===P(i.parse).length&&i.remove()}}}}}class Dm extends Om{run(t){t instanceof gd||t.numChildren()>0||t instanceof am||t instanceof mm||(this.setModified(),t.remove())}}class Mm extends Om{run(t){const e=t.children.filter(t=>t instanceof vd),n=e.pop();for(const r of e)this.setModified(),n.merge(r)}}class Tm extends Om{run(t){const e=t.children.filter(t=>t instanceof om),n={};for(const r of e){const t=O(r.groupBy);t in n||(n[t]=[]),n[t].push(r)}for(const r of P(n)){const e=n[r];if(e.length>1){const n=e.pop();for(const r of e)n.merge(r)&&(t.removeChild(r),r.parent=n,r.remove(),this.setModified())}}}}class Nm extends Om{constructor(t){super(),this.model=t}run(t){const e=!(xm(t)||t instanceof np||t instanceof dm||t instanceof hm),n=[],r=[];for(const i of t.children)i instanceof nm&&(e&&!F(t.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const e=n.pop();for(const t of n)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof nm?t.merge(e,this.model.renameSignal.bind(this.model)):e.swapWithParent()}if(r.length>1){const t=r.pop();for(const e of r)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified()}}}class Fm extends Om{run(t){const e=[...t.children],n=E(e,t=>t instanceof gd);if(!n||t.numChildren()<=1)return;const r=[];let i;for(const o of e)if(o instanceof gd){let e=o;while(1===e.numChildren()){const[t]=e.children;if(!(t instanceof gd))break;e=t}r.push(...e.children),i?(t.removeChild(o),o.parent=i.parent,i.parent.removeChild(i),i.parent=e,this.setModified()):i=e}else r.push(o);if(r.length){this.setModified();for(const t of r)t.parent.removeChild(t),t.parent=i}}}class $m extends pd{constructor(t,e){super(t),this.transform=e}clone(){return new $m(null,y(this.transform))}addDimensions(t){this.transform.groupby=C(this.transform.groupby.concat(t),t=>t)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(t=>t.field).filter(t=>void 0!==t).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:Ys(t)}hash(){return"JoinAggregateTransform "+O(this.transform)}assemble(){const t=[],e=[],n=[];for(const i of this.transform.joinaggregate)e.push(i.op),n.push(this.getDefaultName(i)),t.push(void 0===i.field?null:i.field);const r=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:e,fields:t},void 0!==r?{groupby:r}:{})}}function Pm(t){return t.stack.stackBy.reduce((t,e)=>{const n=e.fieldDef,r=Ys(n);return r&&t.push(r),t},[])}function Rm(t){return Object(o["B"])(t)&&t.every(t=>Object(o["J"])(t))&&t.length>1}class Lm extends pd{constructor(t,e){super(t),this._stack=e}clone(){return new Lm(null,y(this._stack))}static makeFromTransform(t,e){const{stack:n,groupby:r,as:i,offset:a="zero"}=e,s=[],u=[];if(void 0!==e.sort)for(const o of e.sort)s.push(o.field),u.push(Q(o.order,"ascending"));const c={field:s,order:u};let l;return l=Rm(i)?i:Object(o["J"])(i)?[i,i+"_end"]:[e.stack+"_start",e.stack+"_end"],new Lm(t,{stackField:n,groupby:r,offset:a,sort:c,facetby:[],as:l})}static makeFromEncoding(t,e){const n=e.stack,{encoding:r}=e;if(!n)return null;const{groupbyChannel:i,fieldChannel:a,offset:s,impute:u}=n;let c;if(i){const t=r[i];c=uu(t)}const l=Pm(e),f=e.encoding.order;let d;return d=Object(o["B"])(f)||Ns(f)?Vn(f):l.reduce((t,e)=>(t.field.push(e),t.order.push("y"===a?"descending":"ascending"),t),{field:[],order:[]}),new Lm(t,{dimensionFieldDef:c,stackField:e.vgField(a),facetby:[],stackby:l,sort:d,offset:s,impute:u,as:[e.vgField(a,{suffix:"start",forAs:!0}),e.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return"Stack "+O(this._stack)}getGroupbyFields(){const{dimensionFieldDef:t,impute:e,groupby:n}=this._stack;return t?t.bin?e?[Ys(t,{binSuffix:"mid"})]:[Ys(t,{}),Ys(t,{binSuffix:"end"})]:[Ys(t)]:null!==n&&void 0!==n?n:[]}assemble(){const t=[],{facetby:e,dimensionFieldDef:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:u}=this._stack;if(s&&n){const{bandPosition:o=.5,bin:a}=n;a&&t.push({type:"formula",expr:o+"*"+Ys(n,{expr:"datum"})+`+${1-o}*`+Ys(n,{expr:"datum",binSuffix:"end"}),as:Ys(n,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:r,groupby:[...i,...e],key:Ys(n,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...e],field:r,sort:o,as:u,offset:a}),t}}class zm extends pd{constructor(t,e){super(t),this.transform=e}clone(){return new zm(null,y(this.transform))}addDimensions(t){this.transform.groupby=C(this.transform.groupby.concat(t),t=>t)}dependentFields(){var t,e;const n=new Set;return(null!==(t=this.transform.groupby)&&void 0!==t?t:[]).forEach(n.add,n),(null!==(e=this.transform.sort)&&void 0!==e?e:[]).forEach(t=>n.add(t.field)),this.transform.window.map(t=>t.field).filter(t=>void 0!==t).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:Ys(t)}hash(){return"WindowTransform "+O(this.transform)}assemble(){var t;const e=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(void 0===f.param?null:f.param),e.push(void 0===f.field?null:f.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&null===o[0]&&null===o[1]&&n.every(t=>un(t)))return Object.assign({type:"joinaggregate",as:r,ops:n,fields:e},void 0!==a?{groupby:a}:{});const s=[],u=[];if(void 0!==this.transform.sort)for(const f of this.transform.sort)s.push(f.field),u.push(null!==(t=f.order)&&void 0!==t?t:"ascending");const c={field:s,order:u},l=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:i,as:r,ops:n,fields:e,sort:c},void 0!==l?{ignorePeers:l}:{}),void 0!==a?{groupby:a}:{}),void 0!==o?{frame:o}:{})}}function Bm(t){function e(n){if(!(n instanceof am)){const r=n.clone();if(r instanceof gd){const e=qm+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof om||r instanceof Lm||r instanceof zm||r instanceof $m)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}return e}function Im(t){if(t instanceof am)if(1!==t.numChildren()||t.children[0]instanceof gd){const e=t.model.component.data.main;Um(e);const n=Bm(t),r=t.children.map(n).flat();for(const t of r)t.parent=e}else{const e=t.children[0];(e instanceof om||e instanceof Lm||e instanceof zm||e instanceof $m)&&e.addDimensions(t.fields),e.swapWithParent(),Im(t)}else t.children.map(Im)}function Um(t){if(t instanceof gd&&t.type===nd.Main&&1===t.numChildren()){const e=t.children[0];e instanceof am||(e.swapWithParent(),Um(t))}}const qm="scale_",Hm=5;function Wm(t){for(const e of t){for(const t of e.children)if(t.parent!==e)return!1;if(!Wm(e.children))return!1}return!0}function Gm(t,e){let n=!1;for(const r of e)n=t.optimize(r)||n;return n}function Ym(t,e,n){let r=t.sources,i=!1;return i=Gm(new Am,r)||i,i=Gm(new Em(e),r)||i,r=r.filter(t=>t.numChildren()>0),i=Gm(new Dm,r)||i,r=r.filter(t=>t.numChildren()>0),n||(i=Gm(new Sm,r)||i,i=Gm(new Nm(e),r)||i,i=Gm(new km,r)||i,i=Gm(new Cm,r)||i,i=Gm(new Tm,r)||i,i=Gm(new Mm,r)||i,i=Gm(new jm,r)||i,i=Gm(new Fm,r)||i),t.sources=r,i}function Vm(t,e){Wm(t.sources);let n=0,r=0;for(let i=0;i<Hm;i++){if(!Ym(t,e,!0))break;n++}t.sources.map(Im);for(let i=0;i<Hm;i++){if(!Ym(t,e,!1))break;r++}Wm(t.sources),Math.max(n,r)===Hm&&Ai(`Maximum optimization runs(${Hm}) reached.`)}class Xm{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,e){return new Xm(()=>t(e))}}var Jm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Qm(t){Zv(t)?Km(t):Zm(t)}function Km(t){const e=t.component.scales;for(const n of P(e)){const r=ev(t,n),i=e[n];if(i.setWithExplicit("domains",r),av(t,n),t.component.data.isFaceted){let e=t;while(!ty(e)&&e.parent)e=e.parent;const i=e.component.resolve.scale[n];if("shared"===i)for(const t of r.value)Dn(t)&&(t.data=qm+t.data.replace(qm,""))}}}function Zm(t){for(const n of t.children)Qm(n);const e=t.component.scales;for(const n of P(e)){let i,o=null;for(const e of t.children){const t=e.component.scales[n];if(t){i=void 0===i?t.getWithExplicit("domains"):Yf(i,t.getWithExplicit("domains"),"domains","scale",cv);const e=t.get("selectionExtent");o&&e&&o.param!==e.param&&Ai(r.NEEDS_SAME_SELECTION),o=e}}e[n].setWithExplicit("domains",i),o&&e[n].set("selectionExtent",o,!0)}}function tv(t,e,n,r){if("unaggregated"===t){const{valid:t,reason:r}=uv(e,n);if(!t)return void Ai(r)}else if(void 0===t&&r.useUnaggregatedDomain){const{valid:t}=uv(e,n);if(t)return"unaggregated"}return t}function ev(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:r}=t,i=tv(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return i!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign(Object.assign({},t.specifiedScales[e]),{domain:i})),"x"===e&&cu(r.x2)?cu(r.x)?Yf(iv(n,i,t,"x"),iv(n,i,t,"x2"),"domain","scale",cv):iv(n,i,t,"x2"):"y"===e&&cu(r.y2)?cu(r.y)?Yf(iv(n,i,t,"y"),iv(n,i,t,"y2"),"domain","scale",cv):iv(n,i,t,"y2"):iv(n,i,t,e)}function nv(t,e,n){return t.map(t=>{const r=bu(t,{timeUnit:n,type:e});return{signal:`{data: ${r}}`}})}function rv(t,e,n){var r;const i=null===(r=Zi(n))||void 0===r?void 0:r.unit;return"temporal"===e||i?nv(t,e,i):[t]}function iv(t,e,n,r){const{encoding:i}=n,a=cu(i[r]),{type:s}=a,u=a["timeUnit"];if(Vo(e)){const i=iv(t,void 0,n,r),o=rv(e.unionWith,s,u);return qf([...i.value,...o])}if(kn(e))return qf([e]);if(e&&"unaggregated"!==e&&!Yo(e))return qf(rv(e,s,u));const c=n.stack;if(c&&r===c.fieldChannel){if("normalize"===c.offset)return Hf([[0,1]]);const t=n.requestDataName(nd.Main);return Hf([{data:t,field:n.vgField(r,{suffix:"start"})},{data:t,field:n.vgField(r,{suffix:"end"})}])}const l=Je(r)&&Ns(a)?sv(n,r,t):void 0;if($s(a)){const t=rv([a.datum],s,u);return Hf(t)}const f=a;if("unaggregated"===e){const t=n.requestDataName(nd.Main),{field:e}=a;return Hf([{data:t,field:Ys({field:e,aggregate:"min"})},{data:t,field:Ys({field:e,aggregate:"max"})}])}if(mn(f.bin)){if(Io(t))return Hf("bin-ordinal"===t?[]:[{data:z(l)?n.requestDataName(nd.Main):n.requestDataName(nd.Raw),field:n.vgField(r,wu(f,r)?{binSuffix:"range"}:{}),sort:!0!==l&&Object(o["H"])(l)?l:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:t}=f;if(mn(t)){const e=Zg(n,f.field,t);return Hf([new Xm(()=>{const t=n.getSignalName(e);return`[${t}.start, ${t}.stop]`})])}return Hf([{data:n.requestDataName(nd.Main),field:n.vgField(r,{})}])}}if(f.timeUnit&&j(["time","utc"],t)&&Ss(f,Zv(n)?n.encoding[he(r)]:void 0,n.markDef,n.config)){const t=n.requestDataName(nd.Main);return Hf([{data:t,field:n.vgField(r)},{data:t,field:n.vgField(r,{suffix:"end"})}])}return Hf(l?[{data:z(l)?n.requestDataName(nd.Main):n.requestDataName(nd.Raw),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(nd.Main),field:n.vgField(r)}])}function ov(t,e){const{op:n,field:r,order:i}=t;return Object.assign(Object.assign({op:null!==n&&void 0!==n?n:e?"sum":ds},r?{field:Y(r)}:{}),i?{order:i}:{})}function av(t,e){var n;const r=t.component.scales[e],i=t.specifiedScales[e].domain,o=null===(n=t.fieldDef(e))||void 0===n?void 0:n.bin,a=Yo(i)&&i,s=yn(o)&&bn(o.extent)&&o.extent;(a||s)&&r.set("selectionExtent",null!==a&&void 0!==a?a:s,!0)}function sv(t,e,n){if(!Io(n))return;const r=t.fieldDef(e),i=r.sort;if(vs(i))return{op:"min",field:Fp(r,e),order:"ascending"};const{stack:o}=t,a=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map(t=>t.fieldDef.field)]:void 0;if(ms(i)){const t=o&&!j(a,i.field);return ov(i,t)}if(gs(i)){const{encoding:e,order:n}=i,r=t.fieldDef(e),{aggregate:s,field:u}=r,c=o&&!j(a,u);if(an(s)||sn(s))return ov({field:Ys(r),order:n},c);if(un(s)||!s)return ov({op:s,field:u,order:n},c)}else{if("descending"===i)return{op:"min",field:t.vgField(e),order:"descending"};if(j(["ascending",void 0],i))return!0}}function uv(t,e){const{aggregate:n,type:i}=t;return n?Object(o["J"])(n)&&!pn[n]?{valid:!1,reason:r.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===i&&"log"===e?{valid:!1,reason:r.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:r.unaggregateDomainHasNoEffectForRawField(t)}}function cv(t,e,n,i){return t.explicit&&e.explicit&&Ai(r.mergeConflictingDomainProperty(n,i,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function lv(t){const e=C(t.map(t=>{if(Dn(t)){const{sort:e}=t,n=Jm(t,["sort"]);return n}return t}),O),n=C(t.map(t=>{if(Dn(t)){const e=t.sort;return void 0===e||z(e)||("op"in e&&"count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}}).filter(t=>void 0!==t),O);if(0===e.length)return;if(1===e.length){const e=t[0];if(Dn(e)&&n.length>0){let t=n[0];if(n.length>1)Ai(r.MORE_THAN_ONE_SORT),t=!0;else if(Object(o["H"])(t)&&"field"in t){const n=t.field;e.field===n&&(t=!t.order||{order:t.order})}return Object.assign(Object.assign({},e),{sort:t})}return e}const i=C(n.map(t=>z(t)||!("op"in t)||Object(o["J"])(t.op)&&t.op in on?t:(Ai(r.domainSortDropped(t)),!0)),O);let a;1===i.length?a=i[0]:i.length>1&&(Ai(r.MORE_THAN_ONE_SORT),a=!0);const s=C(t.map(t=>Dn(t)?t.data:null),t=>t);if(1===s.length&&null!==s[0]){const t=Object.assign({data:s[0],fields:e.map(t=>t.field)},a?{sort:a}:{});return t}return Object.assign({fields:e},a?{sort:a}:{})}function fv(t){if(Dn(t)&&Object(o["J"])(t.field))return t.field;if(Sn(t)){let e;for(const n of t.fields)if(Dn(n)&&Object(o["J"])(n.field))if(e){if(e!==n.field)return Ai(r.FACETED_INDEPENDENT_DIFFERENT_SOURCES),e}else e=n.field;return Ai(r.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),e}if(Cn(t)){Ai(r.FACETED_INDEPENDENT_SAME_SOURCE);const e=t.fields[0];return Object(o["J"])(e)?e:void 0}}function dv(t,e){const n=t.component.scales[e],r=n.get("domains").map(e=>(Dn(e)&&(e.data=t.lookupDataSource(e.data)),e));return lv(r)}var hv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function pv(t){return ny(t)||ey(t)?t.children.reduce((t,e)=>t.concat(pv(e)),gv(t)):gv(t)}function gv(t){return P(t.component.scales).reduce((e,n)=>{const r=t.component.scales[n];if(r.merged)return e;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:u,range:c,reverse:l}=i,f=hv(i,["name","type","selectionExtent","domains","range","reverse"]),d=mv(i.range,o,n,t),h=dv(t,n),p=s?dd(t,s,r,h):null;return e.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:a},h?{domain:h}:{}),p?{domainRaw:p}:{}),{range:d}),void 0!==l?{reverse:l}:{}),f)),e},[])}function mv(t,e,n,r){if(Te(n)){if(An(t))return{step:{signal:e+"_step"}}}else if(Object(o["H"])(t)&&Dn(t))return Object.assign(Object.assign({},t),{data:r.lookupDataSource(t.data)});return t}class vv extends Uf{constructor(t,e){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",e)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||E(this.get("domains"),t=>Object(o["B"])(t)&&2===t.length&&t[0]<=0&&t[1]>=0)}}const yv=["range","scheme"];function bv(t){return"x"===t?"width":"y"===t?"height":void 0}function xv(t){const e=t.component.scales;for(const n of Xe){const r=e[n];if(!r)continue;const i=Ov(n,t);r.setWithExplicit("range",i)}}function wv(t,e){const n=t.fieldDef(e);if(null===n||void 0===n?void 0:n.bin){const{bin:r,field:i}=n,a=bv(e),s=t.getName(a);if(Object(o["H"])(r)&&r.binned&&void 0!==r.step)return new Xm(()=>{const n=t.scaleName(e),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${t.getSignalName(s)} / (${i})`});if(mn(r)){const e=Zg(t,i,r);return new Xm(()=>{const n=t.getSignalName(e),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${t.getSignalName(s)} / (${r})`})}}}function Ov(t,e){const n=e.specifiedScales[t],{size:i}=e,a=e.getScaleComponent(t),s=a.get("type");for(const f of yv)if(void 0!==n[f]){const i=ia(s,f),a=oa(t,f);if(i)if(a)Ai(a);else switch(f){case"range":{const r=n.range;if(Object(o["B"])(r)){if(Te(t))return qf(r.map(t=>{if("width"===t||"height"===t){const n=e.getName(t),r=e.getSignalName.bind(e);return Xm.fromName(r,n)}return t}))}else if(Object(o["H"])(r))return qf({data:e.requestDataName(nd.Main),field:r.field,sort:{op:"min",field:e.vgField(t)}});return qf(r)}case"scheme":return qf(_v(n[f]))}else Ai(r.scalePropertyNotWorkWithScaleType(s,f,t))}if(t===ct||t===lt){const e=t===ct?"width":"height",n=i[e];if(Yc(n)){if(Io(s))return qf({step:n.step});Ai(r.stepDropped(e))}}const{rangeMin:u,rangeMax:c}=n,l=jv(t,e);return(void 0!==u||void 0!==c)&&ia(s,"rangeMin")&&Object(o["B"])(l)&&2===l.length?qf([null!==u&&void 0!==u?u:l[0],null!==c&&void 0!==c?c:l[1]]):Hf(l)}function _v(t){return Go(t)?Object.assign({scheme:t.name},x(t,["name"])):{scheme:t}}function jv(t,e){const{size:n,config:r,mark:i,encoding:o}=e,a=e.getSignalName.bind(e),{type:s}=cu(o[t]),u=e.getScaleComponent(t),c=u.get("type"),{domain:l,domainMid:f}=e.specifiedScales[t];switch(t){case ct:case lt:{if(j(["point","band"],c))if(t!==ct||n.width){if(t===lt&&!n.height){const t=nl(r.view,"height");if(Yc(t))return t}}else{const t=nl(r.view,"width");if(Yc(t))return t}const i=bv(t),o=e.getName(i);return t===lt&&Uo(c)?[Xm.fromName(a,o),0]:[0,Xm.fromName(a,o)]}case Et:{const o=e.component.scales[t].get("zero"),a=Av(i,o,r),s=Cv(i,n,e,r);return Ho(c)?kv(a,s,Ev(c,r,l,t)):[a,s]}case gt:return[0,2*Math.PI];case kt:return[0,360];case ht:return[0,new Xm(()=>{const t=e.getSignalName("width"),n=e.getSignalName("height");return`min(${t},${n})/2`})];case Dt:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Mt:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case jt:return"symbol";case wt:case Ot:case _t:return"ordinal"===c?"nominal"===s?"category":"ordinal":void 0!==f?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case At:case St:case Ct:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel "+t)}function Ev(t,e,n,i){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return void 0!==n&&Object(o["B"])(n)?n.length+1:(Ai(r.domainRequiredForThresholdScale(i)),3)}}function kv(t,e,n){const r=()=>{const r=In(e),i=In(t),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return kn(e)?new Xm(r):{signal:r()}}function Av(t,e,n){if(e)return kn(e)?{signal:`${e.signal} ? 0 : ${Av(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(r.incompatibleChannel("size",t))}const Sv=.95;function Cv(t,e,n,i){const a={x:wv(n,"x"),y:wv(n,"y")};switch(t){case"bar":case"tick":{if(void 0!==i.scale.maxBandSize)return i.scale.maxBandSize;const t=Dv(e,a,i.view);return Object(o["G"])(t)?t-1:new Xm(()=>t.signal+" - 1")}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const t=Dv(e,a,i.view);return Object(o["G"])(t)?Math.pow(Sv*t,2):new Xm(()=>`pow(${Sv} * ${t.signal}, 2)`)}}throw new Error(r.incompatibleChannel("size",t))}function Dv(t,e,n){const r=Yc(t.width)?t.width.step:el(n,"width"),i=Yc(t.height)?t.height.step:el(n,"height");return e.x||e.y?new Xm(()=>{const t=[e.x?e.x.signal:r,e.y?e.y.signal:i];return`min(${t.join(", ")})`}):Math.min(r,i)}function Mv(t,e){Zv(t)?Tv(t,e):$v(t,e)}function Tv(t,e){const n=t.component.scales,{config:i,encoding:o,markDef:a,specifiedScales:s}=t;for(const u of P(n)){const c=s[u],l=n[u],f=t.getScaleComponent(u),d=cu(o[u]),h=c[e],p=f.get("type"),g=f.get("padding"),m=f.get("paddingInner"),v=ia(p,e),y=oa(u,e);if(void 0!==h&&(v?y&&Ai(y):Ai(r.scalePropertyNotWorkWithScaleType(p,e,u))),v&&void 0===y)if(void 0!==h){const t=d["timeUnit"],n=d.type;switch(e){case"domainMax":case"domainMin":Ci(c[e])||"temporal"===n||t?l.set(e,{signal:bu(c[e],{type:n,timeUnit:t})},!0):l.set(e,c[e],!0);break;default:l.copyKeyFromObject(e,c)}}else{const n=e in Nv?Nv[e]({model:t,channel:u,fieldOrDatumDef:d,scaleType:p,scalePadding:g,scalePaddingInner:m,domain:c.domain,markDef:a,config:i}):i.scale[e];void 0!==n&&l.set(e,n,!1)}}}const Nv={bins:({model:t,fieldOrDatumDef:e})=>Ns(e)?Pv(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>Rv(t,e.type),nice:({scaleType:t,channel:e,domain:n,fieldOrDatumDef:r})=>Lv(t,e,n,r),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:r,config:i})=>zv(t,e,i.scale,n,r,i.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,config:r})=>Bv(t,e,n.type,r.scale),paddingOuter:({scalePadding:t,channel:e,scaleType:n,markDef:r,scalePaddingInner:i,config:o})=>Iv(t,e,n,r.type,i,o.scale),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:r})=>{const i=Ns(t)?t.sort:void 0;return Uv(e,i,n,r.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:n,markDef:r,scaleType:i})=>qv(t,e,n,r,i)};function Fv(t){Zv(t)?xv(t):$v(t,"range")}function $v(t,e){const n=t.component.scales;for(const r of t.children)"range"===e?Fv(r):Mv(r,e);for(const r of P(n)){let i;for(const n of t.children){const t=n.component.scales[r];if(t){const n=t.getWithExplicit(e);i=Yf(i,n,e,"scale",Wf((t,n)=>{switch(e){case"range":return t.step&&n.step?t.step-n.step:0}return 0}))}}n[r].setWithExplicit(e,i)}}function Pv(t,e){const n=e.bin;if(mn(n)){const r=Zg(t,e.field,n);return new Xm(()=>t.getSignalName(r))}if(vn(n)&&yn(n)&&void 0!==n.step)return{step:n.step}}function Rv(t,e){if(j([wt,Ot,_t],t)&&"nominal"!==e)return"hcl"}function Lv(t,e,n,r){var i;if(!((null===(i=uu(r))||void 0===i?void 0:i.bin)||Object(o["B"])(n)||j([Eo.TIME,Eo.UTC],t)))return e in De||void 0}function zv(t,e,n,r,i,o){if(t in De){if(qo(e)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:e,orient:a}=i;if("bar"===e&&(!Ns(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===t||"horizontal"===a&&"y"===t))return o.continuousBandSize}if(e===Eo.POINT)return n.pointPadding}}function Bv(t,e,n,r){if(void 0===t&&e in De){const{bandPaddingInner:t,barBandPaddingInner:e,rectBandPaddingInner:i}=r;return Q(t,"bar"===n?e:i)}}function Iv(t,e,n,r,i,o){if(void 0===t&&e in De&&n===Eo.BAND){const{bandPaddingOuter:t}=o;return Q(t,kn(i)?{signal:i.signal+"/2"}:i/2)}}function Uv(t,e,n,r){return"x"===n&&void 0!==r.xReverse?Uo(t)&&"descending"===e?kn(r.xReverse)?{signal:"!"+r.xReverse.signal}:!r.xReverse:r.xReverse:!(!Uo(t)||"descending"!==e)||void 0}function qv(t,e,n,r,i){const a=!!n&&"unaggregated"!==n;if(a&&Uo(i)){if(Object(o["B"])(n)){const t=n[0],e=n[n.length-1];if(t<=0&&e>=0)return!0}return!1}if("size"===t&&"quantitative"===e.type&&!Ho(i))return!0;if((!Ns(e)||!e.bin)&&j([...Me,...Fe],t)){const{orient:e,type:n}=r;return!j(["bar","area","line","trail"],n)||!("horizontal"===e&&"y"===t||"vertical"===e&&"x"===t)}return!1}function Hv(t,e,n,i){const o=Wv(e,n,i),{type:a}=t;return Je(e)?void 0!==a?sa(e,a)?Ns(n)&&!aa(a,n.type)?(Ai(r.scaleTypeNotWorkWithFieldDef(a,o)),o):a:(Ai(r.scaleTypeNotWorkWithChannel(e,a,o)),o):o:null}function Wv(t,e,n){var i;switch(e.type){case"nominal":case"ordinal":{if(Vt(t)||"discrete"===nn(t))return"shape"===t&&"ordinal"===e.type&&Ai(r.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(t in De){if(j(["rect","bar","image","rule"],n.type))return"band"}else if("arc"===n.type&&t in Ne)return"band";const o=n[pe(t)];return Pa(o)||Us(e)&&(null===(i=e.axis)||void 0===i?void 0:i.tickBand)?"band":"point"}case"temporal":return Vt(t)?"time":"discrete"===nn(t)?(Ai(r.discreteChannelCannotEncode(t,"temporal")),"ordinal"):Ns(e)&&e.timeUnit&&Zi(e.timeUnit).utc?"utc":"time";case"quantitative":return Vt(t)?Ns(e)&&mn(e.bin)?"bin-ordinal":"linear":"discrete"===nn(t)?(Ai(r.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(r.invalidFieldType(e.type))}function Gv(t,{ignoreRange:e}={}){Yv(t),Qm(t);for(const n of ra)Mv(t,n);e||Fv(t)}function Yv(t){Zv(t)?t.component.scales=Vv(t):t.component.scales=Jv(t)}function Vv(t){const{encoding:e,mark:n,markDef:r}=t;return Xe.reduce((i,o)=>{const a=cu(e[o]);if(a&&n===Oa&&o===jt&&a.type===Oo)return i;let s=a&&a["scale"];if(a&&null!==s&&!1!==s){null!==s&&void 0!==s||(s={});const e=Hv(s,o,a,r);i[o]=new vv(t.scaleName(""+o,!0),{value:e,explicit:s.type===e})}return i},{})}const Xv=Wf((t,e)=>Co(t)-Co(e));function Jv(t){var e,n;const r=t.component.scales={},i={},o=t.component.resolve;for(const a of t.children){Yv(a);for(const r of P(a.component.scales))if(null!==(e=(n=o.scale)[r])&&void 0!==e||(n[r]=rg(r,t)),"shared"===o.scale[r]){const t=i[r],e=a.component.scales[r].getWithExplicit("type");t?Ao(t.value,e.value)?i[r]=Yf(t,e,"type","scale",Xv):(o.scale[r]="independent",delete i[r]):i[r]=e}}for(const a of P(i)){const e=t.scaleName(a,!0),n=i[a];r[a]=new vv(e,n);for(const r of t.children){const t=r.component.scales[a];t&&(r.renameScale(t.get("name"),e),t.merged=!0)}}return r}var Qv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class Kv{constructor(){this.nameMap={}}rename(t,e){this.nameMap[t]=e}has(t){return void 0!==this.nameMap[t]}get(t){while(this.nameMap[t]&&t!==this.nameMap[t])t=this.nameMap[t];return t}}function Zv(t){return"unit"===(null===t||void 0===t?void 0:t.type)}function ty(t){return"facet"===(null===t||void 0===t?void 0:t.type)}function ey(t){return"concat"===(null===t||void 0===t?void 0:t.type)}function ny(t){return"layer"===(null===t||void 0===t?void 0:t.type)}class ry{constructor(t,e,n,r,i,o,a){var s,u;this.type=e,this.parent=n,this.config=i,this.correctDataNames=t=>(t.from&&t.from.data&&(t.from.data=this.lookupDataSource(t.from.data)),t.from&&t.from.facet&&t.from.facet.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t),this.parent=n,this.config=i,this.view=On(a),this.name=null!==(s=t.name)&&void 0!==s?s:r,this.title=En(t.title)?{text:t.title}:t.title?On(t.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new Kv,this.projectionNameMap=n?n.projectionNameMap:new Kv,this.signalNameMap=n?n.signalNameMap:new Kv,this.data=t.data,this.description=t.description,this.transforms=Of(null!==(u=t.transform)&&void 0!==u?u:[]),this.layout="layer"===e||"unit"===e?{}:Kc(t,e,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:xs(t)||n&&n.component.data.isFaceted&&void 0===t.data},layoutSize:new Uf,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?y(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Gv(this)}parseProjection(){Hg(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Ag(this)}assembleGroupStyle(){var t,e;if("unit"===this.type||"layer"===this.type)return null!==(e=null===(t=this.view)||void 0===t?void 0:t.style)&&void 0!==e?e:"cell"}assembleEncodeFromView(t){const{style:e}=t,n=Qv(t,["style"]),r={};for(const i of P(n)){const t=n[i];void 0!==t&&(r[i]=zn(t))}return r}assembleGroupEncodeEntry(t){let e={};return this.view&&(e=this.assembleEncodeFromView(this.view)),t||(this.description&&(e["description"]=zn(this.description)),"unit"!==this.type&&"layer"!==this.type)?$(e)?void 0:e:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==e&&void 0!==e?e:{})}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:e}=t,n=Qv(t,["spacing"]),{component:r,config:i}=this,o=Xp(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:e},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let e=[];for(const n of Jt)t[n].title&&e.push(Bp(this,n));for(const n of Lp)e=e.concat(qp(this,n));return e}assembleAxes(){return pp(this.component.axes,this.config)}assembleLegends(){return Rg(this)}assembleProjections(){return zg(this)}assembleTitle(){var t,e,n;const r=null!==(t=this.title)&&void 0!==t?t:{},{encoding:i}=r,o=Qv(r,["encoding"]),a=Object.assign(Object.assign(Object.assign({},jn(this.config.title).nonMark),o),i?{encode:{update:i}}:{});if(a.text)return j(["unit","layer"],this.type)?j(["middle",void 0],a.anchor)&&(null!==(e=a.frame)&&void 0!==e||(a.frame="group")):null!==(n=a.anchor)&&void 0!==n||(a.anchor="start"),$(a)?void 0:a}assembleGroup(t=[]){const e={};t=t.concat(this.assembleSignals()),t.length>0&&(e.signals=t);const n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||ty(this.parent)?pv(this):[];r.length>0&&(e.scales=r);const i=this.assembleAxes();i.length>0&&(e.axes=i);const o=this.assembleLegends();return o.length>0&&(e.legends=o),e}getName(t){return B((this.name?this.name+"_":"")+t)}getDataName(t){return this.getName(nd[t].toLowerCase())}requestDataName(t){const e=this.getDataName(t),n=this.component.data.outputNodeRefCounts;return n[e]=(n[e]||0)+1,e}getSizeSignalRef(t){if(ty(this.parent)){const e=eg(t),n=$e(e),i=this.component.scales[n];if(i&&!i.merged){const t=i.get("type"),e=i.get("range");if(Io(t)&&An(e)){const t=i.get("name"),e=dv(this,n),o=fv(e);if(o){const e=Ys({aggregate:"distinct",field:o},{expr:"datum"});return{signal:tg(t,i,e)}}return Ai(r.unknownField(n)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const e=this.component.data.outputNodes[t];return e?e.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,e){this.signalNameMap.rename(t,e)}renameScale(t,e){this.scaleNameMap.rename(t,e)}renameProjection(t,e){this.projectionNameMap.rename(t,e)}scaleName(t,e){return e?this.getName(t):ue(t)&&Je(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,e){let n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error(r.selectionNotFound(e));return n}hasAxisOrientSignalRef(){var t,e;return(null===(t=this.component.axes.x)||void 0===t?void 0:t.some(t=>t.hasOrientSignalRef()))||(null===(e=this.component.axes.y)||void 0===e?void 0:e.some(t=>t.hasOrientSignalRef()))}}class iy extends ry{vgField(t,e={}){const n=this.fieldDef(t);if(n)return Ys(n,e)}reduceFieldDef(t,e){return Uu(this.getMapping(),(e,n,r)=>{const i=uu(n);return i?t(e,i,r):e},e)}forEachFieldDef(t,e){Iu(this.getMapping(),(e,n)=>{const r=uu(e);r&&t(r,n)},e)}}var oy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class ay extends pd{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=y(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"value",null!==(i=o[1])&&void 0!==i?i:"density"]}clone(){return new ay(null,y(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"DensityTransform "+O(this.transform)}assemble(){const t=this.transform,{density:e}=t,n=oy(t,["density"]),r=Object.assign({type:"kde",field:e},n);return r}}class sy extends pd{constructor(t,e){super(t),this.filter=e}clone(){return new sy(null,Object.assign({},this.filter))}static make(t,e){const{config:n,mark:r,markDef:i}=e,o=Hn("invalid",i,n);if("filter"!==o)return null;const a=e.reduceFieldDef((t,n,i)=>{const o=Je(i)&&e.getScaleComponent(i);if(o){const e=o.get("type");Uo(e)&&"count"!==n.aggregate&&!_a(r)&&(t[n.field]=n)}return t},{});return P(a).length?new sy(t,a):null}dependentFields(){return new Set(P(this.filter))}producedFields(){return new Set}hash(){return"FilterInvalid "+O(this.filter)}assemble(){const t=P(this.filter).reduce((t,e)=>{const n=this.filter[e],r=Ys(n,{expr:"datum"});return null!==n&&("temporal"===n.type?t.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(t.push(`isValid(${r})`),t.push(`isFinite(+${r})`))),t},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class uy extends pd{constructor(t,e){super(t),this.transform=e,this.transform=y(e);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map((t,e)=>{var n;return null!==(n=r[e])&&void 0!==n?n:t})}clone(){return new uy(this.parent,y(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return"FlattenTransform "+O(this.transform)}assemble(){const{flatten:t,as:e}=this.transform,n={type:"flatten",fields:t,as:e};return n}}class cy extends pd{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=y(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"key",null!==(i=o[1])&&void 0!==i?i:"value"]}clone(){return new cy(null,y(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return"FoldTransform "+O(this.transform)}assemble(){const{fold:t,as:e}=this.transform,n={type:"fold",fields:t,as:e};return n}}class ly extends pd{constructor(t,e,n,r){super(t),this.fields=e,this.geojson=n,this.signal=r}clone(){return new ly(null,y(this.fields),this.geojson,this.signal)}static parseAll(t,e){if(e.component.projection&&!e.component.projection.isFit)return t;let n=0;for(const r of[[yt,vt],[xt,bt]]){const i=r.map(t=>{const n=cu(e.encoding[t]);return Ns(n)?n.field:$s(n)?{expr:""+n.datum}:Bs(n)?{expr:""+n["value"]}:void 0});(i[0]||i[1])&&(t=new ly(t,i,null,e.getName("geojson_"+n++)))}if(e.channelHasField(jt)){const r=e.typedFieldDef(jt);r.type===Oo&&(t=new ly(t,null,r.field,e.getName("geojson_"+n++)))}return t}dependentFields(){var t;const e=(null!==(t=this.fields)&&void 0!==t?t:[]).filter(o["J"]);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${O(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class fy extends pd{constructor(t,e,n,r){super(t),this.projection=e,this.fields=n,this.as=r}clone(){return new fy(null,this.projection,y(this.fields),y(this.as))}static parseAll(t,e){if(!e.projectionName())return t;for(const n of[[yt,vt],[xt,bt]]){const r=n.map(t=>{const n=cu(e.encoding[t]);return Ns(n)?n.field:$s(n)?{expr:""+n.datum}:Bs(n)?{expr:""+n["value"]}:void 0}),i=n[0]===xt?"2":"";(r[0]||r[1])&&(t=new fy(t,e.projectionName(),r,[e.getName("x"+i),e.getName("y"+i)]))}return t}dependentFields(){return new Set(this.fields.filter(o["J"]))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${O(this.fields)} ${O(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class dy extends pd{constructor(t,e){super(t),this.transform=e}clone(){return new dy(null,y(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:e=0,stop:n,step:r}=t,i=[e,n,...r?[r]:[]].join(",");return{signal:`sequence(${i})`}}static makeFromTransform(t,e){return new dy(t,e)}static makeFromEncoding(t,e){const n=e.encoding,r=n.x,i=n.y;if(Ns(r)&&Ns(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:u,frame:c,keyvals:l}=o.impute,f=qu(e.mark,n);return new dy(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:a.field},s?{method:s}:{}),void 0!==u?{value:u}:{}),c?{frame:c}:{}),void 0!==l?{keyvals:l}:{}),f.length?{groupby:f}:{}))}return null}hash(){return"Impute "+O(this.transform)}assemble(){const{impute:t,key:e,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:e},n?{keyvals:ef(n)?this.processSequence(n):n}:{}),{method:"value"}),i?{groupby:i}:{}),{value:r&&"value"!==r?null:o});if(r&&"value"!==r){const e=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:a,ignorePeers:!1},i?{groupby:i}:{}),n={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[s,e,n]}return[s]}}var hy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class py extends pd{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=y(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:e.on,null!==(i=o[1])&&void 0!==i?i:e.loess]}clone(){return new py(null,y(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"LoessTransform "+O(this.transform)}assemble(){const t=this.transform,{loess:e,on:n}=t,r=hy(t,["loess","on"]),i=Object.assign({type:"loess",x:n,y:e},r);return i}}class gy extends pd{constructor(t,e,n){super(t),this.transform=e,this.secondary=n}clone(){return new gy(null,y(this.transform),this.secondary)}static make(t,e,n,i){const o=e.component.data.sources,{from:a}=n;let s=null;if(rf(a)){let t=zy(a.data,o);t||(t=new mm(a.data),o.push(t));const n=e.getName("lookup_"+i);s=new gd(t,n,nd.Lookup,e.component.data.outputNodeRefCounts),e.component.data.outputNodes[n]=s}else if(of(a)){const t=a.param;let i;n=Object.assign({as:t},n);try{i=e.getSelectionComponent(B(t),t)}catch(u){throw new Error(r.cannotLookupVariableParameter(t))}if(s=i.materialized,!s)throw new Error(r.noSameUnitLookup(t))}return new gy(t,n,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Object(o["i"])(this.transform.as):this.transform.from.fields)}hash(){return"Lookup "+O({transform:this.transform,secondary:this.secondary})}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Object(o["i"])(this.transform.as)}:{});else{let e=this.transform.as;Object(o["J"])(e)||(Ai(r.NO_FIELDS_NEEDS_AS),e="_lookup"),t={as:[e]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}var my=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class vy extends pd{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=y(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"prob",null!==(i=o[1])&&void 0!==i?i:"value"]}clone(){return new vy(null,y(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"QuantileTransform "+O(this.transform)}assemble(){const t=this.transform,{quantile:e}=t,n=my(t,["quantile"]),r=Object.assign({type:"quantile",field:e},n);return r}}var yy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class by extends pd{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=y(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:e.on,null!==(i=o[1])&&void 0!==i?i:e.regression]}clone(){return new by(null,y(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"RegressionTransform "+O(this.transform)}assemble(){const t=this.transform,{regression:e,on:n}=t,r=yy(t,["regression","on"]),i=Object.assign({type:"regression",x:n,y:e},r);return i}}class xy extends pd{constructor(t,e){super(t),this.transform=e}clone(){return new xy(null,y(this.transform))}addDimensions(t){var e;this.transform.groupby=C((null!==(e=this.transform.groupby)&&void 0!==e?e:[]).concat(t),t=>t)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}hash(){return"PivotTransform "+O(this.transform)}assemble(){const{pivot:t,value:e,groupby:n,limit:r,op:i}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:e},void 0!==r?{limit:r}:{}),void 0!==i?{op:i}:{}),void 0!==n?{groupby:n}:{})}}class wy extends pd{constructor(t,e){super(t),this.transform=e}clone(){return new wy(null,y(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return"SampleTransform "+O(this.transform)}assemble(){return{type:"sample",size:this.transform.sample}}}function Oy(t){let e=0;function n(r,i){var o;if(r instanceof mm&&!r.isGenerator&&!Xf(r.data)){t.push(i);const e={name:null,source:i.name,transform:[]};i=e}if(r instanceof dm&&(r.parent instanceof mm&&!i.source?(i.format=Object.assign(Object.assign({},null!==(o=i.format)&&void 0!==o?o:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof am)return i.name||(i.name="data_"+e++),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source,void t.push(...r.assemble());if((r instanceof pm||r instanceof gm||r instanceof sy||r instanceof np||r instanceof Np||r instanceof fy||r instanceof om||r instanceof gy||r instanceof zm||r instanceof $m||r instanceof cy||r instanceof uy||r instanceof ay||r instanceof py||r instanceof vy||r instanceof by||r instanceof hm||r instanceof wy||r instanceof xy)&&i.transform.push(r.assemble()),(r instanceof nm||r instanceof vd||r instanceof dy||r instanceof Lm||r instanceof ly)&&i.transform.push(...r.assemble()),r instanceof gd)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof gd)r.setSource(i.name);else if(i.name||(i.name="data_"+e++),r.setSource(i.name),1===r.numChildren()){t.push(i);const e={name:null,source:i.name,transform:[]};i=e}switch(r.numChildren()){case 0:r instanceof gd&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+e++);let o=i.name;!i.source||i.transform.length>0?t.push(i):o=i.source;for(const t of r.children){const e={name:null,source:o,transform:[]};n(t,e)}break}}}return n}function _y(t){const e=[],n=Oy(e);for(const r of t.children)n(r,{source:t.name,name:null,transform:[]});return e}function jy(t,e){var n,r;const i=[],o=Oy(i);let a=0;for(const u of t.sources){u.hasName()||(u.dataName="source_"+a++);const t=u.assemble();o(u,t)}for(const u of i)0===u.transform.length&&delete u.transform;let s=0;for(const[u,c]of i.entries())0!==(null!==(n=c.transform)&&void 0!==n?n:[]).length||c.source||i.splice(s++,0,i.splice(u,1)[0]);for(const u of i)for(const e of null!==(r=u.transform)&&void 0!==r?r:[])"lookup"===e.type&&(e.from=t.outputNodes[e.from].getSource());for(const u of i)u.name in e&&(u.values=e[u.name]);return i}function Ey(t){return"top"===t||"left"===t||kn(t)?"header":"footer"}function ky(t){for(const e of Jt)Ay(t,e);Cy(t,"x"),Cy(t,"y")}function Ay(t,e){var n;const{facet:r,config:i,child:a,component:s}=t;if(t.channelHasField(e)){const u=r[e],c=Pp("title",null,i,e);let l=ru(u,i,{allowDisabling:!0,includeDefault:void 0===c||!!c});a.component.layoutHeaders[e].title&&(l=Object(o["B"])(l)?l.join(", "):l,l+=" / "+a.component.layoutHeaders[e].title,a.component.layoutHeaders[e].title=null);const f=Pp("labelOrient",u.header,i,e),d=null!==u.header&&Q(null===(n=u.header)||void 0===n?void 0:n.labels,i.header.labels,!0),h=j(["bottom","right"],f)?"footer":"header";s.layoutHeaders[e]={title:null!==u.header?l:null,facetFieldDef:u,[h]:"facet"===e?[]:[Sy(t,e,d)]}}}function Sy(t,e,n){const r="row"===e?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function Cy(t,e){var n;const{child:r}=t;if(r.component.axes[e]){const{layoutHeaders:i,resolve:o}=t.component;if(o.axis[e]=ig(o,e),"shared"===o.axis[e]){const o="x"===e?"column":"row",a=i[o];for(const i of r.component.axes[e]){const e=Ey(i.get("orient"));null!==(n=a[e])&&void 0!==n||(a[e]=[Sy(t,o,!1)]);const r=dp(i,"main",t.config,{header:!0});r&&a[e][0].axes.push(r),i.mainExtracted=!0}}}}function Dy(t){Ty(t),Ny(t,"width"),Ny(t,"height")}function My(t){Ty(t);const e=1===t.layout.columns?"width":"childWidth",n=void 0===t.layout.columns?"height":"childHeight";Ny(t,e),Ny(t,n)}function Ty(t){for(const e of t.children)e.parseLayoutSize()}function Ny(t,e){var n;const r=eg(e),i=$e(r),o=t.component.resolve,a=t.component.layoutSize;let s;for(const u of t.children){const e=u.component.layoutSize.getWithExplicit(r),a=null!==(n=o.scale[i])&&void 0!==n?n:rg(i,t);if("independent"===a&&"step"===e.value){s=void 0;break}if(s){if("independent"===a&&s.value!==e.value){s=void 0;break}s=Yf(s,e,r,"")}else s=e}if(s){for(const n of t.children)t.renameSignal(n.getName(r),t.getName(e)),n.component.layoutSize.set(r,"merged",!1);a.setWithExplicit(e,s)}else a.setWithExplicit(e,{explicit:!1,value:void 0})}function Fy(t){const{size:e,component:n}=t;for(const r of Me){const i=pe(r);if(e[i]){const t=e[i];n.layoutSize.set(i,Yc(t)?"step":t,!0)}else{const e=$y(t,i);n.layoutSize.set(i,e,!1)}}}function $y(t,e){const n="width"===e?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){const t=i.get("type"),n=i.get("range");if(Io(t)){const t=nl(r.view,e);return An(n)||Yc(t)?"step":t}return tl(r.view,e)}if(t.hasProjection||"arc"===t.mark)return tl(r.view,e);{const t=nl(r.view,e);return Yc(t)?t.step:t}}function Py(t,e,n){return Ys(e,Object.assign({suffix:"by_"+Ys(t)},null!==n&&void 0!==n?n:{}))}class Ry extends iy{constructor(t,e,n,r){super(t,"facet",e,n,r,t.resolve),this.child=Ib(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!ys(t))return{facet:this.initFacetFieldDef(t,"facet")};const e=P(t),n={};for(const i of e){if(![at,st].includes(i)){Ai(r.incompatibleChannel(i,"facet"));break}const e=t[i];if(void 0===e.field){Ai(r.emptyFieldDef(e,i));break}n[i]=this.initFacetFieldDef(e,i)}return n}initFacetFieldDef(t,e){const n=hu(t,e);return n.header?n.header=On(n.header):null===n.header&&(n.header=null),n}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Uy(this),this.child.parseData()}parseLayoutSize(){Ty(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),ky(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,e,n;const r={};for(const i of Jt)for(const o of zp){const a=this.component.layoutHeaders[i],s=a[o],{facetFieldDef:u}=a;if(u){const e=Pp("titleOrient",u.header,this.config,i);if(["right","bottom"].includes(e)){const n=$p(i,e);null!==(t=r.titleAnchor)&&void 0!==t||(r.titleAnchor={}),r.titleAnchor[n]="end"}}if(null===s||void 0===s?void 0:s[0]){const t="row"===i?"height":"width",s="header"===o?"headerBand":"footerBand";"facet"===i||this.child.component.layoutSize.get(t)||(null!==(e=r[s])&&void 0!==e||(r[s]={}),r[s][i]=.5),a.title&&(null!==(n=r.offset)&&void 0!==n||(r.offset={}),r.offset["row"===i?"rowTitle":"columnTitle"]=10)}}return r}assembleDefaultLayout(){const{column:t,row:e}=this.facet,n=t?this.columnDistinctSignal():e?1:void 0;let r="all";return(e||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(r="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),n?{columns:n}:{}),{bounds:"full",align:r})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Ry)){const t=this.getName("column_domain");return{signal:`length(data('${t}'))`}}}assembleGroup(t){return this.parent&&this.parent instanceof Ry?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:Ys(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],e=[],n=[];if(this.child instanceof Ry){if(this.child.channelHasField("column")){const r=Ys(this.child.facet.column);t.push(r),e.push("distinct"),n.push("distinct_"+r)}}else for(const i of Me){const o=this.child.component.scales[i];if(o&&!o.merged){const a=o.get("type"),s=o.get("range");if(Io(a)&&An(s)){const o=dv(this.child,i),a=fv(o);a?(t.push(a),e.push("distinct"),n.push("distinct_"+a)):Ai(r.unknownField(i))}}}return{fields:t,ops:e,as:n}}assembleFacet(){const{name:t,data:e}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:a,as:s}=this.getCardinalityAggregateForChild(),u=[];for(const l of Jt){const t=this.facet[l];if(t){u.push(Ys(t));const{bin:e,sort:c}=t;if(mn(e)&&u.push(Ys(t,{binSuffix:"end"})),ms(c)){const{field:e,op:o=ds}=c,u=Py(t,c);n&&r?(i.push(u),a.push("max"),s.push(u)):(i.push(e),a.push(o),s.push(u))}else if(Object(o["B"])(c)){const e=Fp(t,l);i.push(e),a.push("max"),s.push(e)}}}const c=!!n&&!!r;return Object.assign({name:t,data:e,groupby:u},c||i.length>0?{aggregate:Object.assign(Object.assign({},c?{cross:c}:{}),i.length?{fields:i,ops:a,as:s}:{})}:{})}facetSortFields(t){const{facet:e}=this,n=e[t];return n?ms(n.sort)?[Py(n,n.sort,{expr:"datum"})]:Object(o["B"])(n.sort)?[Fp(n,t,{expr:"datum"})]:[Ys(n,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:e}=this,n=e[t];if(n){const{sort:t}=n,e=(ms(t)?t.order:!Object(o["B"])(t)&&t)||"ascending";return[e]}return[]}assembleLabelTitle(){var t;const{facet:e,config:n}=this;if(e.facet)return Wp(e.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of Lp)if(e[i]){const o=Pp("labelOrient",null===(t=e[i])||void 0===t?void 0:t.header,n,i);if(r[i].includes(o))return Wp(e[i],i,n)}}assembleMarks(){const{child:t}=this,e=this.component.data.facetRoot,n=_y(e),r=t.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle(),a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{}),o?{style:o}:{}),{from:{facet:this.assembleFacet()},sort:{field:Jt.map(t=>this.facetSortFields(t)).flat(),order:Jt.map(t=>this.facetSortOrder(t)).flat()}}),n.length>0?{data:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(sd(this,[])));return[a]}getMapping(){return this.facet}}function Ly(t,e){const{row:n,column:r}=e;if(n&&r){let e=null;for(const i of[n,r])if(ms(i.sort)){const{field:n,op:r=ds}=i.sort;t=e=new $m(t,{joinaggregate:[{op:r,field:n,as:Py(i,i.sort,{forAs:!0})}],groupby:[Ys(i)]})}return e}return null}function zy(t,e){var n,r,i,o;for(const a of e){const e=a.data;if(t.name&&a.hasName()&&t.name!==a.dataName)continue;const s=null===(n=t["format"])||void 0===n?void 0:n.mesh,u=null===(r=e.format)||void 0===r?void 0:r.feature;if(s&&u)continue;const c=null===(i=t["format"])||void 0===i?void 0:i.feature;if((c||u)&&c!==u)continue;const l=null===(o=e.format)||void 0===o?void 0:o.mesh;if(!s&&!l||s===l)if(Jf(t)&&Jf(e)){if(v(t.values,e.values))return a}else if(Xf(t)&&Xf(e)){if(t.url===e.url)return a}else if(Qf(t)&&t.name===a.dataName)return a}return null}function By(t,e){if(t.data||!t.parent){if(null===t.data){const t=new mm({values:[]});return e.push(t),t}const n=zy(t.data,e);if(n)return Kf(t.data)||(n.data.format=A({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const n=new mm(t.data);return e.push(n),n}}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function Iy(t,e,n){var i,o;let a=0;for(const s of e.transforms){let u,c=void 0;if(gf(s))u=t=new Np(t,s),c="derived";else if(tf(s)){const r=cm(s);u=t=null!==(i=dm.makeWithAncestors(t,{},r,n))&&void 0!==i?i:t,t=new np(t,e,s.filter)}else if(mf(s))u=t=nm.makeFromTransform(t,s,e),c="number";else if(yf(s)){c="date";const e=n.getWithExplicit(s.field);void 0===e.value&&(t=new dm(t,{[s.field]:c}),n.set(s.field,c,!1)),u=t=vd.makeFromTransform(t,s)}else if(bf(s))u=t=om.makeFromTransform(t,s),c="number",Jh(e)&&(t=new hm(t));else if(nf(s))u=t=gy.make(t,e,s,a++),c="derived";else if(df(s))u=t=new zm(t,s),c="number";else if(hf(s))u=t=new $m(t,s),c="number";else if(xf(s))u=t=Lm.makeFromTransform(t,s),c="derived";else if(wf(s))u=t=new cy(t,s),c="derived";else if(pf(s))u=t=new uy(t,s),c="derived";else if(af(s))u=t=new xy(t,s),c="derived";else if(ff(s))t=new wy(t,s);else if(vf(s))u=t=dy.makeFromTransform(t,s),c="derived";else if(sf(s))u=t=new ay(t,s),c="derived";else if(uf(s))u=t=new vy(t,s),c="derived";else if(cf(s))u=t=new by(t,s),c="derived";else{if(!lf(s)){Ai(r.invalidTransformIgnored(s));continue}u=t=new py(t,s),c="derived"}if(u&&void 0!==c)for(const t of null!==(o=u.producedFields())&&void 0!==o?o:[])n.set(t,c,!1)}return t}function Uy(t){var e,n,r,i,o,a,s,u,c,l;let f=By(t,t.component.data.sources);const{outputNodes:d,outputNodeRefCounts:h}=t.component.data,p=t.parent?t.parent.component.data.ancestorParse.clone():new Vf,g=t.data;Kf(g)?(Zf(g)?f=new gm(f,g.sequence):ed(g)&&(f=new pm(f,g.graticule)),p.parseNothing=!0):null===(null===(e=null===g||void 0===g?void 0:g.format)||void 0===e?void 0:e.parse)&&(p.parseNothing=!0),f=null!==(n=dm.makeExplicit(f,t,p))&&void 0!==n?n:f,f=new hm(f);const m=t.parent&&ny(t.parent);(Zv(t)||ty(t))&&m&&(f=null!==(r=nm.makeFromEncoding(f,t))&&void 0!==r?r:f),t.transforms.length>0&&(f=Iy(f,t,p));const v=fm(t),y=lm(t);f=null!==(i=dm.makeWithAncestors(f,{},Object.assign(Object.assign({},v),y),p))&&void 0!==i?i:f,Zv(t)&&(f=ly.parseAll(f,t),f=fy.parseAll(f,t)),(Zv(t)||ty(t))&&(m||(f=null!==(o=nm.makeFromEncoding(f,t))&&void 0!==o?o:f),f=null!==(a=vd.makeFromEncoding(f,t))&&void 0!==a?a:f,f=Np.parseAllForSortIndex(f,t));const b=t.getDataName(nd.Raw),x=new gd(f,b,nd.Raw,h);if(d[b]=x,f=x,Zv(t)){const e=om.makeFromEncoding(f,t);e&&(f=e,Jh(t)&&(f=new hm(f))),f=null!==(s=dy.makeFromEncoding(f,t))&&void 0!==s?s:f,f=null!==(u=Lm.makeFromEncoding(f,t))&&void 0!==u?u:f}Zv(t)&&(f=null!==(c=sy.make(f,t))&&void 0!==c?c:f);const w=t.getDataName(nd.Main),O=new gd(f,w,nd.Main,h);d[w]=O,f=O,Zv(t)&&sp(t,O);let _=null;if(ty(t)){const e=t.getName("facet");f=null!==(l=Ly(f,t.facet))&&void 0!==l?l:f,_=new am(f,t,e,O.getSource()),d[e]=_}return Object.assign(Object.assign({},t.component.data),{outputNodes:d,outputNodeRefCounts:h,raw:x,main:O,facetRoot:_,ancestorParse:p})}class qy extends ry{constructor(t,e,n,i){var o,a,s,u;super(t,"concat",e,n,i,t.resolve),"shared"!==(null===(a=null===(o=t.resolve)||void 0===o?void 0:o.axis)||void 0===a?void 0:a.x)&&"shared"!==(null===(u=null===(s=t.resolve)||void 0===s?void 0:s.axis)||void 0===u?void 0:u.y)||Ai(r.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((t,e)=>Ib(t,this,this.getName("concat_"+e),void 0,i))}parseData(){this.component.data=Uy(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of P(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Wc(t)?t.vconcat:Gc(t)?t.hconcat:t.concat}parseLayoutSize(){My(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Qp(this);for(const e of this.children)t.push(...e.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleMarks(){return this.children.map(t=>{const e=t.assembleTitle(),n=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},e?{title:e}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())})}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},null!=t?{columns:t}:{}),{bounds:"full",align:"each"})}}function Hy(t){return!1===t||null===t}const Wy=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},ku),{labelExpr:1,encode:1}),Gy=P(Wy);class Yy extends Uf{constructor(t={},e={},n=!1){super(),this.explicit=t,this.implicit=e,this.mainExtracted=n}clone(){return new Yy(y(this.explicit),y(this.implicit),this.mainExtracted)}hasAxisPart(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!Hy(this.get(t)))}hasOrientSignalRef(){return kn(this.explicit.orient)}}function Vy(t,e,n){var r;const{encoding:i,config:o}=t,a=null!==(r=cu(i[e]))&&void 0!==r?r:cu(i[he(e)]),s=t.axis(e)||{},{format:u,formatType:c}=s;return Ka(c)?Object.assign({text:rs({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:c,config:o})},n):n}function Xy(t){return Me.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[nb(n,t)]),e),{})}const Jy={bottom:"top",top:"bottom",left:"right",right:"left"};function Qy(t){var e;const{axes:n,resolve:r}=t.component,i={top:0,bottom:0,right:0,left:0};for(const o of t.children){o.parseAxesAndHeaders();for(const e of P(o.component.axes))r.axis[e]=ig(t.component.resolve,e),"shared"===r.axis[e]&&(n[e]=Ky(n[e],o.component.axes[e]),n[e]||(r.axis[e]="independent",delete n[e]))}for(const o of Me){for(const a of t.children)if(a.component.axes[o]){if("independent"===r.axis[o]){n[o]=(null!==(e=n[o])&&void 0!==e?e:[]).concat(a.component.axes[o]);for(const t of a.component.axes[o]){const{value:e,explicit:n}=t.getWithExplicit("orient");if(!kn(e)){if(i[e]>0&&!n){const n=Jy[e];i[e]>i[n]&&t.set("orient",n,!1)}i[e]++}}}delete a.component.axes[o]}if("independent"===r.axis[o]&&n[o]&&n[o].length>1)for(const t of n[o])t.get("grid")&&!t.explicit.grid&&(t.implicit.grid=!1)}}function Ky(t,e){if(!t)return e.map(t=>t.clone());{if(t.length!==e.length)return;const n=t.length;for(let r=0;r<n;r++){const n=t[r],i=e[r];if(!!n!==!!i)return;if(n&&i){const e=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(e.explicit&&o.explicit&&e.value!==o.value)return;t[r]=Zy(n,i)}}}return t}function Zy(t,e){for(const n of Gy){const r=Yf(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(t,e)=>{switch(n){case"title":return Qn(t,e);case"gridScale":return{explicit:t.explicit,value:Q(t.value,e.value)}}return Gf(t,e,n,"axis")});t.setWithExplicit(n,r)}return t}function tb(t,e,n,r,i){if("disable"===e)return void 0!==n;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(kn(n.labelAngle)?n.labelAngle:rt(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===Dp(r,i))return!0}return t===n[e]}const eb=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function nb(t,e){var n,r,i;let o=e.axis(t);const a=new Yy,s=cu(e.encoding[t]),{mark:u,config:c}=e,l=(null===o||void 0===o?void 0:o.orient)||(null===(n=c["x"===t?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=c.axis)||void 0===r?void 0:r.orient)||Sp(t),f=e.getScaleComponent(t).get("type"),d=mp(t,f,l,e.config),h=void 0!==o?!o:yp("disable",c.style,null===o||void 0===o?void 0:o.style,d).configValue;if(a.set("disable",h,void 0!==o),h)return a;o=o||{};const p=Op(s,o,t,c.style,d),g={fieldOrDatumDef:s,axis:o,channel:t,model:e,scaleType:f,orient:l,labelAngle:p,mark:u,config:c};for(const y of Gy){const n=y in bp?bp[y](g):Su(y)?o[y]:void 0,r=void 0!==n,i=tb(n,y,o,e,t);if(r&&i)a.set(y,n,i);else{const{configValue:t,configFrom:e}=Su(y)&&"values"!==y?yp(y,c.style,o.style,d):{},s=void 0!==t;r&&!s?a.set(y,n,i):("vgAxisConfig"!==e||eb.has(y)&&s||_u(t)||kn(t))&&a.set(y,t,!1)}}const m=null!==(i=o.encoding)&&void 0!==i?i:{},v=ju.reduce((n,r)=>{var i;if(!a.hasAxisPart(r))return n;const o=ng(null!==(i=m[r])&&void 0!==i?i:{},e),s="labels"===r?Vy(e,t,o):o;return void 0===s||$(s)||(n[r]={update:s}),n},{});return $(v)||a.set("encode",v,!!o.encoding||void 0!==o.labelAngle),a}function rb({encoding:t,size:e}){for(const n of Me){const i=pe(n);Yc(e[i])&&Ps(t[n])&&(delete e[i],Ai(r.stepDropped(i)))}return e}function ib(t,e,n){const i=On(t),o=Hn("orient",i,n);if(i.orient=ub(i.type,e,o),void 0!==o&&o!==i.orient&&Ai(r.orientOverridden(i.orient,o)),"bar"===i.type&&i.orient){const t=Hn("cornerRadiusEnd",i,n);if(void 0!==t){const n="horizontal"===i.orient&&e.x2||"vertical"===i.orient&&e.y2?["cornerRadius"]:Ra[i.orient];for(const e of n)i[e]=t;void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}const a=Hn("opacity",i,n);void 0===a&&(i.opacity=ab(i.type,e));const s=Hn("cursor",i,n);return void 0===s&&(i.cursor=ob(i,e,n)),i}function ob(t,e,n){return e.href||t.href||Hn("href",t,n)?"pointer":t.cursor}function ab(t,e){if(j([pa,ya,xa,wa],t)&&!$u(e))return.7}function sb(t,e,{graticule:n}){if(n)return!1;const r=Wn("filled",t,e),i=t.type;return Q(r,i!==pa&&i!==ha&&i!==ma)}function ub(t,e,n){switch(t){case pa:case xa:case wa:case va:case ga:case da:return}const{x:r,y:i,x2:o,y2:a}=e;switch(t){case fa:if(Ns(r)&&(vn(r.bin)||Ns(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ns(i)&&(vn(i.bin)||Ns(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(Ns(r)&&r.type===yo&&!mn(r.bin)||Rs(r)))return"horizontal";if(!a&&(Ns(i)&&i.type===yo&&!mn(i.bin)||Rs(i)))return"vertical"}case ma:if(o&&(!Ns(r)||!vn(r.bin))&&a&&(!Ns(i)||!vn(i.bin)))return;case la:if(a)return Ns(i)&&vn(i.bin)?"horizontal":"vertical";if(o)return Ns(r)&&vn(r.bin)?"vertical":"horizontal";if(t===ma){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case ha:case ya:{const e=Ps(r),o=Ps(i);if(n)return n;if(e&&!o)return"tick"!==t?"horizontal":"vertical";if(!e&&o)return"tick"!==t?"vertical":"horizontal";if(e&&o){const e=r,n=i,o=e.type===xo,a=n.type===xo;return o&&!a?"tick"!==t?"vertical":"horizontal":!o&&a?"tick"!==t?"horizontal":"vertical":!e.aggregate&&n.aggregate?"tick"!==t?"vertical":"horizontal":e.aggregate&&!n.aggregate&&"tick"!==t?"horizontal":"vertical"}return}}return"vertical"}const cb={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Xd("x",t,{defaultPos:"mid"})),Xd("y",t,{defaultPos:"mid"})),ah(t,"radius","arc")),ah(t,"theta","arc"))},lb={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),eh("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===t.markDef.orient})),eh("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===t.markDef.orient})),vh(t))},fb={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),ah(t,"x","bar")),ah(t,"y","bar"))},db={vgMark:"shape",encodeEntry:t=>Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape,r=Object.assign({type:"geoshape",projection:t.projectionName()},n&&Ns(n)&&n.type===Oo?{field:Ys(n,{expr:"datum"})}:{});return[r]}},hb={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),ah(t,"x","image")),ah(t,"y","image")),Rd(t,"url"))},pb={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Xd("x",t,{defaultPos:"mid"})),Xd("y",t,{defaultPos:"mid"})),Wd("size",t,{vgChannel:"strokeWidth"})),vh(t))},gb={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Xd("x",t,{defaultPos:"mid"})),Xd("y",t,{defaultPos:"mid"})),Wd("size",t)),vh(t))};function mb(t,e){const{config:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Xd("x",t,{defaultPos:"mid"})),Xd("y",t,{defaultPos:"mid"})),Wd("size",t)),Wd("angle",t)),vb(t,n,e))}function vb(t,e,n){return n?{shape:{value:n}}:Wd("shape",t)}const yb={vgMark:"symbol",encodeEntry:t=>mb(t)},bb={vgMark:"symbol",encodeEntry:t=>mb(t,"circle")},xb={vgMark:"symbol",encodeEntry:t=>mb(t,"square")},wb={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),ah(t,"x","rect")),ah(t,"y","rect"))},Ob={vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),eh("x",t,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n})),eh("y",t,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n})),Wd("size",t,{vgChannel:"strokeWidth"})):{}}},_b={vgMark:"text",encodeEntry:t=>{const{config:e,encoding:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hh(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Xd("x",t,{defaultPos:"mid"})),Xd("y",t,{defaultPos:"mid"})),Rd(t)),Wd("size",t,{vgChannel:"fontSize"})),Wd("angle",t)),bh("align",jb(t.markDef,n,e))),bh("baseline",Eb(t.markDef,n,e))),Xd("radius",t,{defaultPos:null})),Xd("theta",t,{defaultPos:null}))}};function jb(t,e,n){const r=Hn("align",t,n);if(void 0===r)return"center"}function Eb(t,e,n){const r=Hn("baseline",t,n);if(void 0===r)return"middle"}const kb={vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hh(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Xd("x",t,{defaultPos:"mid",vgChannel:"xc"})),Xd("y",t,{defaultPos:"mid",vgChannel:"yc"})),Wd("size",t,{defaultValue:Ab(t),vgChannel:i})),{[o]:zn(Hn("thickness",n,e))})}};function Ab(t){var e;const{config:n,markDef:r}=t,{orient:i}=r,a="horizontal"===i?"width":"height",s=t.getScaleComponent("horizontal"===i?"x":"y"),u=null!==(e=Hn("size",r,n,{vgChannel:a}))&&void 0!==e?e:n.tick.bandSize;if(void 0!==u)return u;{const t=s?s.get("range"):void 0;if(t&&An(t)&&Object(o["G"])(t.step))return 3*t.step/4;const e=el(n.view,a);return 3*e/4}}const Sb={arc:cb,area:lb,bar:fb,circle:bb,geoshape:db,image:hb,line:pb,point:yb,rect:wb,rule:Ob,square:xb,text:_b,tick:kb,trail:gb};function Cb(t){if(j([ha,la,ba],t.mark)){const e=qu(t.mark,t.encoding);if(e.length>0)return Mb(t,e)}else if(t.mark===fa){const e=Fn.some(e=>Hn(e,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return Nb(t)}return $b(t)}const Db="faceted_path_";function Mb(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:Db+t.requestDataName(nd.Main),data:t.requestDataName(nd.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:$b(t,{fromPrefix:Db})}]}const Tb="stack_group_";function Nb(t){const[e]=$b(t,{fromPrefix:Tb}),n=t.scaleName(t.stack.fieldChannel),r=(e={})=>t.vgField(t.stack.fieldChannel,e),i=(t,e)=>{const i=[r({prefix:"min",suffix:"start",expr:e}),r({prefix:"max",suffix:"start",expr:e}),r({prefix:"min",suffix:"end",expr:e}),r({prefix:"max",suffix:"end",expr:e})];return`${t}(${i.map(t=>`scale('${n}',${t})`).join(",")})`};let o,a;"x"===t.stack.fieldChannel?(o=Object.assign(Object.assign({},b(e.encode.update,["y","yc","y2","height",...Fn])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update=Object.assign(Object.assign({},x(e.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=Object.assign(Object.assign({},b(e.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update=Object.assign(Object.assign({},x(e.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const c of Fn){const n=Wn(c,t.markDef,t.config);e.encode.update[c]?(o[c]=e.encode.update[c],delete e.encode.update[c]):n&&(o[c]=zn(n)),n&&(e.encode.update[c]={value:0})}const s=[];if(t.stack.groupbyChannel){const e=t.fieldDef(t.stack.groupbyChannel),n=Ys(e);n&&s.push(n),((null===e||void 0===e?void 0:e.bin)||(null===e||void 0===e?void 0:e.timeUnit))&&s.push(Ys(e,{binSuffix:"end"}))}const u=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"];return o=u.reduce((n,r)=>{if(e.encode.update[r])return Object.assign(Object.assign({},n),{[r]:e.encode.update[r]});{const e=Wn(r,t.markDef,t.config);return void 0!==e?Object.assign(Object.assign({},n),{[r]:zn(e)}):n}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(nd.Main),name:Tb+t.requestDataName(nd.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[e]}]}]}function Fb(t){const{encoding:e,stack:n,mark:r,markDef:i,config:a}=t,s=e.order;if(!(!Object(o["B"])(s)&&Bs(s)&&_(s.value)||!s&&_(Hn("order",i,a)))){if((Object(o["B"])(s)||Ns(s))&&!n)return Vn(s,{expr:"datum"});if(_a(r)){const n="horizontal"===i.orient?"y":"x",r=e[n];if(Ns(r)){const e=r.sort;if(Object(o["B"])(e))return{field:Ys(r,{prefix:n,suffix:"sort_index",expr:"datum"})};if(ms(e))return{field:Ys({aggregate:$u(t.encoding)?e.op:void 0,field:e.field},{expr:"datum"})};if(gs(e)){const n=t.fieldDef(e.encoding);return{field:Ys(n,{expr:"datum"}),order:e.order}}return null===e?void 0:{field:Ys(r,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}function $b(t,e={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=t,a=Q(r.clip,Pb(t),Rb(t)),s=qn(r),u=i.key,c=Fb(t),l=Lb(t),f=Hn("aria",r,o),d=Sb[n].postEncodingTransform?Sb[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:Sb[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),u?{key:u.field}:{}),c?{sort:c}:{}),l||{}),!1===f?{aria:f}:{}),{from:{data:e.fromPrefix+t.requestDataName(nd.Main)},encode:{update:Sb[n].encodeEntry(t)}}),d?{transform:d}:{})]}function Pb(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!!(e&&e.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}function Rb(t){const e=t.component.projection;return!(!e||e.isFit)||void 0}function Lb(t){if(!t.component.selection)return null;const e=P(t.component.selection).length;let n=e,r=t.parent;while(r&&0===n)n=P(r.component.selection).length,r=r.parent;return n?{interactive:e>0||!!t.encoding.tooltip}:null}class zb extends iy{constructor(t,e,n,r={},i){var o;super(t,"unit",e,n,i,void 0,Vc(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=ka(t.mark)?Object.assign({},t.mark):{type:t.mark},s=a.type;void 0===a.filled&&(a.filled=sb(a,i,{graticule:t.data&&ed(t.data)}));const u=this.encoding=Lu(t.encoding||{},s,a.filled,i);this.markDef=ib(a,u,i),this.size=rb({encoding:u,size:Vc(t)?Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):r}),this.stack=Nl(s,u),this.specifiedScales=this.initScales(s,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(null!==(o=t.params)&&void 0!==o?o:[]).filter(t=>Bc(t))}get hasProjection(){const{encoding:t}=this,e=this.mark===Oa,n=t&&Gt.some(e=>Ls(t[e]));return e||n}scaleDomain(t){const e=this.specifiedScales[t];return e?e.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,e){return Xe.reduce((t,n)=>{var r;const i=cu(e[n]);return i&&(t[n]=this.initScale(null!==(r=i.scale)&&void 0!==r?r:{})),t},{})}initScale(t){const{domain:e,range:n}=t,r=On(t);return Object(o["B"])(e)&&(r.domain=e.map(Rn)),Object(o["B"])(n)&&(r.range=n.map(Rn)),r}initAxes(t){return Me.reduce((e,n)=>{const r=t[n];if(Ls(r)||n===ct&&Ls(t.x2)||n===lt&&Ls(t.y2)){const t=Ls(r)?r.axis:void 0;e[n]=t?this.initAxis(Object.assign({},t)):t}return e},{})}initAxis(t){const e=P(t),n={};for(const r of e){const e=t[r];n[r]=_u(e)?Pn(e):Rn(e)}return n}initLegends(t){return We.reduce((e,n)=>{const r=cu(t[n]);if(r&&Ye(n)){const t=r.legend;e[n]=t?On(t):t}return e},{})}parseData(){this.component.data=Uy(this)}parseLayoutSize(){Fy(this)}parseSelections(){this.component.selection=ip(this,this.selection)}parseMarkGroup(){this.component.mark=Cb(this)}parseAxesAndHeaders(){this.component.axes=Xy(this)}assembleSelectionTopLevelSignals(t){return ud(this,t)}assembleSignals(){return[...hp(this),...ad(this,[])]}assembleSelectionData(t){return cd(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Qp(this)}assembleMarks(){var t;let e=null!==(t=this.component.mark)&&void 0!==t?t:[];return this.parent&&ny(this.parent)||(e=ld(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Fu(this.encoding,t)}fieldDef(t){const e=this.encoding[t];return uu(e)}typedFieldDef(t){const e=this.fieldDef(t);return zs(e)?e:null}}class Bb extends ry{constructor(t,e,n,i,o){super(t,"layer",e,n,o,t.resolve,t.view);const a=Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((t,e)=>{if(Ol(t))return new Bb(t,this,this.getName("layer_"+e),a,o);if(Mu(t))return new zb(t,this,this.getName("layer_"+e),a,o);throw new Error(r.invalidSpec(t))})}parseData(){this.component.data=Uy(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Dy(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of P(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Qy(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleSignals()),hp(this))}assembleLayoutSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleLayoutSignals()),Qp(this))}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const e of this.children)if(t=e.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return fd(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,e)=>t.concat(e.assembleLegends()),Rg(this))}}function Ib(t,e,n,i,o){if(xs(t))return new Ry(t,e,n,o);if(Ol(t))return new Bb(t,e,n,i,o);if(Mu(t))return new zb(t,e,n,i,o);if(qc(t))return new qy(t,e,n,o);throw new Error(r.invalidSpec(t))}var Ub=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function qb(t,e={}){e.logger&&Ei(e.logger),e.fieldTitle&&eu(e.fieldTitle);try{const n=gl(Object(o["P"])(e.config,t.config)),r=Mf(t,n),i=Ib(r,null,"",void 0,n);i.parse(),Vm(i.component.data,i);const a=Wb(i,Hb(t,r.autosize,n,i),t.datasets,t.usermeta);return{spec:a,normalized:r}}finally{e.logger&&ki(),e.fieldTitle&&nu()}}function Hb(t,e,n,i){const a=i.component.layoutSize.get("width"),s=i.component.layoutSize.get("height");if(void 0===e?(e={type:"pad"},i.hasAxisOrientSignalRef()&&(e.resize=!0)):Object(o["J"])(e)&&(e={type:e}),a&&s&&Lf(e.type))if("step"===a&&"step"===s)Ai(r.droppingFit()),e.type="pad";else if("step"===a||"step"===s){const t="step"===a?"width":"height";Ai(r.droppingFit($e(t)));const n="width"===t?"height":"width";e.type=zf(n)}return Object.assign(Object.assign(Object.assign({},1===P(e).length&&e.type?"pad"===e.type?{}:{autosize:e.type}:{autosize:e}),If(n,!1)),If(t,!0))}function Wb(t,e,n={},r){const i=t.config?bl(t.config):void 0,o=[].concat(t.assembleSelectionData([]),jy(t.component.data,n)),a=t.assembleProjections(),s=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0);let l=t.assembleLayoutSignals();l=l.filter(t=>"width"!==t.name&&"height"!==t.name||void 0===t.value||(e[t.name]=+t.value,!1));const{params:f}=e,d=Ub(e,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),d),s?{title:s}:{}),u?{style:u}:{}),c?{encode:{update:c}}:{}),{data:o}),a.length>0?{projections:a}:{}),t.assembleGroup([...l,...t.assembleSelectionTopLevelSignals([]),...Uc(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}const Gb=i.version},"2a86":function(t,e,n){const r=n("3fce"),i=(t,e,n)=>{try{e=new r(e,n)}catch(i){return!1}return e.test(t)};t.exports=i},"2b0e":function(t,e,n){"use strict";(function(t){
/*!
 * Vue.js v2.6.12
 * (c) 2014-2020 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return!1===t}function s(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function u(t){return null!==t&&"object"===typeof t}var c=Object.prototype.toString;function l(t){return"[object Object]"===c.call(t)}function f(t){return"[object RegExp]"===c.call(t)}function d(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function h(t){return i(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function g(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}m("slot,component",!0);var v=m("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function x(t,e){return b.call(t,e)}function w(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var O=/-(\w)/g,_=w((function(t){return t.replace(O,(function(t,e){return e?e.toUpperCase():""}))})),j=w((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),E=/\B([A-Z])/g,k=w((function(t){return t.replace(E,"-$1").toLowerCase()}));function A(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function S(t,e){return t.bind(e)}var C=Function.prototype.bind?S:A;function D(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function M(t,e){for(var n in e)t[n]=e[n];return t}function T(t){for(var e={},n=0;n<t.length;n++)t[n]&&M(e,t[n]);return e}function N(t,e,n){}var F=function(t,e,n){return!1},$=function(t){return t};function P(t,e){if(t===e)return!0;var n=u(t),r=u(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every((function(t,n){return P(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every((function(n){return P(t[n],e[n])}))}catch(c){return!1}}function R(t,e){for(var n=0;n<t.length;n++)if(P(t[n],e))return n;return-1}function L(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var z="data-server-rendered",B=["component","directive","filter"],I=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:F,isReservedAttr:F,isUnknownElement:F,getTagNamespace:N,parsePlatformTagName:$,mustUseProp:F,async:!0,_lifecycleHooks:I},q=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function W(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var G=new RegExp("[^"+q.source+".$_\\d]");function Y(t){if(!G.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var V,X="__proto__"in{},J="undefined"!==typeof window,Q="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,K=Q&&WXEnvironment.platform.toLowerCase(),Z=J&&window.navigator.userAgent.toLowerCase(),tt=Z&&/msie|trident/.test(Z),et=Z&&Z.indexOf("msie 9.0")>0,nt=Z&&Z.indexOf("edge/")>0,rt=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===K),it=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),ot={}.watch,at=!1;if(J)try{var st={};Object.defineProperty(st,"passive",{get:function(){at=!0}}),window.addEventListener("test-passive",null,st)}catch(_a){}var ut=function(){return void 0===V&&(V=!J&&!Q&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),V},ct=J&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function lt(t){return"function"===typeof t&&/native code/.test(t.toString())}var ft,dt="undefined"!==typeof Symbol&&lt(Symbol)&&"undefined"!==typeof Reflect&&lt(Reflect.ownKeys);ft="undefined"!==typeof Set&&lt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ht=N,pt=0,gt=function(){this.id=pt++,this.subs=[]};gt.prototype.addSub=function(t){this.subs.push(t)},gt.prototype.removeSub=function(t){y(this.subs,t)},gt.prototype.depend=function(){gt.target&&gt.target.addDep(this)},gt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},gt.target=null;var mt=[];function vt(t){mt.push(t),gt.target=t}function yt(){mt.pop(),gt.target=mt[mt.length-1]}var bt=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},xt={child:{configurable:!0}};xt.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,xt);var wt=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function Ot(t){return new bt(void 0,void 0,void 0,String(t))}function _t(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var jt=Array.prototype,Et=Object.create(jt),kt=["push","pop","shift","unshift","splice","sort","reverse"];kt.forEach((function(t){var e=jt[t];W(Et,t,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o}))}));var At=Object.getOwnPropertyNames(Et),St=!0;function Ct(t){St=t}var Dt=function(t){this.value=t,this.dep=new gt,this.vmCount=0,W(t,"__ob__",this),Array.isArray(t)?(X?Mt(t,Et):Tt(t,Et,At),this.observeArray(t)):this.walk(t)};function Mt(t,e){t.__proto__=e}function Tt(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];W(t,o,e[o])}}function Nt(t,e){var n;if(u(t)&&!(t instanceof bt))return x(t,"__ob__")&&t.__ob__ instanceof Dt?n=t.__ob__:St&&!ut()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Dt(t)),e&&n&&n.vmCount++,n}function Ft(t,e,n,r,i){var o=new gt,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=t[e]);var c=!i&&Nt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return gt.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&Rt(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!==e&&r!==r||s&&!u||(u?u.call(t,e):n=e,c=!i&&Nt(e),o.notify())}})}}function $t(t,e,n){if(Array.isArray(t)&&d(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Ft(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Pt(t,e){if(Array.isArray(t)&&d(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||x(t,e)&&(delete t[e],n&&n.dep.notify())}}function Rt(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Rt(e)}Dt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Ft(t,e[n])},Dt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Nt(t[e])};var Lt=U.optionMergeStrategies;function zt(t,e){if(!e)return t;for(var n,r,i,o=dt?Reflect.ownKeys(e):Object.keys(e),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(r=t[n],i=e[n],x(t,n)?r!==i&&l(r)&&l(i)&&zt(r,i):$t(t,n,i));return t}function Bt(t,e,n){return n?function(){var r="function"===typeof e?e.call(n,n):e,i="function"===typeof t?t.call(n,n):t;return r?zt(r,i):i}:e?t?function(){return zt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function It(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Ut(n):n}function Ut(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function qt(t,e,n,r){var i=Object.create(t||null);return e?M(i,e):i}Lt.data=function(t,e,n){return n?Bt(t,e,n):e&&"function"!==typeof e?t:Bt(t,e)},I.forEach((function(t){Lt[t]=It})),B.forEach((function(t){Lt[t+"s"]=qt})),Lt.watch=function(t,e,n,r){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in M(i,t),e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Lt.props=Lt.methods=Lt.inject=Lt.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return M(i,t),e&&M(i,e),i},Lt.provide=Bt;var Ht=function(t,e){return void 0===e?t:e};function Wt(t,e){var n=t.props;if(n){var r,i,o,a={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=_(i),a[o]={type:null})}else if(l(n))for(var s in n)i=n[s],o=_(s),a[o]=l(i)?i:{type:i};else 0;t.props=a}}function Gt(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(l(n))for(var o in n){var a=n[o];r[o]=l(a)?M({from:o},a):{from:a}}else 0}}function Yt(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"===typeof r&&(e[n]={bind:r,update:r})}}function Vt(t,e,n){if("function"===typeof e&&(e=e.options),Wt(e,n),Gt(e,n),Yt(e),!e._base&&(e.extends&&(t=Vt(t,e.extends,n)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)t=Vt(t,e.mixins[r],n);var o,a={};for(o in t)s(o);for(o in e)x(t,o)||s(o);function s(r){var i=Lt[r]||Ht;a[r]=i(t[r],e[r],n,r)}return a}function Xt(t,e,n,r){if("string"===typeof n){var i=t[e];if(x(i,n))return i[n];var o=_(n);if(x(i,o))return i[o];var a=j(o);if(x(i,a))return i[a];var s=i[n]||i[o]||i[a];return s}}function Jt(t,e,n,r){var i=e[t],o=!x(n,t),a=n[t],s=te(Boolean,i.type);if(s>-1)if(o&&!x(i,"default"))a=!1;else if(""===a||a===k(t)){var u=te(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=Qt(r,i,t);var c=St;Ct(!0),Nt(a),Ct(c)}return a}function Qt(t,e,n){if(x(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof r&&"Function"!==Kt(e.type)?r.call(t):r}}function Kt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Zt(t,e){return Kt(t)===Kt(e)}function te(t,e){if(!Array.isArray(e))return Zt(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(Zt(e[n],t))return n;return-1}function ee(t,e,n){vt();try{if(e){var r=e;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,t,e,n);if(a)return}catch(_a){re(_a,r,"errorCaptured hook")}}}re(t,e,n)}finally{yt()}}function ne(t,e,n,r,i){var o;try{o=n?t.apply(e,n):t.call(e),o&&!o._isVue&&h(o)&&!o._handled&&(o.catch((function(t){return ee(t,r,i+" (Promise/async)")})),o._handled=!0)}catch(_a){ee(_a,r,i)}return o}function re(t,e,n){if(U.errorHandler)try{return U.errorHandler.call(null,t,e,n)}catch(_a){_a!==t&&ie(_a,null,"config.errorHandler")}ie(t,e,n)}function ie(t,e,n){if(!J&&!Q||"undefined"===typeof console)throw t;console.error(t)}var oe,ae=!1,se=[],ue=!1;function ce(){ue=!1;var t=se.slice(0);se.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&lt(Promise)){var le=Promise.resolve();oe=function(){le.then(ce),rt&&setTimeout(N)},ae=!0}else if(tt||"undefined"===typeof MutationObserver||!lt(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())oe="undefined"!==typeof setImmediate&&lt(setImmediate)?function(){setImmediate(ce)}:function(){setTimeout(ce,0)};else{var fe=1,de=new MutationObserver(ce),he=document.createTextNode(String(fe));de.observe(he,{characterData:!0}),oe=function(){fe=(fe+1)%2,he.data=String(fe)},ae=!0}function pe(t,e){var n;if(se.push((function(){if(t)try{t.call(e)}catch(_a){ee(_a,e,"nextTick")}else n&&n(e)})),ue||(ue=!0,oe()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}var ge=new ft;function me(t){ve(t,ge),ge.clear()}function ve(t,e){var n,r,i=Array.isArray(t);if(!(!i&&!u(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i){n=t.length;while(n--)ve(t[n],e)}else{r=Object.keys(t),n=r.length;while(n--)ve(t[r[n]],e)}}}var ye=w((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}));function be(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return ne(r,null,arguments,e,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)ne(i[o],null,t,e,"v-on handler")}return n.fns=t,n}function xe(t,e,n,i,a,s){var u,c,l,f;for(u in t)c=t[u],l=e[u],f=ye(u),r(c)||(r(l)?(r(c.fns)&&(c=t[u]=be(c,s)),o(f.once)&&(c=t[u]=a(f.name,c,f.capture)),n(f.name,c,f.capture,f.passive,f.params)):c!==l&&(l.fns=c,t[u]=l));for(u in e)r(t[u])&&(f=ye(u),i(f.name,e[u],f.capture))}function we(t,e,n){var a;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function u(){n.apply(this,arguments),y(a.fns,u)}r(s)?a=be([u]):i(s.fns)&&o(s.merged)?(a=s,a.fns.push(u)):a=be([s,u]),a.merged=!0,t[e]=a}function Oe(t,e,n){var o=e.options.props;if(!r(o)){var a={},s=t.attrs,u=t.props;if(i(s)||i(u))for(var c in o){var l=k(c);_e(a,u,c,l,!0)||_e(a,s,c,l,!1)}return a}}function _e(t,e,n,r,o){if(i(e)){if(x(e,n))return t[n]=e[n],o||delete e[n],!0;if(x(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function je(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Ee(t){return s(t)?[Ot(t)]:Array.isArray(t)?Ae(t):void 0}function ke(t){return i(t)&&i(t.text)&&a(t.isComment)}function Ae(t,e){var n,a,u,c,l=[];for(n=0;n<t.length;n++)a=t[n],r(a)||"boolean"===typeof a||(u=l.length-1,c=l[u],Array.isArray(a)?a.length>0&&(a=Ae(a,(e||"")+"_"+n),ke(a[0])&&ke(c)&&(l[u]=Ot(c.text+a[0].text),a.shift()),l.push.apply(l,a)):s(a)?ke(c)?l[u]=Ot(c.text+a):""!==a&&l.push(Ot(a)):ke(a)&&ke(c)?l[u]=Ot(c.text+a.text):(o(t._isVList)&&i(a.tag)&&r(a.key)&&i(e)&&(a.key="__vlist"+e+"_"+n+"__"),l.push(a)));return l}function Se(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function Ce(t){var e=De(t.$options.inject,t);e&&(Ct(!1),Object.keys(e).forEach((function(n){Ft(t,n,e[n])})),Ct(!0))}function De(t,e){if(t){for(var n=Object.create(null),r=dt?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=t[o].from,s=e;while(s){if(s._provided&&x(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var u=t[o].default;n[o]="function"===typeof u?u.call(e):u}else 0}}return n}}function Me(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(Te)&&delete n[c];return n}function Te(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Ne(t,e,r){var i,o=Object.keys(e).length>0,a=t?!!t.$stable:!o,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&r&&r!==n&&s===r.$key&&!o&&!r.$hasNormal)return r;for(var u in i={},t)t[u]&&"$"!==u[0]&&(i[u]=Fe(e,u,t[u]))}else i={};for(var c in e)c in i||(i[c]=$e(e,c));return t&&Object.isExtensible(t)&&(t._normalized=i),W(i,"$stable",a),W(i,"$key",s),W(i,"$hasNormal",o),i}function Fe(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});return t=t&&"object"===typeof t&&!Array.isArray(t)?[t]:Ee(t),t&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function $e(t,e){return function(){return t[e]}}function Pe(t,e){var n,r,o,a,s;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);else if("number"===typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(u(t))if(dt&&t[Symbol.iterator]){n=[];var c=t[Symbol.iterator](),l=c.next();while(!l.done)n.push(e(l.value,n.length)),l=c.next()}else for(a=Object.keys(t),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=e(t[s],s,r);return i(n)||(n=[]),n._isVList=!0,n}function Re(t,e,n,r){var i,o=this.$scopedSlots[t];o?(n=n||{},r&&(n=M(M({},r),n)),i=o(n)||e):i=this.$slots[t]||e;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function Le(t){return Xt(this.$options,"filters",t,!0)||$}function ze(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Be(t,e,n,r,i){var o=U.keyCodes[e]||n;return i&&r&&!U.keyCodes[e]?ze(i,r):o?ze(o,t):r?k(r)!==e:void 0}function Ie(t,e,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=T(n));var a=function(a){if("class"===a||"style"===a||v(a))o=t;else{var s=t.attrs&&t.attrs.type;o=r||U.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=_(a),c=k(a);if(!(u in o)&&!(c in o)&&(o[a]=n[a],i)){var l=t.on||(t.on={});l["update:"+a]=function(t){n[a]=t}}};for(var s in n)a(s)}else;return t}function Ue(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),He(r,"__static__"+t,!1)),r}function qe(t,e,n){return He(t,"__once__"+e+(n?"_"+n:""),!0),t}function He(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&We(t[r],e+"_"+r,n);else We(t,e,n)}function We(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Ge(t,e){if(e)if(l(e)){var n=t.on=t.on?M({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function Ye(t,e,n,r){e=e||{$stable:!n};for(var i=0;i<t.length;i++){var o=t[i];Array.isArray(o)?Ye(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Ve(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"===typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Xe(t,e){return"string"===typeof t?e+t:t}function Je(t){t._o=qe,t._n=g,t._s=p,t._l=Pe,t._t=Re,t._q=P,t._i=R,t._m=Ue,t._f=Le,t._k=Be,t._b=Ie,t._v=Ot,t._e=wt,t._u=Ye,t._g=Ge,t._d=Ve,t._p=Xe}function Qe(t,e,r,i,a){var s,u=this,c=a.options;x(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var l=o(c._compiled),f=!l;this.data=t,this.props=e,this.children=r,this.parent=i,this.listeners=t.on||n,this.injections=De(c.inject,i),this.slots=function(){return u.$slots||Ne(t.scopedSlots,u.$slots=Me(r,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Ne(t.scopedSlots,this.slots())}}),l&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=Ne(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(t,e,n,r){var o=fn(s,t,e,n,r,f);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return fn(s,t,e,n,r,f)}}function Ke(t,e,r,o,a){var s=t.options,u={},c=s.props;if(i(c))for(var l in c)u[l]=Jt(l,c,e||n);else i(r.attrs)&&tn(u,r.attrs),i(r.props)&&tn(u,r.props);var f=new Qe(r,u,a,o,t),d=s.render.call(null,f._c,f);if(d instanceof bt)return Ze(d,r,f.parent,s,f);if(Array.isArray(d)){for(var h=Ee(d)||[],p=new Array(h.length),g=0;g<h.length;g++)p[g]=Ze(h[g],r,f.parent,s,f);return p}}function Ze(t,e,n,r,i){var o=_t(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function tn(t,e){for(var n in e)t[_(n)]=e[n]}Je(Qe.prototype);var en={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;en.prepatch(n,n)}else{var r=t.componentInstance=on(t,Dn);r.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;$n(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,zn(n,"mounted")),t.data.keepAlive&&(e._isMounted?Kn(n):Rn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Ln(e,!0):e.$destroy())}},nn=Object.keys(en);function rn(t,e,n,a,s){if(!r(t)){var c=n.$options._base;if(u(t)&&(t=c.extend(t)),"function"===typeof t){var l;if(r(t.cid)&&(l=t,t=wn(l,c),void 0===t))return xn(l,e,n,a,s);e=e||{},wr(t),i(e.model)&&un(t.options,e);var f=Oe(e,t,s);if(o(t.options.functional))return Ke(t,f,e,n,a);var d=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var h=e.slot;e={},h&&(e.slot=h)}an(e);var p=t.options.name||s,g=new bt("vue-component-"+t.cid+(p?"-"+p:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:f,listeners:d,tag:s,children:a},l);return g}}}function on(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}function an(t){for(var e=t.hook||(t.hook={}),n=0;n<nn.length;n++){var r=nn[n],i=e[r],o=en[r];i===o||i&&i._merged||(e[r]=i?sn(o,i):o)}}function sn(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function un(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),a=o[r],s=e.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}var cn=1,ln=2;function fn(t,e,n,r,i,a){return(Array.isArray(n)||s(n))&&(i=r,r=n,n=void 0),o(a)&&(i=ln),dn(t,e,n,r,i)}function dn(t,e,n,r,o){if(i(n)&&i(n.__ob__))return wt();if(i(n)&&i(n.is)&&(e=n.is),!e)return wt();var a,s,u;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===ln?r=Ee(r):o===cn&&(r=je(r)),"string"===typeof e)?(s=t.$vnode&&t.$vnode.ns||U.getTagNamespace(e),a=U.isReservedTag(e)?new bt(U.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!i(u=Xt(t.$options,"components",e))?new bt(e,n,r,void 0,void 0,t):rn(u,n,t,r,e)):a=rn(e,n,t,r);return Array.isArray(a)?a:i(a)?(i(s)&&hn(a,s),i(n)&&pn(n),a):wt()}function hn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var a=0,s=t.children.length;a<s;a++){var u=t.children[a];i(u.tag)&&(r(u.ns)||o(n)&&"svg"!==u.tag)&&hn(u,e,n)}}function pn(t){u(t.style)&&me(t.style),u(t.class)&&me(t.class)}function gn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,r=t.$vnode=e._parentVnode,i=r&&r.context;t.$slots=Me(e._renderChildren,i),t.$scopedSlots=n,t._c=function(e,n,r,i){return fn(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return fn(t,e,n,r,i,!0)};var o=r&&r.data;Ft(t,"$attrs",o&&o.attrs||n,null,!0),Ft(t,"$listeners",e._parentListeners||n,null,!0)}var mn,vn=null;function yn(t){Je(t.prototype),t.prototype.$nextTick=function(t){return pe(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,i=n._parentVnode;i&&(e.$scopedSlots=Ne(i.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=i;try{vn=e,t=r.call(e._renderProxy,e.$createElement)}catch(_a){ee(_a,e,"render"),t=e._vnode}finally{vn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=wt()),t.parent=i,t}}function bn(t,e){return(t.__esModule||dt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function xn(t,e,n,r,i){var o=wt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}function wn(t,e){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var n=vn;if(n&&i(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(n&&!i(t.owners)){var a=t.owners=[n],s=!0,c=null,l=null;n.$on("hook:destroyed",(function(){return y(a,n)}));var f=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},d=L((function(n){t.resolved=bn(n,e),s?a.length=0:f(!0)})),p=L((function(e){i(t.errorComp)&&(t.error=!0,f(!0))})),g=t(d,p);return u(g)&&(h(g)?r(t.resolved)&&g.then(d,p):h(g.component)&&(g.component.then(d,p),i(g.error)&&(t.errorComp=bn(g.error,e)),i(g.loading)&&(t.loadingComp=bn(g.loading,e),0===g.delay?t.loading=!0:c=setTimeout((function(){c=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,f(!1))}),g.delay||200)),i(g.timeout)&&(l=setTimeout((function(){l=null,r(t.resolved)&&p(null)}),g.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}function On(t){return t.isComment&&t.asyncFactory}function _n(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||On(n)))return n}}function jn(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Sn(t,e)}function En(t,e){mn.$on(t,e)}function kn(t,e){mn.$off(t,e)}function An(t,e){var n=mn;return function r(){var i=e.apply(null,arguments);null!==i&&n.$off(t,r)}}function Sn(t,e,n){mn=t,xe(e,n||{},En,kn,An,t),mn=void 0}function Cn(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r.$on(t[i],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)n.$off(t[r],e);return n}var o,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;var s=a.length;while(s--)if(o=a[s],o===e||o.fn===e){a.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?D(n):n;for(var r=D(arguments,1),i='event handler for "'+t+'"',o=0,a=n.length;o<a;o++)ne(n[o],e,r,e,i)}return e}}var Dn=null;function Mn(t){var e=Dn;return Dn=t,function(){Dn=e}}function Tn(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Nn(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,o=Mn(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){zn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),zn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Fn(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=wt),zn(t,"beforeMount"),r=function(){t._update(t._render(),n)},new nr(t,r,N,{before:function(){t._isMounted&&!t._isDestroyed&&zn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,zn(t,"mounted")),t}function $n(t,e,r,i,o){var a=i.data.scopedSlots,s=t.$scopedSlots,u=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key),c=!!(o||t.$options._renderChildren||u);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data.attrs||n,t.$listeners=r||n,e&&t.$options.props){Ct(!1);for(var l=t._props,f=t.$options._propKeys||[],d=0;d<f.length;d++){var h=f[d],p=t.$options.props;l[h]=Jt(h,p,e,t)}Ct(!0),t.$options.propsData=e}r=r||n;var g=t.$options._parentListeners;t.$options._parentListeners=r,Sn(t,r,g),c&&(t.$slots=Me(o,i.context),t.$forceUpdate())}function Pn(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Rn(t,e){if(e){if(t._directInactive=!1,Pn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Rn(t.$children[n]);zn(t,"activated")}}function Ln(t,e){if((!e||(t._directInactive=!0,!Pn(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Ln(t.$children[n]);zn(t,"deactivated")}}function zn(t,e){vt();var n=t.$options[e],r=e+" hook";if(n)for(var i=0,o=n.length;i<o;i++)ne(n[i],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),yt()}var Bn=[],In=[],Un={},qn=!1,Hn=!1,Wn=0;function Gn(){Wn=Bn.length=In.length=0,Un={},qn=Hn=!1}var Yn=0,Vn=Date.now;if(J&&!tt){var Xn=window.performance;Xn&&"function"===typeof Xn.now&&Vn()>document.createEvent("Event").timeStamp&&(Vn=function(){return Xn.now()})}function Jn(){var t,e;for(Yn=Vn(),Hn=!0,Bn.sort((function(t,e){return t.id-e.id})),Wn=0;Wn<Bn.length;Wn++)t=Bn[Wn],t.before&&t.before(),e=t.id,Un[e]=null,t.run();var n=In.slice(),r=Bn.slice();Gn(),Zn(n),Qn(r),ct&&U.devtools&&ct.emit("flush")}function Qn(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&zn(r,"updated")}}function Kn(t){t._inactive=!1,In.push(t)}function Zn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Rn(t[e],!0)}function tr(t){var e=t.id;if(null==Un[e]){if(Un[e]=!0,Hn){var n=Bn.length-1;while(n>Wn&&Bn[n].id>t.id)n--;Bn.splice(n+1,0,t)}else Bn.push(t);qn||(qn=!0,pe(Jn))}}var er=0,nr=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++er,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ft,this.newDepIds=new ft,this.expression="","function"===typeof e?this.getter=e:(this.getter=Y(e),this.getter||(this.getter=N)),this.value=this.lazy?void 0:this.get()};nr.prototype.get=function(){var t;vt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(_a){if(!this.user)throw _a;ee(_a,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&me(t),yt(),this.cleanupDeps()}return t},nr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},nr.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},nr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tr(this)},nr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(_a){ee(_a,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},nr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nr.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},nr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var rr={enumerable:!0,configurable:!0,get:N,set:N};function ir(t,e,n){rr.get=function(){return this[e][n]},rr.set=function(t){this[e][n]=t},Object.defineProperty(t,n,rr)}function or(t){t._watchers=[];var e=t.$options;e.props&&ar(t,e.props),e.methods&&pr(t,e.methods),e.data?sr(t):Nt(t._data={},!0),e.computed&&lr(t,e.computed),e.watch&&e.watch!==ot&&gr(t,e.watch)}function ar(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;o||Ct(!1);var a=function(o){i.push(o);var a=Jt(o,e,n,t);Ft(r,o,a),o in t||ir(t,"_props",o)};for(var s in e)a(s);Ct(!0)}function sr(t){var e=t.$options.data;e=t._data="function"===typeof e?ur(e,t):e||{},l(e)||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);while(i--){var o=n[i];0,r&&x(r,o)||H(o)||ir(t,"_data",o)}Nt(e,!0)}function ur(t,e){vt();try{return t.call(e,e)}catch(_a){return ee(_a,e,"data()"),{}}finally{yt()}}var cr={lazy:!0};function lr(t,e){var n=t._computedWatchers=Object.create(null),r=ut();for(var i in e){var o=e[i],a="function"===typeof o?o:o.get;0,r||(n[i]=new nr(t,a||N,N,cr)),i in t||fr(t,i,o)}}function fr(t,e,n){var r=!ut();"function"===typeof n?(rr.get=r?dr(e):hr(n),rr.set=N):(rr.get=n.get?r&&!1!==n.cache?dr(e):hr(n.get):N,rr.set=n.set||N),Object.defineProperty(t,e,rr)}function dr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),gt.target&&e.depend(),e.value}}function hr(t){return function(){return t.call(this,this)}}function pr(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?N:C(e[n],t)}function gr(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)mr(t,n,r[i]);else mr(t,n,r)}}function mr(t,e,n,r){return l(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function vr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=$t,t.prototype.$delete=Pt,t.prototype.$watch=function(t,e,n){var r=this;if(l(e))return mr(r,t,e,n);n=n||{},n.user=!0;var i=new nr(r,t,e,n);if(n.immediate)try{e.call(r,i.value)}catch(o){ee(o,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var yr=0;function br(t){t.prototype._init=function(t){var e=this;e._uid=yr++,e._isVue=!0,t&&t._isComponent?xr(e,t):e.$options=Vt(wr(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Tn(e),jn(e),gn(e),zn(e,"beforeCreate"),Ce(e),or(e),Se(e),zn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function xr(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function wr(t){var e=t.options;if(t.super){var n=wr(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var i=Or(t);i&&M(t.extendOptions,i),e=t.options=Vt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Or(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}function _r(t){this._init(t)}function jr(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=D(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Er(t){t.mixin=function(t){return this.options=Vt(this.options,t),this}}function kr(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name;var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=Vt(n.options,t),a["super"]=n,a.options.props&&Ar(a),a.options.computed&&Sr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,B.forEach((function(t){a[t]=n[t]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=M({},a.options),i[r]=a,a}}function Ar(t){var e=t.options.props;for(var n in e)ir(t.prototype,"_props",n)}function Sr(t){var e=t.options.computed;for(var n in e)fr(t.prototype,n,e[n])}function Cr(t){B.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&l(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}function Dr(t){return t&&(t.Ctor.options.name||t.tag)}function Mr(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!f(t)&&t.test(e)}function Tr(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=Dr(a.componentOptions);s&&!e(s)&&Nr(n,o,r,i)}}}function Nr(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,y(n,e)}br(_r),vr(_r),Cn(_r),Nn(_r),yn(_r);var Fr=[String,RegExp,Array],$r={name:"keep-alive",abstract:!0,props:{include:Fr,exclude:Fr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Nr(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",(function(e){Tr(t,(function(t){return Mr(e,t)}))})),this.$watch("exclude",(function(e){Tr(t,(function(t){return!Mr(e,t)}))}))},render:function(){var t=this.$slots.default,e=_n(t),n=e&&e.componentOptions;if(n){var r=Dr(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!Mr(o,r))||a&&r&&Mr(a,r))return e;var s=this,u=s.cache,c=s.keys,l=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[l]?(e.componentInstance=u[l].componentInstance,y(c,l),c.push(l)):(u[l]=e,c.push(l),this.max&&c.length>parseInt(this.max)&&Nr(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},Pr={KeepAlive:$r};function Rr(t){var e={get:function(){return U}};Object.defineProperty(t,"config",e),t.util={warn:ht,extend:M,mergeOptions:Vt,defineReactive:Ft},t.set=$t,t.delete=Pt,t.nextTick=pe,t.observable=function(t){return Nt(t),t},t.options=Object.create(null),B.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,M(t.options.components,Pr),jr(t),Er(t),kr(t),Cr(t)}Rr(_r),Object.defineProperty(_r.prototype,"$isServer",{get:ut}),Object.defineProperty(_r.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(_r,"FunctionalRenderContext",{value:Qe}),_r.version="2.6.12";var Lr=m("style,class"),zr=m("input,textarea,option,select,progress"),Br=function(t,e,n){return"value"===n&&zr(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Ir=m("contenteditable,draggable,spellcheck"),Ur=m("events,caret,typing,plaintext-only"),qr=function(t,e){return Vr(e)||"false"===e?"false":"contenteditable"===t&&Ur(e)?e:"true"},Hr=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Wr="http://www.w3.org/1999/xlink",Gr=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Yr=function(t){return Gr(t)?t.slice(6,t.length):""},Vr=function(t){return null==t||!1===t};function Xr(t){var e=t.data,n=t,r=t;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(e=Jr(r.data,e));while(i(n=n.parent))n&&n.data&&(e=Jr(e,n.data));return Qr(e.staticClass,e.class)}function Jr(t,e){return{staticClass:Kr(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Qr(t,e){return i(t)||i(e)?Kr(t,Zr(e)):""}function Kr(t,e){return t?e?t+" "+e:t:e||""}function Zr(t){return Array.isArray(t)?ti(t):u(t)?ei(t):"string"===typeof t?t:""}function ti(t){for(var e,n="",r=0,o=t.length;r<o;r++)i(e=Zr(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function ei(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var ni={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ri=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ii=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),oi=function(t){return ri(t)||ii(t)};function ai(t){return ii(t)?"svg":"math"===t?"math":void 0}var si=Object.create(null);function ui(t){if(!J)return!0;if(oi(t))return!1;if(t=t.toLowerCase(),null!=si[t])return si[t];var e=document.createElement(t);return t.indexOf("-")>-1?si[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:si[t]=/HTMLUnknownElement/.test(e.toString())}var ci=m("text,number,password,search,email,tel,url");function li(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function fi(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function di(t,e){return document.createElementNS(ni[t],e)}function hi(t){return document.createTextNode(t)}function pi(t){return document.createComment(t)}function gi(t,e,n){t.insertBefore(e,n)}function mi(t,e){t.removeChild(e)}function vi(t,e){t.appendChild(e)}function yi(t){return t.parentNode}function bi(t){return t.nextSibling}function xi(t){return t.tagName}function wi(t,e){t.textContent=e}function Oi(t,e){t.setAttribute(e,"")}var _i=Object.freeze({createElement:fi,createElementNS:di,createTextNode:hi,createComment:pi,insertBefore:gi,removeChild:mi,appendChild:vi,parentNode:yi,nextSibling:bi,tagName:xi,setTextContent:wi,setStyleScope:Oi}),ji={create:function(t,e){Ei(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Ei(t,!0),Ei(e))},destroy:function(t){Ei(t,!0)}};function Ei(t,e){var n=t.data.ref;if(i(n)){var r=t.context,o=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[n])?y(a[n],o):a[n]===o&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var ki=new bt("",{},[]),Ai=["create","activate","update","remove","destroy"];function Si(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&Ci(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function Ci(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,o=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===o||ci(r)&&ci(o)}function Di(t,e,n){var r,o,a={};for(r=e;r<=n;++r)o=t[r].key,i(o)&&(a[o]=r);return a}function Mi(t){var e,n,a={},u=t.modules,c=t.nodeOps;for(e=0;e<Ai.length;++e)for(a[Ai[e]]=[],n=0;n<u.length;++n)i(u[n][Ai[e]])&&a[Ai[e]].push(u[n][Ai[e]]);function l(t){return new bt(c.tagName(t).toLowerCase(),{},[],void 0,t)}function f(t,e){function n(){0===--n.listeners&&d(t)}return n.listeners=e,n}function d(t){var e=c.parentNode(t);i(e)&&c.removeChild(e,t)}function h(t,e,n,r,a,s,u){if(i(t.elm)&&i(s)&&(t=s[u]=_t(t)),t.isRootInsert=!a,!p(t,e,n,r)){var l=t.data,f=t.children,d=t.tag;i(d)?(t.elm=t.ns?c.createElementNS(t.ns,d):c.createElement(d,t),O(t),b(t,f,e),i(l)&&w(t,e),y(n,t.elm,r)):o(t.isComment)?(t.elm=c.createComment(t.text),y(n,t.elm,r)):(t.elm=c.createTextNode(t.text),y(n,t.elm,r))}}function p(t,e,n,r){var a=t.data;if(i(a)){var s=i(t.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(t,!1),i(t.componentInstance))return g(t,e),y(n,t.elm,r),o(s)&&v(t,e,n,r),!0}}function g(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(w(t,e),O(t)):(Ei(t),e.push(t))}function v(t,e,n,r){var o,s=t;while(s.componentInstance)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<a.activate.length;++o)a.activate[o](ki,s);e.push(s);break}y(n,t.elm,r)}function y(t,e,n){i(t)&&(i(n)?c.parentNode(n)===t&&c.insertBefore(t,e,n):c.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)h(e[r],n,t.elm,null,!0,e,r)}else s(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function x(t){while(t.componentInstance)t=t.componentInstance._vnode;return i(t.tag)}function w(t,n){for(var r=0;r<a.create.length;++r)a.create[r](ki,t);e=t.data.hook,i(e)&&(i(e.create)&&e.create(ki,t),i(e.insert)&&n.push(t))}function O(t){var e;if(i(e=t.fnScopeId))c.setStyleScope(t.elm,e);else{var n=t;while(n)i(e=n.context)&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),n=n.parent}i(e=Dn)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function _(t,e,n,r,i,o){for(;r<=i;++r)h(n[r],o,t,e,!1,n,r)}function j(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)j(t.children[n])}function E(t,e,n){for(;e<=n;++e){var r=t[e];i(r)&&(i(r.tag)?(k(r),j(r)):d(r.elm))}}function k(t,e){if(i(e)||i(t.data)){var n,r=a.remove.length+1;for(i(e)?e.listeners+=r:e=f(t.elm,r),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&k(n,e),n=0;n<a.remove.length;++n)a.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else d(t.elm)}function A(t,e,n,o,a){var s,u,l,f,d=0,p=0,g=e.length-1,m=e[0],v=e[g],y=n.length-1,b=n[0],x=n[y],w=!a;while(d<=g&&p<=y)r(m)?m=e[++d]:r(v)?v=e[--g]:Si(m,b)?(C(m,b,o,n,p),m=e[++d],b=n[++p]):Si(v,x)?(C(v,x,o,n,y),v=e[--g],x=n[--y]):Si(m,x)?(C(m,x,o,n,y),w&&c.insertBefore(t,m.elm,c.nextSibling(v.elm)),m=e[++d],x=n[--y]):Si(v,b)?(C(v,b,o,n,p),w&&c.insertBefore(t,v.elm,m.elm),v=e[--g],b=n[++p]):(r(s)&&(s=Di(e,d,g)),u=i(b.key)?s[b.key]:S(b,e,d,g),r(u)?h(b,o,t,m.elm,!1,n,p):(l=e[u],Si(l,b)?(C(l,b,o,n,p),e[u]=void 0,w&&c.insertBefore(t,l.elm,m.elm)):h(b,o,t,m.elm,!1,n,p)),b=n[++p]);d>g?(f=r(n[y+1])?null:n[y+1].elm,_(t,f,n,p,y,o)):p>y&&E(e,d,g)}function S(t,e,n,r){for(var o=n;o<r;o++){var a=e[o];if(i(a)&&Si(t,a))return o}}function C(t,e,n,s,u,l){if(t!==e){i(e.elm)&&i(s)&&(e=s[u]=_t(e));var f=e.elm=t.elm;if(o(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?T(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var d,h=e.data;i(h)&&i(d=h.hook)&&i(d=d.prepatch)&&d(t,e);var p=t.children,g=e.children;if(i(h)&&x(e)){for(d=0;d<a.update.length;++d)a.update[d](t,e);i(d=h.hook)&&i(d=d.update)&&d(t,e)}r(e.text)?i(p)&&i(g)?p!==g&&A(f,p,g,n,l):i(g)?(i(t.text)&&c.setTextContent(f,""),_(f,null,g,0,g.length-1,n)):i(p)?E(p,0,p.length-1):i(t.text)&&c.setTextContent(f,""):t.text!==e.text&&c.setTextContent(f,e.text),i(h)&&i(d=h.hook)&&i(d=d.postpatch)&&d(t,e)}}}function D(t,e,n){if(o(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var M=m("attrs,class,staticClass,staticStyle,key");function T(t,e,n,r){var a,s=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(a=u.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return g(e,n),!0;if(i(s)){if(i(c))if(t.hasChildNodes())if(i(a=u)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var l=!0,f=t.firstChild,d=0;d<c.length;d++){if(!f||!T(f,c[d],n,r)){l=!1;break}f=f.nextSibling}if(!l||f)return!1}else b(e,c,n);if(i(u)){var h=!1;for(var p in u)if(!M(p)){h=!0,w(e,n);break}!h&&u["class"]&&me(u["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s){if(!r(e)){var u=!1,f=[];if(r(t))u=!0,h(e,f);else{var d=i(t.nodeType);if(!d&&Si(t,e))C(t,e,f,null,null,s);else{if(d){if(1===t.nodeType&&t.hasAttribute(z)&&(t.removeAttribute(z),n=!0),o(n)&&T(t,e,f))return D(e,f,!0),t;t=l(t)}var p=t.elm,g=c.parentNode(p);if(h(e,f,p._leaveCb?null:g,c.nextSibling(p)),i(e.parent)){var m=e.parent,v=x(e);while(m){for(var y=0;y<a.destroy.length;++y)a.destroy[y](m);if(m.elm=e.elm,v){for(var b=0;b<a.create.length;++b)a.create[b](ki,m);var w=m.data.hook.insert;if(w.merged)for(var O=1;O<w.fns.length;O++)w.fns[O]()}else Ei(m);m=m.parent}}i(g)?E([t],0,0):i(t.tag)&&j(t)}}return D(e,f,u),e.elm}i(t)&&j(t)}}var Ti={create:Ni,update:Ni,destroy:function(t){Ni(t,ki)}};function Ni(t,e){(t.data.directives||e.data.directives)&&Fi(t,e)}function Fi(t,e){var n,r,i,o=t===ki,a=e===ki,s=Pi(t.data.directives,t.context),u=Pi(e.data.directives,e.context),c=[],l=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Li(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):(Li(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var f=function(){for(var n=0;n<c.length;n++)Li(c[n],"inserted",e,t)};o?we(e,"insert",f):f()}if(l.length&&we(e,"postpatch",(function(){for(var n=0;n<l.length;n++)Li(l[n],"componentUpdated",e,t)})),!o)for(n in s)u[n]||Li(s[n],"unbind",t,t,a)}var $i=Object.create(null);function Pi(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)r=t[n],r.modifiers||(r.modifiers=$i),i[Ri(r)]=r,r.def=Xt(e.$options,"directives",r.name,!0);return i}function Ri(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Li(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(_a){ee(_a,n.context,"directive "+t.name+" "+e+" hook")}}var zi=[ji,Ti];function Bi(t,e){var n=e.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(t.data.attrs)||!r(e.data.attrs))){var o,a,s,u=e.elm,c=t.data.attrs||{},l=e.data.attrs||{};for(o in i(l.__ob__)&&(l=e.data.attrs=M({},l)),l)a=l[o],s=c[o],s!==a&&Ii(u,o,a);for(o in(tt||nt)&&l.value!==c.value&&Ii(u,"value",l.value),c)r(l[o])&&(Gr(o)?u.removeAttributeNS(Wr,Yr(o)):Ir(o)||u.removeAttribute(o))}}function Ii(t,e,n){t.tagName.indexOf("-")>-1?Ui(t,e,n):Hr(e)?Vr(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Ir(e)?t.setAttribute(e,qr(e,n)):Gr(e)?Vr(n)?t.removeAttributeNS(Wr,Yr(e)):t.setAttributeNS(Wr,e,n):Ui(t,e,n)}function Ui(t,e,n){if(Vr(n))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var qi={create:Bi,update:Bi};function Hi(t,e){var n=e.elm,o=e.data,a=t.data;if(!(r(o.staticClass)&&r(o.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=Xr(e),u=n._transitionClasses;i(u)&&(s=Kr(s,Zr(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Wi,Gi={create:Hi,update:Hi},Yi="__r",Vi="__c";function Xi(t){if(i(t[Yi])){var e=tt?"change":"input";t[e]=[].concat(t[Yi],t[e]||[]),delete t[Yi]}i(t[Vi])&&(t.change=[].concat(t[Vi],t.change||[]),delete t[Vi])}function Ji(t,e,n){var r=Wi;return function i(){var o=e.apply(null,arguments);null!==o&&Zi(t,i,n,r)}}var Qi=ae&&!(it&&Number(it[1])<=53);function Ki(t,e,n,r){if(Qi){var i=Yn,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Wi.addEventListener(t,e,at?{capture:n,passive:r}:n)}function Zi(t,e,n,r){(r||Wi).removeEventListener(t,e._wrapper||e,n)}function to(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};Wi=e.elm,Xi(n),xe(n,i,Ki,Zi,Ji,e.context),Wi=void 0}}var eo,no={create:to,update:to};function ro(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,o,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};for(n in i(u.__ob__)&&(u=e.data.domProps=M({},u)),s)n in u||(a[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var c=r(o)?"":String(o);io(a,c)&&(a.value=c)}else if("innerHTML"===n&&ii(a.tagName)&&r(a.innerHTML)){eo=eo||document.createElement("div"),eo.innerHTML="<svg>"+o+"</svg>";var l=eo.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(l.firstChild)a.appendChild(l.firstChild)}else if(o!==s[n])try{a[n]=o}catch(_a){}}}}function io(t,e){return!t.composing&&("OPTION"===t.tagName||oo(t,e)||ao(t,e))}function oo(t,e){var n=!0;try{n=document.activeElement!==t}catch(_a){}return n&&t.value!==e}function ao(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.number)return g(n)!==g(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}var so={create:ro,update:ro},uo=w((function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach((function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function co(t){var e=lo(t.style);return t.staticStyle?M(t.staticStyle,e):e}function lo(t){return Array.isArray(t)?T(t):"string"===typeof t?uo(t):t}function fo(t,e){var n,r={};if(e){var i=t;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=co(i.data))&&M(r,n)}(n=co(t.data))&&M(r,n);var o=t;while(o=o.parent)o.data&&(n=co(o.data))&&M(r,n);return r}var ho,po=/^--/,go=/\s*!important$/,mo=function(t,e,n){if(po.test(e))t.style.setProperty(e,n);else if(go.test(n))t.style.setProperty(k(e),n.replace(go,""),"important");else{var r=yo(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},vo=["Webkit","Moz","ms"],yo=w((function(t){if(ho=ho||document.createElement("div").style,t=_(t),"filter"!==t&&t in ho)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<vo.length;n++){var r=vo[n]+e;if(r in ho)return r}}));function bo(t,e){var n=e.data,o=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var a,s,u=e.elm,c=o.staticStyle,l=o.normalizedStyle||o.style||{},f=c||l,d=lo(e.data.style)||{};e.data.normalizedStyle=i(d.__ob__)?M({},d):d;var h=fo(e,!0);for(s in f)r(h[s])&&mo(u,s,"");for(s in h)a=h[s],a!==f[s]&&mo(u,s,null==a?"":a)}}var xo={create:bo,update:bo},wo=/\s+/;function Oo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function _o(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function jo(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&M(e,Eo(t.name||"v")),M(e,t),e}return"string"===typeof t?Eo(t):void 0}}var Eo=w((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),ko=J&&!et,Ao="transition",So="animation",Co="transition",Do="transitionend",Mo="animation",To="animationend";ko&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Co="WebkitTransition",Do="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Mo="WebkitAnimation",To="webkitAnimationEnd"));var No=J?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Fo(t){No((function(){No(t)}))}function $o(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Oo(t,e))}function Po(t,e){t._transitionClasses&&y(t._transitionClasses,e),_o(t,e)}function Ro(t,e,n){var r=zo(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===Ao?Do:To,u=0,c=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++u>=a&&c()};setTimeout((function(){u<a&&c()}),o+1),t.addEventListener(s,l)}var Lo=/\b(transform|all)(,|$)/;function zo(t,e){var n,r=window.getComputedStyle(t),i=(r[Co+"Delay"]||"").split(", "),o=(r[Co+"Duration"]||"").split(", "),a=Bo(i,o),s=(r[Mo+"Delay"]||"").split(", "),u=(r[Mo+"Duration"]||"").split(", "),c=Bo(s,u),l=0,f=0;e===Ao?a>0&&(n=Ao,l=a,f=o.length):e===So?c>0&&(n=So,l=c,f=u.length):(l=Math.max(a,c),n=l>0?a>c?Ao:So:null,f=n?n===Ao?o.length:u.length:0);var d=n===Ao&&Lo.test(r[Co+"Property"]);return{type:n,timeout:l,propCount:f,hasTransform:d}}function Bo(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Io(e)+Io(t[n])})))}function Io(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Uo(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=jo(t.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var a=o.css,s=o.type,c=o.enterClass,l=o.enterToClass,f=o.enterActiveClass,d=o.appearClass,h=o.appearToClass,p=o.appearActiveClass,m=o.beforeEnter,v=o.enter,y=o.afterEnter,b=o.enterCancelled,x=o.beforeAppear,w=o.appear,O=o.afterAppear,_=o.appearCancelled,j=o.duration,E=Dn,k=Dn.$vnode;while(k&&k.parent)E=k.context,k=k.parent;var A=!E._isMounted||!t.isRootInsert;if(!A||w||""===w){var S=A&&d?d:c,C=A&&p?p:f,D=A&&h?h:l,M=A&&x||m,T=A&&"function"===typeof w?w:v,N=A&&O||y,F=A&&_||b,$=g(u(j)?j.enter:j);0;var P=!1!==a&&!et,R=Wo(T),z=n._enterCb=L((function(){P&&(Po(n,D),Po(n,C)),z.cancelled?(P&&Po(n,S),F&&F(n)):N&&N(n),n._enterCb=null}));t.data.show||we(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),T&&T(n,z)})),M&&M(n),P&&($o(n,S),$o(n,C),Fo((function(){Po(n,S),z.cancelled||($o(n,D),R||(Ho($)?setTimeout(z,$):Ro(n,s,z)))}))),t.data.show&&(e&&e(),T&&T(n,z)),P||R||z()}}}function qo(t,e){var n=t.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=jo(t.data.transition);if(r(o)||1!==n.nodeType)return e();if(!i(n._leaveCb)){var a=o.css,s=o.type,c=o.leaveClass,l=o.leaveToClass,f=o.leaveActiveClass,d=o.beforeLeave,h=o.leave,p=o.afterLeave,m=o.leaveCancelled,v=o.delayLeave,y=o.duration,b=!1!==a&&!et,x=Wo(h),w=g(u(y)?y.leave:y);0;var O=n._leaveCb=L((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(Po(n,l),Po(n,f)),O.cancelled?(b&&Po(n,c),m&&m(n)):(e(),p&&p(n)),n._leaveCb=null}));v?v(_):_()}function _(){O.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),b&&($o(n,c),$o(n,f),Fo((function(){Po(n,c),O.cancelled||($o(n,l),x||(Ho(w)?setTimeout(O,w):Ro(n,s,O)))}))),h&&h(n,O),b||x||O())}}function Ho(t){return"number"===typeof t&&!isNaN(t)}function Wo(t){if(r(t))return!1;var e=t.fns;return i(e)?Wo(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Go(t,e){!0!==e.data.show&&Uo(e)}var Yo=J?{create:Go,activate:Go,remove:function(t,e){!0!==t.data.show?qo(t,e):e()}}:{},Vo=[qi,Gi,no,so,xo,Yo],Xo=Vo.concat(zi),Jo=Mi({nodeOps:_i,modules:Xo});et&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&ia(t,"input")}));var Qo={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?we(n,"postpatch",(function(){Qo.componentUpdated(t,e,n)})):Ko(t,e,n.context),t._vOptions=[].map.call(t.options,ea)):("textarea"===n.tag||ci(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",na),t.addEventListener("compositionend",ra),t.addEventListener("change",ra),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Ko(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,ea);if(i.some((function(t,e){return!P(t,r[e])}))){var o=t.multiple?e.value.some((function(t){return ta(t,i)})):e.value!==e.oldValue&&ta(e.value,i);o&&ia(t,"change")}}}};function Ko(t,e,n){Zo(t,e,n),(tt||nt)&&setTimeout((function(){Zo(t,e,n)}),0)}function Zo(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=R(r,ea(a))>-1,a.selected!==o&&(a.selected=o);else if(P(ea(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function ta(t,e){return e.every((function(e){return!P(e,t)}))}function ea(t){return"_value"in t?t._value:t.value}function na(t){t.target.composing=!0}function ra(t){t.target.composing&&(t.target.composing=!1,ia(t.target,"input"))}function ia(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function oa(t){return!t.componentInstance||t.data&&t.data.transition?t:oa(t.componentInstance._vnode)}var aa={bind:function(t,e,n){var r=e.value;n=oa(n);var i=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Uo(n,(function(){t.style.display=o}))):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value,i=e.oldValue;if(!r!==!i){n=oa(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Uo(n,(function(){t.style.display=t.__vOriginalDisplay})):qo(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},sa={model:Qo,show:aa},ua={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ca(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?ca(_n(e.children)):t}function la(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[_(o)]=i[o];return e}function fa(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function da(t){while(t=t.parent)if(t.data.transition)return!0}function ha(t,e){return e.key===t.key&&e.tag===t.tag}var pa=function(t){return t.tag||On(t)},ga=function(t){return"show"===t.name},ma={name:"transition",props:ua,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(pa),n.length)){0;var r=this.mode;0;var i=n[0];if(da(this.$vnode))return i;var o=ca(i);if(!o)return i;if(this._leaving)return fa(t,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=la(this),c=this._vnode,l=ca(c);if(o.data.directives&&o.data.directives.some(ga)&&(o.data.show=!0),l&&l.data&&!ha(o,l)&&!On(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var f=l.data.transition=M({},u);if("out-in"===r)return this._leaving=!0,we(f,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),fa(t,i);if("in-out"===r){if(On(o))return c;var d,h=function(){d()};we(u,"afterEnter",h),we(u,"enterCancelled",h),we(f,"delayLeave",(function(t){d=t}))}}return i}}},va=M({tag:String,moveClass:String},ua);delete va.mode;var ya={props:va,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=Mn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=la(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var c=[],l=[],f=0;f<r.length;f++){var d=r[f];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?c.push(d):l.push(d)}this.kept=t(e,null,c),this.removed=l}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(ba),t.forEach(xa),t.forEach(wa),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;$o(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Do,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Do,t),n._moveCb=null,Po(n,e))})}})))},methods:{hasMove:function(t,e){if(!ko)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){_o(n,t)})),Oo(n,e),n.style.display="none",this.$el.appendChild(n);var r=zo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function ba(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function xa(t){t.data.newPos=t.elm.getBoundingClientRect()}function wa(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var Oa={Transition:ma,TransitionGroup:ya};_r.config.mustUseProp=Br,_r.config.isReservedTag=oi,_r.config.isReservedAttr=Lr,_r.config.getTagNamespace=ai,_r.config.isUnknownElement=ui,M(_r.options.directives,sa),M(_r.options.components,Oa),_r.prototype.__patch__=J?Jo:N,_r.prototype.$mount=function(t,e){return t=t&&J?li(t):void 0,Fn(this,t,e)},J&&setTimeout((function(){U.devtools&&ct&&ct.emit("init",_r)}),0),e["a"]=_r}).call(this,n("c8ba"))},"2cdf":function(t,e){const n=/^[0-9]+$/,r=(t,e)=>{const r=n.test(t),i=n.test(e);return r&&i&&(t=+t,e=+e),t===e?0:r&&!i?-1:i&&!r?1:t<e?-1:1},i=(t,e)=>r(e,t);t.exports={compareIdentifiers:r,rcompareIdentifiers:i}},"2cf4":function(t,e,n){var r,i,o,a=n("da84"),s=n("d039"),u=n("0366"),c=n("1be4"),l=n("cc12"),f=n("1cdc"),d=n("605d"),h=a.location,p=a.setImmediate,g=a.clearImmediate,m=a.process,v=a.MessageChannel,y=a.Dispatch,b=0,x={},w="onreadystatechange",O=function(t){if(x.hasOwnProperty(t)){var e=x[t];delete x[t],e()}},_=function(t){return function(){O(t)}},j=function(t){O(t.data)},E=function(t){a.postMessage(t+"",h.protocol+"//"+h.host)};p&&g||(p=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return x[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},g=function(t){delete x[t]},d?r=function(t){m.nextTick(_(t))}:y&&y.now?r=function(t){y.now(_(t))}:v&&!f?(i=new v,o=i.port2,i.port1.onmessage=j,r=u(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&h&&"file:"!==h.protocol&&!s(E)?(r=E,a.addEventListener("message",j,!1)):r=w in l("script")?function(t){c.appendChild(l("script"))[w]=function(){c.removeChild(this),O(t)}}:function(t){setTimeout(_(t),0)}),t.exports={set:p,clear:g}},"2d00":function(t,e,n){var r,i,o=n("da84"),a=n("342f"),s=o.process,u=s&&s.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]+r[1]):a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"2eb0":function(t,e,n){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},3034:function(t,e,n){const r=n("bbfd"),i=(t,e,n)=>new r(t,n).compare(new r(e,n));t.exports=i},"342f":function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},"35a1":function(t,e,n){var r=n("f5df"),i=n("3f8c"),o=n("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[r(t)]}},"37e8":function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),a=n("df75");t.exports=r?Object.defineProperties:function(t,e){o(t);var n,r=a(e),s=r.length,u=0;while(s>u)i.f(t,n=r[u++],e[n]);return t}},"38cb":function(t,e,n){const r=n("bbfd"),i=n("6d43"),{ANY:o}=i,a=n("3fce"),s=n("2a86"),u=n("bac4"),c=n("38fa"),l=n("68d3"),f=n("a2a3"),d=(t,e,n,d)=>{let h,p,g,m,v;switch(t=new r(t,d),e=new a(e,d),n){case">":h=u,p=l,g=c,m=">",v=">=";break;case"<":h=c,p=f,g=u,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(t,e,d))return!1;for(let r=0;r<e.set.length;++r){const n=e.set[r];let a=null,s=null;if(n.forEach(t=>{t.semver===o&&(t=new i(">=0.0.0")),a=a||t,s=s||t,h(t.semver,a.semver,d)?a=t:g(t.semver,s.semver,d)&&(s=t)}),a.operator===m||a.operator===v)return!1;if((!s.operator||s.operator===m)&&p(t,s.semver))return!1;if(s.operator===v&&g(t,s.semver))return!1}return!0};t.exports=d},"38fa":function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)<0;t.exports=i},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3ec5":function(t,e,n){"use strict";var r=n("1157"),i=n.n(r);const o="transitionend",a=1e6,s=1e3;function u(t){return null===t||"undefined"===typeof t?""+t:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()}function c(){return{bindType:o,delegateType:o,handle(t){if(i()(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}}function l(t){let e=!1;return i()(this).one(d.TRANSITION_END,()=>{e=!0}),setTimeout(()=>{e||d.triggerTransitionEnd(this)},t),this}function f(){i.a.fn.emulateTransitionEnd=l,i.a.event.special[d.TRANSITION_END]=c()}const d={TRANSITION_END:"bsTransitionEnd",getUID(t){do{t+=~~(Math.random()*a)}while(document.getElementById(t));return t},getSelectorFromElement(t){let e=t.getAttribute("data-target");if(!e||"#"===e){const n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(n){return null}},getTransitionDurationFromElement(t){if(!t)return 0;let e=i()(t).css("transition-duration"),n=i()(t).css("transition-delay");const r=parseFloat(e),o=parseFloat(n);return r||o?(e=e.split(",")[0],n=n.split(",")[0],(parseFloat(e)+parseFloat(n))*s):0},reflow(t){return t.offsetHeight},triggerTransitionEnd(t){i()(t).trigger(o)},supportsTransitionEnd(){return Boolean(o)},isElement(t){return(t[0]||t).nodeType},typeCheckConfig(t,e,n){for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const i=n[r],o=e[r],a=o&&d.isElement(o)?"element":u(o);if(!new RegExp(i).test(a))throw new Error(t.toUpperCase()+": "+`Option "${r}" provided type "${a}" `+`but expected type "${i}".`)}},findShadowRoot(t){if(!document.documentElement.attachShadow)return null;if("function"===typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?d.findShadowRoot(t.parentNode):null},jQueryDetection(){if("undefined"===typeof i.a)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");const t=i.a.fn.jquery.split(" ")[0].split("."),e=1,n=2,r=9,o=1,a=4;if(t[0]<n&&t[1]<r||t[0]===e&&t[1]===r&&t[2]<o||t[0]>=a)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};d.jQueryDetection(),f(),e["a"]=d},"3f8c":function(t,e){t.exports={}},"3fce":function(t,e,n){class r{constructor(t,e){if(e=a(e),t instanceof r)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new r(t.raw,e);if(t instanceof s)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(t=>this.parseRange(t.trim())).filter(t=>t.length),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter(t=>!g(t[0])),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();const e=Object.keys(this.options).join(","),n=`parseRange:${e}:${t}`,r=o.get(n);if(r)return r;const i=this.options.loose,a=i?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];t=t.replace(a,S(this.options.includePrerelease)),u("hyphen replace",t),t=t.replace(l[f.COMPARATORTRIM],d),u("comparator trim",t,l[f.COMPARATORTRIM]),t=t.replace(l[f.TILDETRIM],h),t=t.replace(l[f.CARETTRIM],p),t=t.split(/\s+/).join(" ");const c=i?l[f.COMPARATORLOOSE]:l[f.COMPARATOR],m=t.split(" ").map(t=>y(t,this.options)).join(" ").split(/\s+/).map(t=>A(t,this.options)).filter(this.options.loose?t=>!!t.match(c):()=>!0).map(t=>new s(t,this.options)),v=(m.length,new Map);for(const o of m){if(g(o))return[o];v.set(o.value,o)}v.size>1&&v.has("")&&v.delete("");const b=[...v.values()];return o.set(n,b),b}intersects(t,e){if(!(t instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>v(n,e)&&t.set.some(t=>v(t,e)&&n.every(n=>t.every(t=>n.intersects(t,e)))))}test(t){if(!t)return!1;if("string"===typeof t)try{t=new c(t,this.options)}catch(e){return!1}for(let n=0;n<this.set.length;n++)if(C(this.set[n],t,this.options))return!0;return!1}}t.exports=r;const i=n("fdcb"),o=new i({max:1e3}),a=n("4c75"),s=n("6d43"),u=n("b802"),c=n("bbfd"),{re:l,t:f,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=n("8cb5"),g=t=>"<0.0.0-0"===t.value,m=t=>""===t.value,v=(t,e)=>{let n=!0;const r=t.slice();let i=r.pop();while(n&&r.length)n=r.every(t=>i.intersects(t,e)),i=r.pop();return n},y=(t,e)=>(u("comp",t,e),t=O(t,e),u("caret",t),t=x(t,e),u("tildes",t),t=j(t,e),u("xrange",t),t=k(t,e),u("stars",t),t),b=t=>!t||"x"===t.toLowerCase()||"*"===t,x=(t,e)=>t.trim().split(/\s+/).map(t=>w(t,e)).join(" "),w=(t,e)=>{const n=e.loose?l[f.TILDELOOSE]:l[f.TILDE];return t.replace(n,(e,n,r,i,o)=>{let a;return u("tilde",t,e,n,r,i,o),b(n)?a="":b(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:b(i)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(u("replaceTilde pr",o),a=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,u("tilde return",a),a})},O=(t,e)=>t.trim().split(/\s+/).map(t=>_(t,e)).join(" "),_=(t,e)=>{u("caret",t,e);const n=e.loose?l[f.CARETLOOSE]:l[f.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(e,n,i,o,a)=>{let s;return u("caret",t,e,n,i,o,a),b(n)?s="":b(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:b(o)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:a?(u("replaceCaret pr",a),s="0"===n?"0"===i?`>=${n}.${i}.${o}-${a} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${a} <${+n+1}.0.0-0`):(u("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),u("caret return",s),s})},j=(t,e)=>(u("replaceXRanges",t,e),t.split(/\s+/).map(t=>E(t,e)).join(" ")),E=(t,e)=>{t=t.trim();const n=e.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return t.replace(n,(n,r,i,o,a,s)=>{u("xRange",t,n,r,i,o,a,s);const c=b(i),l=c||b(o),f=l||b(a),d=f;return"="===r&&d&&(r=""),s=e.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(l&&(o=0),a=0,">"===r?(r=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(s="-0"),n=`${r+i}.${o}.${a}${s}`):l?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:f&&(n=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`),u("xRange return",n),n})},k=(t,e)=>(u("replaceStars",t,e),t.trim().replace(l[f.STAR],"")),A=(t,e)=>(u("replaceGTE0",t,e),t.trim().replace(l[e.includePrerelease?f.GTE0PRE:f.GTE0],"")),S=t=>(e,n,r,i,o,a,s,u,c,l,f,d,h)=>(n=b(r)?"":b(i)?`>=${r}.0.0${t?"-0":""}`:b(o)?`>=${r}.${i}.0${t?"-0":""}`:a?">="+n:`>=${n}${t?"-0":""}`,u=b(c)?"":b(l)?`<${+c+1}.0.0-0`:b(f)?`<${c}.${+l+1}.0-0`:d?`<=${c}.${l}.${f}-${d}`:t?`<${c}.${l}.${+f+1}-0`:"<="+u,`${n} ${u}`.trim()),C=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let n=0;n<t.length;n++)if(u(t[n].semver),t[n].semver!==s.ANY&&t[n].semver.prerelease.length>0){const r=t[n].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}},4008:function(t,e,n){t.exports=n.p+"assets/dashboard/app/img/sprite.svg"},4160:function(t,e,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(t,e,n){var r=n("da84");t.exports=r},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},4392:function(t,e,n){const r=n("3034"),i=(t,e,n)=>0===r(t,e,n);t.exports=i},"44ad":function(t,e,n){var r=n("d039"),i=n("c6b6"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},"44de":function(t,e,n){var r=n("da84");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},4840:function(t,e,n){var r=n("825a"),i=n("1c0b"),o=n("b622"),a=o("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},4930:function(t,e,n){var r=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"4c75":function(t,e){const n=["includePrerelease","loose","rtl"],r=t=>t?"object"!==typeof t?{loose:!0}:n.filter(e=>t[e]).reduce((t,e)=>(t[e]=!0,t),{}):{};t.exports=r},"4ca4":function(t,e,n){const r=n("bbfd"),i=(t,e)=>new r(t,e).patch;t.exports=i},"4d64":function(t,e,n){var r=n("fc6a"),i=n("50c4"),o=n("23cb"),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},"4d89":function(t,e,n){const r=n("8cb5");t.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n("b15c").SEMVER_SPEC_VERSION,SemVer:n("bbfd"),compareIdentifiers:n("2cdf").compareIdentifiers,rcompareIdentifiers:n("2cdf").rcompareIdentifiers,parse:n("a236"),valid:n("acef"),clean:n("d2ef"),inc:n("0159"),diff:n("6b78"),major:n("4e14"),minor:n("c2d5"),patch:n("4ca4"),prerelease:n("8970"),compare:n("3034"),rcompare:n("b805"),compareLoose:n("b00b"),compareBuild:n("1cc6"),sort:n("2a2e"),rsort:n("6fa7"),gt:n("bac4"),lt:n("38fa"),eq:n("4392"),neq:n("f195"),gte:n("a2a3"),lte:n("68d3"),cmp:n("c4be"),coerce:n("0a67"),Comparator:n("6d43"),Range:n("3fce"),satisfies:n("2a86"),toComparators:n("7d63"),maxSatisfying:n("13af"),minSatisfying:n("fd90"),minVersion:n("86d4"),validRange:n("0982"),outside:n("38cb"),gtr:n("8bd6"),ltr:n("9b6c"),intersects:n("5237"),simplifyRange:n("f67c"),subset:n("c628")}},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),a=n("ae40"),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4e14":function(t,e,n){const r=n("bbfd"),i=(t,e)=>new r(t,e).major;t.exports=i},"50c4":function(t,e,n){var r=n("a691"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},5135:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},5237:function(t,e,n){const r=n("3fce"),i=(t,e,n)=>(t=new r(t,n),e=new r(e,n),t.intersects(e));t.exports=i},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("a4d3"),n("4de4"),n("4160"),n("1d1c"),n("7a82"),n("e439"),n("dbb4"),n("b64b"),n("159b");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},5554:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));const r="view",i="[",o="]",a="{",s="}",u=":",c=",",l="@",f=">",d=/[[\]{}]/,h={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let p,g;function m(t,e,n){return p=e||r,g=n||h,b(t.trim()).map(x)}function v(t){return g[t]}function y(t,e,n,r,i){const o=t.length;let a,s=0;for(;e<o;++e){if(a=t[e],!s&&a===n)return e;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return e}function b(t){const e=[],n=t.length;let r=0,u=0;while(u<n)u=y(t,u,c,i+a,o+s),e.push(t.substring(r,u).trim()),r=++u;if(0===e.length)throw"Empty event selector: "+t;return e}function x(t){return"["===t[0]?w(t):O(t)}function w(t){const e=t.length;let n,r=1;if(r=y(t,r,o,i,o),r===e)throw"Empty between selector: "+t;if(n=b(t.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+t;if(t=t.slice(r+1).trim(),t[0]!==f)throw"Expected '>' after between selector: "+t;n=n.map(x);const a=x(t.slice(1).trim());return a.between?{between:n,stream:a}:(a.between=n,a)}function O(t){const e={source:p},n=[];let r,c,f=[0,0],h=0,g=0,m=t.length,b=0;if(t[m-1]===s){if(b=t.lastIndexOf(a),!(b>=0))throw"Unmatched right brace: "+t;try{f=_(t.substring(b+1,m-1))}catch(x){throw"Invalid throttle specification: "+t}t=t.slice(0,b).trim(),m=t.length,b=0}if(!m)throw t;if(t[0]===l&&(h=++b),r=y(t,b,u),r<m&&(n.push(t.substring(g,r).trim()),g=b=++r),b=y(t,b,i),b===m)n.push(t.substring(g,m).trim());else if(n.push(t.substring(g,b).trim()),c=[],g=++b,g===m)throw"Unmatched left bracket: "+t;while(b<m){if(b=y(t,b,o),b===m)throw"Unmatched left bracket: "+t;if(c.push(t.substring(g,b).trim()),b<m-1&&t[++b]!==i)throw"Expected left bracket: "+t;g=++b}if(!(m=n.length)||d.test(n[m-1]))throw"Invalid event selector: "+t;return m>1?(e.type=n[1],h?e.markname=n[0].slice(1):v(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],"!"===e.type.slice(-1)&&(e.consume=!0,e.type=e.type.slice(0,-1)),null!=c&&(e.filter=c),f[0]&&(e.throttle=f[0]),f[1]&&(e.debounce=f[1]),e}function _(t){const e=t.split(c);if(!t.length||e.length>2)throw t;return e.map(e=>{const n=+e;if(n!==n)throw t;return n})}},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.3",mode:r?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var r=n("d066"),i=n("241c"),o=n("7418"),a=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},5961:function(t){t.exports=JSON.parse('{"dateTime":"%A %e %B %Y, %X","date":"%d/%m/%Y","time":"%H:%M:%S","periods":["AM","PM"],"days":["Domenica","LunedÃ¬","MartedÃ¬","MercoledÃ¬","GiovedÃ¬","VenerdÃ¬","Sabato"],"shortDays":["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],"months":["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],"shortMonths":["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}')},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5e9b":function(t,e,n){"use strict";function r(t,e,n){let r;e.x2&&(e.x?(n&&t.x>t.x2&&(r=t.x,t.x=t.x2,t.x2=r),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(n&&t.y>t.y2&&(r=t.y,t.y=t.y2,t.y2=r),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}n.d(e,"a",(function(){return p}));var i={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},o={"*":(t,e)=>t*e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,">":(t,e)=>t>e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e},a={"+":t=>+t,"-":t=>-t,"~":t=>~t,"!":t=>!t};const s=Array.prototype.slice,u=(t,e,n)=>{const r=n?n(e[0]):e[0];return r[t].apply(r,s.call(e,1))},c=(t,e,n,r,i,o,a)=>new Date(t,e||0,null!=n?n:1,r||0,i||0,o||0,a||0);var l={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(t,e,n)=>Math.max(e,Math.min(n,t)),now:Date.now,utc:Date.UTC,datetime:c,date:t=>new Date(t).getDate(),day:t=>new Date(t).getDay(),year:t=>new Date(t).getFullYear(),month:t=>new Date(t).getMonth(),hours:t=>new Date(t).getHours(),minutes:t=>new Date(t).getMinutes(),seconds:t=>new Date(t).getSeconds(),milliseconds:t=>new Date(t).getMilliseconds(),time:t=>new Date(t).getTime(),timezoneoffset:t=>new Date(t).getTimezoneOffset(),utcdate:t=>new Date(t).getUTCDate(),utcday:t=>new Date(t).getUTCDay(),utcyear:t=>new Date(t).getUTCFullYear(),utcmonth:t=>new Date(t).getUTCMonth(),utchours:t=>new Date(t).getUTCHours(),utcminutes:t=>new Date(t).getUTCMinutes(),utcseconds:t=>new Date(t).getUTCSeconds(),utcmilliseconds:t=>new Date(t).getUTCMilliseconds(),length:t=>t.length,join:function(){return u("join",arguments)},indexof:function(){return u("indexOf",arguments)},lastindexof:function(){return u("lastIndexOf",arguments)},slice:function(){return u("slice",arguments)},reverse:t=>t.slice().reverse(),parseFloat:parseFloat,parseInt:parseInt,upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),substring:function(){return u("substring",arguments,String)},split:function(){return u("split",arguments,String)},replace:function(){return u("replace",arguments,String)},trim:t=>String(t).trim(),regexp:RegExp,test:(t,e)=>RegExp(t).test(e)};const f=["view","item","group","xy","x","y"],d={Literal:(t,e)=>e.value,Identifier:(t,e)=>{const n=e.name;return t.memberDepth>0?n:"datum"===n?t.datum:"event"===n?t.event:"item"===n?t.item:i[n]||t.params["$"+n]},MemberExpression:(t,e)=>{const n=!e.computed,r=t(e.object);n&&(t.memberDepth+=1);const i=t(e.property);return n&&(t.memberDepth-=1),r[i]},CallExpression:(t,e)=>{const n=e.arguments;let r=e.callee.name;return r.startsWith("_")&&(r=r.slice(1)),"if"===r?t(n[0])?t(n[1]):t(n[2]):(t.fn[r]||l[r]).apply(t.fn,n.map(t))},ArrayExpression:(t,e)=>e.elements.map(t),BinaryExpression:(t,e)=>o[e.operator](t(e.left),t(e.right)),UnaryExpression:(t,e)=>a[e.operator](t(e.argument)),ConditionalExpression:(t,e)=>t(e.test)?t(e.consequent):t(e.alternate),LogicalExpression:(t,e)=>"&&"===e.operator?t(e.left)&&t(e.right):t(e.left)||t(e.right),ObjectExpression:(t,e)=>e.properties.reduce((e,n)=>{t.memberDepth+=1;const r=t(n.key);return t.memberDepth-=1,e[r]=t(n.value),e},{})};function h(t,e,n,r,i,o){const a=t=>d[t.type](a,t);return a.memberDepth=0,a.fn=Object.create(e),a.params=n,a.datum=r,a.event=i,a.item=o,f.forEach(t=>a.fn[t]=(...e)=>i.vega[t](...e)),a(t)}var p={operator(t,e){const n=e.ast,r=t.functions;return t=>h(n,r,t)},parameter(t,e){const n=e.ast,r=t.functions;return(t,e)=>h(n,r,e,t)},event(t,e){const n=e.ast,r=t.functions;return t=>h(n,r,void 0,void 0,t)},handler(t,e){const n=e.ast,r=t.functions;return(t,e)=>{const i=e.item&&e.item.datum;return h(n,r,t,i,e)}},encode(t,e){const{marktype:n,channels:i}=e,o=t.functions,a="group"===n||"image"===n||"rect"===n;return(t,e)=>{const s=t.datum;let u,c=0;for(const n in i)u=h(i[n].ast,o,e,s,void 0,t),t[n]!==u&&(t[n]=u,c=1);return"rule"!==n&&r(t,i,a),c}}}},"605d":function(t,e,n){var r=n("c6b6"),i=n("da84");t.exports="process"==r(i.process)},"60da":function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),o=n("df75"),a=n("7418"),s=n("d1e7"),u=n("7b0b"),c=n("44ad"),l=Object.assign,f=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||o(l({},e)).join("")!=i}))?function(t,e){var n=u(t),i=arguments.length,l=1,f=a.f,d=s.f;while(i>l){var h,p=c(arguments[l++]),g=f?o(p).concat(f(p)):o(p),m=g.length,v=0;while(m>v)h=g[v++],r&&!d.call(p,h)||(n[h]=p[h])}return n}:l},6582:function(t,e,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,e){var n,i,o;return e=e||{},n=JSON.stringify([1],void 0,void 0===e.indent?2:e.indent).slice(2,-3),i=""===n?1/0:void 0===e.maxLength?80:e.maxLength,o=e.replacer,function t(e,a,s){var u,c,l,f,d,h,p,g,m,v,y,b;if(e&&"function"===typeof e.toJSON&&(e=e.toJSON()),y=JSON.stringify(e,o),void 0===y)return y;if(p=i-a.length-s,y.length<=p&&(m=y.replace(r,(function(t,e){return e||t+" "})),m.length<=p))return m;if(null!=o&&(e=JSON.parse(y),o=void 0),"object"===typeof e&&null!==e){if(g=a+n,l=[],c=0,Array.isArray(e))for(v="[",u="]",p=e.length;c<p;c++)l.push(t(e[c],g,c===p-1?0:1)||"null");else for(v="{",u="}",h=Object.keys(e),p=h.length;c<p;c++)f=h[c],d=JSON.stringify(f)+": ",b=t(e[f],g,d.length+(c===p-1?0:1)),void 0!==b&&l.push(d+b);if(l.length>0)return[v,n+l.join(",\n"+g),u].join("\n"+a)}return y}(t,"",0)}},"65f0":function(t,e,n){var r=n("861d"),i=n("e8b5"),o=n("b622"),a=o("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},6715:function(t,e,n){(function(e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var n,r,i;try{n=Map}catch(f){n=function(){}}try{r=Set}catch(f){r=function(){}}try{i=Promise}catch(f){i=function(){}}function o(a,s,u,c,f){"object"===typeof s&&(u=s.depth,c=s.prototype,f=s.includeNonEnumerable,s=s.circular);var d=[],h=[],p="undefined"!=typeof e;function g(a,u){if(null===a)return null;if(0===u)return a;var m,v;if("object"!=typeof a)return a;if(t(a,n))m=new n;else if(t(a,r))m=new r;else if(t(a,i))m=new i((function(t,e){a.then((function(e){t(g(e,u-1))}),(function(t){e(g(t,u-1))}))}));else if(o.__isArray(a))m=[];else if(o.__isRegExp(a))m=new RegExp(a.source,l(a)),a.lastIndex&&(m.lastIndex=a.lastIndex);else if(o.__isDate(a))m=new Date(a.getTime());else{if(p&&e.isBuffer(a))return m=e.allocUnsafe?e.allocUnsafe(a.length):new e(a.length),a.copy(m),m;t(a,Error)?m=Object.create(a):"undefined"==typeof c?(v=Object.getPrototypeOf(a),m=Object.create(v)):(m=Object.create(c),v=c)}if(s){var y=d.indexOf(a);if(-1!=y)return h[y];d.push(a),h.push(m)}for(var b in t(a,n)&&a.forEach((function(t,e){var n=g(e,u-1),r=g(t,u-1);m.set(n,r)})),t(a,r)&&a.forEach((function(t){var e=g(t,u-1);m.add(e)})),a){var x;v&&(x=Object.getOwnPropertyDescriptor(v,b)),x&&null==x.set||(m[b]=g(a[b],u-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(a);for(b=0;b<w.length;b++){var O=w[b],_=Object.getOwnPropertyDescriptor(a,O);(!_||_.enumerable||f)&&(m[O]=g(a[O],u-1),_.enumerable||Object.defineProperty(m,O,{enumerable:!1}))}}if(f){var j=Object.getOwnPropertyNames(a);for(b=0;b<j.length;b++){var E=j[b];_=Object.getOwnPropertyDescriptor(a,E);_&&_.enumerable||(m[E]=g(a[E],u-1),Object.defineProperty(m,E,{enumerable:!1}))}}return m}return"undefined"==typeof s&&(s=!0),"undefined"==typeof u&&(u=1/0),g(a,u)}function a(t){return Object.prototype.toString.call(t)}function s(t){return"object"===typeof t&&"[object Date]"===a(t)}function u(t){return"object"===typeof t&&"[object Array]"===a(t)}function c(t){return"object"===typeof t&&"[object RegExp]"===a(t)}function l(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=a,o.__isDate=s,o.__isArray=u,o.__isRegExp=c,o.__getRegExpFlags=l,o}();t.exports&&(t.exports=n)}).call(this,n("b639").Buffer)},"68d3":function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)<=0;t.exports=i},"694b":function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;0!==i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}},"69f3":function(t,e,n){var r,i,o,a=n("7f9a"),s=n("da84"),u=n("861d"),c=n("9112"),l=n("5135"),f=n("c6cd"),d=n("f772"),h=n("d012"),p=s.WeakMap,g=function(t){return o(t)?i(t):r(t,{})},m=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(a){var v=f.state||(f.state=new p),y=v.get,b=v.has,x=v.set;r=function(t,e){return e.facade=t,x.call(v,t,e),e},i=function(t){return y.call(v,t)||{}},o=function(t){return b.call(v,t)}}else{var w=d("state");h[w]=!0,r=function(t,e){return e.facade=t,c(t,w,e),e},i=function(t){return l(t,w)?t[w]:{}},o=function(t){return l(t,w)}}t.exports={set:r,get:i,has:o,enforce:g,getterFor:m}},"6b78":function(t,e,n){const r=n("a236"),i=n("4392"),o=(t,e)=>{if(i(t,e))return null;{const n=r(t),i=r(e),o=n.prerelease.length||i.prerelease.length,a=o?"pre":"",s=o?"prerelease":"";for(const t in n)if(("major"===t||"minor"===t||"patch"===t)&&n[t]!==i[t])return a+t;return s}};t.exports=o},"6d43":function(t,e,n){const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(t,e){if(e=o(e),t instanceof i){if(t.loose===!!e.loose)return t;t=t.value}c("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===r?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(t){const e=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],n=t.match(e);if(!n)throw new TypeError("Invalid comparator: "+t);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(t){if(c("Comparator.test",t,this.options.loose),this.semver===r||t===r)return!0;if("string"===typeof t)try{t=new l(t,this.options)}catch(e){return!1}return u(t,this.operator,this.semver,this.options)}intersects(t,e){if(!(t instanceof i))throw new TypeError("a Comparator is required");if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return""===this.value||new f(t.value,e).test(this.value);if(""===t.operator)return""===t.value||new f(this.value,e).test(t.semver);const n=(">="===this.operator||">"===this.operator)&&(">="===t.operator||">"===t.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===t.operator||"<"===t.operator),o=this.semver.version===t.semver.version,a=(">="===this.operator||"<="===this.operator)&&(">="===t.operator||"<="===t.operator),s=u(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),c=u(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return n||r||o&&a||s||c}}t.exports=i;const o=n("4c75"),{re:a,t:s}=n("8cb5"),u=n("c4be"),c=n("b802"),l=n("bbfd"),f=n("3fce")},"6eeb":function(t,e,n){var r=n("da84"),i=n("9112"),o=n("5135"),a=n("ce4e"),s=n("8925"),u=n("69f3"),c=u.get,l=u.enforce,f=String(String).split("String");(t.exports=function(t,e,n,s){var u,c=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),u=l(n),u.source||(u.source=f.join("string"==typeof e?e:""))),t!==r?(c?!h&&t[e]&&(d=!0):delete t[e],d?t[e]=n:i(t,e,n)):d?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},"6fa7":function(t,e,n){const r=n("1cc6"),i=(t,e)=>t.sort((t,n)=>r(n,t,e));t.exports=i},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),o=n("e538"),a=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},"75d9":function(t){t.exports=JSON.parse('{"decimal":",","thousands":".","grouping":[3],"currency":["â¬",""]}')},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a82":function(t,e,n){var r=n("23e7"),i=n("83ab"),o=n("9bf2");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:o.f})},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7c73":function(t,e,n){var r,i=n("825a"),o=n("37e8"),a=n("7839"),s=n("d012"),u=n("1be4"),c=n("cc12"),l=n("f772"),f=">",d="<",h="prototype",p="script",g=l("IE_PROTO"),m=function(){},v=function(t){return d+p+f+t+d+"/"+p+f},y=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=c("iframe"),n="java"+p+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},x=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}x=r?y(r):b();var t=a.length;while(t--)delete x[h][a[t]];return x()};s[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[h]=i(t),n=new m,m[h]=null,n[g]=t):n=x(),void 0===e?n:o(n,e)}},"7d63":function(t,e,n){const r=n("3fce"),i=(t,e)=>new r(t,e).set.map(t=>t.map(t=>t.value).join(" ").trim().split(" "));t.exports=i},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),i=n("9ed3"),o=n("e163"),a=n("d2bb"),s=n("d44e"),u=n("9112"),c=n("6eeb"),l=n("b622"),f=n("c430"),d=n("3f8c"),h=n("ae93"),p=h.IteratorPrototype,g=h.BUGGY_SAFARI_ITERATORS,m=l("iterator"),v="keys",y="values",b="entries",x=function(){return this};t.exports=function(t,e,n,l,h,w,O){i(n,e,l);var _,j,E,k=function(t){if(t===h&&M)return M;if(!g&&t in C)return C[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case b:return function(){return new n(this,t)}}return function(){return new n(this)}},A=e+" Iterator",S=!1,C=t.prototype,D=C[m]||C["@@iterator"]||h&&C[h],M=!g&&D||k(h),T="Array"==e&&C.entries||D;if(T&&(_=o(T.call(new t)),p!==Object.prototype&&_.next&&(f||o(_)===p||(a?a(_,p):"function"!=typeof _[m]&&u(_,m,x)),s(_,A,!0,!0),f&&(d[A]=x))),h==y&&D&&D.name!==y&&(S=!0,M=function(){return D.call(this)}),f&&!O||C[m]===M||u(C,m,M),d[e]=M,h)if(j={values:k(y),keys:w?M:k(v),entries:k(b)},O)for(E in j)(g||S||!(E in C))&&c(C,E,j[E]);else r({target:e,proto:!0,forced:g||S},j);return j}},"7f9a":function(t,e,n){var r=n("da84"),i=n("8925"),o=r.WeakMap;t.exports="function"===typeof o&&/native code/.test(i(o))},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,n){"use strict";var r=n("c04e"),i=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},"86d4":function(t,e,n){const r=n("bbfd"),i=n("3fce"),o=n("bac4"),a=(t,e)=>{t=new i(t,e);let n=new r("0.0.0");if(t.test(n))return n;if(n=new r("0.0.0-0"),t.test(n))return n;n=null;for(let i=0;i<t.set.length;++i){const e=t.set[i];let a=null;e.forEach(t=>{const e=new r(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":a&&!o(e,a)||(a=e);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+t.operator)}}),!a||n&&!o(n,a)||(n=a)}return n&&t.test(n)?n:null};t.exports=a},"87e7":function(t,e,n){"use strict";n.d(e,"b",(function(){return Be}));var r={};n.r(r),n.d(r,"JsonPatchError",(function(){return v})),n.d(r,"deepClone",(function(){return y})),n.d(r,"getValueByPointer",(function(){return w})),n.d(r,"applyOperation",(function(){return O})),n.d(r,"applyPatch",(function(){return _})),n.d(r,"applyReducer",(function(){return j})),n.d(r,"validator",(function(){return E})),n.d(r,"validate",(function(){return k})),n.d(r,"_areEquals",(function(){return A}));var i={};n.r(i),n.d(i,"unobserve",(function(){return F})),n.d(i,"observe",(function(){return $})),n.d(i,"generate",(function(){return P})),n.d(i,"compare",(function(){return L}));var o={};n.r(o),n.d(o,"dark",(function(){return dt})),n.d(o,"excel",(function(){return pt})),n.d(o,"fivethirtyeight",(function(){return wt})),n.d(o,"ggplot2",(function(){return _t})),n.d(o,"googlecharts",(function(){return Zt})),n.d(o,"latimes",(function(){return Ft})),n.d(o,"quartz",(function(){return Rt})),n.d(o,"urbaninstitute",(function(){return Xt})),n.d(o,"version",(function(){return te})),n.d(o,"vox",(function(){return zt}));
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var a=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=Object.prototype.hasOwnProperty;function u(t,e){return s.call(t,e)}function c(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);e=[];for(var r in t)u(t,r)&&e.push(r);return e}function l(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function f(t){var e,n=0,r=t.length;while(n<r){if(e=t.charCodeAt(n),!(e>=48&&e<=57))return!1;n++}return!0}function d(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function h(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function p(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(p(t[e]))return!0}else if("object"===typeof t){var r=c(t),i=r.length;for(e=0;e<i;e++)if(p(t[r[e]]))return!0}return!1}function g(t,e){var n=[t];for(var r in e){var i="object"===typeof e[r]?JSON.stringify(e[r],null,2):e[r];"undefined"!==typeof i&&n.push(r+": "+i)}return n.join("\n")}var m=function(t){function e(e,n,r,i,o){var a=this.constructor,s=t.call(this,g(e,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=g(e,{name:n,index:r,operation:i,tree:o}),s}return a(e,t),e}(Error),v=m,y=l,b={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=w(n,this.path);r&&(r=l(r));var i=O(n,{op:"remove",path:this.from}).removed;return O(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=w(n,this.from);return O(n,{op:"add",path:this.path,value:l(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:A(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},x={add:function(t,e,n){return f(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:b.move,copy:b.copy,test:b.test,_get:b._get};function w(t,e){if(""==e)return t;var n={op:"_get",path:e};return O(t,n),n.value}function O(t,e,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(e,0,t,e.path):E(e,0)),""===e.path){var a={newDocument:t};if("add"===e.op)return a.newDocument=e.value,a;if("replace"===e.op)return a.newDocument=e.value,a.removed=t,a;if("move"===e.op||"copy"===e.op)return a.newDocument=w(t,e.from),"move"===e.op&&(a.removed=t),a;if("test"===e.op){if(a.test=A(t,e.value),!1===a.test)throw new v("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a.newDocument=t,a}if("remove"===e.op)return a.removed=t,a.newDocument=null,a;if("_get"===e.op)return e.value=t,a;if(n)throw new v("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return a}r||(t=l(t));var s=e.path||"",u=s.split("/"),c=t,d=1,p=u.length,g=void 0,m=void 0,y=void 0;y="function"==typeof n?n:E;while(1){if(m=u[d],i&&"__proto__"==m)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===g&&(void 0===c[m]?g=u.slice(0,d).join("/"):d==p-1&&(g=e.path),void 0!==g&&y(e,0,t,g)),d++,Array.isArray(c)){if("-"===m)m=c.length;else{if(n&&!f(m))throw new v("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);f(m)&&(m=~~m)}if(d>=p){if(n&&"add"===e.op&&m>c.length)throw new v("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);a=x[e.op].call(e,c,m,t);if(!1===a.test)throw new v("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a}}else if(m&&-1!=m.indexOf("~")&&(m=h(m)),d>=p){a=b[e.op].call(e,c,m,t);if(!1===a.test)throw new v("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a}c=c[m]}}function _(t,e,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(e))throw new v("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=l(t));for(var o=new Array(e.length),a=0,s=e.length;a<s;a++)o[a]=O(t,e[a],n,!0,i,a),t=o[a].newDocument;return o.newDocument=t,o}function j(t,e,n){var r=O(t,e);if(!1===r.test)throw new v("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function E(t,e,n,r){if("object"!==typeof t||null===t||Array.isArray(t))throw new v("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(!b[t.op])throw new v("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n);if("string"!==typeof t.path)throw new v("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new v('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if(("move"===t.op||"copy"===t.op)&&"string"!==typeof t.from)throw new v("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new v("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&p(t.value))throw new v("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n)if("add"==t.op){var i=t.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new v("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new v("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if("move"===t.op||"copy"===t.op){var a={op:"_get",path:t.from,value:void 0},s=k([a],n);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new v("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}function k(t,e,n){try{if(!Array.isArray(t))throw new v("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)_(l(e),l(t),n||!0);else{n=n||E;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof v)return i;throw i}}function A(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,r,i,o=Array.isArray(t),a=Array.isArray(e);if(o&&a){if(r=t.length,r!=e.length)return!1;for(n=r;0!==n--;)if(!A(t[n],e[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(t);if(r=s.length,r!==Object.keys(e).length)return!1;for(n=r;0!==n--;)if(!e.hasOwnProperty(s[n]))return!1;for(n=r;0!==n--;)if(i=s[n],!A(t[i],e[i]))return!1;return!0}return t!==t&&e!==e}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var S=new WeakMap,C=function(){function t(t){this.observers=new Map,this.obj=t}return t}(),D=function(){function t(t,e){this.callback=t,this.observer=e}return t}();function M(t){return S.get(t)}function T(t,e){return t.observers.get(e)}function N(t,e){t.observers.delete(e.callback)}function F(t,e){e.unobserve()}function $(t,e){var n,r=[],i=M(t);if(i){var o=T(i,e);n=o&&o.observer}else i=new C(t),S.set(t,i);if(n)return n;if(n={},i.value=l(t),e){n.callback=e,n.next=null;var a=function(){P(n)},s=function(){clearTimeout(n.next),n.next=setTimeout(a)};"undefined"!==typeof window&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return n.patches=r,n.object=t,n.unobserve=function(){P(n),clearTimeout(n.next),N(i,n),"undefined"!==typeof window&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(e,new D(e,n)),n}function P(t,e){void 0===e&&(e=!1);var n=S.get(t.object);R(n.value,t.object,t.patches,"",e),t.patches.length&&_(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function R(t,e,n,r,i){if(e!==t){"function"===typeof e.toJSON&&(e=e.toJSON());for(var o=c(e),a=c(t),s=!1,f=a.length-1;f>=0;f--){var h=a[f],p=t[h];if(!u(e,h)||void 0===e[h]&&void 0!==p&&!1===Array.isArray(e))Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+d(h),value:l(p)}),n.push({op:"remove",path:r+"/"+d(h)}),s=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}),!0);else{var g=e[h];"object"==typeof p&&null!=p&&"object"==typeof g&&null!=g?R(p,g,n,r+"/"+d(h),i):p!==g&&(!0,i&&n.push({op:"test",path:r+"/"+d(h),value:l(p)}),n.push({op:"replace",path:r+"/"+d(h),value:l(g)}))}}if(s||o.length!=a.length)for(f=0;f<o.length;f++){h=o[f];u(t,h)||void 0===e[h]||n.push({op:"add",path:r+"/"+d(h),value:l(e[h])})}}}function L(t,e,n){void 0===n&&(n=!1);var r=[];return R(t,e,r,"",n),r}Object.assign({},r,i,{JsonPatchError:m,deepClone:l,escapePathComponent:d,unescapePathComponent:h});var z=n("6582"),B=n.n(z),I=n("4d89"),U=n("e1a1"),q=n("2a83"),H=n("89c5"),W="vega-themes",G="2.9.1",Y="Themes for stylized Vega and Vega-Lite visualizations.",V=["vega","vega-lite","themes","style"],X="BSD-3-Clause",J={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Q=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],K="build/vega-themes.js",Z="build/vega-themes.module.js",tt="build/vega-themes.min.js",et="build/vega-themes.min.js",nt="build/vega-themes.module.d.ts",rt={type:"git",url:"https://github.com/vega/vega-themes.git"},it=["src","build"],ot={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",prepare:"beemo create-config",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix",lint:"yarn eslintbase"},at={"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^9.0.0","@wessberg/rollup-plugin-ts":"^1.3.4","browser-sync":"^2.26.12",concurrently:"^5.3.0","gh-pages":"^3.1.0",rollup:"^2.26.11","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"^4.0.2",vega:"^5.10.0","vega-lite":"^4.8.1","vega-lite-dev-config":"^0.14.6"},st={vega:"*","vega-lite":"*"},ut={module:"vega-lite-dev-config",drivers:["typescript","prettier","eslint"]},ct={name:W,version:G,description:Y,keywords:V,license:X,author:J,contributors:Q,main:K,module:Z,unpkg:tt,jsdelivr:et,types:nt,repository:rt,files:it,scripts:ot,devDependencies:at,peerDependencies:st,beemo:ut};const lt="#fff",ft="#888",dt={background:"#333",title:{color:lt},style:{"guide-label":{fill:lt},"guide-title":{fill:lt}},axis:{domainColor:lt,gridColor:ft,tickColor:lt}},ht="#4572a7",pt={background:"#fff",arc:{fill:ht},area:{fill:ht},line:{stroke:ht,strokeWidth:2},path:{stroke:ht},rect:{fill:ht},shape:{stroke:ht},symbol:{fill:ht,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},gt="#30a2da",mt="#cbcbcb",vt="#999",yt="#333",bt="#f0f0f0",xt="#333",wt={arc:{fill:gt},area:{fill:gt},axis:{domainColor:mt,grid:!0,gridColor:mt,gridWidth:1,labelColor:vt,labelFontSize:10,titleColor:yt,tickColor:mt,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:bt,group:{fill:bt},legend:{labelColor:xt,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:xt,titleFontSize:14,titlePadding:10},line:{stroke:gt,strokeWidth:2},path:{stroke:gt,strokeWidth:.5},rect:{fill:gt},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:gt},bar:{binSpacing:2,fill:gt,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Ot="#000",_t={group:{fill:"#e5e5e5"},arc:{fill:Ot},area:{fill:Ot},line:{stroke:Ot},path:{stroke:Ot},rect:{fill:Ot},shape:{stroke:Ot},symbol:{fill:Ot,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},jt=22,Et="normal",kt="Benton Gothic, sans-serif",At=11.5,St="normal",Ct="#82c6df",Dt="Benton Gothic Bold, sans-serif",Mt="normal",Tt=13,Nt={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Ft={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Dt,fontSize:jt,fontWeight:Et},arc:{fill:Ct},area:{fill:Ct},line:{stroke:Ct,strokeWidth:2},path:{stroke:Ct},rect:{fill:Ct},shape:{stroke:Ct},symbol:{fill:Ct,size:30},axis:{labelFont:kt,labelFontSize:At,labelFontWeight:St,titleFont:Dt,titleFontSize:Tt,titleFontWeight:Mt},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:kt,labelFontSize:At,symbolType:"square",titleFont:Dt,titleFontSize:Tt,titleFontWeight:Mt},range:{category:Nt["category-6"],diverging:Nt["fireandice-6"],heatmap:Nt["fire-7"],ordinal:Nt["fire-7"],ramp:Nt["fire-7"]}},$t="#ab5787",Pt="#979797",Rt={background:"#f9f9f9",arc:{fill:$t},area:{fill:$t},line:{stroke:$t},path:{stroke:$t},rect:{fill:$t},shape:{stroke:$t},symbol:{fill:$t,size:30},axis:{domainColor:Pt,domainWidth:.5,gridWidth:.2,labelColor:Pt,tickColor:Pt,tickWidth:.2,titleColor:Pt},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Lt="#3e5c69",zt={background:"#fff",arc:{fill:Lt},area:{fill:Lt},line:{stroke:Lt},path:{stroke:Lt},rect:{fill:Lt},shape:{stroke:Lt},symbol:{fill:Lt},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Bt="#1696d2",It="#000000",Ut="#FFFFFF",qt="Lato",Ht="Lato",Wt="Lato",Gt="#DEDDDD",Yt=18,Vt={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Xt={background:Ut,title:{anchor:"start",fontSize:Yt,font:qt},axisX:{domain:!0,domainColor:It,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Ht,labelAngle:0,tickColor:It,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:qt},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Gt,gridWidth:1,labelFontSize:12,labelFont:Ht,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:qt,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Ht,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:qt,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Vt["six-groups-cat-1"],diverging:Vt["diverging-colors"],heatmap:Vt["diverging-colors"],ordinal:Vt["six-groups-seq"],ramp:Vt["shades-blue"]},area:{fill:Bt},rect:{fill:Bt},line:{color:Bt,stroke:Bt,strokeWidth:5},trail:{color:Bt,stroke:Bt,strokeWidth:0,size:1},path:{stroke:Bt,strokeWidth:.5},point:{filled:!0},text:{font:Wt,color:Bt,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Bt,stroke:null}},arc:{fill:Bt},shape:{stroke:Bt},symbol:{fill:Bt,size:30}},Jt="#3366CC",Qt="#ccc",Kt="Arial, sans-serif",Zt={arc:{fill:Jt},area:{fill:Jt},path:{stroke:Jt},rect:{fill:Jt},shape:{stroke:Jt},symbol:{stroke:Jt},circle:{fill:Jt},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Kt,fontSize:12},"guide-title":{font:Kt,fontSize:12},"group-title":{font:Kt,fontSize:12}},title:{font:Kt,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Qt,tickColor:Qt,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},te=ct.version;var ee=n("fc17"),ne="vega-tooltip",re="0.24.2",ie="A tooltip plugin for Vega-Lite and Vega visualizations.",oe=["vega-lite","vega","tooltip"],ae={type:"git",url:"https://github.com/vega/vega-tooltip.git"},se={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},ue=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],ce="BSD-3-Clause",le={url:"https://github.com/vega/vega-tooltip/issues"},fe="https://github.com/vega/vega-tooltip#readme",de="build/vega-tooltip.js",he="build/vega-tooltip.module.js",pe="build/vega-tooltip.min.js",ge="build/vega-tooltip.min.js",me="build/vega-tooltip.module.d.ts",ve=["src","build","types"],ye={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"beemo jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"beemo create-config",prettierbase:"beemo prettier '*.{css,scss,html}'",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check"},be={"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^9.0.0","@wessberg/rollup-plugin-ts":"^1.3.4","browser-sync":"^2.26.12",concurrently:"^5.3.0","gh-pages":"^3.1.0","node-sass":"^4.14.1",path:"^0.12.7",rollup:"^2.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"~4.0.3","vega-datasets":"^2.1.0","vega-lite-dev-config":"^0.14.6","vega-typings":"^0.19.0"},xe={"vega-util":"^1.15.2"},we={module:"vega-lite-dev-config",drivers:["typescript","prettier","eslint","babel","jest"],eslint:{ignore:["types"]},typescript:{compilerOptions:{typeRoots:["node_modules/@types","types"]}}},Oe={name:ne,version:re,description:ie,keywords:oe,repository:ae,author:se,collaborators:ue,license:ce,bugs:le,homepage:fe,main:de,module:he,unpkg:pe,jsdelivr:ge,types:me,files:ve,scripts:ye,devDependencies:be,dependencies:xe,beemo:we},_e="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const je="vg-tooltip-element",Ee={offsetX:10,offsetY:10,id:je,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:ke,maxDepth:2};function ke(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Ae(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return _e.toString().replace(je,t)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Se(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Ce(t,e,n){if(Object(ee["B"])(t))return`[${t.map(t=>e(Object(ee["J"])(t)?t:Me(t,n))).join(", ")}]`;if(Object(ee["H"])(t)){let r="";const i=t,{title:o,image:a}=i,s=Se(i,["title","image"]);o&&(r+=`<h2>${e(o)}</h2>`),a&&(r+=`<img src="${e(a)}">`);const u=Object.keys(s);if(u.length>0){r+="<table>";for(const t of u){let i=s[t];void 0!==i&&(Object(ee["H"])(i)&&(i=Me(i,n)),r+=`<tr><td class="key">${e(t)}:</td><td class="value">${e(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return e(t)}function De(t){const e=[];return function(n,r){if("object"!==typeof r||null===r)return r;const i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}function Me(t,e){return JSON.stringify(t,De(e))}function Te(t,e,n,r){let i=t.clientX+n;i+e.width>window.innerWidth&&(i=+t.clientX-n-e.width);let o=t.clientY+r;return o+e.height>window.innerHeight&&(o=+t.clientY-r-e.height),{x:i,y:o}}class Ne{constructor(t){this.options=Object.assign(Object.assign({},Ee),t);const e=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const t=document.createElement("style");t.setAttribute("id",this.options.styleId),t.innerHTML=Ae(e);const n=document.head;n.childNodes.length>0?n.insertBefore(t,n.childNodes[0]):n.appendChild(t)}this.el=document.getElementById(e),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",e),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(t,e,n,r){if(null==r||""===r)return void this.el.classList.remove("visible",this.options.theme+"-theme");this.el.innerHTML=Ce(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",this.options.theme+"-theme");const{x:i,y:o}=Te(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}Oe.version;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function Fe(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function $e(t,e,n){const r=t.open(e),i=1e4,o=250,{origin:a}=new URL(e);let s=~~(i/o);function u(e){e.source===r&&(s=0,t.removeEventListener("message",u,!1))}function c(){s<=0||(r.postMessage(n,a),setTimeout(c,o),s-=1)}t.addEventListener("message",u,!1),setTimeout(c,o)}var Pe,Re='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper {\n    width: 100%;\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function Le(t,...e){for(const n of e)ze(t,n);return t}function ze(t,e){for(const n of Object.keys(e))Object(U["writeConfig"])(t,n,e[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});const Be=U;let Ie=q;const Ue="undefined"!==typeof window?window:void 0;void 0===Ie&&(null===(Pe=null===Ue||void 0===Ue?void 0:Ue["vl"])||void 0===Pe?void 0:Pe.compile)&&(Ie=Ue["vl"]);const qe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},He={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},We={vega:"Vega","vega-lite":"Vega-Lite"},Ge={vega:Be.version,"vega-lite":Ie?Ie.version:"not available"},Ye={vega:t=>t,"vega-lite":(t,e)=>Ie.compile(t,{config:e}).spec},Ve='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Xe="chart-wrapper";function Je(t){return"function"===typeof t}function Qe(t,e,n,r){const i=`<html><head>${e}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+t+o),a.document.title=We[r]+" JSON Source"}function Ke(t,e){var n;if(t.$schema){const r=Object(H["a"])(t.$schema);e&&e!==r.library&&console.warn(`The given visualization spec is written in ${We[r.library]}, but mode argument sets ${null!==(n=We[e])&&void 0!==n?n:e}.`);const i=r.library;return Object(I["satisfies"])(Ge[i],"^"+r.version.slice(1))||console.warn(`The input spec uses ${We[i]} ${r.version}, but the current version of ${We[i]} is v${Ge[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":null!==e&&void 0!==e?e:"vega"}function Ze(t){return!(!t||!("load"in t))}function tn(t,e,n={}){var r,i,o;return Fe(this,void 0,void 0,(function*(){const a=Ze(n.loader)?n.loader:Be.loader(n.loader),s=Object(U["isString"])(e)?JSON.parse(yield a.load(e)):e,u=yield en(null!==(r=s.usermeta&&s.usermeta["embedOptions"])&&void 0!==r?r:{},a),c=yield en(n,a),l=Object.assign(Object.assign({},Le(c,u)),{config:Object(U["mergeConfig"])(null!==(i=c.config)&&void 0!==i?i:{},null!==(o=u.config)&&void 0!==o?o:{})});return yield rn(t,s,l,a)}))}function en(t,e){var n;return Fe(this,void 0,void 0,(function*(){const r=Object(U["isString"])(t.config)?JSON.parse(yield e.load(t.config)):null!==(n=t.config)&&void 0!==n?n:{},i=Object(U["isString"])(t.patch)?JSON.parse(yield e.load(t.patch)):t.patch;return Object.assign(Object.assign(Object.assign({},t),i?{patch:i}:{}),r?{config:r}:{})}))}function nn(t){var e;const n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(e=document.head)&&void 0!==e?e:document.body}}function rn(t,e,n={},r){var i,a,s,u,c,l;return Fe(this,void 0,void 0,(function*(){const f=n.theme?Object(U["mergeConfig"])(o[n.theme],null!==(i=n.config)&&void 0!==i?i:{}):n.config,d=Object(U["isBoolean"])(n.actions)?n.actions:Le({},qe,null!==(a=n.actions)&&void 0!==a?a:{}),h=Object.assign(Object.assign({},He),n.i18n),p=null!==(s=n.renderer)&&void 0!==s?s:"canvas",g=null!==(u=n.logLevel)&&void 0!==u?u:Be.Warn,m=null!==(c=n.downloadFileName)&&void 0!==c?c:"visualization",v="string"===typeof t?document.querySelector(t):t;if(!v)throw new Error(t+" does not exist");if(!1!==n.defaultStyle){const t="vega-embed-style",{root:e,rootContainer:r}=nn(v);if(!e.getElementById(t)){const e=document.createElement("style");e.id=t,e.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?Re.toString():n.defaultStyle,r.appendChild(e)}}const y=Ke(e,n.mode);let b=Ye[y](e,f);if("vega-lite"===y&&b.$schema){const t=Object(H["a"])(b.$schema);Object(I["satisfies"])(Ge.vega,"^"+t.version.slice(1))||console.warn(`The compiled spec uses Vega ${t.version}, but current version is v${Ge.vega}.`)}v.classList.add("vega-embed"),d&&v.classList.add("has-actions"),v.innerHTML="";let x=v;if(d){const t=document.createElement("div");t.classList.add(Xe),v.appendChild(t),x=t}const w=n.patch;w&&(b=w instanceof Function?w(b):_(b,w,!0,!1).newDocument),n.formatLocale&&Be.formatLocale(n.formatLocale),n.timeFormatLocale&&Be.timeFormatLocale(n.timeFormatLocale);const{ast:O}=n,j=Be.parse(b,"vega-lite"===y?{}:f,{ast:O}),E=new Be.View(j,Object.assign({loader:r,logLevel:g,renderer:p},O?{expr:Be.expressionInterpreter}:{}));if(!1!==n.tooltip){let t;t=Je(n.tooltip)?n.tooltip:new Ne(!0===n.tooltip?{}:n.tooltip).call,E.tooltip(t)}let k,{hover:A}=n;if(void 0===A&&(A="vega"===y),A){const{hoverSet:t,updateSet:e}="boolean"===typeof A?{}:A;E.hover(t,e)}if(n&&(null!=n.width&&E.width(n.width),null!=n.height&&E.height(n.height),null!=n.padding&&E.padding(n.padding)),yield E.initialize(x,n.bind).runAsync(),!1!==d){let t=v;if(!1!==n.defaultStyle){const e=document.createElement("details");e.title=h.CLICK_TO_VIEW_ACTIONS,v.append(e),t=e;const n=document.createElement("summary");n.innerHTML=Ve,e.append(n),k=t=>{e.contains(t.target)||e.removeAttribute("open")},document.addEventListener("click",k)}const r=document.createElement("div");if(t.append(r),r.classList.add("vega-actions"),!0===d||!1!==d.export)for(const e of["svg","png"])if(!0===d||!0===d.export||d.export[e]){const t=h[e.toUpperCase()+"_ACTION"],i=document.createElement("a");i.text=t,i.href="#",i.target="_blank",i.download=`${m}.${e}`,i.addEventListener("mousedown",(function(t){return Fe(this,void 0,void 0,(function*(){t.preventDefault();const r=yield E.toImageURL(e,n.scaleFactor);this.href=r}))})),r.append(i)}if(!0===d||!1!==d.source){const t=document.createElement("a");t.text=h.SOURCE_ACTION,t.href="#",t.addEventListener("click",(function(t){var r,i;Qe(B()(e),null!==(r=n.sourceHeader)&&void 0!==r?r:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",y),t.preventDefault()})),r.append(t)}if("vega-lite"===y&&(!0===d||!1!==d.compiled)){const t=document.createElement("a");t.text=h.COMPILED_ACTION,t.href="#",t.addEventListener("click",(function(t){var e,r;Qe(B()(b),null!==(e=n.sourceHeader)&&void 0!==e?e:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),t.preventDefault()})),r.append(t)}if(!0===d||!1!==d.editor){const t=null!==(l=n.editorUrl)&&void 0!==l?l:"https://vega.github.io/editor/",i=document.createElement("a");i.text=h.EDITOR_ACTION,i.href="#",i.addEventListener("click",(function(n){$e(window,t,{config:f,mode:y,renderer:p,spec:B()(e)}),n.preventDefault()})),r.append(i)}}function S(){k&&document.removeEventListener("click",k),E.finalize()}return{view:E,spec:e,vgSpec:b,finalize:S}}))}e["a"]=tn},8925:function(t,e,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},8970:function(t,e,n){const r=n("a236"),i=(t,e)=>{const n=r(t,e);return n&&n.prerelease.length?n.prerelease:null};t.exports=i},"89c5":function(t,e,n){"use strict";e["a"]=function(t){const[e,n]=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:n}}},"8bd6":function(t,e,n){const r=n("38cb"),i=(t,e,n)=>r(t,e,">",n);t.exports=i},"8cb5":function(t,e,n){const{MAX_SAFE_COMPONENT_LENGTH:r}=n("b15c"),i=n("b802");e=t.exports={};const o=e.re=[],a=e.src=[],s=e.t={};let u=0;const c=(t,e,n)=>{const r=u++;i(r,e),s[t]=r,a[r]=e,o[r]=new RegExp(e,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),c("FULL",`^${a[s.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),c("LOOSE",`^${a[s.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",a[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),c("XRANGEIDENTIFIER",a[s.NUMERICIDENTIFIER]+"|x|X|\\*"),c("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),c("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),c("COERCERTL",a[s.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",c("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",c("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9152:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?d/u:d*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+h]=255&a,h+=p,a/=256,c-=8);t[n+h-p]|=128*g}},"94ca":function(t,e,n){var r=n("d039"),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(T){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=E(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(T){return{type:"throw",arg:T}}}t.wrap=c;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",g={};function m(){}function v(){}function y(){}var b={};b[o]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(D([])));w&&w!==n&&r.call(w,o)&&(b=w);var O=y.prototype=m.prototype=Object.create(b);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;function o(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function E(t,e,n){var r=f;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return M()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function D(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:e,done:!0}}return v.prototype=O.constructor=y,y.constructor=v,v.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},_(j.prototype),j.prototype[a]=function(){return this},t.AsyncIterator=j,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new j(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(O),u(O,s,"Generator"),O[o]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=D,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},"9b0d":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var r=n("fc17");function i(e){return!("function"!==typeof t||!Object(r["E"])(t.isBuffer))&&t.isBuffer(e)}function o(t,e){const n=e&&e.property?Object(r["u"])(e.property):r["y"];return Object(r["H"])(t)&&!i(t)?a(n(t),e):n(JSON.parse(t))}function a(t,e){return!Object(r["B"])(t)&&Object(r["F"])(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}o.responseType="json"}).call(this,n("b639").Buffer)},"9b6c":function(t,e,n){const r=n("38cb"),i=(t,e,n)=>r(t,e,"<",n);t.exports=i},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),o=n("825a"),a=n("c04e"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),a=n("d44e"),s=n("3f8c"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},a236:function(t,e,n){const{MAX_LENGTH:r}=n("b15c"),{re:i,t:o}=n("8cb5"),a=n("bbfd"),s=n("4c75"),u=(t,e)=>{if(e=s(e),t instanceof a)return t;if("string"!==typeof t)return null;if(t.length>r)return null;const n=e.loose?i[o.LOOSE]:i[o.FULL];if(!n.test(t))return null;try{return new a(t,e)}catch(u){return null}};t.exports=u},a2a3:function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)>=0;t.exports=i},a4b4:function(t,e,n){var r=n("342f");t.exports=/web0s(?!.*chrome)/i.test(r)},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),a=n("c430"),s=n("83ab"),u=n("4930"),c=n("fdbf"),l=n("d039"),f=n("5135"),d=n("e8b5"),h=n("861d"),p=n("825a"),g=n("7b0b"),m=n("fc6a"),v=n("c04e"),y=n("5c6c"),b=n("7c73"),x=n("df75"),w=n("241c"),O=n("057f"),_=n("7418"),j=n("06cf"),E=n("9bf2"),k=n("d1e7"),A=n("9112"),S=n("6eeb"),C=n("5692"),D=n("f772"),M=n("d012"),T=n("90e3"),N=n("b622"),F=n("e538"),$=n("746f"),P=n("d44e"),R=n("69f3"),L=n("b727").forEach,z=D("hidden"),B="Symbol",I="prototype",U=N("toPrimitive"),q=R.set,H=R.getterFor(B),W=Object[I],G=i.Symbol,Y=o("JSON","stringify"),V=j.f,X=E.f,J=O.f,Q=k.f,K=C("symbols"),Z=C("op-symbols"),tt=C("string-to-symbol-registry"),et=C("symbol-to-string-registry"),nt=C("wks"),rt=i.QObject,it=!rt||!rt[I]||!rt[I].findChild,ot=s&&l((function(){return 7!=b(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=V(W,e);r&&delete W[e],X(t,e,n),r&&t!==W&&X(W,e,r)}:X,at=function(t,e){var n=K[t]=b(G[I]);return q(n,{type:B,tag:t,description:e}),s||(n.description=e),n},st=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},ut=function(t,e,n){t===W&&ut(Z,e,n),p(t);var r=v(e,!0);return p(n),f(K,r)?(n.enumerable?(f(t,z)&&t[z][r]&&(t[z][r]=!1),n=b(n,{enumerable:y(0,!1)})):(f(t,z)||X(t,z,y(1,{})),t[z][r]=!0),ot(t,r,n)):X(t,r,n)},ct=function(t,e){p(t);var n=m(e),r=x(n).concat(pt(n));return L(r,(function(e){s&&!ft.call(n,e)||ut(t,e,n[e])})),t},lt=function(t,e){return void 0===e?b(t):ct(b(t),e)},ft=function(t){var e=v(t,!0),n=Q.call(this,e);return!(this===W&&f(K,e)&&!f(Z,e))&&(!(n||!f(this,e)||!f(K,e)||f(this,z)&&this[z][e])||n)},dt=function(t,e){var n=m(t),r=v(e,!0);if(n!==W||!f(K,r)||f(Z,r)){var i=V(n,r);return!i||!f(K,r)||f(n,z)&&n[z][r]||(i.enumerable=!0),i}},ht=function(t){var e=J(m(t)),n=[];return L(e,(function(t){f(K,t)||f(M,t)||n.push(t)})),n},pt=function(t){var e=t===W,n=J(e?Z:m(t)),r=[];return L(n,(function(t){!f(K,t)||e&&!f(W,t)||r.push(K[t])})),r};if(u||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=T(t),n=function(t){this===W&&n.call(Z,t),f(this,z)&&f(this[z],e)&&(this[z][e]=!1),ot(this,e,y(1,t))};return s&&it&&ot(W,e,{configurable:!0,set:n}),at(e,t)},S(G[I],"toString",(function(){return H(this).tag})),S(G,"withoutSetter",(function(t){return at(T(t),t)})),k.f=ft,E.f=ut,j.f=dt,w.f=O.f=ht,_.f=pt,F.f=function(t){return at(N(t),t)},s&&(X(G[I],"description",{configurable:!0,get:function(){return H(this).description}}),a||S(W,"propertyIsEnumerable",ft,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:G}),L(x(nt),(function(t){$(t)})),r({target:B,stat:!0,forced:!u},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=G(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:lt,defineProperty:ut,defineProperties:ct,getOwnPropertyDescriptor:dt}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ht,getOwnPropertySymbols:pt}),r({target:"Object",stat:!0,forced:l((function(){_.f(1)}))},{getOwnPropertySymbols:function(t){return _.f(g(t))}}),Y){var gt=!u||l((function(){var t=G();return"[null]"!=Y([t])||"{}"!=Y({a:t})||"{}"!=Y(Object(t))}));r({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,n){var r,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=e,(h(e)||void 0!==t)&&!st(t))return d(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,Y.apply(null,i)}})}G[I][U]||A(G[I],U,G[I].valueOf),P(G,B),M[z]=!0},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a79d:function(t,e,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),a=n("d039"),s=n("d066"),u=n("4840"),c=n("cdf9"),l=n("6eeb"),f=!!o&&a((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:f},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype["finally"]||l(o.prototype,"finally",s("Promise").prototype["finally"])},a87b:function(t){t.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"5.0.0","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"files":["bin","build","src","vega-lite*","tsconfig.json"],"scripts":{"changelog":"conventional-changelog -p angular -r 2","prebuild":"yarn clean:build","build":"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"yarn clean:build && rimraf site/data/* && rimraf examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","clean:build":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rimraf build/src","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:cover":"jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && rimraf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch":"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"jest --watch test/"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/core":"^7.13.1","@babel/preset-env":"^7.13.5","@babel/preset-typescript":"^7.13.0","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^17.1.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.0","@types/chai":"^4.2.15","@types/d3":"^6.3.0","@types/jest":"^26.0.20","@types/mkdirp":"^1.0.1","@types/pako":"^1.0.1","@typescript-eslint/eslint-plugin":"^4.15.2","@typescript-eslint/parser":"^4.15.2","ajv":"^7.1.1","ajv-formats":"^1.5.1","chai":"^4.3.0","cheerio":"^1.0.0-rc.5","conventional-changelog-cli":"^2.1.1","d3":"^6.5.0","eslint":"^7.20.0","eslint-config-prettier":"^8.0.0","eslint-plugin-jest":"^24.1.5","eslint-plugin-prettier":"^3.3.1","gh-pages":"^3.1.0","highlight.js":"^10.6.0","jest":"^26.6.3","jest-dev-server":"^4.4.0","mkdirp":"^1.0.4","pako":"^2.0.3","prettier":"^2.2.1","puppeteer":"^7.1.0","rollup":"^2.39.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2","serve":"^11.3.2","terser":"^5.6.0","ts-json-schema-generator":"^0.86.1","typescript":"~4.2.2","vega-cli":"^5.19.1","vega-datasets":"~2.2.0","vega-embed":"^6.15.1","vega-tooltip":"^0.25.0","yaml-front-matter":"^4.1.1"},"dependencies":{"@types/clone":"~2.1.0","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0","tslib":"~2.1.0","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-util":"~1.16.0","yargs":"~16.2.0"},"peerDependencies":{"vega":"^5.19.1"},"jest":{"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false,"setupFiles":["./test/jest.overrides.ts"]}}')},acef:function(t,e,n){const r=n("a236"),i=(t,e)=>{const n=r(t,e);return n?n.version:null};t.exports=i},ae40:function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("5135"),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:u,f=o(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,f)}))}},ae93:function(t,e,n){"use strict";var r,i,o,a=n("d039"),s=n("e163"),u=n("9112"),c=n("5135"),l=n("b622"),f=n("c430"),d=l("iterator"),h=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=s(s(o)),i!==Object.prototype&&(r=i)):h=!0);var g=void 0==r||a((function(){var t={};return r[d].call(t)!==t}));g&&(r={}),f&&!g||c(r,d)||u(r,d,p),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},b00b:function(t,e,n){const r=n("3034"),i=(t,e)=>r(t,e,!0);t.exports=i},b041:function(t,e,n){"use strict";var r=n("00ee"),i=n("f5df");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b15c:function(t,e){const n="2.0.0",r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16;t.exports={SEMVER_SPEC_VERSION:n,MAX_LENGTH:r,MAX_SAFE_INTEGER:i,MAX_SAFE_COMPONENT_LENGTH:o}},b575:function(t,e,n){var r,i,o,a,s,u,c,l,f=n("da84"),d=n("06cf").f,h=n("2cf4").set,p=n("1cdc"),g=n("a4b4"),m=n("605d"),v=f.MutationObserver||f.WebKitMutationObserver,y=f.document,b=f.process,x=f.Promise,w=d(f,"queueMicrotask"),O=w&&w.value;O||(r=function(){var t,e;m&&(t=b.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?a():o=void 0,n}}o=void 0,t&&t.enter()},p||m||g||!v||!y?x&&x.resolve?(c=x.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=m?function(){b.nextTick(r)}:function(){h.call(f,r)}:(s=!0,u=y.createTextNode(""),new v(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),t.exports=O||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},b622:function(t,e,n){var r=n("da84"),i=n("5692"),o=n("5135"),a=n("90e3"),s=n("4930"),u=n("fdbf"),c=i("wks"),l=r.Symbol,f=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)||(s&&o(l,t)?c[t]=l[t]:c[t]=f("Symbol."+t)),c[t]}},b639:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),o=n("e3db");function a(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=c.prototype):(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?m(t,e,n,r):"string"===typeof e?p(t,e,n):v(t,e)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e,n,r){return f(e),e<=0?u(t,e):void 0!==n?"string"===typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}function h(t,e){if(f(e),t=u(t,e<0?0:0|y(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|x(e,n);t=u(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function g(t,e){var n=e.length<0?0:0|y(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function m(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=c.prototype):t=g(t,e),t}function v(t,e){if(c.isBuffer(e)){var n=0|y(e.length);return t=u(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?u(t,0):g(t,e);if("Buffer"===e.type&&o(e.data))return g(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),c.alloc(+t)}function x(t,e){if(c.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(t).length;default:if(r)return J(t).length;e=(""+e).toLowerCase(),r=!0}}function w(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return $(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return M(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function O(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:j(t,e,n,r,i);if("number"===typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):j(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function j(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(c(t,o+d)!==c(e,d)){f=!1;break}if(f)return o}return-1}function E(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function k(t,e,n,r){return tt(J(e,t.length-n),t,n,r)}function A(t,e,n,r){return tt(Q(e),t,n,r)}function S(t,e,n,r){return A(t,e,n,r)}function C(t,e,n,r){return tt(Z(e),t,n,r)}function D(t,e,n,r){return tt(K(e,t.length-n),t,n,r)}function M(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);var r=[],i=e;while(i<n){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:o=t[i+1],128===(192&o)&&(u=(31&c)<<6|63&o,u>127&&(l=u));break;case 3:o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a,u>2047&&(u<55296||u>57343)&&(l=u));break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s,u>65535&&u<1114112&&(l=u))}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return F(r)}e.Buffer=c,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:a(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return d(null,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=x,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)O(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)O(this,e,e+3),O(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)O(this,e,e+7),O(this,e+1,e+6),O(this,e+2,e+5),O(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):w.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(u[f]!==l[f]){o=u[f],a=l[f];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return k(this,t,e,n);case"ascii":return A(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function F(t){var e=t.length;if(e<=N)return String.fromCharCode.apply(String,t);var n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=N));return n}function $(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=X(t[o]);return i}function L(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function z(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function q(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(t,e,n,r,o){return o||q(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function W(t,e,n,r,o){return o||q(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var r=this[t+--e],i=1;while(e>0&&(i*=256))r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||z(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||z(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||z(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||z(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var r=e,i=1,o=this[t+--r];while(r>0&&(i*=256))o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||z(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||z(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||z(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||z(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||z(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||z(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||z(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;B(this,t,e,n,i,0)}var o=1,a=0;this[e]=255&t;while(++a<n&&(o*=256))this[e+a]=t/o&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;B(this,t,e,n,i,0)}var o=n-1,a=1;this[e+o]=255&t;while(--o>=0&&(a*=256))this[e+o]=t/a&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;this[e]=255&t;while(++o<n&&(a*=256))t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;this[e+o]=255&t;while(--o>=0&&(a*=256))t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return H(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return H(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return W(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return W(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:J(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function Y(t){if(t=V(t).replace(G,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function V(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function X(t){return t<16?"0"+t.toString(16):t.toString(16)}function J(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Q(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function K(t,e){for(var n,r,i,o=[],a=0;a<t.length;++a){if((e-=2)<0)break;n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function Z(t){return r.toByteArray(Y(t))}function tt(t,e,n,r){for(var i=0;i<r;++i){if(i+n>=e.length||i>=t.length)break;e[i+n]=t[i]}return i}function et(t){return t!==t}}).call(this,n("c8ba"))},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),a=n("d039"),s=a((function(){o(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return o(i(t))}})},b727:function(t,e,n){var r=n("0366"),i=n("44ad"),o=n("7b0b"),a=n("50c4"),s=n("65f0"),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,f=6==t,d=7==t,h=5==t||f;return function(p,g,m,v){for(var y,b,x=o(p),w=i(x),O=r(g,m,3),_=a(w.length),j=0,E=v||s,k=e?E(p,_):n||d?E(p,0):void 0;_>j;j++)if((h||j in w)&&(y=w[j],b=O(y,j,x),t))if(e)k[j]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return j;case 2:u.call(k,y)}else switch(t){case 4:return!1;case 7:u.call(k,y)}return f?-1:c||l?l:k}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},b802:function(t,e,n){(function(e){const n="object"===typeof e&&Object({NODE_ENV:"production",BASE_URL:"/"})&&Object({NODE_ENV:"production",BASE_URL:"/"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",BASE_URL:"/"}).NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};t.exports=n}).call(this,n("4362"))},b805:function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(e,t,n);t.exports=i},bac4:function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)>0;t.exports=i},bbfd:function(t,e,n){const r=n("b802"),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=n("b15c"),{re:a,t:s}=n("8cb5"),u=n("4c75"),{compareIdentifiers:c}=n("2cdf");class l{constructor(t,e){if(e=u(e),t instanceof l){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!==typeof t)throw new TypeError("Invalid Version: "+t);if(t.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?a[s.LOOSE]:a[s.FULL]);if(!n)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<o)return e}return t}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(t){if(r("SemVer.compare",this.version,this.options,t),!(t instanceof l)){if("string"===typeof t&&t===this.version)return 0;t=new l(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof l||(t=new l(t,this.options)),c(this.major,t.major)||c(this.minor,t.minor)||c(this.patch,t.patch)}comparePre(t){if(t instanceof l||(t=new l(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],i=t.prerelease[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return c(n,i)}while(++e)}compareBuild(t){t instanceof l||(t=new l(t,this.options));let e=0;do{const n=this.build[e],i=t.build[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return c(n,i)}while(++e)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let t=this.prerelease.length;while(--t>=0)"number"===typeof this.prerelease[t]&&(this.prerelease[t]++,t=-2);-1===t&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this}}t.exports=l},c04e:function(t,e,n){var r=n("861d");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c2d5:function(t,e,n){const r=n("bbfd"),i=(t,e)=>new r(t,e).minor;t.exports=i},c430:function(t,e){t.exports=!1},c4be:function(t,e,n){const r=n("4392"),i=n("f195"),o=n("bac4"),a=n("a2a3"),s=n("38fa"),u=n("68d3"),c=(t,e,n,c)=>{switch(e){case"===":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t===n;case"!==":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return r(t,n,c);case"!=":return i(t,n,c);case">":return o(t,n,c);case">=":return a(t,n,c);case"<":return s(t,n,c);case"<=":return u(t,n,c);default:throw new TypeError("Invalid operator: "+e)}};t.exports=c},c628:function(t,e,n){const r=n("3fce"),{ANY:i}=n("6d43"),o=n("2a86"),a=n("3034"),s=(t,e,n)=>{if(t===e)return!0;t=new r(t,n),e=new r(e,n);let i=!1;t:for(const r of t.set){for(const t of e.set){const e=u(r,t,n);if(i=i||null!==e,e)continue t}if(i)return!1}return!0},u=(t,e,n)=>{if(t===e)return!0;if(1===t.length&&t[0].semver===i)return 1===e.length&&e[0].semver===i;const r=new Set;let s,u,f,d,h,p,g;for(const i of t)">"===i.operator||">="===i.operator?s=c(s,i,n):"<"===i.operator||"<="===i.operator?u=l(u,i,n):r.add(i.semver);if(r.size>1)return null;if(s&&u){if(f=a(s.semver,u.semver,n),f>0)return null;if(0===f&&(">="!==s.operator||"<="!==u.operator))return null}for(const i of r){if(s&&!o(i,String(s),n))return null;if(u&&!o(i,String(u),n))return null;for(const t of e)if(!o(i,String(t),n))return!1;return!0}for(const i of e){if(g=g||">"===i.operator||">="===i.operator,p=p||"<"===i.operator||"<="===i.operator,s)if(">"===i.operator||">="===i.operator){if(d=c(s,i,n),d===i&&d!==s)return!1}else if(">="===s.operator&&!o(s.semver,String(i),n))return!1;if(u)if("<"===i.operator||"<="===i.operator){if(h=l(u,i,n),h===i&&h!==u)return!1}else if("<="===u.operator&&!o(u.semver,String(i),n))return!1;if(!i.operator&&(u||s)&&0!==f)return!1}return!(s&&p&&!u&&0!==f)&&!(u&&g&&!s&&0!==f)},c=(t,e,n)=>{if(!t)return e;const r=a(t.semver,e.semver,n);return r>0?t:r<0||">"===e.operator&&">="===t.operator?e:t},l=(t,e,n)=>{if(!t)return e;const r=a(t.semver,e.semver,n);return r<0?t:r>0||"<"===e.operator&&"<="===t.operator?e:t};t.exports=s},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},ca84:function(t,e,n){var r=n("5135"),i=n("fc6a"),o=n("4d64").indexOf,a=n("d012");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);while(e.length>u)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},cca6:function(t,e,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdf9:function(t,e,n){var r=n("825a"),i=n("861d"),o=n("f069");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},ce4e:function(t,e,n){var r=n("da84"),i=n("9112");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("428f"),i=n("da84"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d2bb:function(t,e,n){var r=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},d2ef:function(t,e,n){const r=n("a236"),i=(t,e)=>{const n=r(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};t.exports=i},d3b7:function(t,e,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(t,e,n){var r=n("9bf2").f,i=n("5135"),o=n("b622"),a=o("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(t,e,n){var r=n("23e7"),i=n("83ab"),o=n("56ef"),a=n("fc6a"),s=n("06cf"),u=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),i=s.f,c=o(r),l={},f=0;while(c.length>f)n=i(r,e=c[f++]),void 0!==n&&u(l,e,n);return l}})},df75:function(t,e,n){var r=n("ca84"),i=n("7839");t.exports=Object.keys||function(t){return r(t,i)}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),a="/"===o(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&a&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},e163:function(t,e,n){var r=n("5135"),i=n("7b0b"),o=n("f772"),a=n("e177"),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e1a1:function(t,e,n){"use strict";n.r(e),n.d(e,"Debug",(function(){return g["a"]})),n.d(e,"Error",(function(){return g["b"]})),n.d(e,"Info",(function(){return g["c"]})),n.d(e,"None",(function(){return g["d"]})),n.d(e,"Warn",(function(){return g["e"]})),n.d(e,"accessor",(function(){return g["f"]})),n.d(e,"accessorFields",(function(){return g["g"]})),n.d(e,"accessorName",(function(){return g["h"]})),n.d(e,"array",(function(){return g["i"]})),n.d(e,"ascending",(function(){return g["j"]})),n.d(e,"clampRange",(function(){return g["k"]})),n.d(e,"compare",(function(){return g["l"]})),n.d(e,"constant",(function(){return g["m"]})),n.d(e,"debounce",(function(){return g["n"]})),n.d(e,"error",(function(){return g["o"]})),n.d(e,"extend",(function(){return g["p"]})),n.d(e,"extent",(function(){return g["q"]})),n.d(e,"extentIndex",(function(){return g["r"]})),n.d(e,"falsy",(function(){return g["s"]})),n.d(e,"fastmap",(function(){return g["t"]})),n.d(e,"field",(function(){return g["u"]})),n.d(e,"flush",(function(){return g["v"]})),n.d(e,"hasOwnProperty",(function(){return g["w"]})),n.d(e,"id",(function(){return g["x"]})),n.d(e,"identity",(function(){return g["y"]})),n.d(e,"inherits",(function(){return g["z"]})),n.d(e,"inrange",(function(){return g["A"]})),n.d(e,"isArray",(function(){return g["B"]})),n.d(e,"isBoolean",(function(){return g["C"]})),n.d(e,"isDate",(function(){return g["D"]})),n.d(e,"isFunction",(function(){return g["E"]})),n.d(e,"isIterable",(function(){return g["F"]})),n.d(e,"isNumber",(function(){return g["G"]})),n.d(e,"isObject",(function(){return g["H"]})),n.d(e,"isRegExp",(function(){return g["I"]})),n.d(e,"isString",(function(){return g["J"]})),n.d(e,"key",(function(){return g["K"]})),n.d(e,"lerp",(function(){return g["L"]})),n.d(e,"logger",(function(){return g["M"]})),n.d(e,"lruCache",(function(){return g["N"]})),n.d(e,"merge",(function(){return g["O"]})),n.d(e,"mergeConfig",(function(){return g["P"]})),n.d(e,"one",(function(){return g["Q"]})),n.d(e,"pad",(function(){return g["R"]})),n.d(e,"panLinear",(function(){return g["S"]})),n.d(e,"panLog",(function(){return g["T"]})),n.d(e,"panPow",(function(){return g["U"]})),n.d(e,"panSymlog",(function(){return g["V"]})),n.d(e,"peek",(function(){return g["W"]})),n.d(e,"quarter",(function(){return g["X"]})),n.d(e,"repeat",(function(){return g["Y"]})),n.d(e,"span",(function(){return g["Z"]})),n.d(e,"splitAccessPath",(function(){return g["ab"]})),n.d(e,"stringValue",(function(){return g["bb"]})),n.d(e,"toBoolean",(function(){return g["cb"]})),n.d(e,"toDate",(function(){return g["db"]})),n.d(e,"toNumber",(function(){return g["eb"]})),n.d(e,"toSet",(function(){return g["fb"]})),n.d(e,"toString",(function(){return g["gb"]})),n.d(e,"truncate",(function(){return g["hb"]})),n.d(e,"truthy",(function(){return g["ib"]})),n.d(e,"utcquarter",(function(){return g["jb"]})),n.d(e,"visitArray",(function(){return g["kb"]})),n.d(e,"writeConfig",(function(){return g["lb"]})),n.d(e,"zero",(function(){return g["mb"]})),n.d(e,"zoomLinear",(function(){return g["nb"]})),n.d(e,"zoomLog",(function(){return g["ob"]})),n.d(e,"zoomPow",(function(){return g["pb"]})),n.d(e,"zoomSymlog",(function(){return g["qb"]})),n.d(e,"Dataflow",(function(){return da})),n.d(e,"EventStream",(function(){return xo})),n.d(e,"MultiPulse",(function(){return Jo})),n.d(e,"Operator",(function(){return go})),n.d(e,"Parameters",(function(){return uo})),n.d(e,"Pulse",(function(){return Go})),n.d(e,"Transform",(function(){return pa})),n.d(e,"changeset",(function(){return ao})),n.d(e,"definition",(function(){return ma})),n.d(e,"ingest",(function(){return to})),n.d(e,"isTuple",(function(){return Qi})),n.d(e,"transform",(function(){return va})),n.d(e,"transforms",(function(){return ga})),n.d(e,"tupleid",(function(){return Ki})),n.d(e,"bandwidthNRD",(function(){return Ta})),n.d(e,"bin",(function(){return Na})),n.d(e,"bootstrapCI",(function(){return Pa})),n.d(e,"cumulativeLogNormal",(function(){return Za})),n.d(e,"cumulativeNormal",(function(){return Ga})),n.d(e,"cumulativeUniform",(function(){return os})),n.d(e,"densityLogNormal",(function(){return Ka})),n.d(e,"densityNormal",(function(){return Wa})),n.d(e,"densityUniform",(function(){return is})),n.d(e,"dotbin",(function(){return Ra})),n.d(e,"quantileLogNormal",(function(){return ts})),n.d(e,"quantileNormal",(function(){return Ya})),n.d(e,"quantileUniform",(function(){return as})),n.d(e,"quantiles",(function(){return Da})),n.d(e,"quartiles",(function(){return Ma})),n.d(e,"random",(function(){return Fa})),n.d(e,"randomInteger",(function(){return Ba})),n.d(e,"randomKDE",(function(){return Ja})),n.d(e,"randomLCG",(function(){return za})),n.d(e,"randomLogNormal",(function(){return es})),n.d(e,"randomMixture",(function(){return ns})),n.d(e,"randomNormal",(function(){return Xa})),n.d(e,"randomUniform",(function(){return ss})),n.d(e,"regressionExp",(function(){return ps})),n.d(e,"regressionLinear",(function(){return ds})),n.d(e,"regressionLoess",(function(){return Os})),n.d(e,"regressionLog",(function(){return hs})),n.d(e,"regressionPoly",(function(){return vs})),n.d(e,"regressionPow",(function(){return gs})),n.d(e,"regressionQuad",(function(){return ms})),n.d(e,"sampleCurve",(function(){return As})),n.d(e,"sampleLogNormal",(function(){return Qa})),n.d(e,"sampleNormal",(function(){return Ha})),n.d(e,"sampleUniform",(function(){return rs})),n.d(e,"setRandom",(function(){return $a})),n.d(e,"DATE",(function(){return He})),n.d(e,"DAY",(function(){return We})),n.d(e,"DAYOFYEAR",(function(){return Ge})),n.d(e,"HOURS",(function(){return Ye})),n.d(e,"MILLISECONDS",(function(){return Je})),n.d(e,"MINUTES",(function(){return Ve})),n.d(e,"MONTH",(function(){return Ue})),n.d(e,"QUARTER",(function(){return Ie})),n.d(e,"SECONDS",(function(){return Xe})),n.d(e,"TIME_UNITS",(function(){return Qe})),n.d(e,"WEEK",(function(){return qe})),n.d(e,"YEAR",(function(){return Be})),n.d(e,"dayofyear",(function(){return on})),n.d(e,"timeBin",(function(){return Kn})),n.d(e,"timeFloor",(function(){return On})),n.d(e,"timeInterval",(function(){return Sn})),n.d(e,"timeOffset",(function(){return Mn})),n.d(e,"timeSequence",(function(){return Fn})),n.d(e,"timeUnitSpecifier",(function(){return en})),n.d(e,"timeUnits",(function(){return Ze})),n.d(e,"utcFloor",(function(){return En})),n.d(e,"utcInterval",(function(){return Cn})),n.d(e,"utcOffset",(function(){return Tn})),n.d(e,"utcSequence",(function(){return $n})),n.d(e,"utcdayofyear",(function(){return fn})),n.d(e,"utcweek",(function(){return dn})),n.d(e,"week",(function(){return an})),n.d(e,"loader",(function(){return Gi})),n.d(e,"read",(function(){return Hi})),n.d(e,"inferType",(function(){return $})),n.d(e,"inferTypes",(function(){return P})),n.d(e,"typeParsers",(function(){return T})),n.d(e,"format",(function(){return lt})),n.d(e,"formats",(function(){return ft})),n.d(e,"responseType",(function(){return dt})),n.d(e,"Bounds",(function(){return Nv})),n.d(e,"CanvasHandler",(function(){return Zx})),n.d(e,"CanvasRenderer",(function(){return uw})),n.d(e,"Gradient",(function(){return pm})),n.d(e,"GroupItem",(function(){return $v})),n.d(e,"Handler",(function(){return Sx})),n.d(e,"Item",(function(){return Fv})),n.d(e,"Marks",(function(){return fx})),n.d(e,"RenderType",(function(){return hO})),n.d(e,"Renderer",(function(){return Dx})),n.d(e,"ResourceLoader",(function(){return Pv})),n.d(e,"SVGHandler",(function(){return dw})),n.d(e,"SVGRenderer",(function(){return Hw})),n.d(e,"SVGStringRenderer",(function(){return sO})),n.d(e,"Scenegraph",(function(){return bx})),n.d(e,"boundClip",(function(){return OO})),n.d(e,"boundContext",(function(){return iy})),n.d(e,"boundItem",(function(){return dx})),n.d(e,"boundMark",(function(){return px})),n.d(e,"boundStroke",(function(){return zv})),n.d(e,"domChild",(function(){return _x})),n.d(e,"domClear",(function(){return jx})),n.d(e,"domCreate",(function(){return wx})),n.d(e,"domFind",(function(){return Ox})),n.d(e,"font",(function(){return Zb})),n.d(e,"fontFamily",(function(){return Kb})),n.d(e,"fontSize",(function(){return Hb})),n.d(e,"intersect",(function(){return mO})),n.d(e,"intersectBoxLine",(function(){return gy})),n.d(e,"intersectPath",(function(){return fy})),n.d(e,"intersectPoint",(function(){return dy})),n.d(e,"intersectRule",(function(){return py})),n.d(e,"lineHeight",(function(){return Wb})),n.d(e,"markup",(function(){return Pw})),n.d(e,"multiLineOffset",(function(){return Vb})),n.d(e,"pathCurves",(function(){return mm})),n.d(e,"pathEqual",(function(){return EO})),n.d(e,"pathParse",(function(){return bm})),n.d(e,"pathRectangle",(function(){return Gm})),n.d(e,"pathRender",(function(){return Tm})),n.d(e,"pathSymbols",(function(){return Pm})),n.d(e,"pathTrail",(function(){return Ym})),n.d(e,"point",(function(){return kx})),n.d(e,"renderModule",(function(){return gO})),n.d(e,"resetSVGClipId",(function(){return Mv})),n.d(e,"resetSVGDefIds",(function(){return AO})),n.d(e,"sceneEqual",(function(){return jO})),n.d(e,"sceneFromJSON",(function(){return vx})),n.d(e,"scenePickVisit",(function(){return Ay})),n.d(e,"sceneToJSON",(function(){return mx})),n.d(e,"sceneVisit",(function(){return ky})),n.d(e,"sceneZOrder",(function(){return Ey})),n.d(e,"serializeXML",(function(){return Rw})),n.d(e,"textMetrics",(function(){return Lb})),n.d(e,"interpolate",(function(){return Ag})),n.d(e,"interpolateColors",(function(){return jg})),n.d(e,"interpolateRange",(function(){return _g})),n.d(e,"quantizeInterpolator",(function(){return Eg})),n.d(e,"scale",(function(){return dg})),n.d(e,"scheme",(function(){return Fg})),n.d(e,"projection",(function(){return WS})),n.d(e,"View",(function(){return jB})),n.d(e,"defaultLocale",(function(){return Ui})),n.d(e,"formatLocale",(function(){return Fi})),n.d(e,"locale",(function(){return Ii})),n.d(e,"resetDefaultLocale",(function(){return qi})),n.d(e,"timeFormatLocale",(function(){return zi})),n.d(e,"expressionFunction",(function(){return OL})),n.d(e,"parse",(function(){return WW})),n.d(e,"runtimeContext",(function(){return ZL})),n.d(e,"version",(function(){return cG}));var r={};n.r(r),n.d(r,"aggregate",(function(){return Xs})),n.d(r,"bin",(function(){return Qs})),n.d(r,"collect",(function(){return Zs})),n.d(r,"compare",(function(){return tu})),n.d(r,"countpattern",(function(){return nu})),n.d(r,"cross",(function(){return iu})),n.d(r,"density",(function(){return fu})),n.d(r,"dotbin",(function(){return yu})),n.d(r,"expression",(function(){return xu})),n.d(r,"extent",(function(){return Ou})),n.d(r,"facet",(function(){return ju})),n.d(r,"field",(function(){return Eu})),n.d(r,"filter",(function(){return Au})),n.d(r,"flatten",(function(){return Su})),n.d(r,"fold",(function(){return Cu})),n.d(r,"formula",(function(){return Du})),n.d(r,"generate",(function(){return Mu})),n.d(r,"impute",(function(){return Fu})),n.d(r,"joinaggregate",(function(){return Lu})),n.d(r,"kde",(function(){return zu})),n.d(r,"key",(function(){return Bu})),n.d(r,"load",(function(){return Uu})),n.d(r,"lookup",(function(){return Wu})),n.d(r,"multiextent",(function(){return Gu})),n.d(r,"multivalues",(function(){return Vu})),n.d(r,"params",(function(){return Ju})),n.d(r,"pivot",(function(){return Qu})),n.d(r,"prefacet",(function(){return ec})),n.d(r,"project",(function(){return nc})),n.d(r,"proxy",(function(){return ic})),n.d(r,"quantile",(function(){return oc})),n.d(r,"relay",(function(){return sc})),n.d(r,"sample",(function(){return uc})),n.d(r,"sequence",(function(){return cc})),n.d(r,"sieve",(function(){return lc})),n.d(r,"subflow",(function(){return _u})),n.d(r,"timeunit",(function(){return fc})),n.d(r,"tupleindex",(function(){return hc})),n.d(r,"values",(function(){return pc})),n.d(r,"window",(function(){return Oc}));var i={};n.r(i),n.d(i,"interpolate",(function(){return gd})),n.d(i,"interpolateArray",(function(){return od})),n.d(i,"interpolateBasis",(function(){return Wf})),n.d(i,"interpolateBasisClosed",(function(){return Gf})),n.d(i,"interpolateDate",(function(){return sd})),n.d(i,"interpolateDiscrete",(function(){return Sh})),n.d(i,"interpolateHue",(function(){return Ch})),n.d(i,"interpolateNumber",(function(){return ud})),n.d(i,"interpolateNumberArray",(function(){return rd})),n.d(i,"interpolateObject",(function(){return cd})),n.d(i,"interpolateRound",(function(){return md})),n.d(i,"interpolateString",(function(){return pd})),n.d(i,"interpolateTransformCss",(function(){return Ph})),n.d(i,"interpolateTransformSvg",(function(){return Rh})),n.d(i,"interpolateZoom",(function(){return Uh})),n.d(i,"interpolateRgb",(function(){return Zf})),n.d(i,"interpolateRgbBasis",(function(){return ed})),n.d(i,"interpolateRgbBasisClosed",(function(){return nd})),n.d(i,"interpolateHsl",(function(){return Hh})),n.d(i,"interpolateHslLong",(function(){return Wh})),n.d(i,"interpolateLab",(function(){return hp})),n.d(i,"interpolateHcl",(function(){return gp})),n.d(i,"interpolateHclLong",(function(){return mp})),n.d(i,"interpolateCubehelix",(function(){return Cp})),n.d(i,"interpolateCubehelixLong",(function(){return Dp})),n.d(i,"piecewise",(function(){return vh})),n.d(i,"quantize",(function(){return Mp}));var o={};n.r(o),n.d(o,"bound",(function(){return f_})),n.d(o,"identifier",(function(){return p_})),n.d(o,"mark",(function(){return m_})),n.d(o,"overlap",(function(){return y_})),n.d(o,"render",(function(){return k_})),n.d(o,"viewlayout",(function(){return nj}));var a={};n.r(a),n.d(a,"axisticks",(function(){return sj})),n.d(a,"datajoin",(function(){return uj})),n.d(a,"encode",(function(){return fj})),n.d(a,"legendentries",(function(){return dj})),n.d(a,"linkpath",(function(){return vj})),n.d(a,"pie",(function(){return Mj})),n.d(a,"scale",(function(){return Pj})),n.d(a,"sortitems",(function(){return Xj})),n.d(a,"stack",(function(){return tE}));var s={};n.r(s),n.d(s,"contour",(function(){return xC})),n.d(s,"geojson",(function(){return jC})),n.d(s,"geopath",(function(){return EC})),n.d(s,"geopoint",(function(){return AC})),n.d(s,"geoshape",(function(){return SC})),n.d(s,"graticule",(function(){return DC})),n.d(s,"heatmap",(function(){return MC})),n.d(s,"isocontour",(function(){return sC})),n.d(s,"kde2d",(function(){return mC})),n.d(s,"projection",(function(){return PC}));var u={};n.r(u),n.d(u,"force",(function(){return cM}));var c={};n.r(c),n.d(c,"nest",(function(){return qT})),n.d(c,"pack",(function(){return QT})),n.d(c,"partition",(function(){return ZT})),n.d(c,"stratify",(function(){return tN})),n.d(c,"tree",(function(){return rN})),n.d(c,"treelinks",(function(){return iN})),n.d(c,"treemap",(function(){return sN}));var l={};n.r(l),n.d(l,"label",(function(){return XN}));var f={};n.r(f),n.d(f,"loess",(function(){return QN})),n.d(f,"regression",(function(){return tF}));var d={};n.r(d),n.d(d,"voronoi",(function(){return SF}));var h={};n.r(h),n.d(h,"wordcloud",(function(){return GF}));var p={};n.r(p),n.d(p,"crossfilter",(function(){return i$})),n.d(p,"resolvefilter",(function(){return o$}));var g=n("fc17");const m=/^([A-Za-z]+:)?\/\//,v=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,y=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,b="file://";var x=function(t,e){return n=>({options:n||{},sanitize:O,load:w,fileAccess:!!e,file:_(e),http:E(t)})};async function w(t,e){const n=await this.sanitize(t,e),r=n.href;return n.localFile?this.file(r):this.http(r,e)}async function O(t,e){e=Object(g["p"])({},this.options,e);const n=this.fileAccess,r={href:null};let i,o,a;const s=v.test(t.replace(y,""));null!=t&&"string"===typeof t&&s||Object(g["o"])("Sanitize failure, invalid URI: "+Object(g["bb"])(t));const u=m.test(t);return(a=e.baseURL)&&!u&&(t.startsWith("/")||"/"===a[a.length-1]||(t="/"+t),t=a+t),o=(i=t.startsWith(b))||"file"===e.mode||"http"!==e.mode&&!u&&n,i?t=t.slice(b.length):t.startsWith("//")&&("file"===e.defaultProtocol?(t=t.slice(2),o=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(r,"localFile",{value:!!o}),r.href=t,e.target&&(r.target=e.target+""),e.rel&&(r.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(r.crossOrigin=e.crossOrigin+""),r}function _(t){return t?e=>new Promise((n,r)=>{t.readFile(e,(t,e)=>{t?r(t):n(e)})}):j}async function j(){Object(g["o"])("No file system access.")}function E(t){return t?async function(e,n){const r=Object(g["p"])({},this.options.http,n),i=n&&n.response,o=await t(e,r);return o.ok?Object(g["E"])(o[i])?o[i]():o.text():Object(g["o"])(o.status+""+o.statusText)}:k}async function k(){Object(g["o"])("No HTTP fetch method available.")}const A=t=>null!=t&&t===t,S=t=>"true"===t||"false"===t||!0===t||!1===t,C=t=>!Number.isNaN(Date.parse(t)),D=t=>!Number.isNaN(+t)&&!(t instanceof Date),M=t=>D(t)&&Number.isInteger(+t),T={boolean:g["cb"],integer:g["eb"],number:g["eb"],date:g["db"],string:g["gb"],unknown:g["y"]},N=[S,M,D,C],F=["boolean","integer","number","date"];function $(t,e){if(!t||!t.length)return"unknown";const n=t.length,r=N.length,i=N.map((t,e)=>e+1);for(let o,a,s=0,u=0;s<n;++s)for(a=e?t[s][e]:t[s],o=0;o<r;++o)if(i[o]&&A(a)&&!N[o](a)&&(i[o]=0,++u,u===N.length))return"string";return F[i.reduce((t,e)=>0===t?e:t,0)-1]}function P(t,e){return e.reduce((e,n)=>(e[n]=$(t,n),e),{})}var R={},L={},z=34,B=10,I=13;function U(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function q(t,e){var n=U(t);return function(r,i){return e(n(r),i,t)}}function H(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function W(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function G(t){return t<0?"-"+W(-t,6):t>9999?"+"+W(t,6):W(t,4)}function Y(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":G(t.getUTCFullYear(),4)+"-"+W(t.getUTCMonth()+1,2)+"-"+W(t.getUTCDate(),2)+(i?"T"+W(e,2)+":"+W(n,2)+":"+W(r,2)+"."+W(i,3)+"Z":r?"T"+W(e,2)+":"+W(n,2)+":"+W(r,2)+"Z":n||e?"T"+W(e,2)+":"+W(n,2)+"Z":"")}var V=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?q(t,e):U(t)}));return o.columns=r||[],o}function i(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return L;if(c)return c=!1,R;var e,r,i=a;if(t.charCodeAt(i)===z){while(a++<o&&t.charCodeAt(a)!==z||t.charCodeAt(++a)===z);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===B?c=!0:r===I&&(c=!0,t.charCodeAt(a)===B&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}while(a<o){if((r=t.charCodeAt(e=a++))===B)c=!0;else if(r===I)c=!0,t.charCodeAt(a)===B&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}t.charCodeAt(o-1)===B&&--o,t.charCodeAt(o-1)===I&&--o;while((r=l())!==L){var f=[];while(r!==R&&r!==L)f.push(r),r=l();e&&null==(f=e(f,s++))||i.push(f)}return i}function o(e,n){return e.map((function(e){return n.map((function(t){return l(e[t])})).join(t)}))}function a(e,n){return null==n&&(n=H(e)),[n.map(l).join(t)].concat(o(e,n)).join("\n")}function s(t,e){return null==e&&(e=H(t)),o(t,e).join("\n")}function u(t){return t.map(c).join("\n")}function c(e){return e.map(l).join(t)}function l(t){return null==t?"":t instanceof Date?Y(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:c,formatValue:l}};function X(t){const e=function(e,n){const r={delimiter:t};return J(e,n?Object(g["p"])(n,r):r)};return e.responseType="text",e}function J(t,e){return e.header&&(t=e.header.map(g["bb"]).join(e.delimiter)+"\n"+t),V(e.delimiter).parse(t+"")}J.responseType="text";var Q=n("9b0d"),K=function(t){return t},Z=function(t){if(null==t)return K;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,c=t.length,l=new Array(c);l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+a;while(u<c)l[u]=t[u],++u;return l}},tt=function(t,e){var n,r=t.length,i=r-e;while(i<--r)n=t[i],t[i++]=t[r],t[r]=n},et=function(t,e){return"string"===typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return nt(t,e)}))}:nt(t,e)};function nt(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=rt(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function rt(t,e){var n=Z(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&tt(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){var e=a(t);while(e.length<4)e.push(e[0]);return e}function u(t){return t.map(s)}function c(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(c)};case"Point":e=o(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(o);break;case"LineString":e=a(t.arcs);break;case"MultiLineString":e=t.arcs.map(a);break;case"Polygon":e=u(t.arcs);break;case"MultiPolygon":e=t.arcs.map(u);break;default:return null}return{type:n,coordinates:e}}return c(e)}var it=function(t,e){var n={},r={},i={},o=[],a=-1;function s(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}function u(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)})),e.forEach((function(t){var e,n,o=s(t),a=o[0],u=o[1];if(e=i[a])if(delete i[e.end],e.push(t),e.end=u,n=r[u]){delete r[n.start];var c=n===e?e:e.concat(n);r[c.start=e.start]=i[c.end=n.end]=c}else r[e.start]=i[e.end]=e;else if(e=r[u])if(delete r[e.start],e.unshift(t),e.start=a,n=i[a]){delete i[n.end];var l=n===e?e:n.concat(e);r[l.start=n.start]=i[l.end=e.end]=l}else r[e.start]=i[e.end]=e;else e=[t],r[e.start=a]=i[e.end=u]=e})),u(i,r),u(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o},ot=function(t){return rt(t,at.apply(this,arguments))};function at(t,e,n){var r,i,o;if(arguments.length>1)r=st(t,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:it(t,r)}}function st(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function u(t){t.forEach(s)}function c(t){t.forEach(u)}function l(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":c(t.arcs);break}}return l(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}const ut={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function ct(t,e){let n,r,i,o;return t=Object(Q["a"])(t,e),e&&e.feature?(n=et,i=e.feature):e&&e.mesh?(n=ot,i=e.mesh,o=ut[e.filter]):Object(g["o"])("Missing TopoJSON feature or mesh parameter."),r=(r=t.objects[i])?n(t,r,o):Object(g["o"])("Invalid TopoJSON object: "+i),r&&r.features||[r]}ct.responseType="json";const lt={dsv:J,csv:X(","),tsv:X("\t"),json:Q["a"],topojson:ct};function ft(t,e){return arguments.length>1?(lt[t]=e,this):Object(g["w"])(lt,t)?lt[t]:null}function dt(t){const e=ft(t);return e&&e.responseType||"text"}var ht=Math.sqrt(50),pt=Math.sqrt(10),gt=Math.sqrt(2),mt=function(t,e,n){var r,i,o,a,s=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=vt(t,e,n))||!isFinite(a))return[];if(a>0){t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));while(++s<i)o[s]=(t+s)*a}else{a=-a,t=Math.ceil(t*a),e=Math.floor(e*a),o=new Array(i=Math.ceil(e-t+1));while(++s<i)o[s]=(t+s)/a}return r&&o.reverse(),o};function vt(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ht?10:o>=pt?5:o>=gt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ht?10:o>=pt?5:o>=gt?2:1)}function yt(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=ht?i*=10:o>=pt?i*=5:o>=gt&&(i*=2),e<t?-i:i}var bt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xt(t){if(!(e=bt.exec(t)))throw new Error("invalid format: "+t);var e;return new wt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function wt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}xt.prototype=wt.prototype,wt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ot=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)};function _t(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}var jt,Et,kt,At,St=function(t){return t=_t(Math.abs(t)),t?t[1]:NaN},Ct=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(St(e)/3)))-St(Math.abs(t)))},Dt=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,St(e)-St(t))+1},Mt=function(t){return Math.max(0,-St(Math.abs(t)))},Tt=function(t,e){return function(n,r){var i=n.length,o=[],a=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[a=(a+1)%t.length]}return o.reverse().join(e)}},Nt=function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}},Ft=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(e+1):t},$t=function(t,e){var n=_t(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(jt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+_t(t,Math.max(0,e+o-1))[0]},Pt=function(t,e){var n=_t(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Rt={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ot,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Pt(100*t,e),r:Pt,s:$t,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},Lt=function(t){return t},zt=Array.prototype.map,Bt=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"],It=function(t){var e=void 0===t.grouping||void 0===t.thousands?Lt:Tt(zt.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Lt:Nt(zt.call(t.numerals,String)),a=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"â":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function c(t){t=xt(t);var c=t.fill,l=t.align,f=t.sign,d=t.symbol,h=t.zero,p=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Rt[y]||(void 0===m&&(m=12),v=!0,y="g"),(h||"0"===c&&"="===l)&&(h=!0,c="0",l="=");var b="$"===d?n:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?r:/[%p]/.test(y)?a:"",w=Rt[y],O=/[defgprs%]/.test(y);function _(t){var n,r,a,d=b,_=x;if("c"===y)_=w(t)+_,t="";else{t=+t;var j=t<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),m),v&&(t=Ft(t)),j&&0===+t&&"+"!==f&&(j=!1),d=(j?"("===f?f:s:"-"===f||"("===f?"":f)+d,_=("s"===y?Bt[8+jt/3]:"")+_+(j&&"("===f?")":""),O){n=-1,r=t.length;while(++n<r)if(a=t.charCodeAt(n),48>a||a>57){_=(46===a?i+t.slice(n+1):t.slice(n))+_,t=t.slice(0,n);break}}}g&&!h&&(t=e(t,1/0));var E=d.length+t.length+_.length,k=E<p?new Array(p-E+1).join(c):"";switch(g&&h&&(t=e(k+t,k.length?p-_.length:1/0),k=""),l){case"<":t=d+t+_+k;break;case"=":t=d+k+t+_;break;case"^":t=k.slice(0,E=k.length>>1)+d+t+_+k.slice(E);break;default:t=k+d+t+_;break}return o(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),_.toString=function(){return t+""},_}function l(t,e){var n=c((t=xt(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(St(e)/3))),i=Math.pow(10,-r),o=Bt[8+r/3];return function(t){return n(i*t)+o}}return{format:c,formatPrefix:l}};function Ut(t){return Et=It(t),kt=Et.format,At=Et.formatPrefix,Et}Ut({thousands:",",grouping:[3],currency:["$",""]});var qt=new Date,Ht=new Date;function Wt(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Wt((function(e){if(e>=e)while(t(e),!n(e))e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)while(++r<=0)while(e(t,-1),!n(t));else while(--r>=0)while(e(t,1),!n(t));}))},n&&(i.count=function(e,r){return qt.setTime(+e),Ht.setTime(+r),t(qt),t(Ht),Math.floor(n(qt,Ht))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}var Gt=1e3,Yt=6e4,Vt=36e5,Xt=864e5,Jt=6048e5,Qt=Wt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Yt)/Xt,t=>t.getDate()-1),Kt=Qt;Qt.range;function Zt(t){return Wt((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Yt)/Jt}))}var te=Zt(0),ee=Zt(1),ne=Zt(2),re=Zt(3),ie=Zt(4),oe=Zt(5),ae=Zt(6),se=(te.range,ee.range,ne.range,re.range,ie.range,oe.range,ae.range,Wt((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Xt}),(function(t){return t.getUTCDate()-1}))),ue=se;se.range;function ce(t){return Wt((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Jt}))}var le=ce(0),fe=ce(1),de=ce(2),he=ce(3),pe=ce(4),ge=ce(5),me=ce(6),ve=(le.range,fe.range,de.range,he.range,pe.range,ge.range,me.range,Wt((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));ve.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Wt((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var ye=ve,be=(ve.range,Wt((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),xe=be,we=(be.range,Wt((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gt-t.getMinutes()*Yt)}),(function(t,e){t.setTime(+t+e*Vt)}),(function(t,e){return(e-t)/Vt}),(function(t){return t.getHours()}))),Oe=we,_e=(we.range,Wt((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gt)}),(function(t,e){t.setTime(+t+e*Yt)}),(function(t,e){return(e-t)/Yt}),(function(t){return t.getMinutes()}))),je=_e,Ee=(_e.range,Wt((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Gt)}),(function(t,e){return(e-t)/Gt}),(function(t){return t.getUTCSeconds()}))),ke=Ee,Ae=(Ee.range,Wt((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));Ae.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Wt((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Ae:null};var Se=Ae,Ce=(Ae.range,Wt((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Ce.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Wt((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var De=Ce,Me=(Ce.range,Wt((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),Te=Me,Ne=(Me.range,Wt((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*Vt)}),(function(t,e){return(e-t)/Vt}),(function(t){return t.getUTCHours()}))),Fe=Ne,$e=(Ne.range,Wt((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Yt)}),(function(t,e){return(e-t)/Yt}),(function(t){return t.getUTCMinutes()}))),Pe=$e,Re=($e.range,function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}),Le=function(t){let e=t,n=t;function r(t,e,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const o=r+i>>>1;n(t[o],e)<0?r=o+1:i=o}return r}function i(t,e,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const o=r+i>>>1;n(t[o],e)>0?i=o:r=o+1}return r}function o(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);const a=r(t,n,i,o-1);return a>i&&e(t[a-1],n)>-e(t[a],n)?a-1:a}return 1===t.length&&(e=(e,n)=>t(e)-n,n=ze(t)),{left:r,center:o,right:i}};function ze(t){return(e,n)=>Re(t(e),n)}const Be="year",Ie="quarter",Ue="month",qe="week",He="date",We="day",Ge="dayofyear",Ye="hours",Ve="minutes",Xe="seconds",Je="milliseconds",Qe=[Be,Ie,Ue,qe,He,We,Ge,Ye,Ve,Xe,Je],Ke=Qe.reduce((t,e,n)=>(t[e]=1+n,t),{});function Ze(t){const e=Object(g["i"])(t).slice(),n={};e.length||Object(g["o"])("Missing time unit."),e.forEach(t=>{Object(g["w"])(Ke,t)?n[t]=1:Object(g["o"])("Invalid time unit: ".concat(t,"."))});const r=(n[qe]||n[We]?1:0)+(n[Ie]||n[Ue]||n[He]?1:0)+(n[Ge]?1:0);return r>1&&Object(g["o"])("Incompatible time units: ".concat(t)),e.sort((t,e)=>Ke[t]-Ke[e]),e}const tn={[Be]:"%Y ",[Ie]:"Q%q ",[Ue]:"%b ",[He]:"%d ",[qe]:"W%U ",[We]:"%a ",[Ge]:"%j ",[Ye]:"%H:00",[Ve]:"00:%M",[Xe]:":%S",[Je]:".%L",["".concat(Be,"-").concat(Ue)]:"%Y-%m ",["".concat(Be,"-").concat(Ue,"-").concat(He)]:"%Y-%m-%d ",["".concat(Ye,"-").concat(Ve)]:"%H:%M"};function en(t,e){const n=Object(g["p"])({},tn,e),r=Ze(t),i=r.length;let o,a,s="",u=0;for(u=0;u<i;)for(o=r.length;o>u;--o)if(a=r.slice(u,o).join("-"),null!=n[a]){s+=n[a],u=o;break}return s.trim()}const nn=new Date;function rn(t){return nn.setFullYear(t),nn.setMonth(0),nn.setDate(1),nn.setHours(0,0,0,0),nn}function on(t){return sn(new Date(t))}function an(t){return un(new Date(t))}function sn(t){return Kt.count(rn(t.getFullYear())-1,t)}function un(t){return te.count(rn(t.getFullYear())-1,t)}function cn(t){return rn(t).getDay()}function ln(t,e,n,r,i,o,a){if(0<=t&&t<100){const s=new Date(-1,e,n,r,i,o,a);return s.setFullYear(t),s}return new Date(t,e,n,r,i,o,a)}function fn(t){return hn(new Date(t))}function dn(t){return pn(new Date(t))}function hn(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return ue.count(e-1,t)}function pn(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return le.count(e-1,t)}function gn(t){return nn.setTime(Date.UTC(t,0,1)),nn.getUTCDay()}function mn(t,e,n,r,i,o,a){if(0<=t&&t<100){const t=new Date(Date.UTC(-1,e,n,r,i,o,a));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(t,e,n,r,i,o,a))}function vn(t,e,n,r,i){const o=e||1,a=Object(g["W"])(t),s=(t,e,i)=>(i=i||t,yn(n[i],r[i],t===a&&o,e)),u=new Date,c=Object(g["fb"])(t),l=c[Be]?s(Be):Object(g["m"])(2012),f=c[Ue]?s(Ue):c[Ie]?s(Ie):g["mb"],d=c[qe]&&c[We]?s(We,1,qe+We):c[qe]?s(qe,1):c[We]?s(We,1):c[He]?s(He,1):c[Ge]?s(Ge,1):g["Q"],h=c[Ye]?s(Ye):g["mb"],p=c[Ve]?s(Ve):g["mb"],m=c[Xe]?s(Xe):g["mb"],v=c[Je]?s(Je):g["mb"];return function(t){u.setTime(+t);const e=l(u);return i(e,f(u),d(u,e),h(u),p(u),m(u),v(u))}}function yn(t,e,n,r){const i=n<=1?t:r?(e,i)=>r+n*Math.floor((t(e,i)-r)/n):(e,r)=>n*Math.floor(t(e,r)/n);return e?(t,n)=>e(i(t,n),n):i}function bn(t,e,n){return e+7*t-(n+6)%7}const xn={[Be]:t=>t.getFullYear(),[Ie]:t=>Math.floor(t.getMonth()/3),[Ue]:t=>t.getMonth(),[He]:t=>t.getDate(),[Ye]:t=>t.getHours(),[Ve]:t=>t.getMinutes(),[Xe]:t=>t.getSeconds(),[Je]:t=>t.getMilliseconds(),[Ge]:t=>sn(t),[qe]:t=>un(t),[qe+We]:(t,e)=>bn(un(t),t.getDay(),cn(e)),[We]:(t,e)=>bn(1,t.getDay(),cn(e))},wn={[Ie]:t=>3*t,[qe]:(t,e)=>bn(t,0,cn(e))};function On(t,e){return vn(t,e||1,xn,wn,ln)}const _n={[Be]:t=>t.getUTCFullYear(),[Ie]:t=>Math.floor(t.getUTCMonth()/3),[Ue]:t=>t.getUTCMonth(),[He]:t=>t.getUTCDate(),[Ye]:t=>t.getUTCHours(),[Ve]:t=>t.getUTCMinutes(),[Xe]:t=>t.getUTCSeconds(),[Je]:t=>t.getUTCMilliseconds(),[Ge]:t=>hn(t),[qe]:t=>pn(t),[We]:(t,e)=>bn(1,t.getUTCDay(),gn(e)),[qe+We]:(t,e)=>bn(pn(t),t.getUTCDay(),gn(e))},jn={[Ie]:t=>3*t,[qe]:(t,e)=>bn(t,0,gn(e))};function En(t,e){return vn(t,e||1,_n,jn,mn)}const kn={[Be]:ye,[Ie]:xe.every(3),[Ue]:xe,[qe]:te,[He]:Kt,[We]:Kt,[Ge]:Kt,[Ye]:Oe,[Ve]:je,[Xe]:ke,[Je]:Se},An={[Be]:De,[Ie]:Te.every(3),[Ue]:Te,[qe]:le,[He]:ue,[We]:ue,[Ge]:ue,[Ye]:Fe,[Ve]:Pe,[Xe]:ke,[Je]:Se};function Sn(t){return kn[t]}function Cn(t){return An[t]}function Dn(t,e,n){return t?t.offset(e,n):void 0}function Mn(t,e,n){return Dn(Sn(t),e,n)}function Tn(t,e,n){return Dn(Cn(t),e,n)}function Nn(t,e,n,r){return t?t.range(e,n,r):void 0}function Fn(t,e,n,r){return Nn(Sn(t),e,n,r)}function $n(t,e,n,r){return Nn(Cn(t),e,n,r)}const Pn=1e3,Rn=60*Pn,Ln=60*Rn,zn=24*Ln,Bn=7*zn,In=30*zn,Un=365*zn,qn=[Be,Ue,He,Ye,Ve,Xe,Je],Hn=qn.slice(0,-1),Wn=Hn.slice(0,-1),Gn=Wn.slice(0,-1),Yn=Gn.slice(0,-1),Vn=[Be,qe],Xn=[Be,Ue],Jn=[Be],Qn=[[Hn,1,Pn],[Hn,5,5*Pn],[Hn,15,15*Pn],[Hn,30,30*Pn],[Wn,1,Rn],[Wn,5,5*Rn],[Wn,15,15*Rn],[Wn,30,30*Rn],[Gn,1,Ln],[Gn,3,3*Ln],[Gn,6,6*Ln],[Gn,12,12*Ln],[Yn,1,zn],[Vn,1,Bn],[Xn,1,In],[Xn,3,3*In],[Jn,1,Un]];function Kn(t){const e=t.extent,n=t.maxbins||40,r=Math.abs(Object(g["Z"])(e))/n;let i,o,a=Le(t=>t[2]).right(Qn,r);return a===Qn.length?(i=Jn,o=yt(e[0]/Un,e[1]/Un,n)):a?(a=Qn[r/Qn[a-1][2]<Qn[a][2]/r?a-1:a],i=a[0],o=a[1]):(i=qn,o=Math.max(yt(e[0],e[1],n),1)),{units:i,step:o}}function Zn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function tr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function er(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function nr(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=pr(i),l=gr(i),f=pr(o),d=gr(o),h=pr(a),p=gr(a),g=pr(s),m=gr(s),v=pr(u),y=gr(u),b={a:N,A:F,b:$,B:P,c:null,d:Pr,e:Pr,f:Ir,g:Kr,G:ti,H:Rr,I:Lr,j:zr,L:Br,m:Ur,M:qr,p:R,q:L,Q:_i,s:ji,S:Hr,u:Wr,U:Gr,V:Vr,w:Xr,W:Jr,x:null,X:null,y:Qr,Y:Zr,Z:ei,"%":Oi},x={a:z,A:B,b:I,B:U,c:null,d:ni,e:ni,f:si,g:yi,G:xi,H:ri,I:ii,j:oi,L:ai,m:ui,M:ci,p:q,q:H,Q:_i,s:ji,S:li,u:fi,U:di,V:pi,w:gi,W:mi,x:null,X:null,y:vi,Y:bi,Z:wi,"%":Oi},w={a:k,A:A,b:S,B:C,c:D,d:kr,e:kr,f:Tr,g:Or,G:wr,H:Sr,I:Sr,j:Ar,L:Mr,m:Er,M:Cr,p:E,q:jr,Q:Fr,s:$r,S:Dr,u:vr,U:yr,V:br,w:mr,W:xr,x:M,X:T,y:Or,Y:wr,Z:_r,"%":Nr};function O(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;n instanceof Date||(n=new Date(+n));while(++s<c)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=ur[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function _(t,e){return function(n){var r,i,o=er(1900,void 0,1),a=j(o,t,n+="",0);if(a!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=tr(er(o.y,0,1)),i=r.getUTCDay(),r=i>4||0===i?fe.ceil(r):fe(r),r=ue.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=Zn(er(o.y,0,1)),i=r.getDay(),r=i>4||0===i?ee.ceil(r):ee(r),r=Kt.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?tr(er(o.y,0,1)).getUTCDay():Zn(er(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,tr(o)):Zn(o)}}function j(t,e,n,r){var i,o,a=0,s=e.length,u=n.length;while(a<s){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=w[i in ur?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function E(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l.get(r[0].toLowerCase()),n+r[0].length):-1}function k(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1}function A(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1}function S(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1}function C(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1}function D(t,n,r){return j(t,e,n,r)}function M(t,e,r){return j(t,n,e,r)}function T(t,e,n){return j(t,r,e,n)}function N(t){return a[t.getDay()]}function F(t){return o[t.getDay()]}function $(t){return u[t.getMonth()]}function P(t){return s[t.getMonth()]}function R(t){return i[+(t.getHours()>=12)]}function L(t){return 1+~~(t.getMonth()/3)}function z(t){return a[t.getUTCDay()]}function B(t){return o[t.getUTCDay()]}function I(t){return u[t.getUTCMonth()]}function U(t){return s[t.getUTCMonth()]}function q(t){return i[+(t.getUTCHours()>=12)]}function H(t){return 1+~~(t.getUTCMonth()/3)}return b.x=O(n,b),b.X=O(r,b),b.c=O(e,b),x.x=O(n,x),x.X=O(r,x),x.c=O(e,x),{format:function(t){var e=O(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=_(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=O(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=_(t+="",!0);return e.toString=function(){return t},e}}}var rr,ir,or,ar,sr,ur={"-":"",_:" ",0:"0"},cr=/^\s*\d+/,lr=/^%/,fr=/[\\^$*+?|[\]().{}]/g;function dr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function hr(t){return t.replace(fr,"\\$&")}function pr(t){return new RegExp("^(?:"+t.map(hr).join("|")+")","i")}function gr(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function mr(t,e,n){var r=cr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function vr(t,e,n){var r=cr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function yr(t,e,n){var r=cr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function br(t,e,n){var r=cr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function xr(t,e,n){var r=cr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function wr(t,e,n){var r=cr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Or(t,e,n){var r=cr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _r(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jr(t,e,n){var r=cr.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Er(t,e,n){var r=cr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function kr(t,e,n){var r=cr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ar(t,e,n){var r=cr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Sr(t,e,n){var r=cr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Cr(t,e,n){var r=cr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Dr(t,e,n){var r=cr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Mr(t,e,n){var r=cr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Tr(t,e,n){var r=cr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Nr(t,e,n){var r=lr.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Fr(t,e,n){var r=cr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function $r(t,e,n){var r=cr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Pr(t,e){return dr(t.getDate(),e,2)}function Rr(t,e){return dr(t.getHours(),e,2)}function Lr(t,e){return dr(t.getHours()%12||12,e,2)}function zr(t,e){return dr(1+Kt.count(ye(t),t),e,3)}function Br(t,e){return dr(t.getMilliseconds(),e,3)}function Ir(t,e){return Br(t,e)+"000"}function Ur(t,e){return dr(t.getMonth()+1,e,2)}function qr(t,e){return dr(t.getMinutes(),e,2)}function Hr(t,e){return dr(t.getSeconds(),e,2)}function Wr(t){var e=t.getDay();return 0===e?7:e}function Gr(t,e){return dr(te.count(ye(t)-1,t),e,2)}function Yr(t){var e=t.getDay();return e>=4||0===e?ie(t):ie.ceil(t)}function Vr(t,e){return t=Yr(t),dr(ie.count(ye(t),t)+(4===ye(t).getDay()),e,2)}function Xr(t){return t.getDay()}function Jr(t,e){return dr(ee.count(ye(t)-1,t),e,2)}function Qr(t,e){return dr(t.getFullYear()%100,e,2)}function Kr(t,e){return t=Yr(t),dr(t.getFullYear()%100,e,2)}function Zr(t,e){return dr(t.getFullYear()%1e4,e,4)}function ti(t,e){var n=t.getDay();return t=n>=4||0===n?ie(t):ie.ceil(t),dr(t.getFullYear()%1e4,e,4)}function ei(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+dr(e/60|0,"0",2)+dr(e%60,"0",2)}function ni(t,e){return dr(t.getUTCDate(),e,2)}function ri(t,e){return dr(t.getUTCHours(),e,2)}function ii(t,e){return dr(t.getUTCHours()%12||12,e,2)}function oi(t,e){return dr(1+ue.count(De(t),t),e,3)}function ai(t,e){return dr(t.getUTCMilliseconds(),e,3)}function si(t,e){return ai(t,e)+"000"}function ui(t,e){return dr(t.getUTCMonth()+1,e,2)}function ci(t,e){return dr(t.getUTCMinutes(),e,2)}function li(t,e){return dr(t.getUTCSeconds(),e,2)}function fi(t){var e=t.getUTCDay();return 0===e?7:e}function di(t,e){return dr(le.count(De(t)-1,t),e,2)}function hi(t){var e=t.getUTCDay();return e>=4||0===e?pe(t):pe.ceil(t)}function pi(t,e){return t=hi(t),dr(pe.count(De(t),t)+(4===De(t).getUTCDay()),e,2)}function gi(t){return t.getUTCDay()}function mi(t,e){return dr(fe.count(De(t)-1,t),e,2)}function vi(t,e){return dr(t.getUTCFullYear()%100,e,2)}function yi(t,e){return t=hi(t),dr(t.getUTCFullYear()%100,e,2)}function bi(t,e){return dr(t.getUTCFullYear()%1e4,e,4)}function xi(t,e){var n=t.getUTCDay();return t=n>=4||0===n?pe(t):pe.ceil(t),dr(t.getUTCFullYear()%1e4,e,4)}function wi(){return"+0000"}function Oi(){return"%"}function _i(t){return+t}function ji(t){return Math.floor(+t/1e3)}function Ei(t){return rr=nr(t),ir=rr.format,or=rr.parse,ar=rr.utcFormat,sr=rr.utcParse,rr}function ki(t){const e={};return n=>e[n]||(e[n]=t(n))}function Ai(t,e){return n=>{const r=t(n),i=r.indexOf(e);if(i<0)return r;let o=Si(r,i);const a=o<r.length?r.slice(o):"";while(--o>i)if("0"!==r[o]){++o;break}return r.slice(0,o)+a}}function Si(t,e){let n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if(n=t.charCodeAt(r),n>=48&&n<=57)return r+1}function Ci(t){const e=ki(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(t){const n=xt(t||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1;break}return Ai(e(n),e(".1f")(1)[1])}return e(n)},formatSpan(t,r,i,o){o=xt(null==o?",f":o);const a=yt(t,r,i),s=Math.max(Math.abs(t),Math.abs(r));let u;if(null==o.precision)switch(o.type){case"s":return isNaN(u=Ct(a,s))||(o.precision=u),n(o,s);case"":case"e":case"g":case"p":case"r":isNaN(u=Dt(a,s))||(o.precision=u-("e"===o.type));break;case"f":case"%":isNaN(u=Mt(a))||(o.precision=u-2*("%"===o.type));break}return e(o)}}}let Di,Mi;function Ti(){return Di=Ci({format:kt,formatPrefix:At})}function Ni(t){return Ci(It(t))}function Fi(t){return arguments.length?Di=Ni(t):Di}function $i(t,e,n){n=n||{},Object(g["H"])(n)||Object(g["o"])("Invalid time multi-format specifier: ".concat(n));const r=e(Xe),i=e(Ve),o=e(Ye),a=e(He),s=e(qe),u=e(Ue),c=e(Ie),l=e(Be),f=t(n[Je]||".%L"),d=t(n[Xe]||":%S"),h=t(n[Ve]||"%I:%M"),p=t(n[Ye]||"%I %p"),m=t(n[He]||n[We]||"%a %d"),v=t(n[qe]||"%b %d"),y=t(n[Ue]||"%B"),b=t(n[Ie]||"%B"),x=t(n[Be]||"%Y");return t=>(r(t)<t?f:i(t)<t?d:o(t)<t?h:a(t)<t?p:u(t)<t?s(t)<t?m:v:l(t)<t?c(t)<t?y:b:x)(t)}function Pi(t){const e=ki(t.format),n=ki(t.utcFormat);return{timeFormat:t=>Object(g["J"])(t)?e(t):$i(e,Sn,t),utcFormat:t=>Object(g["J"])(t)?n(t):$i(n,Cn,t),timeParse:ki(t.parse),utcParse:ki(t.utcParse)}}function Ri(){return Mi=Pi({format:ir,parse:or,utcFormat:ar,utcParse:sr})}function Li(t){return Pi(nr(t))}function zi(t){return arguments.length?Mi=Li(t):Mi}Ei({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ti(),Ri();const Bi=(t,e)=>Object(g["p"])({},t,e);function Ii(t,e){const n=t?Ni(t):Fi(),r=e?Li(e):zi();return Bi(n,r)}function Ui(t,e){const n=arguments.length;return n&&2!==n&&Object(g["o"])("defaultLocale expects either zero or two arguments."),n?Bi(Fi(t),zi(e)):Bi(Fi(),zi())}function qi(){return Ti(),Ri(),Ui()}var Hi=function(t,e,n,r){e=e||{};const i=ft(e.type||"json");return i||Object(g["o"])("Unknown data format type: "+e.type),t=i(t,e),e.parse&&Wi(t,e.parse,n,r),Object(g["w"])(t,"columns")&&delete t.columns,t};function Wi(t,e,n,r){if(!t.length)return;const i=zi();n=n||i.timeParse,r=r||i.utcParse;let o,a,s,u,c,l,f=t.columns||Object.keys(t[0]);"auto"===e&&(e=P(t,f)),f=Object.keys(e);const d=f.map(t=>{const i=e[t];let o,a;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){o=i.split(/:(.+)?/,2),a=o[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1));const t="utc"===o[0]?r:n;return t(a)}if(!T[i])throw Error("Illegal format pattern: "+t+":"+i);return T[i]});for(s=0,c=t.length,l=f.length;s<c;++s)for(o=t[s],u=0;u<l;++u)a=f[u],o[a]=d[u](o[a])}const Gi=x("undefined"!==typeof fetch&&fetch,null);function Yi(t){const e=t||g["y"],n=[],r={};return n.add=t=>{const i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=t=>{const i=e(t);if(r[i]){r[i]=0;const e=n.indexOf(t);e>=0&&n.splice(e,1)}return n},n}async function Vi(t,e){try{await e(t)}catch(n){t.error(n)}}const Xi=Symbol("vega_id");let Ji=1;function Qi(t){return!(!t||!Ki(t))}function Ki(t){return t[Xi]}function Zi(t,e){return t[Xi]=e,t}function to(t){const e=t===Object(t)?t:{data:t};return Ki(e)?e:Zi(e,Ji++)}function eo(t){return no(t,to({}))}function no(t,e){for(const n in t)e[n]=t[n];return e}function ro(t,e){return Zi(e,Ki(t))}function io(t,e){return t?e?(n,r)=>t(n,r)||Ki(e(n))-Ki(e(r)):(e,n)=>t(e,n)||Ki(e)-Ki(n):null}function oo(t){return t&&t.constructor===ao}function ao(){const t=[],e=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:ao,insert(e){const n=Object(g["i"])(e),r=n.length;for(let i=0;i<r;++i)t.push(n[i]);return this},remove(t){const n=Object(g["E"])(t)?r:e,i=Object(g["i"])(t),o=i.length;for(let e=0;e<o;++e)n.push(i[e]);return this},modify(t,e,r){const o={field:e,value:Object(g["m"])(r)};return Object(g["E"])(t)?(o.filter=t,i.push(o)):(o.tuple=t,n.push(o)),this},encode(t,e){return Object(g["E"])(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},clean(t){return o=t,this},reflow(){return a=!0,this},pulse(s,u){const c={},l={};let f,d,h,p,g,m;for(f=0,d=u.length;f<d;++f)c[Ki(u[f])]=1;for(f=0,d=e.length;f<d;++f)g=e[f],c[Ki(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(t=>{p(t)&&(c[Ki(t)]=-1)});for(f=0,d=t.length;f<d;++f)g=t[f],m=Ki(g),c[m]?c[m]=1:s.add.push(to(t[f]));for(f=0,d=u.length;f<d;++f)g=u[f],c[Ki(g)]<0&&s.rem.push(g);function v(t,e,n){n?t[e]=n(t):s.encode=e,a||(l[Ki(t)]=t)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=c[Ki(g)],m>0&&(v(g,p,h.value),s.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(t=>{p(t)&&c[Ki(t)]>0&&v(t,h.field,h.value)}),s.modifies(h.field);if(a)s.mod=e.length||r.length?u.filter(t=>c[Ki(t)]>0):u.slice();else for(m in l)s.mod.push(l[m]);return(o||null==o&&(e.length||r.length))&&s.clean(!0),s}}}const so="_:mod:_";function uo(){Object.defineProperty(this,so,{writable:!0,value:{}})}uo.prototype={set(t,e,n,r){const i=this,o=i[t],a=i[so];return null!=e&&e>=0?(o[e]!==n||r)&&(o[e]=n,a[e+":"+t]=-1,a[t]=-1):(o!==n||r)&&(i[t]=n,a[t]=Object(g["B"])(n)?1+n.length:-1),i},modified(t,e){const n=this[so];if(!arguments.length){for(const t in n)if(n[t])return!0;return!1}if(Object(g["B"])(t)){for(let e=0;e<t.length;++e)if(n[t[e]])return!0;return!1}return null!=e&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[so]={},this}};let co=0;const lo="pulse",fo=new uo,ho=1,po=2;function go(t,e,n,r){this.id=++co,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}function mo(t){return function(e){const n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}function vo(t,e,n,r){let i,o=1;return t instanceof go?i=t:t&&t.prototype instanceof go?i=new t:Object(g["E"])(t)?i=new go(null,t):(o=0,i=new go(t,e)),this.rank(i),o&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i}function yo(t,e){const n=t.rank,r=e.length;for(let i=0;i<r;++i)if(n<e[i].rank)return void this.rerank(t)}go.prototype={targets(){return this._targets||(this._targets=Yi(g["x"]))},set(t){return this.value!==t?(this.value=t,1):0},skip:mo(ho),modified:mo(po),parameters(t,e,n){e=!1!==e;const r=this._argval=this._argval||new uo,i=this._argops=this._argops||[],o=[];let a,s,u,c;const l=(t,n,a)=>{a instanceof go?(a!==this&&(e&&a.targets().add(this),o.push(a)),i.push({op:a,name:t,index:n})):r.set(t,n,a)};for(a in t)if(s=t[a],a===lo)Object(g["i"])(s).forEach(t=>{t instanceof go?t!==this&&(t.targets().add(this),o.push(t)):Object(g["o"])("Pulse parameters must be operator instances.")}),this.source=s;else if(Object(g["B"])(s))for(r.set(a,-1,Array(u=s.length)),c=0;c<u;++c)l(a,c,s[c]);else l(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(t){const e=this._argval||fo,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===t,e.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,r,i;if(t)for(e=0,n=t.length;e<n;++e)r=t[e],i=r.op,i._targets&&i._targets.remove(this)},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};let bo=0;function xo(t,e,n){this.id=++bo,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function wo(t,e,n){return new xo(t,e,n)}function Oo(t,e,n,r){const i=this,o=wo(n,r),a=function(t){t.dataflow=i;try{o.receive(t)}catch(e){i.error(e)}finally{i.run()}};let s;s="string"===typeof t&&"undefined"!==typeof document?document.querySelectorAll(t):Object(g["i"])(t);const u=s.length;for(let c=0;c<u;++c)s[c].addEventListener(e,a);return o}function _o(t,e){const n=this.locale();return Hi(t,e,n.timeParse,n.utcParse)}function jo(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function Eo(t,e){const n=this;let r,i=0;try{r=await n.loader().load(t,{context:"dataflow",response:dt(e&&e.type)});try{r=n.parse(r,e)}catch(o){i=-2,n.warn("Data ingestion failed",t,o)}}catch(o){i=-1,n.warn("Loading failed",t,o)}return{data:r,status:i}}async function ko(t,e,n){const r=this,i=r._pending||Ao(r);i.requests+=1;const o=await r.request(e,n);return r.pulse(t,r.changeset().remove(g["ib"]).insert(o.data||[])),i.done(),o}function Ao(t){let e;const n=new Promise(t=>e=t);return n.requests=0,n.done=()=>{0===--n.requests&&(t._pending=null,e(t))},t._pending=n}xo.prototype={_filter:g["ib"],_apply:g["y"],targets(){return this._targets||(this._targets=Yi(g["x"]))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,r=n?n.length:0;for(let t=0;t<r;++t)n[t].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=wo(t);return this.targets().add(e),e},apply(t){const e=wo(null,t);return this.targets().add(e),e},merge(){const t=wo();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=wo();return this.targets().add(wo(null,null,Object(g["n"])(t,t=>{const n=t.dataflow;e.receive(t),n&&n.run&&n.run()}))),e},between(t,e){let n=!1;return t.targets().add(wo(null,null,()=>n=!0)),e.targets().add(wo(null,null,()=>n=!1)),this.filter(()=>n)},detach(){}};const So={skip:!0};function Co(t,e,n,r,i){const o=t instanceof go?Mo:Do;return o(this,t,e,n,r,i),this}function Do(t,e,n,r,i,o){const a=Object(g["p"])({},o,So);let s,u;Object(g["E"])(n)||(n=Object(g["m"])(n)),void 0===r?s=e=>t.touch(n(e)):Object(g["E"])(r)?(u=new go(null,r,i,!1),s=e=>{u.evaluate(e);const r=n(e),i=u.value;oo(i)?t.pulse(r,i,o):t.update(r,i,a)}):s=e=>t.update(n(e),r,a),e.apply(s)}function Mo(t,e,n,r,i,o){if(void 0===r)e.targets().add(n);else{const a=o||{},s=new go(null,To(n,r),i,!1);s.modified(a.force),s.rank=e.rank,e.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),t.connect(n,[s]))}}function To(t,e){return e=Object(g["E"])(e)?e:Object(g["m"])(e),t?function(n,r){const i=e(n,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}function No(t){t.rank=++this._rank}function Fo(t){const e=[t];let n,r,i;while(e.length)if(this.rank(n=e.pop()),r=n._targets)for(i=r.length;--i>=0;)e.push(n=r[i]),n===t&&Object(g["o"])("Cycle detected in dataflow graph.")}const $o={},Po=1,Ro=2,Lo=4,zo=Po|Ro,Bo=Po|Lo,Io=Po|Ro|Lo,Uo=8,qo=16,Ho=32,Wo=64;function Go(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Yo(t,e){const n=[];return Object(g["kb"])(t,e,t=>n.push(t)),n}function Vo(t,e){const n={};return t.visit(e,t=>{n[Ki(t)]=1}),t=>n[Ki(t)]?null:t}function Xo(t,e){return t?(n,r)=>t(n,r)&&e(n,r):e}function Jo(t,e,n,r){const i=this,o=n.length;let a=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n;for(let s=0;s<o;++s){const t=n[s];if(t.stamp===e){if(t.fields){const e=i.fields||(i.fields={});for(const n in t.fields)e[n]=1}t.changed(i.ADD)&&(a|=i.ADD),t.changed(i.REM)&&(a|=i.REM),t.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}async function Qo(t,e,n){const r=this,i=[];if(r._pulse)return ea(r);if(r._pending&&await r._pending,e&&await Vi(r,e),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Go(r,o,t),r._touched.forEach(t=>r._enqueue(t,!0)),r._touched=Yi(g["x"]);let a,s,u,c=0;try{while(r._heap.size()>0)a=r._heap.pop(),a.rank===a.qrank?(s=a.run(r._getPulse(a,t)),s.then?s=await s:s.async&&(i.push(s.async),s=$o),s!==$o&&a._targets&&a._targets.forEach(t=>r._enqueue(t)),++c):r._enqueue(a,!0)}catch(l){r._heap.clear(),u=l}if(r._input={},r._pulse=null,r.debug("Pulse ".concat(o,": ").concat(c," operators")),u&&(r._postrun=[],r.error(u)),r._postrun.length){const t=r._postrun.sort((t,e)=>e.priority-t.priority);r._postrun=[];for(let e=0;e<t.length;++e)await Vi(r,t[e].callback)}return n&&await Vi(r,n),i.length&&Promise.all(i).then(t=>r.runAsync(null,()=>{t.forEach(t=>{try{t(r)}catch(l){r.error(l)}})})),r}async function Ko(t,e,n){while(this._running)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(r,r),this._running}function Zo(t,e,n){return this._pulse?ea(this):(this.evaluate(t,e,n),this)}function ta(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(r){this.error(r)}}function ea(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function na(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function ra(t,e){const n=t.source,r=this._clock;return n&&Object(g["B"])(n)?new Jo(this,r,n.map(t=>t.pulse),e):this._input[t.id]||ia(this._pulse,n&&n.pulse)}function ia(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==$o&&(t.source=e.source),t)}Go.prototype={StopPropagation:$o,ADD:Po,REM:Ro,MOD:Lo,ADD_REM:zo,ADD_MOD:Bo,ALL:Io,REFLOW:Uo,SOURCE:qo,NO_SOURCE:Ho,NO_FIELDS:Wo,fork(t){return new Go(this.dataflow).init(this,t)},clone(){const t=this.fork(Io);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(Io|qo)},addAll(){let t=this;const e=!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length;return e||(t=new Go(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||e&Wo||(n.fields=t.fields),e&Po?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&Ro?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&Lo?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&Ho?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||Io;return e&Po&&this.add.length||e&Ro&&this.rem.length||e&Lo&&this.mod.length},reflow(t){if(t)return this.fork(Io).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(Lo,Vo(this,Po))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return Object(g["B"])(t)?t.forEach(t=>e[t]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return!(!e&&!this.mod.length||!n)&&(arguments.length?Object(g["B"])(t)?t.some(t=>n[t]):n[t]:!!n)},filter(t,e){const n=this;return t&Po&&(n.addF=Xo(n.addF,e)),t&Ro&&(n.remF=Xo(n.remF,e)),t&Lo&&(n.modF=Xo(n.modF,e)),t&qo&&(n.srcF=Xo(n.srcF,e)),n},materialize(t){t=t||Io;const e=this;return t&Po&&e.addF&&(e.add=Yo(e.add,e.addF),e.addF=null),t&Ro&&e.remF&&(e.rem=Yo(e.rem,e.remF),e.remF=null),t&Lo&&e.modF&&(e.mod=Yo(e.mod,e.modF),e.modF=null),t&qo&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,r=e;if(t&qo)return Object(g["kb"])(n.source,n.srcF,r),n;t&Po&&Object(g["kb"])(n.add,n.addF,r),t&Ro&&Object(g["kb"])(n.rem,n.remF,r),t&Lo&&Object(g["kb"])(n.mod,n.modF,r);const i=n.source;if(t&Uo&&i){const t=n.add.length+n.mod.length;t===i.length||(t?Object(g["kb"])(i,Vo(n,Bo),r):Object(g["kb"])(i,n.srcF,r))}return n}},Object(g["z"])(Jo,Go,{fork(t){const e=new Go(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,t=>e.add.push(t)),t&e.REM&&this.visit(e.REM,t=>e.rem.push(t)),t&e.MOD&&this.visit(e.MOD,t=>e.mod.push(t))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?Object(g["B"])(t)?t.some(t=>n[t]):n[t]:0},filter(){Object(g["o"])("MultiPulse does not support filtering.")},materialize(){Object(g["o"])("MultiPulse does not support materialization.")},visit(t,e){const n=this,r=n.pulses,i=r.length;let o=0;if(t&n.SOURCE)for(;o<i;++o)r[o].visit(t,e);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(t,e);return n}});const oa={skip:!1,force:!1};function aa(t,e){const n=e||oa;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function sa(t,e,n){const r=n||oa;return(t.set(e)||r.force)&&this.touch(t,r),this}function ua(t,e,n){this.touch(t,n||oa);const r=new Go(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=e.pulse(r,i),this}function ca(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),la(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let r;return e.length?(r=e[0],e[0]=n,fa(e,0,t)):r=n,r}}}function la(t,e,n,r){let i,o;const a=t[n];while(n>e){if(o=n-1>>1,i=t[o],!(r(a,i)<0))break;t[n]=i,n=o}return t[n]=a}function fa(t,e,n){const r=e,i=t.length,o=t[e];let a,s=1+(e<<1);while(s<i)a=s+1,a<i&&n(t[s],t[a])>=0&&(s=a),t[e]=t[s],e=s,s=1+(e<<1);return t[e]=o,la(t,r,e,n)}function da(){this.logger(Object(g["M"])()),this.logLevel(g["b"]),this._clock=0,this._rank=0,this._locale=Ui();try{this._loader=Gi()}catch(t){}this._touched=Yi(g["x"]),this._input={},this._pulse=null,this._heap=ca((t,e)=>t.qrank-e.qrank),this._postrun=[]}function ha(t){return function(){return this._log[t].apply(this,arguments)}}function pa(t,e){go.call(this,t,null,e)}da.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:ha("error"),warn:ha("warn"),info:ha("info"),debug:ha("debug"),logLevel:ha("level"),cleanThreshold:1e4,add:vo,connect:yo,rank:No,rerank:Fo,pulse:ua,touch:aa,update:sa,changeset:ao,ingest:jo,parse:_o,preload:ko,request:Eo,events:Oo,on:Co,evaluate:Qo,run:Zo,runAsync:Ko,runAfter:ta,_enqueue:na,_getPulse:ra},Object(g["z"])(pa,go,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(t=>this.pulse=t):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const ga={};function ma(t){const e=va(t);return e&&e.Definition||null}function va(t){return t=t&&t.toLowerCase(),Object(g["w"])(ga,t)?ga[t]:null}function ya(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function ba(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function xa(t,e,n=0,r=t.length-1,i=Re){while(r>n){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1),l=Math.max(n,Math.floor(e-a*u/o+c)),f=Math.min(r,Math.floor(e+(o-a)*u/o+c));xa(t,e,l,f,i)}const o=t[e];let a=n,s=r;wa(t,n,e),i(t[r],o)>0&&wa(t,n,r);while(a<s){wa(t,a,s),++a,--s;while(i(t[a],o)<0)++a;while(i(t[s],o)>0)--s}0===i(t[n],o)?wa(t,n,s):(++s,wa(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function wa(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}var Oa=function(t){return null===t?NaN:+t};function*_a(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}function ja(t,e,n){if(t=Float64Array.from(_a(t,n)),r=t.length){if((e=+e)<=0||r<2)return ba(t);if(e>=1)return ya(t);var r,i=(r-1)*e,o=Math.floor(i),a=ya(xa(t,o).subarray(0,o+1)),s=ba(t.subarray(o+1));return a+(s-a)*(i-o)}}function Ea(t,e,n=Oa){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function ka(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let a of t)null!=a&&(a=+a)>=a&&(n=a-i,i+=n/++r,o+=n*(a-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function Aa(t,e){const n=ka(t,e);return n?Math.sqrt(n):n}var Sa=function(t,e){return ja(t,.5,e)};function*Ca(t,e){if(null==e)for(let n of t)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)r=e(r,++n,t),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function Da(t,e,n){const r=Float64Array.from(Ca(t,n));return r.sort(Re),e.map(t=>Ea(r,t))}function Ma(t,e){return Da(t,[.25,.5,.75],e)}function Ta(t,e){const n=t.length,r=Aa(t,e),i=Ma(t,e),o=(i[2]-i[0])/1.34,a=Math.min(r,o)||r||Math.abs(i[0])||1;return 1.06*a*Math.pow(n,-.2)}function Na(t){const e=t.maxbins||20,n=t.base||10,r=Math.log(n),i=t.divide||[5,2];let o,a,s,u,c,l,f=t.extent[0],d=t.extent[1];const h=t.span||d-f||Math.abs(f)||1;if(t.step)o=t.step;else if(t.steps){for(u=h/e,c=0,l=t.steps.length;c<l&&t.steps[c]<u;++c);o=t.steps[Math.max(0,c-1)]}else{a=Math.ceil(Math.log(e)/r),s=t.minstep||0,o=Math.max(s,Math.pow(n,Math.round(Math.log(h)/r)-a));while(Math.ceil(h/o)>e)o*=n;for(c=0,l=i.length;c<l;++c)u=o/i[c],u>=s&&h/u<=e&&(o=u)}u=Math.log(o);const p=u>=0?0:1+~~(-u/r),g=Math.pow(n,-p-1);return(t.nice||void 0===t.nice)&&(u=Math.floor(f/o+g)*o,f=f<u?u-o:u,d=Math.ceil(d/o)*o),{start:f,stop:d===f?f+o:d,step:o}}var Fa=Math.random;function $a(t){Fa=t}function Pa(t,e,n,r){if(!t.length)return[void 0,void 0];const i=Float64Array.from(Ca(t,r)),o=i.length,a=e;let s,u,c,l;for(c=0,l=Array(a);c<a;++c){for(s=0,u=0;u<o;++u)s+=i[~~(Fa()*o)];l[c]=s/o}return l.sort(Re),[ja(l,n/2),ja(l,1-n/2)]}function Ra(t,e,n,r){r=r||(t=>t);const i=t.length,o=new Float64Array(i);let a,s=0,u=1,c=r(t[0]),l=c,f=c+e;for(;u<i;++u){if(a=r(t[u]),a>=f){for(l=(c+l)/2;s<u;++s)o[s]=l;f=a+e,c=a}l=a}for(l=(c+l)/2;s<u;++s)o[s]=l;return n?La(o,e+e/4):o}function La(t,e){const n=t.length;let r,i,o=0,a=1;while(t[o]===t[a])++a;while(a<n){r=a+1;while(t[a]===t[r])++r;if(t[a]-t[a-1]<e){i=a+(o+r-a-a>>1);while(i<a)t[i++]=t[a];while(i>a)t[i--]=t[o]}o=a,a=r}return t}function za(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function Ba(t,e){let n,r,i;null==e&&(e=t,t=0);const o={min(t){return arguments.length?(n=t||0,i=r-n,o):n},max(t){return arguments.length?(r=t||0,i=r-n,o):r},sample(){return n+Math.floor(i*Fa())},pdf(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},cdf(t){const e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},icdf(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN}};return o.min(t).max(e)}const Ia=Math.sqrt(2*Math.PI),Ua=Math.SQRT2;let qa=NaN;function Ha(t,e){t=t||0,e=null==e?1:e;let n,r,i=0,o=0;if(qa===qa)i=qa,qa=NaN;else{do{i=2*Fa()-1,o=2*Fa()-1,n=i*i+o*o}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,qa=o*r}return t+i*e}function Wa(t,e,n){n=null==n?1:n;const r=(t-(e||0))/n;return Math.exp(-.5*r*r)/(n*Ia)}function Ga(t,e,n){e=e||0,n=null==n?1:n;const r=(t-e)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const t=Math.exp(-i*i/2);let e;i<7.07106781186547?(e=.0352624965998911*i+.700383064443688,e=e*i+6.37396220353165,e=e*i+33.912866078383,e=e*i+112.079291497871,e=e*i+221.213596169931,e=e*i+220.206867912376,o=t*e,e=.0883883476483184*i+1.75566716318264,e=e*i+16.064177579207,e=e*i+86.7807322029461,e=e*i+296.564248779674,e=e*i+637.333633378831,e=e*i+793.826512519948,e=e*i+440.413735824752,o/=e):(e=i+.65,e=i+4/e,e=i+3/e,e=i+2/e,e=i+1/e,o=t/e/2.506628274631)}return r>0?1-o:o}function Ya(t,e,n){return t<0||t>1?NaN:(e||0)+(null==n?1:n)*Ua*Va(2*t-1)}function Va(t){let e,n=-Math.log((1-t)*(1+t));return n<6.25?(n-=3.125,e=-364441206401782e-35,e=e*n-16850591381820166e-35,e=128584807152564e-32+e*n,e=11157877678025181e-33+e*n,e=e*n-1333171662854621e-31,e=20972767875968562e-33+e*n,e=6637638134358324e-30+e*n,e=e*n-4054566272975207e-29,e=e*n-8151934197605472e-29,e=26335093153082323e-28+e*n,e=e*n-12975133253453532e-27,e=e*n-5415412054294628e-26,e=1.0512122733215323e-9+e*n,e=e*n-4.112633980346984e-9,e=e*n-2.9070369957882005e-8,e=4.2347877827932404e-7+e*n,e=e*n-13654692000834679e-22,e=e*n-13882523362786469e-21,e=.00018673420803405714+e*n,e=e*n-.000740702534166267,e=e*n-.006033670871430149,e=.24015818242558962+e*n,e=1.6536545626831027+e*n):n<16?(n=Math.sqrt(n)-3.25,e=2.2137376921775787e-9,e=9.075656193888539e-8+e*n,e=e*n-2.7517406297064545e-7,e=1.8239629214389228e-8+e*n,e=15027403968909828e-22+e*n,e=e*n-4013867526981546e-21,e=29234449089955446e-22+e*n,e=12475304481671779e-21+e*n,e=e*n-47318229009055734e-21,e=6828485145957318e-20+e*n,e=24031110387097894e-21+e*n,e=e*n-.0003550375203628475,e=.0009532893797373805+e*n,e=e*n-.0016882755560235047,e=.002491442096107851+e*n,e=e*n-.003751208507569241,e=.005370914553590064+e*n,e=1.0052589676941592+e*n,e=3.0838856104922208+e*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,e=-27109920616438573e-27,e=e*n-2.555641816996525e-10,e=1.5076572693500548e-9+e*n,e=e*n-3.789465440126737e-9,e=7.61570120807834e-9+e*n,e=e*n-1.496002662714924e-8,e=2.914795345090108e-8+e*n,e=e*n-6.771199775845234e-8,e=2.2900482228026655e-7+e*n,e=e*n-9.9298272942317e-7,e=4526062597223154e-21+e*n,e=e*n-1968177810553167e-20,e=7599527703001776e-20+e*n,e=e*n-.00021503011930044477,e=e*n-.00013871931833623122,e=1.0103004648645344+e*n,e=4.849906401408584+e*n):e=1/0,e*t}function Xa(t,e){let n,r;const i={mean(t){return arguments.length?(n=t||0,i):n},stdev(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>Ha(n,r),pdf:t=>Wa(t,n,r),cdf:t=>Ga(t,n,r),icdf:t=>Ya(t,n,r)};return i.mean(t).stdev(e)}function Ja(t,e){const n=Xa();let r=0;const i={data(n){return arguments.length?(t=n,r=n?n.length:0,i.bandwidth(e)):t},bandwidth(n){return arguments.length?(e=n,!e&&t&&(e=Ta(t)),i):e},sample(){return t[~~(Fa()*r)]+e*n.sample()},pdf(i){let o=0,a=0;for(;a<r;++a)o+=n.pdf((i-t[a])/e);return o/e/r},cdf(i){let o=0,a=0;for(;a<r;++a)o+=n.cdf((i-t[a])/e);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function Qa(t,e){return t=t||0,e=null==e?1:e,Math.exp(t+Ha()*e)}function Ka(t,e,n){if(t<=0)return 0;e=e||0,n=null==n?1:n;const r=(Math.log(t)-e)/n;return Math.exp(-.5*r*r)/(n*Ia*t)}function Za(t,e,n){return Ga(Math.log(t),e,n)}function ts(t,e,n){return Math.exp(Ya(t,e,n))}function es(t,e){let n,r;const i={mean(t){return arguments.length?(n=t||0,i):n},stdev(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>Qa(n,r),pdf:t=>Ka(t,n,r),cdf:t=>Za(t,n,r),icdf:t=>ts(t,n,r)};return i.mean(t).stdev(e)}function ns(t,e){let n,r=0;function i(t){const e=[];let n,i=0;for(n=0;n<r;++n)i+=e[n]=null==t[n]?1:+t[n];for(n=0;n<r;++n)e[n]/=i;return e}const o={weights(t){return arguments.length?(n=i(e=t||[]),o):e},distributions(n){return arguments.length?(n?(r=n.length,t=n):(r=0,t=[]),o.weights(e)):t},sample(){const e=Fa();let i=t[r-1],o=n[0],a=0;for(;a<r-1;o+=n[++a])if(e<o){i=t[a];break}return i.sample()},pdf(e){let i=0,o=0;for(;o<r;++o)i+=n[o]*t[o].pdf(e);return i},cdf(e){let i=0,o=0;for(;o<r;++o)i+=n[o]*t[o].cdf(e);return i},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(t).weights(e)}function rs(t,e){return null==e&&(e=null==t?1:t,t=0),t+(e-t)*Fa()}function is(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function os(t,e,n){return null==n&&(n=null==e?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function as(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function ss(t,e){let n,r;const i={min(t){return arguments.length?(n=t||0,i):n},max(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>rs(n,r),pdf:t=>is(t,n,r),cdf:t=>os(t,n,r),icdf:t=>as(t,n,r)};return null==e&&(e=null==t?1:t,t=0),i.min(t).max(e)}function us(t,e,n,r){const i=r-t*t,o=Math.abs(i)<1e-24?0:(n-t*e)/i,a=e-o*t;return[a,o]}function cs(t,e,n,r){t=t.filter(t=>{let r=e(t),i=n(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i}),r&&t.sort((t,n)=>e(t)-e(n));const i=t.length,o=new Float64Array(i),a=new Float64Array(i);let s,u,c,l=0,f=0,d=0;for(c of t)o[l]=s=+e(c),a[l]=u=+n(c),++l,f+=(s-f)/l,d+=(u-d)/l;for(l=0;l<i;++l)o[l]-=f,a[l]-=d;return[o,a,f,d]}function ls(t,e,n,r){let i,o,a=-1;for(const s of t)i=e(s),o=n(s),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++a)}function fs(t,e,n,r,i){let o=0,a=0;return ls(t,e,n,(t,e)=>{const n=e-i(t),s=e-r;o+=n*n,a+=s*s}),1-o/a}function ds(t,e,n){let r=0,i=0,o=0,a=0,s=0;ls(t,e,n,(t,e)=>{++s,r+=(t-r)/s,i+=(e-i)/s,o+=(t*e-o)/s,a+=(t*t-a)/s});const u=us(r,i,o,a),c=t=>u[0]+u[1]*t;return{coef:u,predict:c,rSquared:fs(t,e,n,i,c)}}function hs(t,e,n){let r=0,i=0,o=0,a=0,s=0;ls(t,e,n,(t,e)=>{++s,t=Math.log(t),r+=(t-r)/s,i+=(e-i)/s,o+=(t*e-o)/s,a+=(t*t-a)/s});const u=us(r,i,o,a),c=t=>u[0]+u[1]*Math.log(t);return{coef:u,predict:c,rSquared:fs(t,e,n,i,c)}}function ps(t,e,n){const[r,i,o,a]=cs(t,e,n);let s,u,c,l=0,f=0,d=0,h=0,p=0;ls(t,e,n,(t,e)=>{s=r[p++],u=Math.log(e),c=s*e,l+=(e*u-l)/p,f+=(c-f)/p,d+=(c*u-d)/p,h+=(s*c-h)/p});const[g,m]=us(f/a,l/a,d/a,h/a),v=t=>Math.exp(g+m*(t-o));return{coef:[Math.exp(g-m*o),m],predict:v,rSquared:fs(t,e,n,a,v)}}function gs(t,e,n){let r=0,i=0,o=0,a=0,s=0,u=0;ls(t,e,n,(t,e)=>{const n=Math.log(t),c=Math.log(e);++u,r+=(n-r)/u,i+=(c-i)/u,o+=(n*c-o)/u,a+=(n*n-a)/u,s+=(e-s)/u});const c=us(r,i,o,a),l=t=>c[0]*Math.pow(t,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:fs(t,e,n,s,l)}}function ms(t,e,n){const[r,i,o,a]=cs(t,e,n),s=r.length;let u,c,l,f,d=0,h=0,p=0,g=0,m=0;for(u=0;u<s;)c=r[u],l=i[u++],f=c*c,d+=(f-d)/u,h+=(f*c-h)/u,p+=(f*f-p)/u,g+=(c*l-g)/u,m+=(f*l-m)/u;const v=p-d*d,y=d*v-h*h,b=(m*d-g*h)/y,x=(g*v-m*h)/y,w=-b*d,O=t=>(t-=o,b*t*t+x*t+w+a);return{coef:[w-x*o+b*o*o+a,x-2*b*o,b],predict:O,rSquared:fs(t,e,n,a,O)}}function vs(t,e,n,r){if(1===r)return ds(t,e,n);if(2===r)return ms(t,e,n);const[i,o,a,s]=cs(t,e,n),u=i.length,c=[],l=[],f=r+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d)*o[p];for(c.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d+h);m[h]=g}l.push(m)}l.push(c);const v=bs(l),y=t=>{t-=a;let e=s+v[0]+v[1]*t+v[2]*t*t;for(d=3;d<f;++d)e+=v[d]*Math.pow(t,d);return e};return{coef:ys(f,v,-a,s),predict:y,rSquared:fs(t,e,n,s,y)}}function ys(t,e,n,r){const i=Array(t);let o,a,s,u;for(o=0;o<t;++o)i[o]=0;for(o=t-1;o>=0;--o)for(s=e[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function bs(t){const e=t.length-1,n=[];let r,i,o,a,s;for(r=0;r<e;++r){for(a=r,i=r+1;i<e;++i)Math.abs(t[r][i])>Math.abs(t[r][a])&&(a=i);for(o=r;o<e+1;++o)s=t[o][r],t[o][r]=t[o][a],t[o][a]=s;for(i=r+1;i<e;++i)for(o=e;o>=r;o--)t[o][i]-=t[o][r]*t[r][i]/t[r][r]}for(i=e-1;i>=0;--i){for(s=0,o=i+1;o<e;++o)s+=t[o][i]*n[o];n[i]=(t[e][i]-s)/t[i][i]}return n}const xs=2,ws=1e-12;function Os(t,e,n,r){const[i,o,a,s]=cs(t,e,n,!0),u=i.length,c=Math.max(2,~~(r*u)),l=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=xs;){const t=[0,c-1];for(let n=0;n<u;++n){const e=i[n],r=t[0],a=t[1],s=e-i[r]>i[a]-e?r:a;let u=0,c=0,h=0,p=0,g=0;const m=1/Math.abs(i[s]-e||1);for(let t=r;t<=a;++t){const n=i[t],r=o[t],a=_s(Math.abs(e-n)*m)*d[t],s=n*a;u+=a,c+=s,h+=r*a,p+=r*s,g+=n*s}const[v,y]=us(c/u,h/u,p/u,g/u);l[n]=v+y*e,f[n]=Math.abs(o[n]-l[n]),js(i,n+1,t)}if(h===xs)break;const e=Sa(f);if(Math.abs(e)<ws)break;for(let n,r,i=0;i<u;++i)n=f[i]/(6*e),d[i]=n>=1?ws:(r=1-n*n)*r}return Es(i,l,a,s)}function _s(t){return(t=1-t*t*t)*t*t}function js(t,e,n){const r=t[e];let i=n[0],o=n[1]+1;if(!(o>=t.length))while(e>i&&t[o]-r<=r-t[i])n[0]=++i,n[1]=o,++o}function Es(t,e,n,r){const i=t.length,o=[];let a,s=0,u=0,c=[];for(;s<i;++s)a=t[s]+n,c[0]===a?c[1]+=(e[s]-c[1])/++u:(u=0,c[1]+=r,c=[a,e[s]],o.push(c));return c[1]+=r,o}const ks=.1*Math.PI/180;function As(t,e,n,r){n=n||25,r=Math.max(n,r||200);const i=e=>[e,t(e)],o=e[0],a=e[1],s=a-o,u=s/r,c=[i(o)],l=[];if(n===r){for(let t=1;t<r;++t)c.push(i(o+t/n*s));return c.push(i(a)),c}l.push(i(a));for(let h=n;--h>0;)l.push(i(o+h/n*s));let f=c[0],d=l[l.length-1];while(d){const t=i((f[0]+d[0])/2);t[0]-f[0]>=u&&Ss(f,t,d)>ks?l.push(t):(f=d,c.push(d),l.pop()),d=l[l.length-1]}return c}function Ss(t,e,n){const r=Math.atan2(n[1]-t[1],n[0]-t[0]),i=Math.atan2(e[1]-t[1],e[0]-t[0]);return Math.abs(r-i)}function Cs(t,e){let n=0,r=0;if(void 0===e)for(let i of t)null!=i&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}var Ds=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);while(++r<i)o[r]=t+r*n;return o};function Ms(t){return e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}}function Ts(t){return t&&t.length?1===t.length?t[0]:Ms(t):function(){return""}}function Ns(t,e,n){return n||t+(e?"_"+e:"")}const Fs=()=>{},$s={init:Fs,add:Fs,rem:Fs,idx:0},Ps={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||void 0===t.min)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||void 0===t.max)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},Rs=Object.keys(Ps);function Ls(t,e){return n=>Object(g["p"])({name:t,out:n||t},$s,e)}function zs(t,e){return Ps[t](e)}function Bs(t,e){return t.idx-e.idx}function Is(t){const e={};t.forEach(t=>e[t.name]=t);const n=t=>{t.req&&t.req.forEach(t=>{e[t]||n(e[t]=Ps[t]())})};return t.forEach(n),Object.values(e).sort(Bs)}function Us(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function qs(t,e){null!=t&&""!==t?t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e))):++this.missing}function Hs(t,e){null!=t&&""!==t?t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e))):--this.missing}function Ws(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function Gs(t,e){const n=e||g["y"],r=Is(t),i=t.slice().sort(Bs);function o(t){this._ops=r,this._out=i,this.cell=t,this.init()}return o.prototype.init=Us,o.prototype.add=qs,o.prototype.rem=Hs,o.prototype.set=Ws,o.prototype.get=n,o.fields=t.map(t=>t.out),o}function Ys(t){this._key=t?Object(g["u"])(t):Ki,this.reset()}Rs.forEach(t=>{Ps[t]=Ls(t,Ps[t])});const Vs=Ys.prototype;function Xs(t){pa.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Vs.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Vs.add=function(t){this._add.push(t)},Vs.rem=function(t){this._rem.push(t)},Vs.values=function(){if(this._get=null,0===this._rem.length)return this._add;const t=this._add,e=this._rem,n=this._key,r=t.length,i=e.length,o=Array(r-i),a={};let s,u,c;for(s=0;s<i;++s)a[n(e[s])]=1;for(s=0,u=0;s<r;++s)a[n(c=t[s])]?a[n(c)]=0:o[u++]=c;return this._rem=[],this._add=o},Vs.distinct=function(t){const e=this.values(),n={};let r,i=e.length,o=0;while(--i>=0)r=t(e[i])+"",Object(g["w"])(n,r)||(n[r]=1,++o);return o},Vs.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=Object(g["r"])(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},Vs.argmin=function(t){return this.extent(t)[0]||{}},Vs.argmax=function(t){return this.extent(t)[1]||{}},Vs.min=function(t){const e=this.extent(t)[0];return null!=e?t(e):void 0},Vs.max=function(t){const e=this.extent(t)[1];return null!=e?t(e):void 0},Vs.quartile=function(t){return this._get===t&&this._q||(this._q=Ma(this.values(),t),this._get=t),this._q},Vs.q1=function(t){return this.quartile(t)[0]},Vs.q2=function(t){return this.quartile(t)[1]},Vs.q3=function(t){return this.quartile(t)[2]},Vs.ci=function(t){return this._get===t&&this._ci||(this._ci=Pa(this.values(),1e3,.05,t),this._get=t),this._ci},Vs.ci0=function(t){return this.ci(t)[0]},Vs.ci1=function(t){return this.ci(t)[1]},Xs.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Rs},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},Object(g["z"])(Xs,pa,{transform(t,e){const n=this,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.modified();return n.stamp=r.stamp,n.value&&(i||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):{},e.visit(e.SOURCE,t=>n.add(t))):(n.value=n.value||n.init(t),e.visit(e.REM,t=>n.rem(t)),e.visit(e.ADD,t=>n.add(t))),r.modifies(n._outputs),n._drop=!1!==t.drop,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const t=this,e=t.value,n=t._dnames,r=n.map(()=>({})),i=n.length;function o(t){let e,o,a,s;for(e in t)for(a=t[e].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}function a(o,s,u){const c=n[u],l=r[u++];for(const n in l){const r=o?o+"|"+n:n;s[c]=l[n],u<i?a(r,s,u):e[r]||t.cell(r,s)}}o(t._prev),o(e),a("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],r={};function i(t){const n=Object(g["i"])(Object(g["g"])(t)),i=n.length;let o,a=0;for(;a<i;++a)r[o=n[a]]||(r[o]=1,e.push(o))}this._dims=Object(g["i"])(t.groupby),this._dnames=this._dims.map(t=>{const e=Object(g["h"])(t);return i(t),n.push(e),e}),this.cellkey=t.key?t.key:Ts(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=t.fields||[null],a=t.ops||["count"],s=t.as||[],u=o.length,c={};let l,f,d,h,p,m;for(u!==a.length&&Object(g["o"])("Unmatched number of fields and aggregate ops."),m=0;m<u;++m)l=o[m],f=a[m],null==l&&"count"!==f&&Object(g["o"])("Null aggregate field specified."),h=Object(g["h"])(l),p=Ns(f,h,s[m]),n.push(p),"count"!==f?(d=c[h],d||(i(l),d=c[h]=[],d.field=l,this._measures.push(d)),"count"!==f&&(this._countOnly=!1),d.push(zs(f,p))):this._counts.push(p);return this._measures=this._measures.map(t=>Gs(t,t.field)),{}},cellkey:Ts(),cell(t,e){let n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const t=this._measures,e=t.length;n.agg=Array(e);for(let r=0;r<e;++r)n.agg[r]=new t[r](n)}return n.store&&(n.data=new Ys),n},newtuple(t,e){const n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](t);return e?ro(e.tuple,o):to(o)},clean(){const t=this.value;for(const e in t)0===t[e].num&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let r=0,i=n.length;r<i;++r)e[n[r]]=t.num;if(!this._countOnly){const n=t.agg;for(let t=0,r=n.length;t<r;++t)n[t].set(e)}return e},changes(t){const e=this._adds,n=this._mods,r=this._prev,i=this._drop,o=t.add,a=t.rem,s=t.mod;let u,c,l,f;if(r)for(c in r)u=r[c],i&&!u.num||a.push(u.tuple);for(l=0,f=this._alen;l<f;++l)o.push(this.celltuple(e[l])),e[l]=null;for(l=0,f=this._mlen;l<f;++l)u=n[l],(0===u.num&&i?a:s).push(this.celltuple(u)),n[l]=null;return this._alen=this._mlen=0,this._prev=null,t}});const Js=1e-14;function Qs(t){pa.call(this,null,t)}function Ks(t,e,n){const r=t;let i=e||[],o=n||[],a={},s=0;return{add:t=>o.push(t),remove:t=>a[r(t)]=++s,size:()=>i.length,data:(t,e)=>(s&&(i=i.filter(t=>!a[r(t)]),a={},s=0),e&&t&&i.sort(t),o.length&&(i=t?Object(g["O"])(t,i,o.sort(t)):i.concat(o),o=[]),i)}}function Zs(t){pa.call(this,[],t)}function tu(t){go.call(this,null,eu,t)}function eu(t){return this.value&&!t.modified()?this.value:Object(g["l"])(t.fields,t.orders)}function nu(t){pa.call(this,null,t)}function ru(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}function iu(t){pa.call(this,null,t)}function ou(t,e,n,r){for(var i,o,a=[],s={},u=t.length,c=0;c<u;++c)for(s[e]=o=t[c],i=0;i<u;++i)s[n]=t[i],r(s)&&(a.push(to(s)),s={},s[e]=o);return a}Qs.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Object(g["z"])(Qs,pa,{transform(t,e){const n=!1!==t.interval,r=this._bins(t),i=r.start,o=r.step,a=t.as||["bin0","bin1"],s=a[0],u=a[1];let c;return t.modified()?(e=e.reflow(!0),c=e.SOURCE):c=e.modified(Object(g["g"])(t.field))?e.ADD_MOD:e.ADD,e.visit(c,n?t=>{const e=r(t);t[s]=e,t[u]=null==e?null:i+o*(1+(e-i)/o)}:t=>t[s]=r(t)),e.modifies(n?a:s)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=Na(t),r=n.step;let i,o,a=n.start,s=a+Math.ceil((n.stop-a)/r)*r;null!=(i=t.anchor)&&(o=i-(a+r*Math.floor((i-a)/r)),a+=o,s+=o);const u=function(t){let n=Object(g["eb"])(e(t));return null==n?null:n<a?-1/0:n>s?1/0:(n=Math.max(a,Math.min(n,s-r)),a+r*Math.floor(Js+(n-a)/r))};return u.start=a,u.stop=n.stop,u.step=r,this.value=Object(g["f"])(u,Object(g["g"])(e),t.name||"bin_"+Object(g["h"])(e))}}),Zs.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(g["z"])(Zs,pa,{transform(t,e){const n=e.fork(e.ALL),r=Ks(Ki,this.value,n.materialize(n.ADD).add),i=t.sort,o=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(io(i),o),e.source&&e.source.root&&(this.value.root=e.source.root),n}}),Object(g["z"])(tu,go),nu.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},Object(g["z"])(nu,pa,{transform(t,e){const n=e=>n=>{for(var r,i=ru(s(n),t.case,o)||[],u=0,c=i.length;u<c;++u)a.test(r=i[u])||e(r)},r=this._parameterCheck(t,e),i=this._counts,o=this._match,a=this._stop,s=t.field,u=t.as||["text","count"],c=n(t=>i[t]=1+(i[t]||0)),l=n(t=>i[t]-=1);return r?e.visit(e.SOURCE,c):(e.visit(e.ADD,c),e.visit(e.REM,l)),this._finish(e,u)},_parameterCheck(t,e){let n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,r=this._tuples||(this._tuples={}),i=e[0],o=e[1],a=t.fork(t.NO_SOURCE|t.NO_FIELDS);let s,u,c;for(s in n)u=r[s],c=n[s]||0,!u&&c?(r[s]=u=to({}),u[i]=s,u[o]=c,a.add.push(u)):0===c?(u&&a.rem.push(u),n[s]=null,r[s]=null):u[o]!==c&&(u[o]=c,a.mod.push(u));return a.modifies(e)}}),iu.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(g["z"])(iu,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.as||["a","b"],i=r[0],o=r[1],a=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=e.materialize(e.SOURCE).source,n.add=this.value=ou(s,i,o,t.filter||g["ib"])):n.mod=s,n.source=this.value,n.modifies(r)}});const au={kde:Ja,mixture:ns,normal:Xa,lognormal:es,uniform:ss},su="distributions",uu="function",cu="field";function lu(t,e){const n=t[uu];Object(g["w"])(au,n)||Object(g["o"])("Unknown distribution function: "+n);const r=au[n]();for(const i in t)i===cu?r.data((t.from||e()).map(t[i])):i===su?r[i](t[i].map(t=>lu(t,e))):typeof r[i]===uu&&r[i](t[i]);return r}function fu(t){pa.call(this,null,t)}const du=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],hu={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:du},{name:"weights",type:"number",array:!0}]};function pu(t){return()=>t.materialize(t.SOURCE).source}function gu(t,e){return t?t.map((t,n)=>e[n]||Object(g["h"])(t)):null}function mu(t,e,n){const r=[],i=t=>t(u);let o,a,s,u,c,l;if(null==e)r.push(t.map(n));else for(o={},a=0,s=t.length;a<s;++a)u=t[a],c=e.map(i),l=o[c],l||(o[c]=l=[],l.dims=c,r.push(l)),l.push(n(u));return r}fu.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:du.concat(hu)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(g["z"])(fu,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=lu(t.distribution,pu(e)),i=t.steps||t.minsteps||25,o=t.steps||t.maxsteps||200;let a=t.method||"pdf";"pdf"!==a&&"cdf"!==a&&Object(g["o"])("Invalid density method: "+a),t.extent||r.data||Object(g["o"])("Missing density extent parameter."),a=r[a];const s=t.as||["value","density"],u=t.extent||Object(g["q"])(r.data()),c=As(a,u,i,o).map(t=>{const e={};return e[s[0]]=t[0],e[s[1]]=t[1],to(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const vu="bin";function yu(t){pa.call(this,null,t)}yu.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:vu}]};const bu=(t,e)=>Object(g["Z"])(Object(g["q"])(t,e))/30;function xu(t){go.call(this,null,wu,t),this.modified(!0)}function wu(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:Object(g["f"])(n=>e(n,t),Object(g["g"])(e),Object(g["h"])(e))}function Ou(t){pa.call(this,[void 0,void 0],t)}function _u(t,e){go.call(this,t),this.parent=e,this.count=0}function ju(t){pa.call(this,{},t),this._keys=Object(g["t"])();const e=this._targets=[];e.active=0,e.forEach=t=>{for(let n=0,r=e.active;n<r;++n)t(e[n],n,e)}}function Eu(t){go.call(this,null,ku,t)}function ku(t){return this.value&&!t.modified()?this.value:Object(g["B"])(t.name)?Object(g["i"])(t.name).map(t=>Object(g["u"])(t)):Object(g["u"])(t.name,t.as)}function Au(t){pa.call(this,Object(g["t"])(),t)}function Su(t){pa.call(this,[],t)}function Cu(t){pa.call(this,[],t)}function Du(t){pa.call(this,null,t)}function Mu(t){pa.call(this,[],t)}Object(g["z"])(yu,pa,{transform(t,e){if(this.value&&!t.modified()&&!e.changed())return e;const n=e.materialize(e.SOURCE).source,r=mu(e.source,t.groupby,g["y"]),i=t.smooth||!1,o=t.field,a=t.step||bu(n,o),s=io((t,e)=>o(t)-o(e)),u=t.as||vu,c=r.length;let l,f=1/0,d=-1/0,h=0;for(;h<c;++h){const t=r[h].sort(s);l=-1;for(const e of Ra(t,a,i,o))e<f&&(f=e),e>d&&(d=e),t[++l][u]=e}return this.value={start:f,stop:d,step:a},e.reflow(!0).modifies(u)}}),Object(g["z"])(xu,go),Ou.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(g["z"])(Ou,pa,{transform(t,e){const n=this.value,r=t.field,i=e.changed()||e.modified(r.fields)||t.modified("field");let o=n[0],a=n[1];if((i||null==o)&&(o=1/0,a=-1/0),e.visit(i?e.SOURCE:e.ADD,t=>{const e=Object(g["eb"])(r(t));null!=e&&(e<o&&(o=e),e>a&&(a=e))}),!Number.isFinite(o)||!Number.isFinite(a)){let t=Object(g["h"])(r);t&&(t=' for field "'.concat(t,'"')),e.dataflow.warn("Infinite extent".concat(t,": [").concat(o,", ").concat(a,"]")),o=a=void 0}this.value=[o,a]}}),Object(g["z"])(_u,go,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}}),Object(g["z"])(ju,pa,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,r){const i=this.value;let o,a,s=Object(g["w"])(i,t)&&i[t];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[t])&&a.tuple,o=n.dataflow,s=new _u(n.fork(n.NO_SOURCE),this),o.add(s).connect(e(o,t,a)),i[t]=s,this.activate(s)),s},clean(){const t=this.value;for(const e in t)if(0===t[e].count){const n=t[e].detachSubflow;n&&n(),delete t[e]}},initTargets(){const t=this._targets,e=t.length;for(let n=0;n<e&&null!=t[n];++n)t[n]=null;t.active=0},transform(t,e){const n=e.dataflow,r=t.key,i=t.subflow,o=this._keys,a=t.modified("key"),s=t=>this.subflow(t,i,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,t=>{const e=Ki(t),n=o.get(e);void 0!==n&&(o.delete(e),s(n).rem(t))}),e.visit(e.ADD,t=>{const e=r(t);o.set(Ki(t),e),s(e).add(t)}),a||e.modified(r.fields)?e.visit(e.MOD,t=>{const e=Ki(t),n=o.get(e),i=r(t);n===i?s(i).mod(t):(o.set(e,i),s(n).rem(t),s(i).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,t=>{s(o.get(Ki(t))).mod(t)}),a&&e.visit(e.REFLOW,t=>{const e=Ki(t),n=o.get(e),i=r(t);n!==i&&(o.set(e,i),s(n).rem(t),s(i).add(t))}),e.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),e}}),Object(g["z"])(Eu,go),Au.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(g["z"])(Au,pa,{transform(t,e){const n=e.dataflow,r=this.value,i=e.fork(),o=i.add,a=i.rem,s=i.mod,u=t.expr;let c=!0;function l(e){const n=Ki(e),i=u(e,t),l=r.get(n);i&&l?(r.delete(n),o.push(e)):i||l?c&&i&&!l&&s.push(e):(r.set(n,1),a.push(e))}return e.visit(e.REM,t=>{const e=Ki(t);r.has(e)?r.delete(e):a.push(t)}),e.visit(e.ADD,e=>{u(e,t)?o.push(e):r.set(Ki(e),1)}),e.visit(e.MOD,l),t.modified()&&(c=!1,e.visit(e.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),Su.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Object(g["z"])(Su,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=gu(r,t.as||[]),o=t.index||null,a=i.length;return n.rem=this.value,e.visit(e.SOURCE,t=>{const e=r.map(e=>e(t)),s=e.reduce((t,e)=>Math.max(t,e.length),0);let u,c,l,f=0;for(;f<s;++f){for(c=eo(t),u=0;u<a;++u)c[i[u]]=null==(l=e[u][f])?null:l;o&&(c[o]=f),n.add.push(c)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}}),Cu.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(g["z"])(Cu,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(g["h"]),o=t.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,e.visit(e.SOURCE,t=>{for(let e,o=0;o<u;++o)e=eo(t),e[a]=i[o],e[s]=r[o](t),n.add.push(e)}),this.value=n.source=n.add,n.modifies(o)}}),Du.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(g["z"])(Du,pa,{transform(t,e){const n=t.expr,r=t.as,i=t.modified(),o=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)||e.modified(r)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(o,e=>e[r]=n(e,t))}}),Object(g["z"])(Mu,pa,{transform(t,e){const n=e.fork(e.ALL),r=t.generator;let i,o,a,s=this.value,u=t.size-s.length;if(u>0){for(i=[];--u>=0;)i.push(a=to(r(t))),s.push(a);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else o=s.slice(0,-u),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,s=s.slice(-u);return n.source=this.value=s,n}});const Tu={value:"value",median:Sa,mean:Cs,min:ba,max:ya},Nu=[];function Fu(t){pa.call(this,[],t)}function $u(t){var e,n=t.method||Tu.value;if(null!=Tu[n])return n===Tu.value?(e=void 0!==t.value?t.value:0,()=>e):Tu[n];Object(g["o"])("Unrecognized imputation method: "+n)}function Pu(t){const e=t.field;return t=>t?e(t):NaN}function Ru(t,e,n,r){var i,o,a,s,u,c,l,f,d=t=>t(f),h=[],p=r?r.slice():[],g={},m={};for(p.forEach((t,e)=>g[t]=e+1),s=0,l=t.length;s<l;++s)f=t[s],c=n(f),u=g[c]||(g[c]=p.push(c)),o=(i=e?e.map(d):Nu)+"",(a=m[o])||(a=m[o]=[],h.push(a),a.values=i),a[u-1]=f;return h.domain=p,h}function Lu(t){Xs.call(this,t)}function zu(t){pa.call(this,null,t)}function Bu(t){go.call(this,null,Iu,t)}function Iu(t){return this.value&&!t.modified()?this.value:Object(g["K"])(t.fields,t.flat)}function Uu(t){pa.call(this,[],t),this._pending=null}function qu(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function Hu(t,e,n){n.forEach(to);const r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.source=r.add=n,t._pending=null,r.rem.length&&r.clean(!0),r}function Wu(t){pa.call(this,{},t)}function Gu(t){go.call(this,null,Yu,t)}function Yu(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let r,i,o=1/0,a=-1/0;for(r=0;r<n;++r)i=e[r],i[0]<o&&(o=i[0]),i[1]>a&&(a=i[1]);return[o,a]}function Vu(t){go.call(this,null,Xu,t)}function Xu(t){return this.value&&!t.modified()?this.value:t.values.reduce((t,e)=>t.concat(e),[])}function Ju(t){pa.call(this,null,t)}function Qu(t){Xs.call(this,t)}function Ku(t,e){const n=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",o=Object(g["g"])(n).concat(Object(g["g"])(r)),a=tc(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:a.map(()=>i),fields:a.map(t=>Zu(t,n,r,o)),as:a.map(t=>t+""),modified:t.modified.bind(t)}}function Zu(t,e,n,r){return Object(g["f"])(r=>e(r)===t?n(r):NaN,r,t+"")}function tc(t,e,n){const r={},i=[];return n.visit(n.SOURCE,e=>{const n=t(e);r[n]||(r[n]=1,i.push(n))}),i.sort(g["j"]),e?i.slice(0,e):i}function ec(t){ju.call(this,t)}function nc(t){pa.call(this,null,t)}function rc(t,e,n,r){for(let i=0,o=n.length;i<o;++i)e[r[i]]=n[i](t);return e}function ic(t){pa.call(this,null,t)}function oc(t){pa.call(this,null,t)}Fu.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(g["z"])(Fu,pa,{transform(t,e){var n,r,i,o,a,s,u,c,l,f,d=e.fork(e.ALL),h=$u(t),p=Pu(t),m=Object(g["h"])(t.field),v=Object(g["h"])(t.key),y=(t.groupby||[]).map(g["h"]),b=Ru(e.source,t.groupby,t.key,t.keyvals),x=[],w=this.value,O=b.domain.length;for(a=0,c=b.length;a<c;++a)for(n=b[a],i=n.values,r=NaN,u=0;u<O;++u)if(null==n[u]){for(o=b.domain[u],f={_impute:!0},s=0,l=i.length;s<l;++s)f[y[s]]=i[s];f[v]=o,f[m]=Number.isNaN(r)?r=h(n,p):r,x.push(to(f))}return x.length&&(d.add=d.materialize(d.ADD).add.concat(x)),w.length&&(d.rem=d.materialize(d.REM).rem.concat(w)),this.value=x,d}}),Lu.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Rs},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},Object(g["z"])(Lu,Xs,{transform(t,e){const n=this,r=t.modified();let i;return n.value&&(r||e.modified(n._inputs,!0))?(i=n.value=r?n.init(t):{},e.visit(e.SOURCE,t=>n.add(t))):(i=n.value=n.value||this.init(t),e.visit(e.REM,t=>n.rem(t)),e.visit(e.ADD,t=>n.add(t))),n.changes(),e.visit(e.SOURCE,t=>{Object(g["p"])(t,i[n.cellkey(t)].tuple)}),e.reflow(r).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(t[n]),t[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}}),zu.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(g["z"])(zu,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=mu(r,t.groupby,t.field),o=(t.groupby||[]).map(g["h"]),a=t.bandwidth,s=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],c=[];let l=t.extent,f=t.steps||t.minsteps||25,d=t.steps||t.maxsteps||200;"pdf"!==s&&"cdf"!==s&&Object(g["o"])("Invalid density method: "+s),"shared"===t.resolve&&(l||(l=Object(g["q"])(r,t.field)),f=d=t.steps||d),i.forEach(e=>{const n=Ja(e,a)[s],r=t.counts?e.length:1,i=l||Object(g["q"])(e);As(n,i,f,d).forEach(t=>{const n={};for(let r=0;r<o.length;++r)n[o[r]]=e.dims[r];n[u[0]]=t[0],n[u[1]]=t[1]*r,c.push(to(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),Object(g["z"])(Bu,go),Object(g["z"])(Uu,pa,{transform(t,e){const n=e.dataflow;if(this._pending)return Hu(this,e,this._pending);if(qu(t))return e.StopPropagation;if(t.values)return Hu(this,e,n.parse(t.values,t.format));if(t.async){const e=n.request(t.url,t.format).then(t=>(this._pending=Object(g["i"])(t.data),t=>t.touch(this)));return{async:e}}return n.request(t.url,t.format).then(t=>Hu(this,e,Object(g["i"])(t.data)))}}),Wu.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(g["z"])(Wu,pa,{transform(t,e){const n=t.fields,r=t.index,i=t.values,o=null==t.default?null:t.default,a=t.modified(),s=n.length;let u,c,l,f=a?e.SOURCE:e.ADD,d=e,h=t.as;return i?(c=i.length,s>1&&!h&&Object(g["o"])('Multi-field lookup requires explicit "as" parameter.'),h&&h.length!==s*c&&Object(g["o"])('The "as" parameter has too few output field names.'),h=h||i.map(g["h"]),u=function(t){for(var e,a,u=0,l=0;u<s;++u)if(a=r.get(n[u](t)),null==a)for(e=0;e<c;++e,++l)t[h[l]]=o;else for(e=0;e<c;++e,++l)t[h[l]]=i[e](a)}):(h||Object(g["o"])("Missing output field names."),u=function(t){for(var e,i=0;i<s;++i)e=r.get(n[i](t)),t[h[i]]=null==e?o:e}),a?d=e.reflow(!0):(l=n.some(t=>e.modified(t.fields)),f|=l?e.MOD:0),e.visit(f,u),d.modifies(h)}}),Object(g["z"])(Gu,go),Object(g["z"])(Vu,go),Object(g["z"])(Ju,pa,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),Qu.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Rs,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},Object(g["z"])(Qu,Xs,{_transform:Xs.prototype.transform,transform(t,e){return this._transform(Ku(t,e),e)}}),Object(g["z"])(ec,ju,{transform(t,e){const n=t.subflow,r=t.field,i=t=>this.subflow(Ki(t),n,e,t);return(t.modified("field")||r&&e.modified(Object(g["g"])(r)))&&Object(g["o"])("PreFacet does not support field modification."),this.initTargets(),r?(e.visit(e.MOD,t=>{const e=i(t);r(t).forEach(t=>e.mod(t))}),e.visit(e.ADD,t=>{const e=i(t);r(t).forEach(t=>e.add(to(t)))}),e.visit(e.REM,t=>{const e=i(t);r(t).forEach(t=>e.rem(t))})):(e.visit(e.MOD,t=>i(t).mod(t)),e.visit(e.ADD,t=>i(t).add(t)),e.visit(e.REM,t=>i(t).rem(t))),e.clean()&&e.runAfter(()=>this.clean()),e}}),nc.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(g["z"])(nc,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=gu(t.fields,t.as||[]),o=r?(t,e)=>rc(t,e,r,i):no;let a;return this.value?a=this.value:(e=e.addAll(),a=this.value={}),e.visit(e.REM,t=>{const e=Ki(t);n.rem.push(a[e]),a[e]=null}),e.visit(e.ADD,t=>{const e=o(t,to({}));a[Ki(t)]=e,n.add.push(e)}),e.visit(e.MOD,t=>{n.mod.push(o(t,a[Ki(t)]))}),n}}),Object(g["z"])(ic,pa,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}}),oc.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const ac=1e-14;function sc(t){pa.call(this,null,t)}function uc(t){pa.call(this,[],t),this.count=0}function cc(t){pa.call(this,null,t)}function lc(t){pa.call(this,null,t),this.modified(!0)}function fc(t){pa.call(this,null,t)}Object(g["z"])(oc,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const i=e.materialize(e.SOURCE).source,o=mu(i,t.groupby,t.field),a=(t.groupby||[]).map(g["h"]),s=[],u=t.step||.01,c=t.probs||Ds(u/2,1-ac,u),l=c.length;return o.forEach(t=>{const e=Da(t,c);for(let n=0;n<l;++n){const i={};for(let e=0;e<a.length;++e)i[a[e]]=t.dims[e];i[r[0]]=c[n],i[r[1]]=e[n],s.push(to(i))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}}),Object(g["z"])(sc,pa,{transform(t,e){let n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,t=>{const e=Ki(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,t=>{const e=eo(t);r[Ki(t)]=e,n.add.push(e)}),e.visit(e.MOD,t=>{const e=r[Ki(t)];for(const r in t)e[r]=t[r],n.modifies(r);n.mod.push(e)})),n}}),uc.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(g["z"])(uc,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,o=this.value.reduce((t,e)=>(t[Ki(e)]=1,t),{});let a=this.value,s=this.count,u=0;function c(t){let e,r;a.length<i?a.push(t):(r=~~((s+1)*Fa()),r<a.length&&r>=u&&(e=a[r],o[Ki(e)]&&n.rem.push(e),a[r]=t)),++s}if(e.rem.length&&(e.visit(e.REM,t=>{const e=Ki(t);o[e]&&(o[e]=-1,n.rem.push(t)),--s}),a=a.filter(t=>-1!==o[Ki(t)])),(e.rem.length||r)&&a.length<i&&e.source&&(u=s=a.length,e.visit(e.SOURCE,t=>{o[Ki(t)]||c(t)}),u=-1),r&&a.length>i){const t=a.length-i;for(let e=0;e<t;++e)o[Ki(a[e])]=-1,n.rem.push(a[e]);a=a.slice(t)}return e.mod.length&&e.visit(e.MOD,t=>{o[Ki(t)]&&n.mod.push(t)}),e.add.length&&e.visit(e.ADD,c),(e.add.length||u<0)&&(n.add=a.filter(t=>!o[Ki(t)])),this.count=s,this.value=n.source=a,n}}),cc.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(g["z"])(cc,pa,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=Ds(t.start,t.stop,t.step||1).map(t=>{const e={};return e[r]=t,to(e)}),n.add=e.add.concat(this.value),n}}),Object(g["z"])(lc,pa,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});const dc=["unit0","unit1"];function hc(t){pa.call(this,Object(g["t"])(),t)}function pc(t){pa.call(this,null,t)}function gc(t,e,n,r){const i=mc[t](e,n);return{init:i.init||g["mb"],update:function(t,e){e[r]=i.next(t)}}}fc.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Qe,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:dc}]},Object(g["z"])(fc,pa,{transform(t,e){const n=t.field,r=!1!==t.interval,i="utc"===t.timezone,o=this._floor(t,e),a=(i?Cn:Sn)(o.unit).offset,s=t.as||dc,u=s[0],c=s[1],l=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=e.ADD;return(t.modified()||e.modified(Object(g["g"])(n)))&&(e=e.reflow(!0),h=e.SOURCE,f=1/0,d=-1/0),e.visit(h,t=>{const e=n(t);let i,s;null==e?(t[u]=null,r&&(t[c]=null)):(t[u]=i=s=o(e),r&&(t[c]=s=a(i,l)),i<f&&(f=i),s>d&&(d=s))}),o.start=f,o.stop=d,e.modifies(r?s:u)},_floor(t,e){const n="utc"===t.timezone,{units:r,step:i}=t.units?{units:t.units,step:t.step||1}:Kn({extent:t.extent||Object(g["q"])(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),o=Ze(r),a=this.value||{},s=(n?En:On)(o,i);return s.unit=Object(g["W"])(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}}),Object(g["z"])(hc,pa,{transform(t,e){const n=e.dataflow,r=t.field,i=this.value,o=t=>i.set(r(t),t);let a=!0;return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,o)):e.changed()?(e.visit(e.REM,t=>i.delete(r(t))),e.visit(e.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()}}),Object(g["z"])(pc,pa,{transform(t,e){const n=!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields);n&&(this.value=(t.sort?e.source.slice().sort(io(t.sort)):e.source).map(t.field))}});const mc={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){const t=mc.rank(),e=t.next;return{init:t.init,next:t=>(e(t)-1)/(t.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,r=e.compare;let i=e.index;if(t<i){while(i+1<n.length&&!r(n[i],n[i+1]))++i;t=i}return(1+t)/n.length}}},ntile:function(t,e){e=+e,e>0||Object(g["o"])("ntile num must be greater than zero.");const n=mc.cume_dist(),r=n.next;return{init:n.init,next:t=>Math.ceil(e*r(t))}},lag:function(t,e){return e=+e||1,{next:n=>{const r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||Object(g["o"])("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const r=t(n.data[n.index]);return null!=r?e=r:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:r=>{const i=r.data;return r.index<=n?e:(n=vc(t,i,r.index))<0?(n=i.length,e=null):e=t(i[n])}}}};function vc(t,e,n){for(let r=e.length;n<r;++n){const r=t(e[n]);if(null!=r)return n}return-1}const yc=Object.keys(mc);function bc(t){const e=Object(g["i"])(t.ops),n=Object(g["i"])(t.fields),r=Object(g["i"])(t.params),i=Object(g["i"])(t.as),o=this.outputs=[],a=this.windows=[],s={},u={},c=[],l=[];let f=!0;function d(t){Object(g["i"])(Object(g["g"])(t)).forEach(t=>s[t]=1)}d(t.sort),e.forEach((t,e)=>{const s=n[e],h=Object(g["h"])(s),p=Ns(t,h,i[e]);if(d(s),o.push(p),Object(g["w"])(mc,t))a.push(gc(t,n[e],r[e],p));else{if(null==s&&"count"!==t&&Object(g["o"])("Null aggregate field specified."),"count"===t)return void c.push(p);f=!1;let e=u[h];e||(e=u[h]=[],e.field=s,l.push(e)),e.push(zs(t,p))}}),(c.length||l.length)&&(this.cell=wc(l,c,f)),this.inputs=Object.keys(s)}const xc=bc.prototype;function wc(t,e,n){t=t.map(t=>Gs(t,t.field));const r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new t[a](r);if(r.store)var s=r.data=new Ys;return r.add=function(t){if(r.num+=1,!n){s&&s.add(t);for(let e=0;e<i;++e)o[e].add(o[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){s&&s.rem(t);for(let e=0;e<i;++e)o[e].rem(o[e].get(t),t)}},r.set=function(t){let i,a;for(s&&s.values(),i=0,a=e.length;i<a;++i)t[e[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(t)},r.init=function(){r.num=0,s&&s.reset();for(let t=0;t<i;++t)o[t].init()},r}function Oc(t){pa.call(this,{},t),this._mlen=0,this._mods=[]}function _c(t,e,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=t.data(n),u=s.length,c=o?Le(i):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||Object(g["m"])(-1)};e.init();for(let f=0;f<u;++f)jc(l,a,f,u),o&&Ec(l,c),e.update(l,s[f])}function jc(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function Ec(t,e){const n=t.i0,r=t.i1-1,i=t.compare,o=t.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(t.i0=e.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(t.i1=e.right(o,o[r]))}function kc(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ac(t){this._context=t}xc.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()},xc.update=function(t,e){const n=this.cell,r=this.windows,i=t.data,o=r&&r.length;let a;if(n){for(a=t.p0;a<t.i0;++a)n.rem(i[a]);for(a=t.p1;a<t.i1;++a)n.add(i[a]);n.set(e)}for(a=0;a<o;++a)r[a].update(t,e)},Oc.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:yc.concat(Rs)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},Object(g["z"])(Oc,pa,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),r=io(t.sort),i=Ts(t.groupby),o=t=>this.group(i(t));let a=this.state;a&&!n||(a=this.state=new bc(t)),n||e.modified(a.inputs)?(this.value={},e.visit(e.SOURCE,t=>o(t).add(t))):(e.visit(e.REM,t=>o(t).remove(t)),e.visit(e.ADD,t=>o(t).add(t)));for(let s=0,u=this._mlen;s<u;++s)_c(this._mods[s],a,r,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(a.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=Ks(Ki),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}}),Ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kc(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Sc=function(t){return new Ac(t)},Cc=function(){};function Dc(t){this._context=t}Dc.prototype={areaStart:Cc,areaEnd:Cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:kc(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Mc=function(t){return new Dc(t)};function Tc(t){this._context=t}Tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:kc(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Nc=function(t){return new Tc(t)};function Fc(t,e){this._basis=new Ac(t),this._beta=e}Fc.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0){var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;while(++u<=n)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s))}this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var $c=function t(e){function n(t){return 1===e?new Ac(t):new Fc(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Pc(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Rc(t,e){this._context=t,this._k=(1-e)/6}Rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Pc(this,this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Pc(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Lc=function t(e){function n(t){return new Rc(t,e)}return n.tension=function(e){return t(+e)},n}(0);function zc(t,e){this._context=t,this._k=(1-e)/6}zc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Pc(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bc=function t(e){function n(t){return new zc(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ic(t,e){this._context=t,this._k=(1-e)/6}Ic.prototype={areaStart:Cc,areaEnd:Cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Pc(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Uc=function t(e){function n(t){return new Ic(t,e)}return n.tension=function(e){return t(+e)},n}(0),qc=Math.abs,Hc=Math.atan2,Wc=Math.cos,Gc=Math.max,Yc=Math.min,Vc=Math.sin,Xc=Math.sqrt,Jc=1e-12,Qc=Math.PI,Kc=Qc/2,Zc=2*Qc;function tl(t){return t>1?0:t<-1?Qc:Math.acos(t)}function el(t){return t>=1?Kc:t<=-1?-Kc:Math.asin(t)}function nl(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Jc){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Jc){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function rl(t,e){this._context=t,this._alpha=e}rl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:nl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var il=function t(e){function n(t){return e?new rl(t,e):new Rc(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function ol(t,e){this._context=t,this._alpha=e}ol.prototype={areaStart:Cc,areaEnd:Cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:nl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var al=function t(e){function n(t){return e?new ol(t,e):new Ic(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function sl(t,e){this._context=t,this._alpha=e}sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:nl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ul=function t(e){function n(t){return e?new sl(t,e):new zc(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function cl(t){this._context=t}cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};var ll=function(t){return new cl(t)};function fl(t){this._context=t}fl.prototype={areaStart:Cc,areaEnd:Cc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var dl=function(t){return new fl(t)};function hl(t){return t<0?-1:1}function pl(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(hl(o)+hl(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function gl(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ml(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function vl(t){this._context=t}function yl(t){this._context=new bl(t)}function bl(t){this._context=t}function xl(t){return new vl(t)}function wl(t){return new yl(t)}function Ol(t){this._context=t}function _l(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}vl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ml(this,this._t0,gl(this,this._t0));break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ml(this,gl(this,n=pl(this,t,e)),n);break;default:ml(this,this._t0,n=pl(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(yl.prototype=Object.create(vl.prototype)).point=function(t,e){vl.prototype.point.call(this,e,t)},bl.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Ol.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=_l(t),i=_l(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var jl=function(t){return new Ol(t)};function El(t,e){this._context=t,this._t=e}El.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}this._x=t,this._y=e}};var kl=function(t){return new El(t,.5)};function Al(t){return new El(t,0)}function Sl(t){return new El(t,1)}const Cl=Math.PI,Dl=2*Cl,Ml=1e-6,Tl=Dl-Ml;function Nl(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Fl(){return new Nl}Nl.prototype=Fl.prototype={constructor:Nl,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>Ml)if(Math.abs(l*s-u*c)>Ml&&i){var d=n-o,h=r-a,p=s*s+u*u,g=d*d+h*h,m=Math.sqrt(p),v=Math.sqrt(f),y=i*Math.tan((Cl-Math.acos((p+f-g)/(2*m*v)))/2),b=y/v,x=y/m;Math.abs(b-1)>Ml&&(this._+="L"+(t+b*c)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>c*h)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,n=+n,o=!!o;var a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Ml||Math.abs(this._y1-c)>Ml)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%Dl+Dl),f>Tl?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):f>Ml&&(this._+="A"+n+","+n+",0,"+ +(f>=Cl)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var $l=Fl,Pl=function(t){return function(){return t}};function Rl(t){return t.innerRadius}function Ll(t){return t.outerRadius}function zl(t){return t.startAngle}function Bl(t){return t.endAngle}function Il(t){return t&&t.padAngle}function Ul(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,f=s-o,d=f*u-l*c;if(!(d*d<Jc))return d=(l*(e-o)-f*(t-i))/d,[t+d*u,e+d*c]}function ql(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/Xc(s*s+u*u),l=c*u,f=-c*s,d=t+l,h=e+f,p=n+l,g=r+f,m=(d+p)/2,v=(h+g)/2,y=p-d,b=g-h,x=y*y+b*b,w=i-o,O=d*g-p*h,_=(b<0?-1:1)*Xc(Gc(0,w*w*x-O*O)),j=(O*b-y*_)/x,E=(-O*y-b*_)/x,k=(O*b+y*_)/x,A=(-O*y+b*_)/x,S=j-m,C=E-v,D=k-m,M=A-v;return S*S+C*C>D*D+M*M&&(j=k,E=A),{cx:j,cy:E,x01:-l,y01:-f,x11:j*(i/w-1),y11:E*(i/w-1)}}var Hl=function(){var t=Rl,e=Ll,n=Pl(0),r=null,i=zl,o=Bl,a=Il,s=null;function u(){var u,c,l=+t.apply(this,arguments),f=+e.apply(this,arguments),d=i.apply(this,arguments)-Kc,h=o.apply(this,arguments)-Kc,p=qc(h-d),g=h>d;if(s||(s=u=$l()),f<l&&(c=f,f=l,l=c),f>Jc)if(p>Zc-Jc)s.moveTo(f*Wc(d),f*Vc(d)),s.arc(0,0,f,d,h,!g),l>Jc&&(s.moveTo(l*Wc(h),l*Vc(h)),s.arc(0,0,l,h,d,g));else{var m,v,y=d,b=h,x=d,w=h,O=p,_=p,j=a.apply(this,arguments)/2,E=j>Jc&&(r?+r.apply(this,arguments):Xc(l*l+f*f)),k=Yc(qc(f-l)/2,+n.apply(this,arguments)),A=k,S=k;if(E>Jc){var C=el(E/l*Vc(j)),D=el(E/f*Vc(j));(O-=2*C)>Jc?(C*=g?1:-1,x+=C,w-=C):(O=0,x=w=(d+h)/2),(_-=2*D)>Jc?(D*=g?1:-1,y+=D,b-=D):(_=0,y=b=(d+h)/2)}var M=f*Wc(y),T=f*Vc(y),N=l*Wc(w),F=l*Vc(w);if(k>Jc){var $,P=f*Wc(b),R=f*Vc(b),L=l*Wc(x),z=l*Vc(x);if(p<Qc&&($=Ul(M,T,L,z,P,R,N,F))){var B=M-$[0],I=T-$[1],U=P-$[0],q=R-$[1],H=1/Vc(tl((B*U+I*q)/(Xc(B*B+I*I)*Xc(U*U+q*q)))/2),W=Xc($[0]*$[0]+$[1]*$[1]);A=Yc(k,(l-W)/(H-1)),S=Yc(k,(f-W)/(H+1))}}_>Jc?S>Jc?(m=ql(L,z,M,T,f,S,g),v=ql(P,R,N,F,f,S,g),s.moveTo(m.cx+m.x01,m.cy+m.y01),S<k?s.arc(m.cx,m.cy,S,Hc(m.y01,m.x01),Hc(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,S,Hc(m.y01,m.x01),Hc(m.y11,m.x11),!g),s.arc(0,0,f,Hc(m.cy+m.y11,m.cx+m.x11),Hc(v.cy+v.y11,v.cx+v.x11),!g),s.arc(v.cx,v.cy,S,Hc(v.y11,v.x11),Hc(v.y01,v.x01),!g))):(s.moveTo(M,T),s.arc(0,0,f,y,b,!g)):s.moveTo(M,T),l>Jc&&O>Jc?A>Jc?(m=ql(N,F,P,R,l,-A,g),v=ql(M,T,L,z,l,-A,g),s.lineTo(m.cx+m.x01,m.cy+m.y01),A<k?s.arc(m.cx,m.cy,A,Hc(m.y01,m.x01),Hc(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,A,Hc(m.y01,m.x01),Hc(m.y11,m.x11),!g),s.arc(0,0,l,Hc(m.cy+m.y11,m.cx+m.x11),Hc(v.cy+v.y11,v.cx+v.x11),g),s.arc(v.cx,v.cy,A,Hc(v.y11,v.x11),Hc(v.y01,v.x01),!g))):s.arc(0,0,l,w,x,g):s.lineTo(N,F)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Qc/2;return[Wc(r)*n,Vc(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:Pl(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:Pl(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:Pl(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Pl(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:Pl(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"===typeof t?t:Pl(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"===typeof t?t:Pl(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u},Wl=(Array.prototype.slice,function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)});function Gl(t){return t[0]}function Yl(t){return t[1]}var Vl=function(t,e){var n=Pl(!0),r=null,i=ll,o=null;function a(a){var s,u,c,l=(a=Wl(a)).length,f=!1;for(null==r&&(o=i(c=$l())),s=0;s<=l;++s)!(s<l&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(u,s,a),+e(u,s,a));if(c)return o=null,c+""||null}return t="function"===typeof t?t:void 0===t?Gl:Pl(t),e="function"===typeof e?e:void 0===e?Yl:Pl(e),a.x=function(e){return arguments.length?(t="function"===typeof e?e:Pl(+e),a):t},a.y=function(t){return arguments.length?(e="function"===typeof t?t:Pl(+t),a):e},a.defined=function(t){return arguments.length?(n="function"===typeof t?t:Pl(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},Xl=function(t,e,n){var r=null,i=Pl(!0),o=null,a=ll,s=null;function u(u){var c,l,f,d,h,p=(u=Wl(u)).length,g=!1,m=new Array(p),v=new Array(p);for(null==o&&(s=a(h=$l())),c=0;c<=p;++c){if(!(c<p&&i(d=u[c],c,u))===g)if(g=!g)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=l;--f)s.point(m[f],v[f]);s.lineEnd(),s.areaEnd()}g&&(m[c]=+t(d,c,u),v[c]=+e(d,c,u),s.point(r?+r(d,c,u):m[c],n?+n(d,c,u):v[c]))}if(h)return s=null,h+""||null}function c(){return Vl().defined(i).curve(a).context(o)}return t="function"===typeof t?t:void 0===t?Gl:Pl(+t),e="function"===typeof e?e:Pl(void 0===e?0:+e),n="function"===typeof n?n:void 0===n?Yl:Pl(+n),u.x=function(e){return arguments.length?(t="function"===typeof e?e:Pl(+e),r=null,u):t},u.x0=function(e){return arguments.length?(t="function"===typeof e?e:Pl(+e),u):t},u.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Pl(+t),u):r},u.y=function(t){return arguments.length?(e="function"===typeof t?t:Pl(+t),n=null,u):e},u.y0=function(t){return arguments.length?(e="function"===typeof t?t:Pl(+t),u):e},u.y1=function(t){return arguments.length?(n=null==t?null:"function"===typeof t?t:Pl(+t),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(t){return arguments.length?(i="function"===typeof t?t:Pl(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},Jl={draw:function(t,e){var n=Math.sqrt(e/Qc);t.moveTo(n,0),t.arc(0,0,n,0,Zc)}},Ql=(Math.sqrt(1/3),Math.sin(Qc/10)/Math.sin(7*Qc/10)),Kl=(Math.sin(Zc/10),Math.cos(Zc/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(t,e){var n=null;function r(){var r;if(n||(n=r=$l()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"===typeof t?t:Pl(t||Jl),e="function"===typeof e?e:Pl(void 0===e?64:+e),r.type=function(e){return arguments.length?(t="function"===typeof e?e:Pl(e),r):t},r.size=function(t){return arguments.length?(e="function"===typeof t?t:Pl(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r});function Zl(t,e){if("undefined"!==typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}const tf=()=>"undefined"!==typeof Image?Image:null,ef=Le(Re),nf=ef.right,rf=ef.left;Le(Oa).center;var of=nf;function af(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function sf(t,e){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof e?this.interpolator(e):this.range(e);break}return this}const uf=Symbol("implicit");function cf(){var t=new Map,e=[],n=[],r=uf;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==uf)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return cf(e,n).unknown(r)},af.apply(i,arguments),i}function lf(t,e,n,r){var i,o=yt(t,e,n);switch(r=xt(null==r?",f":r),r.type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Ct(o,a))||(r.precision=i),At(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Dt(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Mt(o))||(r.precision=i-2*("%"===r.type));break}return kt(r)}var ff=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function df(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function hf(){}var pf=.7,gf=1/pf,mf="\\s*([+-]?\\d+)\\s*",vf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",yf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bf=/^#([0-9a-f]{3,8})$/,xf=new RegExp("^rgb\\("+[mf,mf,mf]+"\\)$"),wf=new RegExp("^rgb\\("+[yf,yf,yf]+"\\)$"),Of=new RegExp("^rgba\\("+[mf,mf,mf,vf]+"\\)$"),_f=new RegExp("^rgba\\("+[yf,yf,yf,vf]+"\\)$"),jf=new RegExp("^hsl\\("+[vf,yf,yf]+"\\)$"),Ef=new RegExp("^hsla\\("+[vf,yf,yf,vf]+"\\)$"),kf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Af(){return this.rgb().formatHex()}function Sf(){return Bf(this).formatHsl()}function Cf(){return this.rgb().formatRgb()}function Df(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bf.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Mf(e):3===n?new $f(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Tf(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Tf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=xf.exec(t))?new $f(e[1],e[2],e[3],1):(e=wf.exec(t))?new $f(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Of.exec(t))?Tf(e[1],e[2],e[3],e[4]):(e=_f.exec(t))?Tf(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=jf.exec(t))?zf(e[1],e[2]/100,e[3]/100,1):(e=Ef.exec(t))?zf(e[1],e[2]/100,e[3]/100,e[4]):kf.hasOwnProperty(t)?Mf(kf[t]):"transparent"===t?new $f(NaN,NaN,NaN,0):null}function Mf(t){return new $f(t>>16&255,t>>8&255,255&t,1)}function Tf(t,e,n,r){return r<=0&&(t=e=n=NaN),new $f(t,e,n,r)}function Nf(t){return t instanceof hf||(t=Df(t)),t?(t=t.rgb(),new $f(t.r,t.g,t.b,t.opacity)):new $f}function Ff(t,e,n,r){return 1===arguments.length?Nf(t):new $f(t,e,n,null==r?1:r)}function $f(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Pf(){return"#"+Lf(this.r)+Lf(this.g)+Lf(this.b)}function Rf(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Lf(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function zf(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Uf(t,e,n,r)}function Bf(t){if(t instanceof Uf)return new Uf(t.h,t.s,t.l,t.opacity);if(t instanceof hf||(t=Df(t)),!t)return new Uf;if(t instanceof Uf)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Uf(a,s,u,t.opacity)}function If(t,e,n,r){return 1===arguments.length?Bf(t):new Uf(t,e,n,null==r?1:r)}function Uf(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function qf(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Hf(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}ff(hf,Df,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Af,formatHex:Af,formatHsl:Sf,formatRgb:Cf,toString:Cf}),ff($f,Ff,df(hf,{brighter:function(t){return t=null==t?gf:Math.pow(gf,t),new $f(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?pf:Math.pow(pf,t),new $f(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pf,formatHex:Pf,formatRgb:Rf,toString:Rf})),ff(Uf,If,df(hf,{brighter:function(t){return t=null==t?gf:Math.pow(gf,t),new Uf(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?pf:Math.pow(pf,t),new Uf(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new $f(qf(t>=240?t-240:t+120,i,r),qf(t,i,r),qf(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Wf=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Hf((n-r/e)*e,a,i,o,s)}},Gf=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Hf((n-r/e)*e,i,o,a,s)}},Yf=t=>()=>t;function Vf(t,e){return function(n){return t+n*e}}function Xf(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Jf(t,e){var n=e-t;return n?Vf(t,n>180||n<-180?n-360*Math.round(n/360):n):Yf(isNaN(t)?e:t)}function Qf(t){return 1===(t=+t)?Kf:function(e,n){return n-e?Xf(e,n,t):Yf(isNaN(e)?n:e)}}function Kf(t,e){var n=e-t;return n?Vf(t,n):Yf(isNaN(t)?e:t)}var Zf=function t(e){var n=Qf(e);function r(t,e){var r=n((t=Ff(t)).r,(e=Ff(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Kf(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function td(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ff(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var ed=td(Wf),nd=td(Gf),rd=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function id(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var od=function(t,e){return(id(e)?rd:ad)(t,e)};function ad(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=gd(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var sd=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},ud=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},cd=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=gd(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},ld=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fd=new RegExp(ld.source,"g");function dd(t){return function(){return t}}function hd(t){return function(e){return t(e)+""}}var pd=function(t,e){var n,r,i,o=ld.lastIndex=fd.lastIndex=0,a=-1,s=[],u=[];t+="",e+="";while((n=ld.exec(t))&&(r=fd.exec(e)))(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:ud(n,r)})),o=fd.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?hd(u[0].x):dd(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},gd=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Yf(e):("number"===r?ud:"string"===r?(n=Df(e))?(e=n,Zf):pd:e instanceof Df?Zf:e instanceof Date?sd:id(e)?rd:Array.isArray(e)?ad:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?cd:ud)(t,e)},md=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}};function vd(t){return function(){return t}}function yd(t){return+t}var bd=[0,1];function xd(t){return t}function wd(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:vd(isNaN(e)?NaN:.5)}function Od(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}function _d(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=wd(i,r),o=n(a,o)):(r=wd(r,i),o=n(o,a)),function(t){return o(r(t))}}function jd(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());while(++a<r)i[a]=wd(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=of(t,e,1,r)-1;return o[n](i[n](e))}}function Ed(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kd(){var t,e,n,r,i,o,a=bd,s=bd,u=gd,c=xd;function l(){var t=Math.min(a.length,s.length);return c!==xd&&(c=Od(a[0],a[t-1])),r=t>2?jd:_d,i=o=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),ud)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,yd),l()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=md,l()},f.clamp=function(t){return arguments.length?(c=!!t||xd,l()):c!==xd},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function Ad(){return kd()(xd,xd)}function Sd(t){var e=t.domain;return t.ticks=function(t){var n=e();return mt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return lf(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],c=o[s],l=10;c<u&&(i=u,u=c,c=i,i=a,a=s,s=i);while(l-- >0){if(i=vt(u,c,n),i===r)return o[a]=u,o[s]=c,e(o);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Cd(){var t=Ad();return t.copy=function(){return Ed(t,Cd())},af.apply(t,arguments),Sd(t)}function Dd(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,yd),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Dd(t).unknown(e)},t=arguments.length?Array.from(t,yd):[0,1],Sd(n)}function Md(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Td(t){return Math.log(t)}function Nd(t){return Math.exp(t)}function Fd(t){return-Math.log(-t)}function $d(t){return-Math.exp(-t)}function Pd(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Rd(t){return 10===t?Pd:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Ld(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function zd(t){return function(e){return-t(-e)}}function Bd(t){var e,n,r=t(Td,Nd),i=r.domain,o=10;function a(){return e=Ld(o),n=Rd(o),i()[0]<0?(e=zd(e),n=zd(n),t(Fd,$d)):t(Td,Nd),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(d=s,s=u,u=d);var c,l,f,d=e(s),h=e(u),p=null==t?10:+t,g=[];if(!(o%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(l=1,c=n(d);l<o;++l)if(f=c*l,!(f<s)){if(f>u)break;g.push(f)}}else for(;d<=h;++d)for(l=o-1,c=n(d);l>=1;--l)if(f=c*l,!(f<s)){if(f>u)break;g.push(f)}2*g.length<p&&(g=mt(s,u,p))}else g=mt(d,h,Math.min(h-d,p)).map(n);return r?g.reverse():g},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=kt(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(Md(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function Id(){var t=Bd(kd()).domain([1,10]);return t.copy=function(){return Ed(t,Id()).base(t.base())},af.apply(t,arguments),t}function Ud(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function qd(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Hd(t){return t<0?-t*t:t*t}function Wd(t){var e=t(xd,xd),n=1;function r(){return 1===n?t(xd,xd):.5===n?t(qd,Hd):t(Ud(n),Ud(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Sd(e)}function Gd(){var t=Wd(kd());return t.copy=function(){return Ed(t,Gd()).exponent(t.exponent())},af.apply(t,arguments),t}function Yd(){return Gd.apply(null,arguments).exponent(.5)}function Vd(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Xd(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Jd(t){var e=1,n=t(Vd(e),Xd(e));return n.constant=function(n){return arguments.length?t(Vd(e=+n),Xd(e)):e},Sd(n)}function Qd(){var t=Jd(kd());return t.copy=function(){return Ed(t,Qd()).constant(t.constant())},af.apply(t,arguments)}var Kd=1e3,Zd=60*Kd,th=60*Zd,eh=24*th,nh=7*eh,rh=30*eh,ih=365*eh;function oh(t){return new Date(t)}function ah(t){return t instanceof Date?+t:+new Date(+t)}function sh(t,e,n,r,i,o,a,s,u){var c=Ad(),l=c.invert,f=c.domain,d=u(".%L"),h=u(":%S"),p=u("%I:%M"),g=u("%I %p"),m=u("%a %d"),v=u("%b %d"),y=u("%B"),b=u("%Y"),x=[[a,1,Kd],[a,5,5*Kd],[a,15,15*Kd],[a,30,30*Kd],[o,1,Zd],[o,5,5*Zd],[o,15,15*Zd],[o,30,30*Zd],[i,1,th],[i,3,3*th],[i,6,6*th],[i,12,12*th],[r,1,eh],[r,2,2*eh],[n,1,nh],[e,1,rh],[e,3,3*rh],[t,1,ih]];function w(s){return(a(s)<s?d:o(s)<s?h:i(s)<s?p:r(s)<s?g:e(s)<s?n(s)<s?m:v:t(s)<s?y:b)(s)}function O(e,n,r){if(null==e&&(e=10),"number"===typeof e){var i,o=Math.abs(r-n)/e,a=Le((function(t){return t[2]})).right(x,o);return a===x.length?(i=yt(n/ih,r/ih,e),e=t):a?(a=x[o/x[a-1][2]<x[a][2]/o?a-1:a],i=a[1],e=a[0]):(i=Math.max(yt(n,r,e),1),e=s),e.every(i)}return e}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?f(Array.from(t,ah)):f().map(oh)},c.ticks=function(t){var e,n=f(),r=n[0],i=n[n.length-1],o=i<r;return o&&(e=r,r=i,i=e),e=O(t,r,i),e=e?e.range(r,i+1):[],o?e.reverse():e},c.tickFormat=function(t,e){return null==e?w:u(e)},c.nice=function(t){var e=f();return(t=O(t,e[0],e[e.length-1]))?f(Md(e,t)):c},c.copy=function(){return Ed(c,sh(t,e,n,r,i,o,a,s,u))},c}function uh(){return af.apply(sh(ye,xe,te,Kt,Oe,je,ke,Se,ir).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ch(){return af.apply(sh(De,Te,le,ue,Fe,Pe,ke,Se,ar).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lh(){var t,e,n,r,i,o=0,a=1,s=xd,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function l(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=l(gd),c.rangeRound=l(md),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function fh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function dh(){var t=Sd(lh()(xd));return t.copy=function(){return fh(t,dh())},sf.apply(t,arguments)}function hh(){var t=Bd(lh()).domain([1,10]);return t.copy=function(){return fh(t,hh()).base(t.base())},sf.apply(t,arguments)}function ph(){var t=Jd(lh());return t.copy=function(){return fh(t,ph()).constant(t.constant())},sf.apply(t,arguments)}function gh(){var t=Wd(lh());return t.copy=function(){return fh(t,gh()).exponent(t.exponent())},sf.apply(t,arguments)}function mh(){return gh.apply(null,arguments).exponent(.5)}function vh(t,e){void 0===e&&(e=t,t=gd);var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);while(n<r)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function yh(){var t,e,n,r,i,o,a,s=0,u=.5,c=1,l=1,f=xd,d=!1;function h(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(l*t<l*e?r:i),f(d?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=vh(t,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(a){return arguments.length?([s,u,c]=a,t=o(s=+s),e=o(u=+u),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,h):[s,u,c]},h.clamp=function(t){return arguments.length?(d=!!t,h):d},h.interpolator=function(t){return arguments.length?(f=t,h):f},h.range=p(gd),h.rangeRound=p(md),h.unknown=function(t){return arguments.length?(a=t,h):a},function(a){return o=a,t=a(s),e=a(u),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,h}}function bh(){var t=Sd(yh()(xd));return t.copy=function(){return fh(t,bh())},sf.apply(t,arguments)}function xh(){var t=Bd(yh()).domain([.1,1,10]);return t.copy=function(){return fh(t,xh()).base(t.base())},sf.apply(t,arguments)}function wh(){var t=Jd(yh());return t.copy=function(){return fh(t,wh()).constant(t.constant())},sf.apply(t,arguments)}function Oh(){var t=Wd(yh());return t.copy=function(){return fh(t,Oh()).exponent(t.exponent())},sf.apply(t,arguments)}function _h(){return Oh.apply(null,arguments).exponent(.5)}function jh(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);r=new Array(i-1);while(++t<i)r[t-1]=Ea(e,t/i);return o}function o(e){return isNaN(e=+e)?t:n[of(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Re),i()},o.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return jh().domain(e).range(n).unknown(t)},af.apply(o,arguments)}function Eh(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return e<=e?o[of(i,e,0,r)]:t}function s(){var t=-1;i=new Array(r);while(++t<r)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return Eh().domain([e,n]).range(o).unknown(t)},af.apply(Sd(a),arguments)}function kh(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[of(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return kh().domain(e).range(n).unknown(t)},af.apply(i,arguments)}var Ah,Sh=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},Ch=function(t,e){var n=Jf(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},Dh=180/Math.PI,Mh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Th=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Dh,skewX:Math.atan(u)*Dh,scaleX:a,scaleY:s}};function Nh(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Mh:Th(e.a,e.b,e.c,e.d,e.e,e.f)}function Fh(t){return null==t?Mh:(Ah||(Ah=document.createElementNS("http://www.w3.org/2000/svg","g")),Ah.setAttribute("transform",t),(t=Ah.transform.baseVal.consolidate())?(t=t.matrix,Th(t.a,t.b,t.c,t.d,t.e,t.f)):Mh)}function $h(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:ud(t,i)},{i:u-2,x:ud(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:ud(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:ud(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:ud(t,n)},{i:s-2,x:ud(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){var e,n=-1,o=i.length;while(++n<o)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var Ph=$h(Nh,"px, ","px)","deg)"),Rh=$h(Fh,", ",")",")"),Lh=1e-12;function zh(t){return((t=Math.exp(t))+1/t)/2}function Bh(t){return((t=Math.exp(t))-1/t)/2}function Ih(t){return((t=Math.exp(2*t))-1)/(t+1)}var Uh=function t(e,n,r){function i(t,i){var o,a,s=t[0],u=t[1],c=t[2],l=i[0],f=i[1],d=i[2],h=l-s,p=f-u,g=h*h+p*p;if(g<Lh)a=Math.log(d/c)/e,o=function(t){return[s+t*h,u+t*p,c*Math.exp(e*t*a)]};else{var m=Math.sqrt(g),v=(d*d-c*c+r*g)/(2*c*n*m),y=(d*d-c*c-r*g)/(2*d*n*m),b=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(y*y+1)-y);a=(x-b)/e,o=function(t){var r=t*a,i=zh(b),o=c/(n*m)*(i*Ih(e*r+b)-Bh(b));return[s+o*h,u+o*p,c*i/zh(e*r+b)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n,i=r*r;return t(n,r,i)},i}(Math.SQRT2,2,4);function qh(t){return function(e,n){var r=t((e=If(e)).h,(n=If(n)).h),i=Kf(e.s,n.s),o=Kf(e.l,n.l),a=Kf(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Hh=qh(Jf),Wh=qh(Kf);const Gh=Math.PI/180,Yh=180/Math.PI,Vh=18,Xh=.96422,Jh=1,Qh=.82521,Kh=4/29,Zh=6/29,tp=3*Zh*Zh,ep=Zh*Zh*Zh;function np(t){if(t instanceof ip)return new ip(t.l,t.a,t.b,t.opacity);if(t instanceof fp)return dp(t);t instanceof $f||(t=Nf(t));var e,n,r=up(t.r),i=up(t.g),o=up(t.b),a=op((.2225045*r+.7168786*i+.0606169*o)/Jh);return r===i&&i===o?e=n=a:(e=op((.4360747*r+.3850649*i+.1430804*o)/Xh),n=op((.0139322*r+.0971045*i+.7141733*o)/Qh)),new ip(116*a-16,500*(e-a),200*(a-n),t.opacity)}function rp(t,e,n,r){return 1===arguments.length?np(t):new ip(t,e,n,null==r?1:r)}function ip(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function op(t){return t>ep?Math.pow(t,1/3):t/tp+Kh}function ap(t){return t>Zh?t*t*t:tp*(t-Kh)}function sp(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function up(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function cp(t){if(t instanceof fp)return new fp(t.h,t.c,t.l,t.opacity);if(t instanceof ip||(t=np(t)),0===t.a&&0===t.b)return new fp(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Yh;return new fp(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function lp(t,e,n,r){return 1===arguments.length?cp(t):new fp(t,e,n,null==r?1:r)}function fp(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function dp(t){if(isNaN(t.h))return new ip(t.l,0,0,t.opacity);var e=t.h*Gh;return new ip(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function hp(t,e){var n=Kf((t=rp(t)).l,(e=rp(e)).l),r=Kf(t.a,e.a),i=Kf(t.b,e.b),o=Kf(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function pp(t){return function(e,n){var r=t((e=lp(e)).h,(n=lp(n)).h),i=Kf(e.c,n.c),o=Kf(e.l,n.l),a=Kf(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}ff(ip,rp,df(hf,{brighter:function(t){return new ip(this.l+Vh*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ip(this.l-Vh*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Xh*ap(e),t=Jh*ap(t),n=Qh*ap(n),new $f(sp(3.1338561*e-1.6168667*t-.4906146*n),sp(-.9787684*e+1.9161415*t+.033454*n),sp(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ff(fp,lp,df(hf,{brighter:function(t){return new fp(this.h,this.c,this.l+Vh*(null==t?1:t),this.opacity)},darker:function(t){return new fp(this.h,this.c,this.l-Vh*(null==t?1:t),this.opacity)},rgb:function(){return dp(this).rgb()}}));var gp=pp(Jf),mp=pp(Kf),vp=-.14861,yp=1.78277,bp=-.29227,xp=-.90649,wp=1.97294,Op=wp*xp,_p=wp*yp,jp=yp*bp-xp*vp;function Ep(t){if(t instanceof Ap)return new Ap(t.h,t.s,t.l,t.opacity);t instanceof $f||(t=Nf(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(jp*r+Op*e-_p*n)/(jp+Op-_p),o=r-i,a=(wp*(n-i)-bp*o)/xp,s=Math.sqrt(a*a+o*o)/(wp*i*(1-i)),u=s?Math.atan2(a,o)*Yh-120:NaN;return new Ap(u<0?u+360:u,s,i,t.opacity)}function kp(t,e,n,r){return 1===arguments.length?Ep(t):new Ap(t,e,n,null==r?1:r)}function Ap(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Sp(t){return function e(n){function r(e,r){var i=t((e=kp(e)).h,(r=kp(r)).h),o=Kf(e.s,r.s),a=Kf(e.l,r.l),s=Kf(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}ff(Ap,kp,df(hf,{brighter:function(t){return t=null==t?gf:Math.pow(gf,t),new Ap(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?pf:Math.pow(pf,t),new Ap(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Gh,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new $f(255*(e+n*(vp*r+yp*i)),255*(e+n*(bp*r+xp*i)),255*(e+n*(wp*r)),this.opacity)}}));var Cp=Sp(Jf),Dp=Sp(Kf),Mp=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};function Tp(t,e,n){const r=t-e+2*n;return t?r>0?r:1:0}const Np="identity",Fp="linear",$p="log",Pp="pow",Rp="sqrt",Lp="symlog",zp="time",Bp="utc",Ip="sequential",Up="diverging",qp="quantile",Hp="quantize",Wp="threshold",Gp="ordinal",Yp="point",Vp="band",Xp="bin-ordinal",Jp="continuous",Qp="discrete",Kp="discretizing",Zp="interpolating",tg="temporal";function eg(t){return function(e){let n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}}function ng(t){return function(e){const n=t.range();let r,i,o,a,s=e[0],u=e[1],c=-1;for(u<s&&(i=s,s=u,u=i),o=0,a=n.length;o<a;++o)n[o]>=s&&n[o]<=u&&(c<0&&(c=o),r=o);if(!(c<0))return s=t.invertExtent(n[c]),u=t.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}function rg(){const t=cf().unknown(void 0),e=t.domain,n=t.range;let r,i,o=[0,1],a=!1,s=0,u=0,c=.5;function l(){const t=e().length,l=o[1]<o[0],f=o[1-l],d=Tp(t,s,u);let h=o[l-0];r=(f-h)/(d||1),a&&(r=Math.floor(r)),h+=(f-h-r*(t-s))*c,i=r*(1-s),a&&(h=Math.round(h),i=Math.round(i));const p=Ds(t).map(t=>h+r*t);return n(l?p.reverse():p)}return delete t.unknown,t.domain=function(t){return arguments.length?(e(t),l()):e()},t.range=function(t){return arguments.length?(o=[+t[0],+t[1]],l()):o.slice()},t.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,l()},t.bandwidth=function(){return i},t.step=function(){return r},t.round=function(t){return arguments.length?(a=!!t,l()):a},t.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,l()):s},t.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},t.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},t.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},t.invertRange=function(t){if(null==t[0]||null==t[1])return;const r=o[1]<o[0],a=r?n().reverse():n(),s=a.length-1;let u,c,l,f=+t[0],d=+t[1];return f!==f||d!==d||(d<f&&(l=f,f=d,d=l),d<a[0]||f>o[1-r])?void 0:(u=Math.max(0,nf(a,f)-1),c=f===d?u:nf(a,d)-1,f-a[u]>i+1e-10&&++u,r&&(l=u,u=s-c,c=s-l),u>c?void 0:e().slice(u,c+1))},t.invert=function(e){const n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return rg().domain(e()).range(o).round(a).paddingInner(s).paddingOuter(u).align(c)},l()}function ig(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return ig(e())},t}function og(){return ig(rg().paddingInner(1))}var ag=Array.prototype.map;function sg(t){return ag.call(t,g["eb"])}const ug=Array.prototype.slice;function cg(){let t=[],e=[];function n(n){return null==n||n!==n?void 0:e[(of(t,n)-1)%e.length]}return n.domain=function(e){return arguments.length?(t=sg(e),n):t.slice()},n.range=function(t){return arguments.length?(e=ug.call(t),n):e.slice()},n.tickFormat=function(e,n){return lf(t[0],Object(g["W"])(t),null==e?10:e,n)},n.copy=function(){return cg().domain(n.domain()).range(n.range())},n}const lg={};function fg(t,e,n){const r=function(){const n=e();return n.invertRange||(n.invertRange=n.invert?eg(n):n.invertExtent?ng(n):void 0),n.type=t,n};return r.metadata=Object(g["fb"])(Object(g["i"])(n)),r}function dg(t,e,n){return arguments.length>1?(lg[t]=fg(t,e,n),this):hg(t)?lg[t]:void 0}function hg(t){return Object(g["w"])(lg,t)}function pg(t,e){const n=lg[t];return n&&n.metadata[e]}function gg(t){return pg(t,Jp)}function mg(t){return pg(t,Qp)}function vg(t){return pg(t,Kp)}function yg(t){return pg(t,$p)}function bg(t){return pg(t,tg)}function xg(t){return pg(t,Zp)}function wg(t){return pg(t,qp)}dg(Np,Dd),dg(Fp,Cd,Jp),dg($p,Id,[Jp,$p]),dg(Pp,Gd,Jp),dg(Rp,Yd,Jp),dg(Lp,Qd,Jp),dg(zp,uh,[Jp,tg]),dg(Bp,ch,[Jp,tg]),dg(Ip,dh,[Jp,Zp]),dg("".concat(Ip,"-").concat(Fp),dh,[Jp,Zp]),dg("".concat(Ip,"-").concat($p),hh,[Jp,Zp,$p]),dg("".concat(Ip,"-").concat(Pp),gh,[Jp,Zp]),dg("".concat(Ip,"-").concat(Rp),mh,[Jp,Zp]),dg("".concat(Ip,"-").concat(Lp),ph,[Jp,Zp]),dg("".concat(Up,"-").concat(Fp),bh,[Jp,Zp]),dg("".concat(Up,"-").concat($p),xh,[Jp,Zp,$p]),dg("".concat(Up,"-").concat(Pp),Oh,[Jp,Zp]),dg("".concat(Up,"-").concat(Rp),_h,[Jp,Zp]),dg("".concat(Up,"-").concat(Lp),wh,[Jp,Zp]),dg(qp,jh,[Kp,qp]),dg(Hp,Eh,Kp),dg(Wp,kh,Kp),dg(Xp,cg,[Qp,Kp]),dg(Gp,cf,Qp),dg(Vp,rg,Qp),dg(Yp,og,Qp);const Og=["clamp","base","constant","exponent"];function _g(t,e){const n=e[0],r=Object(g["W"])(e)-n;return function(e){return t(n+e*r)}}function jg(t,e,n){return vh(Ag(e||"rgb",n),t)}function Eg(t,e){const n=new Array(e),r=e+1;for(let i=0;i<e;)n[i]=t(++i/r);return n}function kg(t,e,n){const r=n-e;let i,o,a;return r&&Number.isFinite(r)?(i=(o=t.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=dg(o)().domain([e,n]).range([0,1]),Og.forEach(e=>t[e]?a[e](t[e]()):0),a):Object(g["m"])(.5)}function Ag(t,e){const n=i[Sg(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function Sg(t){return"interpolate"+t.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Cg={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Dg={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function Mg(t){const e=t.length/6|0,n=new Array(e);for(let r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function Tg(t,e){for(const n in t)Fg(n,e(t[n]))}const Ng={};function Fg(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(Ng[t]=e,this):Ng[t]}Tg(Dg,Mg),Tg(Cg,t=>jg(Mg(t)));const $g="symbol",Pg="discrete",Rg="gradient",Lg=t=>Object(g["B"])(t)?t.map(t=>String(t)):String(t),zg=(t,e)=>t[1]-e[1],Bg=(t,e)=>e[1]-t[1];function Ig(t,e,n){let r;return Object(g["G"])(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),null!=n&&(e=Math.min(e,Math.floor(Object(g["Z"])(t.domain())/n||1)))),Object(g["H"])(e)&&(r=e.step,e=e.interval),Object(g["J"])(e)&&(e=t.type===zp?Sn(e):t.type==Bp?Cn(e):Object(g["o"])("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function Ug(t,e,n){let r=t.range(),i=r[0],o=Object(g["W"])(r),a=zg;if(i>o&&(r=o,o=i,i=r,a=Bg),i=Math.floor(i),o=Math.ceil(o),e=e.map(e=>[e,t(e)]).filter(t=>i<=t[1]&&t[1]<=o).sort(a).map(t=>t[0]),n>0&&e.length>1){const t=[e[0],Object(g["W"])(e)];while(e.length>n&&e.length>=3)e=e.filter((t,e)=>!(e%2));e.length<3&&(e=t)}return e}function qg(t,e){return t.bins?Ug(t,t.bins):t.ticks?t.ticks(e):t.domain()}function Hg(t,e,n,r,i,o){const a=e.type;let s=Lg;if(a===zp||i===zp)s=t.timeFormat(r);else if(a===Bp||i===Bp)s=t.utcFormat(r);else if(yg(a)){const i=t.formatFloat(r);if(o||e.bins)s=i;else{const t=Wg(e,n,!1);s=e=>t(e)?i(e):""}}else if(e.tickFormat){const i=e.domain();s=t.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=t.format(r));return s}function Wg(t,e,n){const r=qg(t,e),i=t.base(),o=Math.log(i),a=Math.max(1,i*e/r.length),s=t=>{let e=t/Math.pow(i,Math.round(Math.log(t)/o));return e*i<i-.5&&(e*=i),e<=a};return n?r.filter(s):s}const Gg={[qp]:"quantiles",[Hp]:"thresholds",[Wp]:"domain"},Yg={[qp]:"quantiles",[Hp]:"domain"};function Vg(t,e){return t.bins?Qg(t.bins):t.type===$p?Wg(t,e,!0):Gg[t.type]?Jg(t[Gg[t.type]]()):qg(t,e)}function Xg(t,e,n){const r=e[Yg[e.type]](),i=r.length;let o,a=i>1?r[1]-r[0]:r[0];for(o=1;o<i;++o)a=Math.min(a,r[o]-r[o-1]);return t.formatSpan(0,a,30,n)}function Jg(t){const e=[-1/0].concat(t);return e.max=1/0,e}function Qg(t){const e=t.slice(0,-1);return e.max=Object(g["W"])(t),e}const Kg=t=>Gg[t.type]||t.bins;function Zg(t,e,n,r,i,o,a){const s=Yg[e.type]&&o!==zp&&o!==Bp?Xg(t,e,i):Hg(t,e,n,i,o,a);return r===$g&&Kg(e)?tm(s):r===Pg?nm(s):rm(s)}const tm=t=>(e,n,r)=>{const i=em(r[n+1],em(r.max,1/0)),o=im(e,t),a=im(i,t);return o&&a?o+" â "+a:a?"< "+a:"â¥ "+o},em=(t,e)=>null!=t?t:e,nm=t=>(e,n)=>n?t(e):null,rm=t=>e=>t(e),im=(t,e)=>Number.isFinite(t)?e(t):null;function om(t){const e=t.domain(),n=e.length-1;let r=+e[0],i=+Object(g["W"])(e),o=i-r;if(t.type===Wp){const t=n?o/n:.1;r-=t,i+=t,o=i-r}return t=>(t-r)/o}function am(t,e,n,r){const i=r||e.type;return Object(g["J"])(n)&&bg(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==zp?n||i!==Bp?Zg(t,e,5,null,n,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function sm(t,e,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=am(t,e,n.format,n.formatType);if(vg(e.type)){const t=Vg(e).slice(1).map(i),n=t.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(t.join(", "))}if(mg(e.type)){const t=e.domain(),n=t.length,o=n>r?t.slice(0,r-2).map(i).join(", ")+", ending with "+t.slice(-1).map(i):t.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(o)}{const t=e.domain();return"values from ".concat(i(t[0])," to ").concat(i(Object(g["W"])(t)))}}let um=0;function cm(){um=0}const lm="p_";function fm(t){return t&&t.gradient}function dm(t,e,n){const r=t.gradient;let i=t.id,o="radial"===r?lm:"";return i||(i=t.id="gradient_"+um++,"radial"===r?(t.x1=hm(t.x1,.5),t.y1=hm(t.y1,.5),t.r1=hm(t.r1,0),t.x2=hm(t.x2,.5),t.y2=hm(t.y2,.5),t.r2=hm(t.r2,.5),o=lm):(t.x1=hm(t.x1,0),t.y1=hm(t.y1,0),t.x2=hm(t.x2,1),t.y2=hm(t.y2,0))),e[i]=t,"url("+(n||"")+"#"+o+i+")"}function hm(t,e){return null!=t?t:e}function pm(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}}const gm={basis:{curve:Sc},"basis-closed":{curve:Mc},"basis-open":{curve:Nc},bundle:{curve:$c,tension:"beta",value:.85},cardinal:{curve:Lc,tension:"tension",value:0},"cardinal-open":{curve:Bc,tension:"tension",value:0},"cardinal-closed":{curve:Uc,tension:"tension",value:0},"catmull-rom":{curve:il,tension:"alpha",value:.5},"catmull-rom-closed":{curve:al,tension:"alpha",value:.5},"catmull-rom-open":{curve:ul,tension:"alpha",value:.5},linear:{curve:ll},"linear-closed":{curve:dl},monotone:{horizontal:wl,vertical:xl},natural:{curve:jl},step:{curve:kl},"step-after":{curve:Sl},"step-before":{curve:Al}};function mm(t,e,n){var r=Object(g["w"])(gm,t)&&gm[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const vm={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},ym=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function bm(t){const e=[];let n,r,i,o,a,s,u,c,l,f;const d=t.slice().replace(ym[0],"###$1").split(ym[1]).slice(1);for(u=0,l=d.length;u<l;++u){for(n=d[u],r=n.slice(1).trim().replace(ym[2],"$1###$2").replace(ym[3],"$1###$2").split(ym[4]),a=n.charAt(0),i=[a],c=0,f=r.length;c<f;++c)(o=+r[c])===o&&i.push(o);if(s=vm[a.toLowerCase()],i.length-1>s){const t=i.length;for(c=1,e.push([a].concat(i.slice(c,c+=s))),a="M"===a?"L":"m"===a?"l":a;c<t;c+=s)e.push([a].concat(i.slice(c,c+s)))}else e.push(i)}return e}const xm=Math.PI/180,wm=1e-14,Om=Math.PI/2,_m=2*Math.PI,jm=Math.sqrt(3)/2;var Em={},km={},Am=[].join;function Sm(t,e,n,r,i,o,a,s,u){const c=Am.call(arguments);if(Em[c])return Em[c];const l=a*xm,f=Math.sin(l),d=Math.cos(l);n=Math.abs(n),r=Math.abs(r);const h=d*(s-t)*.5+f*(u-e)*.5,p=d*(u-e)*.5-f*(s-t)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,v=f/n,y=-f/r,b=d/r,x=m*s+v*u,w=y*s+b*u,O=m*t+v*e,_=y*t+b*e,j=(O-x)*(O-x)+(_-w)*(_-w);let E=1/j-.25;E<0&&(E=0);let k=Math.sqrt(E);o==i&&(k=-k);const A=.5*(x+O)-k*(_-w),S=.5*(w+_)+k*(O-x),C=Math.atan2(w-S,x-A),D=Math.atan2(_-S,O-A);let M=D-C;M<0&&1===o?M+=_m:M>0&&0===o&&(M-=_m);const T=Math.ceil(Math.abs(M/(Om+.001))),N=[];for(let F=0;F<T;++F){const t=C+F*M/T,e=C+(F+1)*M/T;N[F]=[A,S,t,e,n,r,f,d]}return Em[c]=N}function Cm(t){const e=Am.call(t);if(km[e])return km[e];var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7];const l=c*a,f=-u*s,d=u*a,h=c*s,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),v=Math.sin(o),y=.5*(o-i),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),w=n+p-x*g,O=r+g+x*p,_=n+m,j=r+v,E=_+x*v,k=j-x*m;return km[e]=[l*w+f*O,d*w+h*O,l*E+f*k,d*E+h*k,l*_+f*j,d*_+h*j]}const Dm=["l",0,0,0,0,0,0,0];function Mm(t,e,n){const r=Dm[0]=t[0];if("a"===r||"A"===r)Dm[1]=e*t[1],Dm[2]=n*t[2],Dm[3]=t[3],Dm[4]=t[4],Dm[5]=t[5],Dm[6]=e*t[6],Dm[7]=n*t[7];else if("h"===r||"H"===r)Dm[1]=e*t[1];else if("v"===r||"V"===r)Dm[1]=n*t[1];else for(var i=1,o=t.length;i<o;++i)Dm[i]=(i%2==1?e:n)*t[i];return Dm}function Tm(t,e,n,r,i,o){var a,s,u,c,l,f=null,d=0,h=0,p=0,g=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),t.beginPath&&t.beginPath();for(var m=0,v=e.length;m<v;++m){switch(a=e[m],1===i&&1===o||(a=Mm(a,i,o)),a[0]){case"l":d+=a[1],h+=a[2],t.lineTo(d+n,h+r);break;case"L":d=a[1],h=a[2],t.lineTo(d+n,h+r);break;case"h":d+=a[1],t.lineTo(d+n,h+r);break;case"H":d=a[1],t.lineTo(d+n,h+r);break;case"v":h+=a[1],t.lineTo(d+n,h+r);break;case"V":h=a[1],t.lineTo(d+n,h+r);break;case"m":d+=a[1],h+=a[2],t.moveTo(d+n,h+r);break;case"M":d=a[1],h=a[2],t.moveTo(d+n,h+r);break;case"c":s=d+a[5],u=h+a[6],p=d+a[3],g=h+a[4],t.bezierCurveTo(d+a[1]+n,h+a[2]+r,p+n,g+r,s+n,u+r),d=s,h=u;break;case"C":d=a[5],h=a[6],p=a[3],g=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,p+n,g+r,d+n,h+r);break;case"s":s=d+a[3],u=h+a[4],p=2*d-p,g=2*h-g,t.bezierCurveTo(p+n,g+r,d+a[1]+n,h+a[2]+r,s+n,u+r),p=d+a[1],g=h+a[2],d=s,h=u;break;case"S":s=a[3],u=a[4],p=2*d-p,g=2*h-g,t.bezierCurveTo(p+n,g+r,a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],g=a[2];break;case"q":s=d+a[3],u=h+a[4],p=d+a[1],g=h+a[2],t.quadraticCurveTo(p+n,g+r,s+n,u+r),d=s,h=u;break;case"Q":s=a[3],u=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],g=a[2];break;case"t":s=d+a[1],u=h+a[2],null===f[0].match(/[QqTt]/)?(p=d,g=h):"t"===f[0]?(p=2*d-c,g=2*h-l):"q"===f[0]&&(p=2*d-p,g=2*h-g),c=p,l=g,t.quadraticCurveTo(p+n,g+r,s+n,u+r),d=s,h=u,p=d+a[1],g=h+a[2];break;case"T":s=a[1],u=a[2],p=2*d-p,g=2*h-g,t.quadraticCurveTo(p+n,g+r,s+n,u+r),d=s,h=u;break;case"a":Nm(t,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+d+n,a[7]+h+r]),d+=a[6],h+=a[7];break;case"A":Nm(t,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),d=a[6],h=a[7];break;case"z":case"Z":t.closePath();break}f=a}}function Nm(t,e,n,r){const i=Sm(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n);for(let o=0;o<i.length;++o){const e=Cm(i[o]);t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])}}const Fm=.5773502691896257,$m={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,_m)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,o=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-o),t.lineTo(i,-o),t.lineTo(0,-n),t.lineTo(-i,-o),t.lineTo(-r,-o),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=jm*n,i=r-n*Fm,o=n/4;t.moveTo(0,-r-i),t.lineTo(-o,r-i),t.lineTo(o,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=jm*n,i=r-n*Fm;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=jm*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=jm*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=jm*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=jm*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function Pm(t){return Object(g["w"])($m,t)?$m[t]:Lm(t)}var Rm={};function Lm(t){if(!Object(g["w"])(Rm,t)){const e=bm(t);Rm[t]={draw:function(t,n){Tm(t,e,0,0,Math.sqrt(n)/2)}}}return Rm[t]}const zm=.448084975506;function Bm(t){return t.x}function Im(t){return t.y}function Um(t){return t.width}function qm(t){return t.height}function Hm(t){return"function"===typeof t?t:()=>+t}function Wm(t,e,n){return Math.max(e,Math.min(t,n))}function Gm(){var t=Bm,e=Im,n=Um,r=qm,i=Hm(0),o=i,a=i,s=i,u=null;function c(c,l,f){var d,h=null!=l?l:+t.call(this,c),p=null!=f?f:+e.call(this,c),g=+n.call(this,c),m=+r.call(this,c),v=Math.min(g,m)/2,y=Wm(+i.call(this,c),0,v),b=Wm(+o.call(this,c),0,v),x=Wm(+a.call(this,c),0,v),w=Wm(+s.call(this,c),0,v);if(u||(u=d=$l()),y<=0&&b<=0&&x<=0&&w<=0)u.rect(h,p,g,m);else{var O=h+g,_=p+m;u.moveTo(h+y,p),u.lineTo(O-b,p),u.bezierCurveTo(O-zm*b,p,O,p+zm*b,O,p+b),u.lineTo(O,_-w),u.bezierCurveTo(O,_-zm*w,O-zm*w,_,O-w,_),u.lineTo(h+x,_),u.bezierCurveTo(h+zm*x,_,h,_-zm*x,h,_-x),u.lineTo(h,p+y),u.bezierCurveTo(h,p+zm*y,h+zm*y,p,h+y,p),u.closePath()}if(d)return u=null,d+""||null}return c.x=function(e){return arguments.length?(t=Hm(e),c):t},c.y=function(t){return arguments.length?(e=Hm(t),c):e},c.width=function(t){return arguments.length?(n=Hm(t),c):n},c.height=function(t){return arguments.length?(r=Hm(t),c):r},c.cornerRadius=function(t,e,n,r){return arguments.length?(i=Hm(t),o=null!=e?Hm(e):i,s=null!=n?Hm(n):i,a=null!=r?Hm(r):o,c):i},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c}function Ym(){var t,e,n,r,i,o,a,s,u=null;function c(t,e,n){const r=n/2;if(i){var c=a-e,l=t-o;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*s,h=(l/=f)*s,p=Math.atan2(l,c);u.moveTo(o-d,a-h),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(o+d,a+h),u.arc(o,a,s,p,p+Math.PI)}else u.arc(t,e,r,0,_m);u.closePath()}else i=1;o=t,a=e,s=r}function l(o){var a,s,l,f=o.length,d=!1;for(null==u&&(u=l=$l()),a=0;a<=f;++a)!(a<f&&r(s=o[a],a,o))===d&&(d=!d)&&(i=0),d&&c(+t(s,a,o),+e(s,a,o),+n(s,a,o));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}function Vm(t,e){return null!=t?t:e}const Xm=t=>t.x||0,Jm=t=>t.y||0,Qm=t=>t.width||0,Km=t=>t.height||0,Zm=t=>(t.x||0)+(t.width||0),tv=t=>(t.y||0)+(t.height||0),ev=t=>t.startAngle||0,nv=t=>t.endAngle||0,rv=t=>t.padAngle||0,iv=t=>t.innerRadius||0,ov=t=>t.outerRadius||0,av=t=>t.cornerRadius||0,sv=t=>Vm(t.cornerRadiusTopLeft,t.cornerRadius)||0,uv=t=>Vm(t.cornerRadiusTopRight,t.cornerRadius)||0,cv=t=>Vm(t.cornerRadiusBottomRight,t.cornerRadius)||0,lv=t=>Vm(t.cornerRadiusBottomLeft,t.cornerRadius)||0,fv=t=>Vm(t.size,64),dv=t=>t.size||1,hv=t=>!(!1===t.defined),pv=t=>Pm(t.shape||"circle"),gv=Hl().startAngle(ev).endAngle(nv).padAngle(rv).innerRadius(iv).outerRadius(ov).cornerRadius(av),mv=Xl().x(Xm).y1(Jm).y0(tv).defined(hv),vv=Xl().y(Jm).x1(Xm).x0(Zm).defined(hv),yv=Vl().x(Xm).y(Jm).defined(hv),bv=Gm().x(Xm).y(Jm).width(Qm).height(Km).cornerRadius(sv,uv,cv,lv),xv=Kl().type(pv).size(fv),wv=Ym().x(Xm).y(Jm).defined(hv).size(dv);function Ov(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function _v(t,e){return gv.context(t)(e)}function jv(t,e){const n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?vv:mv).curve(mm(r,n.orient,n.tension)).context(t)(e)}function Ev(t,e){const n=e[0],r=n.interpolate||"linear";return yv.curve(mm(r,n.orient,n.tension)).context(t)(e)}function kv(t,e,n,r){return bv.context(t)(e,n,r)}function Av(t,e){return(e.mark.shape||e.shape).context(t)(e)}function Sv(t,e){return xv.context(t)(e)}function Cv(t,e){return wv.context(t)(e)}var Dv=1;function Mv(){Dv=1}function Tv(t,e,n){var r=e.clip,i=t._defs,o=e.clip_id||(e.clip_id="clip"+Dv++),a=i.clipping[o]||(i.clipping[o]={id:o});return Object(g["E"])(r)?a.path=r(null):Ov(n)?a.path=kv(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Nv(t){this.clear(),t&&this.union(t)}function Fv(t){this.mark=t,this.bounds=this.bounds||new Nv}function $v(t){Fv.call(this,t),this.items=this.items||[]}function Pv(t){this._pending=0,this._loader=t||Gi()}function Rv(t){t._pending+=1}function Lv(t){t._pending-=1}function zv(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){const r=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(r+(n?Bv(e,r):0))}return t}function Bv(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}Nv.prototype={clone(){return new Nv(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(t,e,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*a+c,u*r+s*a+l,s*o-u*i+c,u*o+s*i+l,s*o-u*a+c,u*o+s*a+l]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},Object(g["z"])($v,Fv),Pv.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return Rv(e),e._loader.sanitize(t,{context:"href"}).then(t=>(Lv(e),t)).catch(()=>(Lv(e),null))},loadImage(t){const e=this,n=tf();return Rv(e),e._loader.sanitize(t,{context:"image"}).then(t=>{const r=t.href;if(!r||!n)throw{url:r};const i=new n,o=Object(g["w"])(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=()=>Lv(e),i.onerror=()=>Lv(e),i.src=r,i}).catch(t=>(Lv(e),{complete:!1,width:0,height:0,src:t&&t.url||""}))},ready(){const t=this;return new Promise(e=>{function n(r){t.pending()?setTimeout(()=>{n(!0)},10):e(r)}n(!1)})}};const Iv=_m-1e-8;let Uv,qv,Hv,Wv,Gv,Yv,Vv,Xv;const Jv=(t,e)=>Uv.add(t,e),Qv=(t,e)=>Jv(qv=t,Hv=e),Kv=t=>Jv(t,Uv.y1),Zv=t=>Jv(Uv.x1,t),ty=(t,e)=>Gv*t+Vv*e,ey=(t,e)=>Yv*t+Xv*e,ny=(t,e)=>Jv(ty(t,e),ey(t,e)),ry=(t,e)=>Qv(ty(t,e),ey(t,e));function iy(t,e){return Uv=t,e?(Wv=e*xm,Gv=Xv=Math.cos(Wv),Yv=Math.sin(Wv),Vv=-Yv):(Gv=Xv=1,Wv=Yv=Vv=0),oy}const oy={beginPath(){},closePath(){},moveTo:ry,lineTo:ry,rect(t,e,n,r){Wv?(ny(t+n,e),ny(t+n,e+r),ny(t,e+r),ry(t,e)):(Jv(t+n,e+r),Qv(t,e))},quadraticCurveTo(t,e,n,r){const i=ty(t,e),o=ey(t,e),a=ty(n,r),s=ey(n,r);ay(qv,i,a,Kv),ay(Hv,o,s,Zv),Qv(a,s)},bezierCurveTo(t,e,n,r,i,o){const a=ty(t,e),s=ey(t,e),u=ty(n,r),c=ey(n,r),l=ty(i,o),f=ey(i,o);sy(qv,a,u,l,Kv),sy(Hv,s,c,f,Zv),Qv(l,f)},arc(t,e,n,r,i,o){if(r+=Wv,i+=Wv,qv=n*Math.cos(i)+t,Hv=n*Math.sin(i)+e,Math.abs(i-r)>Iv)Jv(t-n,e-n),Jv(t+n,e+n);else{const a=r=>Jv(n*Math.cos(r)+t,n*Math.sin(r)+e);let s,u;if(a(r),a(i),i!==r)if(r%=_m,r<0&&(r+=_m),i%=_m,i<0&&(i+=_m),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=_m,s=r-r%Om,u=0;u<4&&s>i;++u,s-=Om)a(s);else for(s=r-r%Om+Om,u=0;u<4&&s<i;++u,s+=Om)a(s)}}};function ay(t,e,n,r){const i=(t-e)/(t+n-2*e);0<i&&i<1&&r(t+(e-t)*i)}function sy(t,e,n,r,i){const o=r-t+3*e-3*n,a=t+n-2*e,s=t-e;let u,c=0,l=0;Math.abs(o)>wm?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),c=(-a+u)/o,l=(-a-u)/o)):c=.5*s/a,0<c&&c<1&&i(uy(c,t,e,n,r)),0<l&&l<1&&i(uy(l,t,e,n,r))}function uy(t,e,n,r,i){const o=1-t,a=o*o,s=t*t;return a*o*e+3*a*t*n+3*o*s*r+s*t*i}var cy=(cy=Zl(1,1))?cy.getContext("2d"):null;const ly=new Nv;function fy(t){return function(e,n){if(!cy)return!0;t(cy,e),ly.clear().union(e.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=ly;for(let t=i;t<=a;++t)for(let e=r;e<=o;++e)if(cy.isPointInPath(e,t))return!0;return!1}}function dy(t,e){return e.contains(t.x||0,t.y||0)}function hy(t,e){const n=t.x||0,r=t.y||0,i=t.width||0,o=t.height||0;return e.intersects(ly.set(n,r,n+i,r+o))}function py(t,e){const n=t.x||0,r=t.y||0,i=null!=t.x2?t.x2:n,o=null!=t.y2?t.y2:r;return gy(e,n,r,i,o)}function gy(t,e,n,r,i){const{x1:o,y1:a,x2:s,y2:u}=t,c=r-e,l=i-n;let f,d,h,p,g=0,m=1;for(p=0;p<4;++p){if(0===p&&(f=-c,d=-(o-e)),1===p&&(f=c,d=s-e),2===p&&(f=-l,d=-(a-n)),3===p&&(f=l,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>m)return!1;h>g&&(g=h)}else if(f>0){if(h<g)return!1;h<m&&(m=h)}}return!0}function my(t,e){t.globalCompositeOperation=e.blend||"source-over"}function vy(t,e){return null==t?e:t}function yy(t,e){const n=e.length;for(let r=0;r<n;++r)t.addColorStop(e[r].offset,e[r].color);return t}function by(t,e,n){const r=n.width(),i=n.height();let o;if("radial"===e.gradient)o=t.createRadialGradient(n.x1+vy(e.x1,.5)*r,n.y1+vy(e.y1,.5)*i,Math.max(r,i)*vy(e.r1,0),n.x1+vy(e.x2,.5)*r,n.y1+vy(e.y2,.5)*i,Math.max(r,i)*vy(e.r2,.5));else{const a=vy(e.x1,0),s=vy(e.y1,0),u=vy(e.x2,1),c=vy(e.y2,0);if(a!==u&&s!==c&&r!==i){const n=Zl(Math.ceil(r),Math.ceil(i)),o=n.getContext("2d");return o.scale(r,i),o.fillStyle=yy(o.createLinearGradient(a,s,u,c),e.stops),o.fillRect(0,0,r,i),t.createPattern(n,"no-repeat")}o=t.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+u*r,n.y1+c*i)}return yy(o,e.stops)}function xy(t,e,n){return fm(n)?by(t,n,e.bounds):n}function wy(t,e,n){return n*=null==e.fillOpacity?1:e.fillOpacity,n>0&&(t.globalAlpha=n,t.fillStyle=xy(t,e,e.fill),!0)}var Oy=[];function _y(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity,n>0&&(t.globalAlpha=n,t.strokeStyle=xy(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Oy),t.lineDashOffset=e.strokeDashOffset||0),!0))}function jy(t,e){return t.zindex-e.zindex||t.index-e.index}function Ey(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,o=[];for(n=0,r=i.length;n<r;++n)e=i[n],e.index=n,e.zindex&&o.push(e);return t.zdirty=!1,t.zitems=o.sort(jy)}function ky(t,e){var n,r,i=t.items;if(!i||!i.length)return;const o=Ey(t);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=o}for(n=0,r=i.length;n<r;++n)e(i[n])}function Ay(t,e){var n,r,i=t.items;if(!i||!i.length)return null;const o=Ey(t);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===o)for(i=t.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function Sy(t){return function(e,n,r){ky(n,n=>{r&&!r.intersects(n.bounds)||Dy(t,e,n,n)})}}function Cy(t){return function(e,n,r){!n.items.length||r&&!r.intersects(n.bounds)||Dy(t,e,n.items[0],n.items)}}function Dy(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(my(e,n),n.fill&&wy(e,n,i)&&e.fill(),n.stroke&&_y(e,n,i)&&e.stroke()))}function My(t){return t=t||g["ib"],function(e,n,r,i,o,a){return r*=e.pixelRatio,i*=e.pixelRatio,Ay(n,n=>{const s=n.bounds;if((!s||s.contains(o,a))&&s)return t(e,n,r,i,o,a)?n:void 0})}}function Ty(t,e){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o))}}function Ny(t){return My(Ty(t))}function Fy(t,e){return"translate("+t+","+e+")"}function $y(t){return"rotate("+t+")"}function Py(t,e){return"scale("+t+","+e+")"}function Ry(t){return Fy(t.x||0,t.y||0)}function Ly(t){return Fy(t.x||0,t.y||0)+(t.angle?" "+$y(t.angle):"")}function zy(t){return Fy(t.x||0,t.y||0)+(t.angle?" "+$y(t.angle):"")+(t.scaleX||t.scaleY?" "+Py(t.scaleX||1,t.scaleY||1):"")}function By(t,e,n){function r(t,n){t("transform",Ly(n)),t("d",e(null,n))}function i(t,n){return e(iy(t,n.angle),n),zv(t,n).translate(n.x||0,n.y||0)}function o(t,n){var r=n.x||0,i=n.y||0,o=n.angle||0;t.translate(r,i),o&&t.rotate(o*=xm),t.beginPath(),e(t,n),o&&t.rotate(-o),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:r,bound:i,draw:Sy(o),pick:Ny(o),isect:n||fy(o)}}var Iy=By("arc",_v);function Uy(t,e){var n,r,i="horizontal"===t[0].orient?e[1]:e[0],o="horizontal"===t[0].orient?"y":"x",a=t.length,s=1/0;while(--a>=0)!1!==t[a].defined&&(r=Math.abs(t[a][o]-i),r<s&&(s=r,n=t[a]));return n}function qy(t,e){var n,r,i,o=Math.pow(t[0].strokeWidth||1,2),a=t.length;while(--a>=0)if(!1!==t[a].defined&&(n=t[a].x-e[0],r=t[a].y-e[1],i=n*n+r*r,i<o))return t[a];return null}function Hy(t,e){var n,r,i,o=t.length;while(--o>=0)if(!1!==t[o].defined&&(n=t[o].x-e[0],r=t[o].y-e[1],i=n*n+r*r,n=t[o].size||1,i<n*n))return t[o];return null}function Wy(t,e,n){function r(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))}function i(t,n){var r=n.items;return 0===r.length?t:(e(iy(t),r),zv(t,r[0]))}function o(t,n){t.beginPath(),e(t,n)}const a=Ty(o);function s(t,e,n,r,i,o){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,o)?null:(n*=t.pixelRatio,r*=t.pixelRatio,a(t,s,n,r)?s[0]:null)}return{type:t,tag:"path",nested:!0,attr:r,bound:i,draw:Cy(o),pick:s,isect:dy,tip:n}}var Gy=Wy("area",jv,Uy);function Yy(t,e){var n=e.clip;t.save(),Object(g["E"])(n)?(t.beginPath(),n(t),t.clip()):Vy(t,e.group)}function Vy(t,e){t.beginPath(),Ov(e)?kv(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function Xy(t){const e=vy(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function Jy(t,e){t("transform",Ry(e))}function Qy(t,e){const n=Xy(e);t("d",kv(null,e,n,n))}function Ky(t,e){t("class","background"),t("aria-hidden",!0),Qy(t,e)}function Zy(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?Qy(t,e):t("d","")}function tb(t,e,n){const r=e.clip?Tv(n,e,e):null;t("clip-path",r)}function eb(t,e){if(!e.clip&&e.items){const n=e.items,r=n.length;for(let e=0;e<r;++e)t.union(n[e].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),zv(t,e),t.translate(e.x||0,e.y||0)}function nb(t,e,n,r){const i=Xy(e);t.beginPath(),kv(t,e,(n||0)+i,(r||0)+i)}const rb=Ty(nb),ib=Ty(nb,!1),ob=Ty(nb,!0);function ab(t,e,n){ky(e,e=>{const r=e.x||0,i=e.y||0,o=e.strokeForeground,a=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&a&&(nb(t,e,r,i),my(t,e),e.fill&&wy(t,e,a)&&t.fill(),e.stroke&&!o&&_y(t,e,a)&&t.stroke()),t.save(),t.translate(r,i),e.clip&&Vy(t,e),n&&n.translate(-r,-i),ky(e,e=>{this.draw(t,e,n)}),n&&n.translate(r,i),t.restore(),o&&e.stroke&&a&&(nb(t,e,r,i),my(t,e),_y(t,e,a)&&t.stroke())})}function sb(t,e,n,r,i,o){if(e.bounds&&!e.bounds.contains(i,o)||!e.items)return null;const a=n*t.pixelRatio,s=r*t.pixelRatio;return Ay(e,u=>{let c,l,f;const d=u.bounds;if(d&&!d.contains(i,o))return;l=u.x||0,f=u.y||0;const h=l+(u.width||0),p=f+(u.height||0),g=u.clip;if(g&&(i<l||i>h||o<f||o>p))return;if(t.save(),t.translate(l,f),l=i-l,f=o-f,g&&Ov(u)&&!ob(t,u,a,s))return t.restore(),null;const m=u.strokeForeground,v=!1!==e.interactive;return v&&m&&u.stroke&&ib(t,u,a,s)?(t.restore(),u):(c=Ay(u,t=>ub(t,l,f)?this.pick(t,n,r,l,f):null),!c&&v&&(u.fill||!m&&u.stroke)&&rb(t,u,a,s)&&(c=u),t.restore(),c||null)})}function ub(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}var cb={type:"group",tag:"g",nested:!1,attr:Jy,bound:eb,draw:ab,pick:sb,isect:hy,content:tb,background:Ky,foreground:Zy},lb={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function fb(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(e=>{t.image=e,t.image.url=t.url})),n}function db(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function hb(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function pb(t,e){return"center"===t?e/2:"right"===t?e:0}function gb(t,e){return"middle"===t?e/2:"bottom"===t?e:0}function mb(t,e,n){const r=fb(e,n),i=db(e,r),o=hb(e,r),a=(e.x||0)-pb(e.align,i),s=(e.y||0)-gb(e.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";t("href",u,lb["xmlns:xlink"],"xlink:href"),t("transform",Fy(a,s)),t("width",i),t("height",o),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")}function vb(t,e){const n=e.image,r=db(e,n),i=hb(e,n),o=(e.x||0)-pb(e.align,r),a=(e.y||0)-gb(e.baseline,i);return t.set(o,a,o+r,a+i)}function yb(t,e,n){ky(e,e=>{if(n&&!n.intersects(e.bounds))return;const r=fb(e,this);let i,o,a,s,u=db(e,r),c=hb(e,r),l=(e.x||0)-pb(e.align,u),f=(e.y||0)-gb(e.baseline,c);!1!==e.aspect&&(o=r.width/r.height,a=e.width/e.height,o===o&&a===a&&o!==a&&(a<o?(s=u/o,f+=(c-s)/2,c=s):(s=c*o,l+=(u-s)/2,u=s))),(r.complete||r.toDataURL)&&(my(t,e),t.globalAlpha=null!=(i=e.opacity)?i:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(r,l,f,u,c))})}var bb={type:"image",tag:"image",nested:!1,attr:mb,bound:vb,draw:yb,pick:My(),isect:g["ib"],get:fb,xOffset:pb,yOffset:gb},xb=Wy("line",Ev,qy);function wb(t,e){var n=e.scaleX||1,r=e.scaleY||1;1===n&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",zy(e)),t("d",e.path)}function Ob(t,e){var n=e.path;if(null==n)return!0;var r=e.x||0,i=e.y||0,o=e.scaleX||1,a=e.scaleY||1,s=(e.angle||0)*xm,u=e.pathCache;u&&u.path===n||((e.pathCache=u=bm(n)).path=n),s&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(s),Tm(t,u,0,0,o,a),t.rotate(-s),t.translate(-r,-i)):Tm(t,u,r,i,o,a)}function _b(t,e){return Ob(iy(t,e.angle),e)?t.set(0,0,0,0):zv(t,e,!0)}var jb={type:"path",tag:"path",nested:!1,attr:wb,bound:_b,draw:Sy(Ob),pick:Ny(Ob),isect:fy(Ob)};function Eb(t,e){t("d",kv(null,e))}function kb(t,e){var n,r;return zv(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)}function Ab(t,e){t.beginPath(),kv(t,e)}var Sb={type:"rect",tag:"path",nested:!1,attr:Eb,bound:kb,draw:Sy(Ab),pick:Ny(Ab),isect:hy};function Cb(t,e){t("transform",Ry(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)}function Db(t,e){var n,r;return zv(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)}function Mb(t,e,n){var r,i,o,a;return!(!e.stroke||!_y(t,e,n))&&(r=e.x||0,i=e.y||0,o=null!=e.x2?e.x2:r,a=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(o,a),!0)}function Tb(t,e,n){ky(e,e=>{if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&Mb(t,e,r)&&(my(t,e),t.stroke())}})}function Nb(t,e,n,r){return!!t.isPointInStroke&&(Mb(t,e,1)&&t.isPointInStroke(n,r))}var Fb={type:"rule",tag:"line",nested:!1,attr:Cb,bound:Db,draw:Tb,pick:My(Nb),isect:py},$b=By("shape",Av),Pb=By("symbol",Sv,dy);const Rb=Object(g["N"])();var Lb={height:Hb,measureWidth:Ub,estimateWidth:Bb,width:Bb,canvas:zb};function zb(t){Lb.width=t&&cy?Ub:Bb}function Bb(t,e){return Ib(Xb(t,e),Hb(t))}function Ib(t,e){return~~(.8*t.length*e)}function Ub(t,e){return Hb(t)<=0||!(e=Xb(t,e))?0:qb(e,Zb(t))}function qb(t,e){const n="(".concat(e,") ").concat(t);let r=Rb.get(n);return void 0===r&&(cy.font=e,r=cy.measureText(t).width,Rb.set(n,r)),r}function Hb(t){return null!=t.fontSize?+t.fontSize||0:11}function Wb(t){return null!=t.lineHeight?t.lineHeight:Hb(t)+2}function Gb(t){return Object(g["B"])(t)?t.length>1?t:t[0]:t}function Yb(t){return Gb(t.lineBreak&&t.text&&!Object(g["B"])(t.text)?t.text.split(t.lineBreak):t.text)}function Vb(t){const e=Yb(t);return(Object(g["B"])(e)?e.length-1:0)*Wb(t)}function Xb(t,e){const n=null==e?"":(e+"").trim();return t.limit>0&&n.length?Qb(t,n):n}function Jb(t){if(Lb.width===Ub){const e=Zb(t);return t=>qb(t,e)}{const e=Hb(t);return t=>Ib(t,e)}}function Qb(t,e){var n=+t.limit,r=Jb(t);if(r(e)<n)return e;var i,o=t.ellipsis||"â¦",a="rtl"===t.dir,s=0,u=e.length;if(n-=r(o),a){while(s<u)i=s+u>>>1,r(e.slice(i))>n?s=i+1:u=i;return o+e.slice(s)}while(s<u)i=1+(s+u>>>1),r(e.slice(0,i))<n?s=i:u=i-1;return e.slice(0,s)+o}function Kb(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Zb(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Hb(t)+"px "+Kb(t,e)}function tx(t){var e=t.baseline,n=Hb(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*Wb(t):"line-bottom"===e?.29*n-.5*Wb(t):0)}zb(!0);const ex={left:"start",center:"middle",right:"end"},nx=new Nv;function rx(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-Om,n+=i*Math.cos(e),r+=i*Math.sin(e)),nx.x1=n,nx.y1=r,nx}function ix(t,e){var n,r=e.dx||0,i=(e.dy||0)+tx(e),o=rx(e),a=o.x1,s=o.y1,u=e.angle||0;t("text-anchor",ex[e.align]||"start"),u?(n=Fy(a,s)+" "+$y(u),(r||i)&&(n+=" "+Fy(r,i))):n=Fy(a+r,s+i),t("transform",n)}function ox(t,e,n){var r,i=Lb.height(e),o=e.align,a=rx(e),s=a.x1,u=a.y1,c=e.dx||0,l=(e.dy||0)+tx(e)-Math.round(.8*i),f=Yb(e);if(Object(g["B"])(f)?(i+=Wb(e)*(f.length-1),r=f.reduce((t,n)=>Math.max(t,Lb.width(e,n)),0)):r=Lb.width(e,f),"center"===o?c-=r/2:"right"===o&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*xm,s,u);else if(2===n)return t.rotatedPoints(e.angle*xm,s,u);return t}function ax(t,e,n){ky(e,e=>{var r,i,o,a,s,u,c,l=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===l||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=Zb(e),t.textAlign=e.align||"left",r=rx(e),i=r.x1,o=r.y1,e.angle&&(t.save(),t.translate(i,o),t.rotate(e.angle*xm),i=o=0),i+=e.dx||0,o+=(e.dy||0)+tx(e),u=Yb(e),my(t,e),Object(g["B"])(u))for(s=Wb(e),a=0;a<u.length;++a)c=Xb(e,u[a]),e.fill&&wy(t,e,l)&&t.fillText(c,i,o),e.stroke&&_y(t,e,l)&&t.strokeText(c,i,o),o+=s;else c=Xb(e,u),e.fill&&wy(t,e,l)&&t.fillText(c,i,o),e.stroke&&_y(t,e,l)&&t.strokeText(c,i,o);e.angle&&t.restore()}})}function sx(t,e,n,r,i,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var a=rx(e),s=a.x1,u=a.y1,c=ox(nx,e,1),l=-e.angle*xm,f=Math.cos(l),d=Math.sin(l),h=f*i-d*o+(s-f*s+d*u),p=d*i+f*o+(u-d*s-f*u);return c.contains(h,p)}function ux(t,e){const n=ox(nx,t,2);return gy(e,n[0],n[1],n[2],n[3])||gy(e,n[0],n[1],n[4],n[5])||gy(e,n[4],n[5],n[6],n[7])||gy(e,n[2],n[3],n[6],n[7])}var cx={type:"text",tag:"text",nested:!1,attr:ix,bound:ox,draw:ax,pick:My(sx),isect:ux},lx=Wy("trail",Cv,Hy),fx={arc:Iy,area:Gy,group:cb,image:bb,line:xb,path:jb,rect:Sb,rule:Fb,shape:$b,symbol:Pb,text:cx,trail:lx};function dx(t,e,n){var r=fx[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new Nv),t,n)}var hx={mark:null};function px(t,e,n){var r,i,o,a,s=fx[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?o=c[0]:(hx.mark=t,o=hx),a=dx(o,u,n),e=e&&e.union(a)||a,e;if(e=e||t.bounds&&t.bounds.clear()||new Nv,l)for(r=0,i=c.length;r<i;++r)e.union(dx(c[r],u,n));return t.bounds=e}const gx=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function mx(t,e){return JSON.stringify(t,gx,e)}function vx(t){const e="string"===typeof t?JSON.parse(t):t;return yx(e)}function yx(t){var e,n,r,i=t.marktype,o=t.items;if(o)for(n=0,r=o.length;n<r;++n)e=i?"mark":"group",o[n][e]=t,o[n].zindex&&(o[n][e].zdirty=!0),"group"===(i||e)&&yx(o[n]);return i&&px(t),t}function bx(t){arguments.length?this.root=vx(t):(this.root=xx({marktype:"group",name:"root",role:"frame"}),this.root.items=[new $v(this.root)])}function xx(t,e){const n={bounds:new Nv,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function wx(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function Ox(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function _x(t,e,n,r){var i,o=t.childNodes[e];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=wx(t.ownerDocument,n,r),t.insertBefore(o,i)),o}function jx(t,e){var n=t.childNodes,r=n.length;while(r>e)t.removeChild(n[--r]);return t}function Ex(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function kx(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function Ax(t,e,n,r){var i,o,a=t&&t.mark;if(a&&(i=fx[a.marktype]).tip){o=kx(e,n),o[0]-=r[0],o[1]-=r[1];while(t=t.mark.group)o[0]-=t.x||0,o[1]-=t.y||0;t=i.tip(a.items,o)}return t}function Sx(t,e){this._active=null,this._handlers={},this._loader=t||Gi(),this._tooltip=e||Cx}function Cx(t,e,n,r){t.element().setAttribute("title",r||"")}function Dx(t){this._el=null,this._bgcolor=null,this._loader=new Pv(t)}bx.prototype={toJSON(t){return mx(this.root,t||0)},mark(t,e,n){e=e||this.root.items[0];const r=xx(t,e);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},Sx.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const r in e)n.push(...e[r]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(e=>{const n=new MouseEvent(t.type,t),r=wx(null,"a");for(const t in e)r.setAttribute(t,e[t]);r.dispatchEvent(n)}).catch(()=>{})},handleTooltip(t,e,n){if(e&&null!=e.tooltip){e=Ax(e,t,this.canvas(),this._origin);const r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;while(t.mark&&(t=t.mark.group))s+=t.x||0,u+=t.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}},Dx.prototype={initialize(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var n=this,r=n._loader[t](e);if(!n._ready){const t=n._call;n._ready=n._loader.ready().then(e=>{e&&t(),n._ready=null})}return r},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const Mx="keydown",Tx="keypress",Nx="keyup",Fx="dragenter",$x="dragleave",Px="dragover",Rx="mousedown",Lx="mouseup",zx="mousemove",Bx="mouseout",Ix="mouseover",Ux="click",qx="dblclick",Hx="wheel",Wx="mousewheel",Gx="touchstart",Yx="touchmove",Vx="touchend",Xx=[Mx,Tx,Nx,Fx,$x,Px,Rx,Lx,zx,Bx,Ix,Ux,qx,Hx,Wx,Gx,Yx,Vx],Jx=zx,Qx=Bx,Kx=Ux;function Zx(t,e){Sx.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const tw=t=>t===Gx||t===Yx||t===Vx?[Gx,Yx,Vx]:[t];function ew(t,e){tw(e).forEach(e=>nw(t,e))}function nw(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}function rw(t,e,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(e,r)),this.fire(t,r)}}function iw(t){return function(e){this.fire(t,e),this._active=null}}function ow(){return"undefined"!==typeof window&&window.devicePixelRatio||1}Object(g["z"])(Zx,Sx,{initialize(t,e,n){return this._canvas=t&&Ox(t,"canvas"),[Ux,Rx,zx,Bx,$x].forEach(t=>ew(this,t)),Sx.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Xx,DOMMouseScroll(t){this.fire(Wx,t)},mousemove:rw(zx,Ix,Bx),dragover:rw(Px,Fx,$x),mouseout:iw(Bx),dragleave:iw($x),mousedown(t){this._down=this._active,this.fire(Rx,t)},click(t){this._down===this._active&&(this.fire(Ux,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Gx,t,!0)},touchmove(t){this.fire(Yx,t,!0)},touchend(t){this.fire(Vx,t,!0),this._touch=null},fire(t,e,n){const r=n?this._touch:this._active,i=this._handlers[t];if(e.vegaType=t,t===Kx&&r&&r.href?this.handleHref(e,r,r.href):t!==Jx&&t!==Qx||this.handleTooltip(e,r,t!==Qx),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,e,r)},on(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);return i<0&&(ew(this,t),(r[n]||(r[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},pickEvent(t){const e=kx(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,r,i){const o=this.context(),a=fx[t.marktype];return a.pick.call(this,o,t,e,n,r,i)}});var aw=ow();function sw(t,e,n,r,i,o){const a="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,s=t.getContext("2d"),u=a?aw:i;t.width=e*u,t.height=n*u;for(const c in o)s[c]=o[c];return a&&1!==u&&(t.style.width=e+"px",t.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1]),t}function uw(t){Dx.call(this,t),this._options={},this._redraw=!1,this._dirty=new Nv,this._tempb=new Nv}const cw=Dx.prototype,lw=(t,e,n)=>(new Nv).set(0,0,e,n).translate(-t[0],-t[1]);function fw(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}function dw(t,e){Sx.call(this,t,e);const n=this;n._hrefHandler=hw(n,(t,e)=>{e&&e.href&&n.handleHref(t,e,e.href)}),n._tooltipHandler=hw(n,(t,e)=>{n.handleTooltip(t,e,t.type!==Qx)})}Object(g["z"])(uw,Dx,{initialize(t,e,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Zl(1,1,this._options.type),t&&this._canvas&&(jx(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),cw.initialize.call(this,t,e,n,r,i)},resize(t,e,n,r){if(cw.resize.call(this,t,e,n,r),this._canvas)sw(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const t=this._options.externalContext;t||Object(g["o"])("CanvasRenderer is missing a valid canvas or context"),t.scale(this._scale,this._scale),t.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;while(n)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=lw(n,r,i);e.save();const s=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):fw(e,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(e,t,s),e.restore(),o.clear(),this},draw(t,e,n){const r=fx[e.marktype];e.clip&&Yy(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(t,e,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(t,e,n,r))}});const hw=(t,e)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,e.call(t._obj,n,r)};Object(g["z"])(dw,Sx,{initialize(t,e,n){let r=this._svg;return r&&(r.removeEventListener(Kx,this._hrefHandler),r.removeEventListener(Jx,this._tooltipHandler),r.removeEventListener(Qx,this._tooltipHandler)),this._svg=r=t&&Ox(t,"svg"),r&&(r.addEventListener(Kx,this._hrefHandler),r.addEventListener(Jx,this._tooltipHandler),r.addEventListener(Qx,this._tooltipHandler)),Sx.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);if(i<0){const i={type:t,handler:e,listener:hw(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const pw="aria-hidden",gw="aria-label",mw="role",vw="aria-roledescription",yw="graphics-object",bw="graphics-symbol",xw=(t,e,n)=>({[mw]:t,[vw]:e,[gw]:n||void 0}),ww=Object(g["fb"])(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Ow={axis:{desc:"axis",caption:Cw},legend:{desc:"legend",caption:Dw},"title-text":{desc:"title",caption:t=>"Title text '".concat(Sw(t),"'")},"title-subtitle":{desc:"subtitle",caption:t=>"Subtitle text '".concat(Sw(t),"'")}},_w={ariaRole:mw,ariaRoleDescription:vw,description:gw};function jw(t,e){const n=!1===e.aria;if(t(pw,n||void 0),n||null==e.description)for(const r in _w)t(_w[r],void 0);else{const n=e.mark.marktype;t(gw,e.description),t(mw,e.ariaRole||("group"===n?yw:bw)),t(vw,e.ariaRoleDescription||"".concat(n," mark"))}}function Ew(t){return!1===t.aria?{[pw]:!0}:ww[t.role]?null:Ow[t.role]?Aw(t,Ow[t.role]):kw(t)}function kw(t){const e=t.marktype,n="group"===e||"text"===e||t.items.some(t=>null!=t.description&&!1!==t.aria);return xw(n?yw:bw,"".concat(e," mark container"),t.description)}function Aw(t,e){try{const n=t.items[0],r=e.caption||(()=>"");return xw(e.role||bw,e.desc,n.description||r(n))}catch(n){return null}}function Sw(t){return Object(g["i"])(t.text).join(" ")}function Cw(t){const e=t.datum,n=t.orient,r=e.title?Mw(t):null,i=t.context,o=i.scales[e.scale].value,a=i.dataflow.locale(),s=o.type,u="left"===n||"right"===n?"Y":"X";return"".concat(u,"-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(mg(s)?"discrete":s," scale")+" with ".concat(sm(a,o,t))}function Dw(t){const e=t.datum,n=e.title?Mw(t):null,r="".concat(e.type||""," legend").trim(),i=e.scales,o=Object.keys(i),a=t.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return Nw(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(Tw(o))+" with ".concat(sm(u,s,t))}function Mw(t){try{return Object(g["i"])(Object(g["W"])(t.items).items[0].text).join(" ")}catch(e){return null}}function Tw(t){return t=t.map(t=>t+("fill"===t||"stroke"===t?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Object(g["W"])(t)}function Nw(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const Fw=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),$w=t=>Fw(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Pw(){let t="",e="",n="";const r=[],i=()=>e=n="",o=o=>{e&&(t+="".concat(e,">").concat(n),i()),r.push(o)},a=(t,n)=>(null!=n&&(e+=" ".concat(t,'="').concat($w(n),'"')),s),s={open(t,...n){o(t),e="<"+t;for(const e of n)for(const t in e)a(t,e[t]);return s},close(){const o=r.pop();return t+=e?e+(n?">".concat(n,"</").concat(o,">"):"/>"):"</".concat(o,">"),i(),s},attr:a,text:t=>(n+=Fw(t),s),toString:()=>t};return s}const Rw=t=>Lw(Pw(),t)+"";function Lw(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,r=n.length;for(let e=0;e<r;++e)t.attr(n[e].name,n[e].value)}if(e.hasChildNodes()){const n=e.childNodes,r=n.length;for(let e=0;e<r;e++){const r=n[e];3===r.nodeType?t.text(r.nodeValue):Lw(t,r)}}return t.close()}const zw={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Bw={fill:"none","stroke-miterlimit":10},Iw=0,Uw="http://www.w3.org/2000/xmlns/",qw=lb.xmlns;function Hw(t){Dx.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const Ww=Dx.prototype;function Gw(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function Yw(t,e,n){let r,i,o;if("radial"===e.gradient){let r=_x(t,n++,"pattern",qw);rO(r,{id:lm+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=_x(r,0,"rect",qw),rO(r,{width:1,height:1,fill:"url(".concat(aO(),"#").concat(e.id,")")}),t=_x(t,n++,"radialGradient",qw),rO(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=_x(t,n++,"linearGradient",qw),rO(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(r=0,i=e.stops.length;r<i;++r)o=_x(t,r,"stop",qw),o.setAttribute("offset",e.stops[r].offset),o.setAttribute("stop-color",e.stops[r].color);return jx(t,r),n}function Vw(t,e,n){let r;return t=_x(t,n,"clipPath",qw),t.setAttribute("id",e.id),e.path?(r=_x(t,0,"path",qw),r.setAttribute("d",e.path)):(r=_x(t,0,"rect",qw),rO(r,{x:0,y:0,width:e.width,height:e.height})),jx(t,1),n+1}function Xw(t,e,n){e=e.lastChild.previousSibling;let r,i=0;ky(n,n=>{r=t.mark(e,n,r),++i}),jx(e,1+i)}function Jw(t,e,n,r,i){let o,a=t._svg;if(!a&&(o=e.ownerDocument,a=wx(o,r,qw),t._svg=a,t.mark&&(a.__data__=t,a.__values__={fill:"default"},"g"===r))){const e=wx(o,"path",qw);a.appendChild(e),e.__data__=t;const n=wx(o,"g",qw);a.appendChild(n),n.__data__=t;const r=wx(o,"path",qw);a.appendChild(r),r.__data__=t,r.__values__={fill:"default"}}return(a.ownerSVGElement!==i||Qw(a,n))&&e.insertBefore(a,n?n.nextSibling:e.firstChild),a}function Qw(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}Object(g["z"])(Hw,Dx,{initialize(t,e,n,r,i){return this._defs={},this._clearDefs(),t&&(this._svg=_x(t,0,"svg",qw),this._svg.setAttributeNS(Uw,"xmlns",qw),this._svg.setAttributeNS(Uw,"xmlns:xlink",lb["xmlns:xlink"]),this._svg.setAttribute("version",lb["version"]),this._svg.setAttribute("class","marks"),jx(t,1),this._root=_x(this._svg,Iw,"g",qw),rO(this._root,Bw),jx(this._svg,Iw+1)),this.background(this._bgcolor),Ww.initialize.call(this,t,e,n,r,i)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),Ww.background.apply(this,arguments)},resize(t,e,n,r){return Ww.resize.call(this,t,e,n,r),this._svg&&(rO(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=_x(t,Iw,"rect",qw),rO(n,{width:this._width,height:this._height,fill:e}));const r=Rw(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),r},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),jx(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,r,i,o,a,s,u;for(a=0,s=t.length;a<s;++a)n=t[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=fx[i]),r.zdirty&&r.dirty!==e&&(this._dirtyAll=!1,Gw(n,e),r.items.forEach(t=>{t.dirty=e})),r.zdirty||(n.exit?(o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null):(n=o.nested?r.items[0]:n,n._update!==e&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,Gw(n,e)),n._update=e)));return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const r=this._svg,i=fx[e.marktype],o=!1===e.interactive?"none":null,a="g"===i.tag;let s=null,u=0;const c=Jw(e,t,n,"g",r);c.setAttribute("class",Ex(e));const l=Ew(e);for(const d in l)iO(c,d,l[d]);a||iO(c,"pointer-events",o),iO(c,"clip-path",e.clip?Tv(this,e,e.group):null);const f=t=>{const e=this.isDirty(t),n=Jw(t,c,s,i.tag,r);e&&(this._update(i,n,t),a&&Xw(this,n,t)),s=n,++u};return i.nested?e.items.length&&f(e.items[0]):ky(e,f),jx(c,u),c},_update(t,e,n){Kw=e,Zw=e.__values__,jw(eO,n),t.attr(eO,n,this);const r=tO[t.type];r&&r.call(this,t,e,n),Kw&&this.style(Kw,n)},style(t,e){if(null!=e)for(const n in zw){let r="font"===n?Kb(e):e[n];if(r===Zw[n])continue;const i=zw[n];null==r?t.removeAttribute(i):(fm(r)&&(r=dm(r,this._defs.gradient,aO())),t.setAttribute(i,r+"")),Zw[n]=r}},defs(){const t=this._svg,e=this._defs;let n=e.el,r=0;for(const i in e.gradient)n||(e.el=n=_x(t,Iw+1,"defs",qw)),r=Yw(n,e.gradient[i],r);for(const i in e.clipping)n||(e.el=n=_x(t,Iw+1,"defs",qw)),r=Vw(n,e.clipping[i],r);n&&(0===r?(t.removeChild(n),e.el=null):jx(n,r))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});let Kw=null,Zw=null;const tO={group(t,e,n){const r=Kw=e.childNodes[2];Zw=r.__values__,t.foreground(eO,n,this),Zw=e.__values__,Kw=e.childNodes[1],t.content(eO,n,this);const i=Kw=e.childNodes[0];t.background(eO,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==Zw.events&&(iO(r,"pointer-events",o),iO(i,"pointer-events",o),Zw.events=o),n.strokeForeground&&n.stroke){const t=n.fill;iO(r,"display",null),this.style(i,n),iO(i,"stroke",null),t&&(n.fill=null),Zw=r.__values__,this.style(r,n),t&&(n.fill=t),Kw=null}else iO(r,"display","none")},image(t,e,n){!1===n.smooth?(nO(e,"image-rendering","optimizeSpeed"),nO(e,"image-rendering","pixelated")):nO(e,"image-rendering",null)},text(t,e,n){const r=Yb(n);let i,o,a,s;Object(g["B"])(r)?(o=r.map(t=>Xb(n,t)),i=o.join("\n"),i!==Zw.text&&(jx(e,0),a=e.ownerDocument,s=Wb(n),o.forEach((t,r)=>{const i=wx(a,"tspan",qw);i.__data__=n,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),e.appendChild(i)}),Zw.text=i)):(o=Xb(n,r),o!==Zw.text&&(e.textContent=o,Zw.text=o)),iO(e,"font-family",Kb(n)),iO(e,"font-size",Hb(n)+"px"),iO(e,"font-style",n.fontStyle),iO(e,"font-variant",n.fontVariant),iO(e,"font-weight",n.fontWeight)}};function eO(t,e,n){e!==Zw[t]&&(n?oO(Kw,t,e,n):iO(Kw,t,e),Zw[t]=e)}function nO(t,e,n){n!==Zw[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),Zw[e]=n)}function rO(t,e){for(const n in e)iO(t,n,e[n])}function iO(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function oO(t,e,n,r){null!=n?t.setAttributeNS(r,e,n):t.removeAttributeNS(r,e)}function aO(){let t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function sO(t){Dx.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}function uO(t,e,n,r,i){if(null==e)return t;if("bgrect"===r&&!1===n.interactive&&(t["pointer-events"]="none"),"bgfore"===r&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===r&&!1===e.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===r&&(t["font-family"]=Kb(e),t["font-size"]=Hb(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const o in zw){let n=e[o];const r=zw[o];("transparent"!==n||"fill"!==r&&"stroke"!==r)&&null!=n&&(fm(n)&&(n=dm(n,i.gradient,"")),t[r]=n)}return t}Object(g["z"])(sO,Dx,{svg(){return this._text},_render(t){const e=Pw();e.open("svg",Object(g["p"])({},lb,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",Bw,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=fx[e.marktype],r=n.tag,i=[jw,n.attr];t.open("g",{class:Ex(e),"clip-path":e.clip?Tv(this,e,e.group):null},Ew(e),{"pointer-events":"g"!==r&&!1===e.interactive?"none":null});const o=o=>{const a=this.href(o);if(a&&t.open("a",a),t.open(r,this.attr(e,o,i,"g"!==r?r:null)),"text"===r){const e=Yb(o);if(Object(g["B"])(e)){const n={x:0,dy:Wb(o)};for(let r=0;r<e.length;++r)t.open("tspan",r?n:null).text(Xb(o,e[r])).close()}else t.text(Xb(o,e))}else if("g"===r){const r=o.strokeForeground,i=o.fill,a=o.stroke;r&&a&&(o.stroke=null),t.open("path",this.attr(e,o,n.background,"bgrect")).close(),t.open("g",this.attr(e,o,n.content)),ky(o,e=>this.mark(t,e)),t.close(),r&&a?(i&&(o.fill=null),o.stroke=a,t.open("path",this.attr(e,o,n.foreground,"bgrect")).close(),i&&(o.fill=i)):t.open("path",this.attr(e,o,n.foreground,"bgfore")).close()}t.close(),a&&t.close()};return n.nested?e.items&&e.items.length&&o(e.items[0]):ky(e,o),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(t=>{t["xlink:href"]=t.href,t.href=null,(this._hrefs||(this._hrefs={}))[e]=t})}return null},attr(t,e,n,r){const i={},o=(t,e,n,r)=>{i[r||t]=e};return Array.isArray(n)?n.forEach(t=>t(o,e,this)):n(o,e,this),r&&uO(i,e,t,r,this._defs),i},defs(t){const e=this._defs.gradient,n=this._defs.clipping,r=Object.keys(e).length+Object.keys(n).length;if(0!==r){t.open("defs");for(const n in e){const r=e[n],i=r.stops;"radial"===r.gradient?(t.open("pattern",{id:lm+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),t.close(),t.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):t.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let e=0;e<i.length;++e)t.open("stop",{offset:i[e].offset,"stop-color":i[e].color}).close();t.close()}for(const e in n){const r=n[e];t.open("clipPath",{id:e}),r.path?t.open("path",{d:r.path}).close():t.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),t.close()}t.close()}}});const cO="canvas",lO="png",fO="svg",dO="none",hO={Canvas:cO,PNG:lO,SVG:fO,None:dO},pO={};function gO(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(pO[t]=e,this):pO[t]}function mO(t,e,n){const r=[],i=(new Nv).union(e),o=t.marktype;return o?vO(t,i,n,r):"group"===o?bO(t,i,n,r):Object(g["o"])("Intersect scene must be mark node or group item.")}function vO(t,e,n,r){if(yO(t,e,n)){const i=t.items,o=t.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)bO(i[s],e,n,r);else for(const t=fx[o].isect;s<a;++s){const n=i[s];xO(n,e,t)&&r.push(n)}}return r}function yO(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}function bO(t,e,n,r){n&&n(t.mark)&&xO(t,e,fx.group.isect)&&r.push(t);const i=t.items,o=i&&i.length;if(o){const a=t.x||0,s=t.y||0;e.translate(-a,-s);for(let t=0;t<o;++t)vO(i[t],e,n,r);e.translate(a,s)}return r}function xO(t,e,n){const r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}pO[cO]=pO[lO]={renderer:uw,headless:uw,handler:Zx},pO[fO]={renderer:Hw,headless:sO,handler:dw},pO[dO]={};const wO=new Nv;function OO(t){const e=t.clip;if(Object(g["E"])(e))e(iy(wO.clear()));else{if(!e)return;wO.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(wO)}const _O=1e-9;function jO(t,e,n){return t===e||("path"===n?EO(t,e):t instanceof Date&&e instanceof Date?+t===+e:Object(g["G"])(t)&&Object(g["G"])(e)?Math.abs(t-e)<=_O:t&&e&&(Object(g["H"])(t)||Object(g["H"])(e))?kO(t,e):t==e)}function EO(t,e){return jO(bm(t),bm(e))}function kO(t,e){var n,r,i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!jO(t[n],e[n],n))return!1;return typeof t===typeof e}function AO(){Mv(),cm()}const SO="top",CO="left",DO="right",MO="bottom",TO="top-left",NO="top-right",FO="bottom-left",$O="bottom-right",PO="start",RO="middle",LO="end",zO="x",BO="y",IO="group",UO="axis",qO="title",HO="frame",WO="scope",GO="legend",YO="row-header",VO="row-footer",XO="row-title",JO="column-header",QO="column-footer",KO="column-title",ZO="padding",t_="symbol",e_="fit",n_="fit-x",r_="fit-y",i_="pad",o_="none",a_="all",s_="each",u_="flush",c_="column",l_="row";function f_(t){pa.call(this,null,t)}function d_(t,e,n){return e(t.bounds.clear(),t,n)}Object(g["z"])(f_,pa,{transform(t,e){const n=e.dataflow,r=t.mark,i=r.marktype,o=fx[i],a=o.bound;let s,u=r.bounds;if(o.nested)r.items.length&&n.dirty(r.items[0]),u=d_(r,a),r.items.forEach(t=>{t.bounds.clear().union(u)});else if(i===IO||t.modified())switch(e.visit(e.MOD,t=>n.dirty(t)),u.clear(),r.items.forEach(t=>u.union(d_(t,a))),r.role){case UO:case GO:case qO:e.reflow()}else s=e.changed(e.REM),e.visit(e.ADD,t=>{u.union(d_(t,a))}),e.visit(e.MOD,t=>{s=s||u.alignsWith(t.bounds),n.dirty(t),u.union(d_(t,a))}),s&&(u.clear(),r.items.forEach(t=>u.union(t.bounds)));return OO(r),e.modifies("bounds")}});const h_=":vega_identifier:";function p_(t){pa.call(this,0,t)}function g_(t){return t._signals[h_]||(t._signals[h_]=t.add(0))}function m_(t){pa.call(this,null,t)}function v_(t){const e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function y_(t){pa.call(this,null,t)}p_.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(g["z"])(p_,pa,{transform(t,e){const n=g_(e.dataflow),r=t.as;let i=n.value;return e.visit(e.ADD,t=>t[r]=t[r]||++i),n.set(this.value=i),e}}),Object(g["z"])(m_,pa,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,v_(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const r=n.marktype===IO?$v:Fv;return e.visit(e.ADD,t=>r.call(t,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});const b_={parity:t=>t.filter((t,e)=>e%2?t.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((t,r)=>r&&x_(n.bounds,t.bounds,e)?t.opacity=0:(n=t,1))}},x_=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),w_=(t,e)=>{for(var n,r=1,i=t.length,o=t[0].bounds;r<i;o=n,++r)if(x_(o,n=t[r].bounds,e))return!0},O_=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},__=(t,e,n)=>{var r=t.range(),i=new Nv;return e===SO||e===MO?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),t=>i.encloses(t.bounds)},j_=t=>(t.forEach(t=>t.opacity=1),t),E_=(t,e)=>t.reflow(e.modified()).modifies("opacity");function k_(t){pa.call(this,null,t)}Object(g["z"])(y_,pa,{transform(t,e){const n=b_[t.method]||b_.parity,r=t.separation||0;let i,o,a=e.materialize(e.SOURCE).source;if(!a||!a.length)return;if(!t.method)return t.modified("method")&&(j_(a),e=E_(e,t)),e;if(a=a.filter(O_),!a.length)return;if(t.sort&&(a=a.slice().sort(t.sort)),i=j_(a),e=E_(e,t),i.length>=3&&w_(i,r)){do{i=n(i,r)}while(i.length>=3&&w_(i,r));i.length<3&&!Object(g["W"])(a).opacity&&(i.length>1&&(Object(g["W"])(i).opacity=0),Object(g["W"])(a).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(o=__(t.boundScale,t.boundOrient,+t.boundTolerance),a.forEach(t=>{o(t)||(t.opacity=0)}));const s=i[0].mark.bounds.clear();return a.forEach(t=>{t.opacity&&s.union(t.bounds)}),e}}),Object(g["z"])(k_,pa,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,t=>n.dirty(t)),e.fields&&e.fields["zindex"]){const t=e.source&&e.source[0];t&&(t.mark.zdirty=!0)}}});const A_=new Nv;function S_(t,e,n){return t[e]===n?0:(t[e]=n,1)}function C_(t){var e=t.items[0].orient;return e===CO||e===DO}function D_(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function M_(t,e,n,r){var i,o,a=e.items[0],s=a.datum,u=null!=a.translate?a.translate:.5,c=a.orient,l=D_(s),f=a.range,d=a.offset,h=a.position,p=a.minExtent,g=a.maxExtent,m=s.title&&a.items[l[2]].items[0],v=a.titlePadding,y=a.bounds,b=m&&Vb(m),x=0,w=0;switch(A_.clear().union(y),y.clear(),(i=l[0])>-1&&y.union(a.items[i].bounds),(i=l[1])>-1&&y.union(a.items[i].bounds),c){case SO:x=h||0,w=-d,o=Math.max(p,Math.min(g,-y.y1)),y.add(0,-o).add(f,0),m&&T_(t,m,o,v,b,0,-1,y);break;case CO:x=-d,w=h||0,o=Math.max(p,Math.min(g,-y.x1)),y.add(-o,0).add(0,f),m&&T_(t,m,o,v,b,1,-1,y);break;case DO:x=n+d,w=h||0,o=Math.max(p,Math.min(g,y.x2)),y.add(0,0).add(o,f),m&&T_(t,m,o,v,b,1,1,y);break;case MO:x=h||0,w=r+d,o=Math.max(p,Math.min(g,y.y2)),y.add(0,0).add(f,o),m&&T_(t,m,o,v,0,0,1,y);break;default:x=a.x,w=a.y}return zv(y.translate(x,w),a),S_(a,"x",x+u)|S_(a,"y",w+u)&&(a.bounds=A_,t.dirty(a),a.bounds=y,t.dirty(a)),a.mark.bounds.clear().union(y)}function T_(t,e,n,r,i,o,a,s){const u=e.bounds;if(e.auto){const s=a*(n+i+r);let c=0,l=0;t.dirty(e),o?c=(e.x||0)-(e.x=s):l=(e.y||0)-(e.y=s),e.mark.bounds.clear().union(u.translate(-c,-l)),t.dirty(e)}s.union(u)}const N_=(t,e)=>Math.floor(Math.min(t,e)),F_=(t,e)=>Math.ceil(Math.max(t,e));function $_(t){var e,n,r=t.items,i=r.length,o=0;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<i;++o)if(e=r[o],n=e.items,e.marktype===IO)switch(e.role){case UO:case GO:case qO:break;case YO:a.rowheaders.push(...n);break;case VO:a.rowfooters.push(...n);break;case JO:a.colheaders.push(...n);break;case QO:a.colfooters.push(...n);break;case XO:a.rowtitle=n[0];break;case KO:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}function P_(t){return(new Nv).set(0,0,t.width||0,t.height||0)}function R_(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function L_(t,e,n){const r=Object(g["H"])(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function z_(t){return t<0?Math.ceil(-t):0}function B_(t,e,n){var r,i,o,a,s,u,c,l,f,d,h,p=!n.nodirty,g=n.bounds===u_?P_:R_,m=A_.set(0,0,0,0),v=L_(n.align,c_),y=L_(n.align,l_),b=L_(n.padding,c_),x=L_(n.padding,l_),w=n.columns||e.length,O=w<=0?1:Math.ceil(e.length/w),_=e.length,j=Array(_),E=Array(w),k=0,A=Array(_),S=Array(O),C=0,D=Array(_),M=Array(_),T=Array(_);for(i=0;i<w;++i)E[i]=0;for(i=0;i<O;++i)S[i]=0;for(i=0;i<_;++i)u=e[i],s=T[i]=g(u),u.x=u.x||0,D[i]=0,u.y=u.y||0,M[i]=0,o=i%w,a=~~(i/w),k=Math.max(k,c=Math.ceil(s.x2)),C=Math.max(C,l=Math.ceil(s.y2)),E[o]=Math.max(E[o],c),S[a]=Math.max(S[a],l),j[i]=b+z_(s.x1),A[i]=x+z_(s.y1),p&&t.dirty(e[i]);for(i=0;i<_;++i)i%w===0&&(j[i]=0),i<w&&(A[i]=0);if(v===s_)for(o=1;o<w;++o){for(h=0,i=o;i<_;i+=w)h<j[i]&&(h=j[i]);for(i=o;i<_;i+=w)j[i]=h+E[o-1]}else if(v===a_){for(h=0,i=0;i<_;++i)i%w&&h<j[i]&&(h=j[i]);for(i=0;i<_;++i)i%w&&(j[i]=h+k)}else for(v=!1,o=1;o<w;++o)for(i=o;i<_;i+=w)j[i]+=E[o-1];if(y===s_)for(a=1;a<O;++a){for(h=0,i=a*w,r=i+w;i<r;++i)h<A[i]&&(h=A[i]);for(i=a*w;i<r;++i)A[i]=h+S[a-1]}else if(y===a_){for(h=0,i=w;i<_;++i)h<A[i]&&(h=A[i]);for(i=w;i<_;++i)A[i]=h+C}else for(y=!1,a=1;a<O;++a)for(i=a*w,r=i+w;i<r;++i)A[i]+=S[a-1];for(f=0,i=0;i<_;++i)f=j[i]+(i%w?f:0),D[i]+=f-e[i].x;for(o=0;o<w;++o)for(d=0,i=o;i<_;i+=w)d+=A[i],M[i]+=d-e[i].y;if(v&&L_(n.center,c_)&&O>1)for(i=0;i<_;++i)s=v===a_?k:E[i%w],f=s-T[i].x2-e[i].x-D[i],f>0&&(D[i]+=f/2);if(y&&L_(n.center,l_)&&1!==w)for(i=0;i<_;++i)s=y===a_?C:S[~~(i/w)],d=s-T[i].y2-e[i].y-M[i],d>0&&(M[i]+=d/2);for(i=0;i<_;++i)m.union(T[i].translate(D[i],M[i]));switch(f=L_(n.anchor,zO),d=L_(n.anchor,BO),L_(n.anchor,c_)){case LO:f-=m.width();break;case RO:f-=m.width()/2}switch(L_(n.anchor,l_)){case LO:d-=m.height();break;case RO:d-=m.height()/2}for(f=Math.round(f),d=Math.round(d),m.clear(),i=0;i<_;++i)e[i].mark.bounds.clear();for(i=0;i<_;++i)u=e[i],u.x+=D[i]+=f,u.y+=M[i]+=d,m.union(u.mark.bounds.union(u.bounds.translate(D[i],M[i]))),p&&t.dirty(u);return m}function I_(t,e,n){var r,i,o,a,s,u,c,l=$_(e),f=l.marks,d=n.bounds===u_?U_:q_,h=n.offset,p=n.columns||f.length,g=p<=0?1:Math.ceil(f.length/p),m=g*p;const v=B_(t,f,n);v.empty()&&v.set(0,0,0,0),l.rowheaders&&(u=L_(n.headerBand,l_,null),r=H_(t,l.rowheaders,f,p,g,-L_(h,"rowHeader"),N_,0,d,"x1",0,p,1,u)),l.colheaders&&(u=L_(n.headerBand,c_,null),i=H_(t,l.colheaders,f,p,p,-L_(h,"columnHeader"),N_,1,d,"y1",0,1,p,u)),l.rowfooters&&(u=L_(n.footerBand,l_,null),o=H_(t,l.rowfooters,f,p,g,L_(h,"rowFooter"),F_,0,d,"x2",p-1,p,1,u)),l.colfooters&&(u=L_(n.footerBand,c_,null),a=H_(t,l.colfooters,f,p,p,L_(h,"columnFooter"),F_,1,d,"y2",m-p,1,p,u)),l.rowtitle&&(s=L_(n.titleAnchor,l_),c=L_(h,"rowTitle"),c=s===LO?o+c:r-c,u=L_(n.titleBand,l_,.5),W_(t,l.rowtitle,c,0,v,u)),l.coltitle&&(s=L_(n.titleAnchor,c_),c=L_(h,"columnTitle"),c=s===LO?a+c:i-c,u=L_(n.titleBand,c_,.5),W_(t,l.coltitle,c,1,v,u))}function U_(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function q_(t,e){return t.bounds[e]}function H_(t,e,n,r,i,o,a,s,u,c,l,f,d,h){var p,g,m,v,y,b,x,w,O,_=n.length,j=0,E=0;if(!_)return j;for(p=l;p<_;p+=f)n[p]&&(j=a(j,u(n[p],c)));if(!e.length)return j;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),j+=o,g=0,v=e.length;g<v;++g)t.dirty(e[g]),e[g].mark.bounds.clear();for(p=l,g=0,v=e.length;g<v;++g,p+=f){for(b=e[g],y=b.mark.bounds,m=p;m>=0&&null==(x=n[m]);m-=d);s?(w=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),O=j):(w=j,O=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),y.union(b.bounds.translate(w-(b.x||0),O-(b.y||0))),b.x=w,b.y=O,t.dirty(b),E=a(E,y[c])}return E}function W_(t,e,n,r,i,o){if(e){t.dirty(e);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),e.bounds.translate(a-(e.x||0),s-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=a,e.y=s,t.dirty(e)}}function G_(t,e){const n=t[e]||{};return(e,r)=>null!=n[e]?n[e]:null!=t[e]?t[e]:r}function Y_(t,e){let n=-1/0;return t.forEach(t=>{null!=t.offset&&(n=Math.max(n,t.offset))}),n>-1/0?n:e}function V_(t,e,n,r,i,o,a){const s=G_(n,e),u=Y_(t,s("offset",0)),c=s("anchor",PO),l=c===LO?1:c===RO?.5:0,f={align:s_,bounds:s("bounds",u_),columns:"vertical"===s("direction")?1:t.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(e){case CO:f.anchor={x:Math.floor(r.x1)-u,column:LO,y:l*(a||r.height()+2*r.y1),row:c};break;case DO:f.anchor={x:Math.ceil(r.x2)+u,y:l*(a||r.height()+2*r.y1),row:c};break;case SO:f.anchor={y:Math.floor(i.y1)-u,row:LO,x:l*(o||i.width()+2*i.x1),column:c};break;case MO:f.anchor={y:Math.ceil(i.y2)+u,x:l*(o||i.width()+2*i.x1),column:c};break;case TO:f.anchor={x:u,y:u};break;case NO:f.anchor={x:o-u,y:u,column:LO};break;case FO:f.anchor={x:u,y:a-u,row:LO};break;case $O:f.anchor={x:o-u,y:a-u,column:LO,row:LO};break}return f}function X_(t,e){var n,r,i=e.items[0],o=i.datum,a=i.orient,s=i.bounds,u=i.x,c=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),Q_(t,i,i.items[0].items[0]),s=J_(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),o.type===t_&&tj(i.items[0].items[0].items[0].items),a!==o_&&(i.x=u=0,i.y=c=0),i.width=n,i.height=r,zv(s.set(u,c,u+n,c+r),i),i.mark.bounds.clear().union(s),i}function J_(t,e){return t.items.forEach(t=>e.union(t.bounds)),e.x1=t.padding,e.y1=t.padding,e}function Q_(t,e,n){var r=e.padding,i=r-n.x,o=r-n.y;if(e.datum.title){var a=e.items[1].items[0],s=a.anchor,u=e.titlePadding||0,c=r-a.x,l=r-a.y;switch(a.orient){case CO:i+=Math.ceil(a.bounds.width())+u;break;case DO:case MO:break;default:o+=a.bounds.height()+u}switch((i||o)&&Z_(t,n,i,o),a.orient){case CO:l+=K_(e,n,a,s,1,1);break;case DO:c+=K_(e,n,a,LO,0,0)+u,l+=K_(e,n,a,s,1,1);break;case MO:c+=K_(e,n,a,s,0,0),l+=K_(e,n,a,LO,-1,0,1)+u;break;default:c+=K_(e,n,a,s,0,0)}(c||l)&&Z_(t,a,c,l),(c=Math.round(a.bounds.x1-r))<0&&(Z_(t,n,-c,0),Z_(t,a,-c,0))}else(i||o)&&Z_(t,n,i,o)}function K_(t,e,n,r,i,o,a){const s="symbol"!==t.datum.type,u=n.datum.vgrad,c=!s||!o&&u||a?e:e.items[0],l=c.bounds[i?"y2":"x2"]-t.padding,f=u&&o?l:0,d=u&&o?0:l,h=i<=0?0:Vb(n);return Math.round(r===PO?f:r===LO?d-h:.5*(l-h))}function Z_(t,e,n,r){e.x+=n,e.y+=r,e.bounds.translate(n,r),e.mark.bounds.translate(n,r),t.dirty(e)}function tj(t){const e=t.reduce((t,e)=>(t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t),{});t.forEach(t=>{t.width=e[t.column],t.height=t.bounds.y2-t.y})}function ej(t,e,n,r,i){var o,a=e.items[0],s=a.frame,u=a.orient,c=a.anchor,l=a.offset,f=a.padding,d=a.items[0].items[0],h=a.items[1]&&a.items[1].items[0],p=u===CO||u===DO?r:n,g=0,m=0,v=0,y=0,b=0;if(s!==IO?u===CO?(g=i.y2,p=i.y1):u===DO?(g=i.y1,p=i.y2):(g=i.x1,p=i.x2):u===CO&&(g=r,p=0),o=c===PO?g:c===LO?p:(g+p)/2,h&&h.text){switch(u){case SO:case MO:b=d.bounds.height()+f;break;case CO:y=d.bounds.width()+f;break;case DO:y=-d.bounds.width()-f;break}A_.clear().union(h.bounds),A_.translate(y-(h.x||0),b-(h.y||0)),S_(h,"x",y)|S_(h,"y",b)&&(t.dirty(h),h.bounds.clear().union(A_),h.mark.bounds.clear().union(A_),t.dirty(h)),A_.clear().union(h.bounds)}else A_.clear();switch(A_.union(d.bounds),u){case SO:m=o,v=i.y1-A_.height()-l;break;case CO:m=i.x1-A_.width()-l,v=o;break;case DO:m=i.x2+A_.width()+l,v=o;break;case MO:m=o,v=i.y2+l;break;default:m=a.x,v=a.y}return S_(a,"x",m)|S_(a,"y",v)&&(A_.translate(m,v),t.dirty(a),a.bounds.clear().union(A_),e.bounds.clear().union(A_),t.dirty(a)),a.bounds}function nj(t){pa.call(this,null,t)}function rj(t){return t&&"legend-entry"!==t.mark.role}function ij(t,e,n){var r,i,o,a,s,u,c=e.items,l=Math.max(0,e.width||0),f=Math.max(0,e.height||0),d=(new Nv).set(0,0,l,f),h=d.clone(),p=d.clone(),g=[];for(s=0,u=c.length;s<u;++s)switch(i=c[s],i.role){case UO:a=C_(i)?h:p,a.union(M_(t,i,l,f));break;case qO:r=i;break;case GO:g.push(X_(t,i));break;case HO:case WO:case YO:case VO:case XO:case JO:case QO:case KO:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}if(g.length){const e={};g.forEach(t=>{o=t.orient||DO,o!==o_&&(e[o]||(e[o]=[])).push(t)});for(const r in e){const i=e[r];B_(t,i,V_(i,r,n.legends,h,p,l,f))}g.forEach(e=>{const r=e.bounds;if(r.equals(e._bounds)||(e.bounds=e._bounds,t.dirty(e),e.bounds=r,t.dirty(e)),n.autosize&&n.autosize.type===e_)switch(e.orient){case CO:case DO:d.add(r.x1,0).add(r.x2,0);break;case SO:case MO:d.add(0,r.y1).add(0,r.y2)}else d.union(r)})}d.union(h).union(p),r&&d.union(ej(t,r,l,f,d)),e.clip&&d.set(0,0,e.width||0,e.height||0),oj(t,e,d,n)}function oj(t,e,n,r){const i=r.autosize||{},o=i.type;if(t._autosize<1||!o)return;let a=t._width,s=t._height,u=Math.max(0,e.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,e.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-l));if(i.contains===ZO){const e=t.padding();a-=e.left+e.right,s-=e.top+e.bottom}o===o_?(c=0,f=0,u=a,l=s):o===e_?(u=Math.max(0,a-c-d),l=Math.max(0,s-f-h)):o===n_?(u=Math.max(0,a-c-d),s=l+f+h):o===r_?(a=u+c+d,l=Math.max(0,s-f-h)):o===i_&&(a=u+c+d,s=l+f+h),t._resizeView(a,s,u,l,[c,f],i.resize)}function aj(t,e){let n=0;if(void 0===e)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function sj(t){pa.call(this,null,t)}function uj(t){pa.call(this,null,t)}function cj(){return to({})}function lj(t){const e=Object(g["t"])().test(t=>t.exit);return e.lookup=n=>e.get(t(n)),e}function fj(t){pa.call(this,null,t)}function dj(t){pa.call(this,[],t)}Object(g["z"])(nj,pa,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(e=>{t.layout&&I_(n,e,t.layout),ij(n,e,t)}),rj(t.mark.group)?e.reflow():e}}),Object(g["z"])(sj,pa,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,o=t.scale,a=null==t.count?t.values?t.values.length:10:t.count,s=Ig(o,a,t.minstep),u=t.format||Hg(n,o,s,t.formatSpecifier,t.formatType,!!t.values),c=t.values?Ug(o,t.values,s):qg(o,s);return i&&(r.rem=i),i=c.map((t,e)=>to({index:e/(c.length-1||1),value:t,label:u(t)})),t.extra&&i.length&&i.push(to({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),Object(g["z"])(uj,pa,{transform(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||cj,o=t.key||Ki,a=this.value;return Object(g["B"])(r.encode)&&(r.encode=null),a&&(t.modified("key")||e.modified(o))&&Object(g["o"])("DataJoin does not support modified key function or fields."),a||(e=e.addAll(),this.value=a=lj(o)),e.visit(e.ADD,t=>{const e=o(t);let n=a.get(e);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(n=i(t),a.set(e,n),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,t=>{const e=o(t),n=a.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,t=>{const e=o(t),n=a.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),(e.clean()||t.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}}),Object(g["z"])(fj,pa,{transform(t,e){var n=e.fork(e.ADD_REM),r=t.mod||!1,i=t.encoders,o=e.encode;if(Object(g["B"])(o)){if(!n.changed()&&!o.every(t=>i[t]))return e.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||g["s"],u=i.enter||g["s"],c=i.exit||g["s"],l=(o&&!a?i[o]:s)||g["s"];if(e.changed(e.ADD)&&(e.visit(e.ADD,e=>{u(e,t),s(e,t)}),n.modifies(u.output),n.modifies(s.output),l!==g["s"]&&l!==s&&(e.visit(e.ADD,e=>{l(e,t)}),n.modifies(l.output))),e.changed(e.REM)&&c!==g["s"]&&(e.visit(e.REM,e=>{c(e,t)}),n.modifies(c.output)),a||l!==g["s"]){const i=e.MOD|(t.modified()?e.REFLOW:0);a?(e.visit(i,e=>{const i=u(e,t)||r;(l(e,t)||i)&&n.mod.push(e)}),n.mod.length&&n.modifies(u.output)):e.visit(i,e=>{(l(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(l.output)}return n.changed()?n:e.StopPropagation}}),Object(g["z"])(dj,pa,{transform(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,r,i,o,a,s=e.dataflow.locale(),u=e.fork(e.NO_SOURCE|e.NO_FIELDS),c=this.value,l=t.type||$g,f=t.scale,d=+t.limit,h=Ig(f,null==t.count?5:t.count,t.minstep),p=!!t.values||l===$g,m=t.format||Zg(s,f,h,l,t.formatSpecifier,t.formatType,p),v=t.values||Vg(f,h);return c&&(u.rem=c),l===$g?(d&&v.length>d?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),c=v.slice(0,d-1),a=!0):c=v,Object(g["E"])(i=t.size)?(t.values||0!==f(c[0])||(c=c.slice(1)),o=c.reduce((e,n)=>Math.max(e,i(n,t)),0)):i=Object(g["m"])(o=i||8),c=c.map((e,n)=>to({index:n,label:m(e,n,c),value:e,offset:o,size:i(e,t)})),a&&(a=v[c.length],c.push(to({index:c.length,label:"â¦".concat(v.length-c.length," entries"),value:a,offset:o,size:i(a,t)})))):l===Rg?(n=f.domain(),r=kg(f,n[0],Object(g["W"])(n)),v.length<3&&!t.values&&n[0]!==Object(g["W"])(n)&&(v=[n[0],Object(g["W"])(n)]),c=v.map((t,e)=>to({index:e,label:m(t,e,v),value:t,perc:r(t)}))):(i=v.length-1,r=om(f),c=v.map((t,e)=>to({index:e,label:m(t,e,v),value:t,perc:e?r(t):0,perc2:e===i?1:r(v[e+1])}))),u.source=c,u.add=c,this.value=c,u}});const hj=t=>t.source.x,pj=t=>t.source.y,gj=t=>t.target.x,mj=t=>t.target.y;function vj(t){pa.call(this,{},t)}vj.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(g["z"])(vj,pa,{transform(t,e){var n=t.sourceX||hj,r=t.sourceY||pj,i=t.targetX||gj,o=t.targetY||mj,a=t.as||"path",s=t.orient||"vertical",u=t.shape||"line",c=Dj.get(u+"-"+s)||Dj.get(u);return c||Object(g["o"])("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,t=>{t[a]=c(n(t),r(t),i(t),o(t))}),e.reflow(t.modified()).modifies(a)}});const yj=(t,e,n,r)=>"M"+t+","+e+"L"+n+","+r,bj=(t,e,n,r)=>yj(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),xj=(t,e,n,r)=>{var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+t+","+e+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},wj=(t,e,n,r)=>xj(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),Oj=(t,e,n,r)=>{const i=n-t,o=r-e,a=.2*(i+o),s=.2*(o-i);return"M"+t+","+e+"C"+(t+a)+","+(e+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},_j=(t,e,n,r)=>Oj(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),jj=(t,e,n,r)=>"M"+t+","+e+"V"+r+"H"+n,Ej=(t,e,n,r)=>"M"+t+","+e+"H"+n+"V"+r,kj=(t,e,n,r)=>{const i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),s=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*o+"A"+e+","+e+" 0 0,"+(u?1:0)+" "+e*a+","+e*s+"L"+r*a+","+r*s},Aj=(t,e,n,r)=>{const i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},Sj=(t,e,n,r)=>{const i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},Cj=(t,e,n,r)=>{const i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),s=Math.sin(n),u=(e+r)/2;return"M"+e*i+","+e*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s},Dj=Object(g["t"])({line:yj,"line-radial":bj,arc:xj,"arc-radial":wj,curve:Oj,"curve-radial":_j,"orthogonal-horizontal":jj,"orthogonal-vertical":Ej,"orthogonal-radial":kj,"diagonal-horizontal":Aj,"diagonal-vertical":Sj,"diagonal-radial":Cj});function Mj(t){pa.call(this,null,t)}Mj.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(g["z"])(Mj,pa,{transform(t,e){var n,r,i,o=t.as||["startAngle","endAngle"],a=o[0],s=o[1],u=t.field||g["Q"],c=t.startAngle||0,l=null!=t.endAngle?t.endAngle:2*Math.PI,f=e.source,d=f.map(u),h=d.length,p=c,m=(l-c)/aj(d),v=Ds(h);for(t.sort&&v.sort((t,e)=>d[t]-d[e]),n=0;n<h;++n)i=d[v[n]],r=f[v[n]],r[a]=p,r[s]=p+=i*m;return this.value=d,e.reflow(t.modified()).modifies(o)}});const Tj=5;function Nj(t){const e=t.type;return!t.bins&&(e===Fp||e===Pp||e===Rp)}function Fj(t){return gg(t)&&t!==Ip}const $j=Object(g["fb"])(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Pj(t){pa.call(this,null,t),this.modified(!0)}function Rj(t){var e,n=t.type,r="";return n===Ip?Ip+"-"+Fp:(Lj(t)&&(e=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0,r=2===e?Ip+"-":3===e?Up+"-":""),(r+n||Fp).toLowerCase())}function Lj(t){const e=t.type;return gg(e)&&e!==zp&&e!==Bp&&(t.scheme||t.range&&t.range.length&&t.range.every(g["J"]))}function zj(t,e,n){const r=Bj(t,e.domainRaw,n);if(r>-1)return r;var i,o,a=e.domain,s=t.type,u=e.zero||void 0===e.zero&&Nj(t);if(!a)return 0;if(Fj(s)&&e.padding&&a[0]!==Object(g["W"])(a)&&(a=Ij(s,a,e.range,e.padding,e.exponent,e.constant)),(u||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(a=a.slice()).length-1||1,u&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=e.domainMin&&(a[0]=e.domainMin),null!=e.domainMax&&(a[i]=e.domainMax),null!=e.domainMid)){o=e.domainMid;const t=o>a[i]?i+1:o<a[0]?0:i;t!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(t,0,o)}return t.domain(Uj(s,a,n)),s===Gp&&t.unknown(e.domainImplicit?uf:void 0),e.nice&&t.nice&&t.nice(!0!==e.nice&&Ig(t,e.nice)||null),a.length}function Bj(t,e,n){return e?(t.domain(Uj(t.type,e,n)),e.length):-1}function Ij(t,e,n,r,i,o){var a=Math.abs(Object(g["W"])(n)-n[0]),s=a/(a-2*r),u=t===$p?Object(g["ob"])(e,null,s):t===Rp?Object(g["pb"])(e,null,s,.5):t===Pp?Object(g["pb"])(e,null,s,i||1):t===Lp?Object(g["qb"])(e,null,s,o||1):Object(g["nb"])(e,null,s);return e=e.slice(),e[0]=u[0],e[e.length-1]=u[1],e}function Uj(t,e,n){if(yg(t)){var r=Math.abs(e.reduce((t,e)=>t+(e<0?-1:e>0?1:0),0));r!==e.length&&n.warn("Log scale domain includes zero: "+Object(g["bb"])(e))}return e}function qj(t,e,n){let r=e.bins;if(r&&!Object(g["B"])(r)){const e=t.domain(),n=e[0],i=Object(g["W"])(e),o=r.step;let a=null==r.start?n:r.start,s=null==r.stop?i:r.stop;o||Object(g["o"])("Scale bins parameter missing step property."),a<n&&(a=o*Math.ceil(n/o)),s>i&&(s=o*Math.floor(i/o)),r=Ds(a,s+o/2,o)}return r?t.bins=r:t.bins&&delete t.bins,t.type===Xp&&(r?e.domain||e.domainRaw||(t.domain(r),n=r.length):t.bins=t.domain()),n}function Hj(t,e,n){var r=t.type,i=e.round||!1,o=e.range;if(null!=e.rangeStep)o=Wj(r,e,n);else if(e.scheme&&(o=Gj(r,e,n),Object(g["E"])(o))){if(t.interpolator)return t.interpolator(o);Object(g["o"])("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&xg(r))return t.interpolator(jg(Vj(o,e.reverse),e.interpolate,e.interpolateGamma));o&&e.interpolate&&t.interpolate?t.interpolate(Ag(e.interpolate,e.interpolateGamma)):Object(g["E"])(t.round)?t.round(i):Object(g["E"])(t.rangeRound)&&t.interpolate(i?md:gd),o&&t.range(Vj(o,e.reverse))}function Wj(t,e,n){t!==Vp&&t!==Yp&&Object(g["o"])("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===Yp?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*Tp(n,i,r)]}function Gj(t,e,n){var r,i,o=e.schemeExtent;return Object(g["B"])(e.scheme)?i=jg(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),i=Fg(r),i||Object(g["o"])("Unrecognized scheme name: ".concat(e.scheme))),n=t===Wp?n+1:t===Xp?n-1:t===qp||t===Hp?+e.schemeCount||Tj:n,xg(t)?Yj(i,o,e.reverse):Object(g["E"])(i)?Eg(Yj(i,o),n):t===Gp?i:i.slice(0,n)}function Yj(t,e,n){return Object(g["E"])(t)&&(e||n)?_g(t,Vj(e||[0,1],n)):t}function Vj(t,e){return e?t.slice().reverse():t}function Xj(t){pa.call(this,null,t)}Object(g["z"])(Pj,pa,{transform(t,e){var n=e.dataflow,r=this.value,i=Rj(t);for(i in r&&i===r.type||(this.value=r=dg(i)()),t)if(!$j[i]){if("padding"===i&&Fj(r.type))continue;Object(g["E"])(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return Hj(r,t,qj(r,t,zj(r,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),Object(g["z"])(Xj,pa,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(io(t.sort)),this.modified(n),e}});const Jj="zero",Qj="center",Kj="normalize",Zj=["y0","y1"];function tE(t){pa.call(this,null,t)}function eE(t,e,n,r,i){for(var o,a=(e-t.sum)/2,s=t.length,u=0;u<s;++u)o=t[u],o[r]=a,o[i]=a+=Math.abs(n(o))}function nE(t,e,n,r,i){for(var o,a=1/t.sum,s=0,u=t.length,c=0,l=0;c<u;++c)o=t[c],o[r]=s,o[i]=s=a*(l+=Math.abs(n(o)))}function rE(t,e,n,r,i){for(var o,a,s=0,u=0,c=t.length,l=0;l<c;++l)a=t[l],o=+n(a),o<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}function iE(t,e,n,r){var i,o,a,s,u,c,l,f,d,h=[],p=t=>t(u);if(null==e)h.push(t.slice());else for(i={},o=0,a=t.length;o<a;++o)u=t[o],c=e.map(p),l=i[c],l||(i[c]=l=[],h.push(l)),l.push(u);for(c=0,d=0,s=h.length;c<s;++c){for(l=h[c],o=0,f=0,a=l.length;o<a;++o)f+=Math.abs(r(l[o]));l.sum=f,f>d&&(d=f),n&&l.sort(n)}return h.max=d,h}tE.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Jj,values:[Jj,Qj,Kj]},{name:"as",type:"string",array:!0,length:2,default:Zj}]},Object(g["z"])(tE,pa,{transform(t,e){var n,r,i,o,a=t.as||Zj,s=a[0],u=a[1],c=io(t.sort),l=t.field||g["Q"],f=t.offset===Qj?eE:t.offset===Kj?nE:rE;for(n=iE(e.source,t.groupby,c,l),r=0,i=n.length,o=n.max;r<i;++r)f(n[r],o,l,s,u);return e.reflow(t.modified()).modifies(a)}});var oE=t=>t;function aE(t,e){t&&uE.hasOwnProperty(t.type)&&uE[t.type](t,e)}var sE={Feature:function(t,e){aE(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,r=-1,i=n.length;while(++r<i)aE(n[r].geometry,e)}},uE={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){cE(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)cE(n[r],e,0)},Polygon:function(t,e){lE(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)lE(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,r=-1,i=n.length;while(++r<i)aE(n[r],e)}};function cE(t,e,n){var r,i=-1,o=t.length-n;e.lineStart();while(++i<o)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function lE(t,e){var n=-1,r=t.length;e.polygonStart();while(++n<r)cE(t[n],e,1);e.polygonEnd()}var fE=function(t,e){t&&sE.hasOwnProperty(t.type)?sE[t.type](t,e):aE(t,e)};class dE{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){o=t[--i];while(i>0)if(e=o,n=t[--i],o=e+n,r=n-(o-e),r)break;i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}var hE=1e-6,pE=1e-12,gE=Math.PI,mE=gE/2,vE=gE/4,yE=2*gE,bE=180/gE,xE=gE/180,wE=Math.abs,OE=Math.atan,_E=Math.atan2,jE=Math.cos,EE=Math.ceil,kE=Math.exp,AE=(Math.floor,Math.hypot),SE=Math.log,CE=Math.pow,DE=Math.sin,ME=Math.sign||function(t){return t>0?1:t<0?-1:0},TE=Math.sqrt,NE=Math.tan;function FE(t){return t>1?0:t<-1?gE:Math.acos(t)}function $E(t){return t>1?mE:t<-1?-mE:Math.asin(t)}function PE(){}var RE,LE,zE,BE,IE=new dE,UE=new dE,qE={point:PE,lineStart:PE,lineEnd:PE,polygonStart:function(){qE.lineStart=HE,qE.lineEnd=YE},polygonEnd:function(){qE.lineStart=qE.lineEnd=qE.point=PE,IE.add(wE(UE)),UE=new dE},result:function(){var t=IE/2;return IE=new dE,t}};function HE(){qE.point=WE}function WE(t,e){qE.point=GE,RE=zE=t,LE=BE=e}function GE(t,e){UE.add(BE*t-zE*e),zE=t,BE=e}function YE(){GE(RE,LE)}var VE=qE,XE=1/0,JE=XE,QE=-XE,KE=QE,ZE={point:tk,lineStart:PE,lineEnd:PE,polygonStart:PE,polygonEnd:PE,result:function(){var t=[[XE,JE],[QE,KE]];return QE=KE=-(JE=XE=1/0),t}};function tk(t,e){t<XE&&(XE=t),t>QE&&(QE=t),e<JE&&(JE=e),e>KE&&(KE=e)}var ek,nk,rk,ik,ok=ZE,ak=0,sk=0,uk=0,ck=0,lk=0,fk=0,dk=0,hk=0,pk=0,gk={point:mk,lineStart:vk,lineEnd:xk,polygonStart:function(){gk.lineStart=wk,gk.lineEnd=Ok},polygonEnd:function(){gk.point=mk,gk.lineStart=vk,gk.lineEnd=xk},result:function(){var t=pk?[dk/pk,hk/pk]:fk?[ck/fk,lk/fk]:uk?[ak/uk,sk/uk]:[NaN,NaN];return ak=sk=uk=ck=lk=fk=dk=hk=pk=0,t}};function mk(t,e){ak+=t,sk+=e,++uk}function vk(){gk.point=yk}function yk(t,e){gk.point=bk,mk(rk=t,ik=e)}function bk(t,e){var n=t-rk,r=e-ik,i=TE(n*n+r*r);ck+=i*(rk+t)/2,lk+=i*(ik+e)/2,fk+=i,mk(rk=t,ik=e)}function xk(){gk.point=mk}function wk(){gk.point=_k}function Ok(){jk(ek,nk)}function _k(t,e){gk.point=jk,mk(ek=rk=t,nk=ik=e)}function jk(t,e){var n=t-rk,r=e-ik,i=TE(n*n+r*r);ck+=i*(rk+t)/2,lk+=i*(ik+e)/2,fk+=i,i=ik*t-rk*e,dk+=i*(rk+t),hk+=i*(ik+e),pk+=3*i,mk(rk=t,ik=e)}var Ek=gk;function kk(t){this._context=t}kk.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,yE);break}},result:PE};var Ak,Sk,Ck,Dk,Mk,Tk=new dE,Nk={point:PE,lineStart:function(){Nk.point=Fk},lineEnd:function(){Ak&&$k(Sk,Ck),Nk.point=PE},polygonStart:function(){Ak=!0},polygonEnd:function(){Ak=null},result:function(){var t=+Tk;return Tk=new dE,t}};function Fk(t,e){Nk.point=$k,Sk=Dk=t,Ck=Mk=e}function $k(t,e){Dk-=t,Mk-=e,Tk.add(TE(Dk*Dk+Mk*Mk)),Dk=t,Mk=e}var Pk=Nk;function Rk(){this._string=[]}function Lk(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Rk.prototype={_radius:4.5,_circle:Lk(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Lk(this._radius)),this._string.push("M",t,",",e,this._circle);break}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var zk=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),fE(t,n(r))),r.result()}return o.area=function(t){return fE(t,n(VE)),VE.result()},o.measure=function(t){return fE(t,n(Pk)),Pk.result()},o.bounds=function(t){return fE(t,n(ok)),ok.result()},o.centroid=function(t){return fE(t,n(Ek)),Ek.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,oE):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new Rk):new kk(e=t),"function"!==typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},Bk=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:PE,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Ik=function(t,e){return wE(t[0]-e[0])<hE&&wE(t[1]-e[1])<hE};function Uk(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var qk=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Ik(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*hE}s.push(n=new Uk(r,t,null,!0)),u.push(n.o=new Uk(r,null,n,!1)),s.push(n=new Uk(a,t,null,!1)),u.push(n.o=new Uk(a,null,n,!0))}})),s.length){for(u.sort(e),Hk(s),Hk(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;var c,l,f=s[0];while(1){var d=f,h=!0;while(d.v)if((d=d.n)===f)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}};function Hk(t){if(e=t.length){var e,n,r=0,i=t[0];while(++r<e)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Wk(t){return[_E(t[1],t[0]),$E(t[2])]}function Gk(t){var e=t[0],n=t[1],r=jE(n);return[r*jE(e),r*DE(e),DE(n)]}function Yk(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Vk(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Xk(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Jk(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Qk(t){var e=TE(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Kk(t){return wE(t[0])<=gE?t[0]:ME(t[0])*((wE(t[0])+gE)%yE-gE)}var Zk=function(t,e){var n=Kk(e),r=e[1],i=DE(r),o=[DE(n),-jE(n),0],a=0,s=0,u=new dE;1===i?r=mE+hE:-1===i&&(r=-mE-hE);for(var c=0,l=t.length;c<l;++c)if(d=(f=t[c]).length)for(var f,d,h=f[d-1],p=Kk(h),g=h[1]/2+vE,m=DE(g),v=jE(g),y=0;y<d;++y,p=x,m=O,v=_,h=b){var b=f[y],x=Kk(b),w=b[1]/2+vE,O=DE(w),_=jE(w),j=x-p,E=j>=0?1:-1,k=E*j,A=k>gE,S=m*O;if(u.add(_E(S*E*DE(k),v*_+S*jE(k))),a+=A?j+E*yE:j,A^p>=n^x>=n){var C=Vk(Gk(h),Gk(b));Qk(C);var D=Vk(o,C);Qk(D);var M=(A^j>=0?-1:1)*$E(D[2]);(r>M||r===M&&(C[0]||C[1]))&&(s+=A^j>=0?1:-1)}}return(a<-hE||a<hE&&u<-pE)^1&s};function*tA(t){for(const e of t)yield*e}function eA(t){return Array.from(tA(t))}var nA=function(t,e,n,r){return function(i){var o,a,s,u=e(i),c=Bk(),l=e(c),f=!1,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=b,a=[],o=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,a=eA(a);var t=Zk(o,r);a.length?(f||(i.polygonStart(),f=!0),qk(a,iA,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function g(){d.point=p,u.lineStart()}function m(){d.point=h,u.lineEnd()}function v(t,e){s.push([t,e]),l.point(t,e)}function y(){l.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),d=c.result(),h=d.length;if(s.pop(),o.push(s),s=null,h)if(1&u){if(n=d[0],(e=n.length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),a.push(d.filter(rA))}return d}};function rA(t){return t.length>1}function iA(t,e){return((t=t.x)[0]<0?t[1]-mE-hE:mE-t[1])-((e=e.x)[0]<0?e[1]-mE-hE:mE-e[1])}var oA=nA((function(){return!0}),aA,uA,[-gE,-mE]);function aA(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?gE:-gE,u=wE(o-n);wE(u-gE)<hE?(t.point(n,r=(r+a)/2>0?mE:-mE),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=gE&&(wE(n-i)<hE&&(n-=i*hE),wE(o-s)<hE&&(o-=s*hE),r=sA(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function sA(t,e,n,r){var i,o,a=DE(t-n);return wE(a)>hE?OE((DE(e)*(o=jE(r))*DE(n)-DE(r)*(i=jE(e))*DE(t))/(i*o*a)):(e+r)/2}function uA(t,e,n,r){var i;if(null==t)i=n*mE,r.point(-gE,i),r.point(0,i),r.point(gE,i),r.point(gE,0),r.point(gE,-i),r.point(0,-i),r.point(-gE,-i),r.point(-gE,0),r.point(-gE,i);else if(wE(t[0]-e[0])>hE){var o=t[0]<e[0]?gE:-gE;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}var cA=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n};function lA(t,e){return[wE(t)>gE?t+Math.round(-t/yE)*yE:t,e]}function fA(t,e,n){return(t%=yE)?e||n?cA(hA(t),pA(e,n)):hA(t):e||n?pA(e,n):lA}function dA(t){return function(e,n){return e+=t,[e>gE?e-yE:e<-gE?e+yE:e,n]}}function hA(t){var e=dA(t);return e.invert=dA(-t),e}function pA(t,e){var n=jE(t),r=DE(t),i=jE(e),o=DE(e);function a(t,e){var a=jE(e),s=jE(t)*a,u=DE(t)*a,c=DE(e),l=c*n+s*r;return[_E(u*i-l*o,s*n-c*r),$E(l*i+u*o)]}return a.invert=function(t,e){var a=jE(e),s=jE(t)*a,u=DE(t)*a,c=DE(e),l=c*i-u*o;return[_E(u*i+c*o,s*n+l*r),$E(l*n-s*r)]},a}lA.invert=lA;var gA=function(t){function e(e){return e=t(e[0]*xE,e[1]*xE),e[0]*=bE,e[1]*=bE,e}return t=fA(t[0]*xE,t[1]*xE,t.length>2?t[2]*xE:0),e.invert=function(e){return e=t.invert(e[0]*xE,e[1]*xE),e[0]*=bE,e[1]*=bE,e},e};function mA(t,e,n,r,i,o){if(n){var a=jE(e),s=DE(e),u=r*n;null==i?(i=e+r*yE,o=e-u/2):(i=vA(a,i),o=vA(a,o),(r>0?i<o:i>o)&&(i+=r*yE));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Wk([a,-s*jE(l),-s*DE(l)]),t.point(c[0],c[1])}}function vA(t,e){e=Gk(e),e[0]-=t,Qk(e);var n=FE(-e[1]);return((-e[2]<0?-n:n)+yE-hE)%yE}var yA=function(t){var e=jE(t),n=6*xE,r=e>0,i=wE(e)>hE;function o(e,r,i,o){mA(o,t,n,i,e,r)}function a(t,n){return jE(t)*jE(n)>e}function s(t){var e,n,o,s,l;return{lineStart:function(){s=o=!1,l=1},point:function(f,d){var h,p=[f,d],g=a(f,d),m=r?g?0:c(f,d):g?c(f+(f<0?gE:-gE),d):0;if(!e&&(s=o=g)&&t.lineStart(),g!==o&&(h=u(e,p),(!h||Ik(e,h)||Ik(p,h))&&(p[2]=1)),g!==o)l=0,g?(t.lineStart(),h=u(p,e),t.point(h[0],h[1])):(h=u(e,p),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(i&&e&&r^g){var v;m&n||!(v=u(p,e,!0))||(l=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||e&&Ik(e,p)||t.point(p[0],p[1]),e=p,o=g,n=m},lineEnd:function(){o&&t.lineEnd(),e=null},clean:function(){return l|(s&&o)<<1}}}function u(t,n,r){var i=Gk(t),o=Gk(n),a=[1,0,0],s=Vk(i,o),u=Yk(s,s),c=s[0],l=u-c*c;if(!l)return!r&&t;var f=e*u/l,d=-e*c/l,h=Vk(a,s),p=Jk(a,f),g=Jk(s,d);Xk(p,g);var m=h,v=Yk(p,m),y=Yk(m,m),b=v*v-y*(Yk(p,p)-1);if(!(b<0)){var x=TE(b),w=Jk(m,(-v-x)/y);if(Xk(w,p),w=Wk(w),!r)return w;var O,_=t[0],j=n[0],E=t[1],k=n[1];j<_&&(O=_,_=j,j=O);var A=j-_,S=wE(A-gE)<hE,C=S||A<hE;if(!S&&k<E&&(O=E,E=k,k=O),C?S?E+k>0^w[1]<(wE(w[0]-_)<hE?E:k):E<=w[1]&&w[1]<=k:A>gE^(_<=w[0]&&w[0]<=j)){var D=Jk(m,(-v+x)/y);return Xk(D,p),[w,Wk(D)]}}}function c(e,n){var i=r?t:gE-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return nA(a,s,o,r?[0,-t]:[-gE,t-gE])},bA=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],f=0,d=1,h=c-s,p=l-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<f)return;a<d&&(d=a)}else if(h>0){if(a>d)return;a>f&&(f=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>d)return;a>f&&(f=a)}else if(h>0){if(a<f)return;a<d&&(d=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<f)return;a<d&&(d=a)}else if(p>0){if(a>d)return;a>f&&(f=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>d)return;a>f&&(f=a)}else if(p>0){if(a<f)return;a<d&&(d=a)}return f>0&&(t[0]=s+f*h,t[1]=u+f*p),d<1&&(e[0]=s+d*h,e[1]=u+d*p),!0}}}}},xA=1e9,wA=-xA;function OA(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,f=0;if(null==i||(l=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return wE(r[0]-t)<hE?i>0?0:3:wE(r[0]-n)<hE?i>0?2:1:wE(r[1]-e)<hE?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,f,d,h,p,g,m,v,y,b=a,x=Bk(),w={point:O,lineStart:k,lineEnd:A,polygonStart:j,polygonEnd:E};function O(t,e){i(t,e)&&b.point(t,e)}function _(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,f=s[0],d=f[0],h=f[1];u<l;++u)o=d,a=h,f=s[u],d=f[0],h=f[1],a<=r?h>r&&(d-o)*(r-a)>(h-a)*(t-o)&&++e:h<=r&&(d-o)*(r-a)<(h-a)*(t-o)&&--e;return e}function j(){b=x,u=[],c=[],y=!0}function E(){var t=_(),e=y&&t,n=(u=eA(u)).length;(e||n)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&qk(u,s,t,o,a),a.polygonEnd()),b=a,u=c=l=null}function k(){w.point=S,c&&c.push(l=[]),v=!0,m=!1,p=g=NaN}function A(){u&&(S(f,d),h&&m&&x.rejoin(),u.push(x.result())),w.point=O,m&&b.lineEnd()}function S(o,a){var s=i(o,a);if(c&&l.push([o,a]),v)f=o,d=a,h=s,v=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&m)b.point(o,a);else{var u=[p=Math.max(wA,Math.min(xA,p)),g=Math.max(wA,Math.min(xA,g))],x=[o=Math.max(wA,Math.min(xA,o)),a=Math.max(wA,Math.min(xA,a))];bA(u,x,t,e,n,r)?(m||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1):s&&(b.lineStart(),b.point(o,a),y=!1)}p=o,g=a,m=s}return w}}function _A(t){return function(e){var n=new jA;for(var r in t)n[r]=t[r];return n.stream=e,n}}function jA(){}function EA(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),fE(n,t.stream(ok)),e(ok.result()),null!=r&&t.clipExtent(r),t}function kA(t,e,n){return EA(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function AA(t,e,n){return kA(t,[[0,0],e],n)}function SA(t,e,n){return EA(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function CA(t,e,n){return EA(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}jA.prototype={constructor:jA,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var DA=16,MA=jE(30*xE),TA=function(t,e){return+e?FA(t,e):NA(t)};function NA(t){return _A({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function FA(t,e){function n(r,i,o,a,s,u,c,l,f,d,h,p,g,m){var v=c-r,y=l-i,b=v*v+y*y;if(b>4*e&&g--){var x=a+d,w=s+h,O=u+p,_=TE(x*x+w*w+O*O),j=$E(O/=_),E=wE(wE(O)-1)<hE||wE(o-f)<hE?(o+f)/2:_E(w,x),k=t(E,j),A=k[0],S=k[1],C=A-r,D=S-i,M=y*C-v*D;(M*M/b>e||wE((v*C+y*D)/b-.5)>.3||a*d+s*h+u*p<MA)&&(n(r,i,o,a,s,u,A,S,E,x/=_,w/=_,O,g,m),m.point(A,S),n(A,S,E,x,w,O,c,l,f,d,h,p,g,m))}}return function(e){var r,i,o,a,s,u,c,l,f,d,h,p,g={point:m,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){l=NaN,g.point=y,e.lineStart()}function y(r,i){var o=Gk([r,i]),a=t(r,i);n(l,f,c,d,h,p,l=a[0],f=a[1],c=r,d=o[0],h=o[1],p=o[2],DA,e),e.point(l,f)}function b(){g.point=m,e.lineEnd()}function x(){v(),g.point=w,g.lineEnd=O}function w(t,e){y(r=t,e),i=l,o=f,a=d,s=h,u=p,g.point=y}function O(){n(l,f,c,d,h,p,i,o,r,a,s,u,DA,e),g.lineEnd=b,b()}return g}}var $A=_A({point:function(t,e){this.stream.point(t*xE,e*xE)}});function PA(t){return _A({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function RA(t,e,n,r,i){function o(o,a){return o*=r,a*=i,[e+t*o,n-t*a]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}function LA(t,e,n,r,i,o){if(!o)return RA(t,e,n,r,i);var a=jE(o),s=DE(o),u=a*t,c=s*t,l=a/t,f=s/t,d=(s*n-a*e)/t,h=(s*e+a*n)/t;function p(t,o){return t*=r,o*=i,[u*t-c*o+e,n-c*t-u*o]}return p.invert=function(t,e){return[r*(l*t-f*e+d),i*(h-f*t-l*e)]},p}function zA(t){return BA((function(){return t}))()}function BA(t){var e,n,r,i,o,a,s,u,c,l,f=150,d=480,h=250,p=0,g=0,m=0,v=0,y=0,b=0,x=1,w=1,O=null,_=oA,j=null,E=oE,k=.5;function A(t){return u(t[0]*xE,t[1]*xE)}function S(t){return t=u.invert(t[0],t[1]),t&&[t[0]*bE,t[1]*bE]}function C(){var t=LA(f,0,0,x,w,b).apply(null,e(p,g)),r=LA(f,d-t[0],h-t[1],x,w,b);return n=fA(m,v,y),s=cA(e,r),u=cA(n,s),a=TA(s,k),D()}function D(){return c=l=null,A}return A.stream=function(t){return c&&l===t?c:c=$A(PA(n)(_(a(E(l=t)))))},A.preclip=function(t){return arguments.length?(_=t,O=void 0,D()):_},A.postclip=function(t){return arguments.length?(E=t,j=r=i=o=null,D()):E},A.clipAngle=function(t){return arguments.length?(_=+t?yA(O=t*xE):(O=null,oA),D()):O*bE},A.clipExtent=function(t){return arguments.length?(E=null==t?(j=r=i=o=null,oE):OA(j=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),D()):null==j?null:[[j,r],[i,o]]},A.scale=function(t){return arguments.length?(f=+t,C()):f},A.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],C()):[d,h]},A.center=function(t){return arguments.length?(p=t[0]%360*xE,g=t[1]%360*xE,C()):[p*bE,g*bE]},A.rotate=function(t){return arguments.length?(m=t[0]%360*xE,v=t[1]%360*xE,y=t.length>2?t[2]%360*xE:0,C()):[m*bE,v*bE,y*bE]},A.angle=function(t){return arguments.length?(b=t%360*xE,C()):b*bE},A.reflectX=function(t){return arguments.length?(x=t?-1:1,C()):x<0},A.reflectY=function(t){return arguments.length?(w=t?-1:1,C()):w<0},A.precision=function(t){return arguments.length?(a=TA(s,k=t*t),D()):TE(k)},A.fitExtent=function(t,e){return kA(A,t,e)},A.fitSize=function(t,e){return AA(A,t,e)},A.fitWidth=function(t,e){return SA(A,t,e)},A.fitHeight=function(t,e){return CA(A,t,e)},function(){return e=t.apply(this,arguments),A.invert=e.invert&&S,C()}}function IA(t){var e=0,n=gE/3,r=BA(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*xE,n=t[1]*xE):[e*bE,n*bE]},i}function UA(t){var e=jE(t);function n(t,n){return[t*e,DE(n)/e]}return n.invert=function(t,n){return[t/e,$E(n*e)]},n}function qA(t,e){var n=DE(t),r=(n+DE(e))/2;if(wE(r)<hE)return UA(t);var i=1+n*(2*r-n),o=TE(i)/r;function a(t,e){var n=TE(i-2*r*DE(e))/r;return[n*DE(t*=r),o-n*jE(t)]}return a.invert=function(t,e){var n=o-e,a=_E(t,wE(n))*ME(n);return n*r<0&&(a-=gE*ME(t)*ME(n)),[a/r,$E((i-(t*t+n*n)*r*r)/(2*r))]},a}var HA=function(){return IA(qA).scale(155.424).center([0,33.6442])},WA=function(){return HA().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function GA(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}var YA=function(){var t,e,n,r,i,o,a=WA(),s=HA().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=HA().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:t=GA([a.stream(e=n),s.stream(n),u.stream(n)])},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),f()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+hE,l+.12*e+hE],[o-.214*e-hE,l+.234*e-hE]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+hE,l+.166*e+hE],[o-.115*e-hE,l+.234*e-hE]]).stream(c),f()},l.fitExtent=function(t,e){return kA(l,t,e)},l.fitSize=function(t,e){return AA(l,t,e)},l.fitWidth=function(t,e){return SA(l,t,e)},l.fitHeight=function(t,e){return CA(l,t,e)},l.scale(1070)};function VA(t){return function(e,n){var r=jE(e),i=jE(n),o=t(r*i);return o===1/0?[2,0]:[o*i*DE(e),o*DE(n)]}}function XA(t){return function(e,n){var r=TE(e*e+n*n),i=t(r),o=DE(i),a=jE(i);return[_E(e*o,r*a),$E(r&&n*o/r)]}}var JA=VA((function(t){return TE(2/(1+t))}));JA.invert=XA((function(t){return 2*$E(t/2)}));var QA=function(){return zA(JA).scale(124.75).clipAngle(179.999)},KA=VA((function(t){return(t=FE(t))&&t/DE(t)}));KA.invert=XA((function(t){return t}));var ZA=function(){return zA(KA).scale(79.4188).clipAngle(179.999)};function tS(t,e){return[t,SE(NE((mE+e)/2))]}tS.invert=function(t,e){return[t,2*OE(kE(e))-mE]};var eS=function(){return nS(tS).scale(961/yE)};function nS(t){var e,n,r,i=zA(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=gE*a(),s=i(gA(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===tS?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),l()):a()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function rS(t){return NE((mE+t)/2)}function iS(t,e){var n=jE(t),r=t===e?DE(t):SE(n/jE(e))/SE(rS(e)/rS(t)),i=n*CE(rS(t),r)/r;if(!r)return tS;function o(t,e){i>0?e<-mE+hE&&(e=-mE+hE):e>mE-hE&&(e=mE-hE);var n=i/CE(rS(e),r);return[n*DE(r*t),i-n*jE(r*t)]}return o.invert=function(t,e){var n=i-e,o=ME(r)*TE(t*t+n*n),a=_E(t,wE(n))*ME(n);return n*r<0&&(a-=gE*ME(t)*ME(n)),[a/r,2*OE(CE(i/o,1/r))-mE]},o}var oS=function(){return IA(iS).scale(109.5).parallels([30,30])};function aS(t,e){return[t,e]}aS.invert=aS;var sS=function(){return zA(aS).scale(152.63)};function uS(t,e){var n=jE(t),r=t===e?DE(t):(n-jE(e))/(e-t),i=n/r+t;if(wE(r)<hE)return aS;function o(t,e){var n=i-e,o=r*t;return[n*DE(o),i-n*jE(o)]}return o.invert=function(t,e){var n=i-e,o=_E(t,wE(n))*ME(n);return n*r<0&&(o-=gE*ME(t)*ME(n)),[o/r,i-ME(r)*TE(t*t+n*n)]},o}var cS=function(){return IA(uS).scale(131.154).center([0,13.9389])},lS=1.340264,fS=-.081106,dS=893e-6,hS=.003796,pS=TE(3)/2,gS=12;function mS(t,e){var n=$E(pS*DE(e)),r=n*n,i=r*r*r;return[t*jE(n)/(pS*(lS+3*fS*r+i*(7*dS+9*hS*r))),n*(lS+fS*r+i*(dS+hS*r))]}mS.invert=function(t,e){for(var n,r,i,o=e,a=o*o,s=a*a*a,u=0;u<gS;++u)if(r=o*(lS+fS*a+s*(dS+hS*a))-e,i=lS+3*fS*a+s*(7*dS+9*hS*a),o-=n=r/i,a=o*o,s=a*a*a,wE(n)<pE)break;return[pS*t*(lS+3*fS*a+s*(7*dS+9*hS*a))/jE(o),$E(DE(o)/pS)]};var vS=function(){return zA(mS).scale(177.158)};function yS(t,e){var n=jE(e),r=jE(t)*n;return[n*DE(t)/r,DE(e)/r]}yS.invert=XA(OE);var bS=function(){return zA(yS).scale(144.049).clipAngle(60)},xS=function(){var t,e,n,r,i,o,a,s=1,u=0,c=0,l=1,f=1,d=0,h=null,p=1,g=1,m=_A({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),v=oE;function y(){return p=s*l,g=s*f,o=a=null,b}function b(n){var r=n[0]*p,i=n[1]*g;if(d){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+c]}return b.invert=function(n){var r=n[0]-u,i=n[1]-c;if(d){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/p,i/g]},b.stream=function(t){return o&&a===t?o:o=m(v(a=t))},b.postclip=function(t){return arguments.length?(v=t,h=n=r=i=null,y()):v},b.clipExtent=function(t){return arguments.length?(v=null==t?(h=n=r=i=null,oE):OA(h=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==h?null:[[h,n],[r,i]]},b.scale=function(t){return arguments.length?(s=+t,y()):s},b.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],y()):[u,c]},b.angle=function(n){return arguments.length?(d=n%360*xE,e=DE(d),t=jE(d),y()):d*bE},b.reflectX=function(t){return arguments.length?(l=t?-1:1,y()):l<0},b.reflectY=function(t){return arguments.length?(f=t?-1:1,y()):f<0},b.fitExtent=function(t,e){return kA(b,t,e)},b.fitSize=function(t,e){return AA(b,t,e)},b.fitWidth=function(t,e){return SA(b,t,e)},b.fitHeight=function(t,e){return CA(b,t,e)},b};function wS(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}wS.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(wE(n)>hE&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var OS=function(){return zA(wS).scale(175.295)};function _S(t,e){return[jE(e)*DE(t),DE(e)]}_S.invert=XA($E);var jS=function(){return zA(_S).scale(249.5).clipAngle(90+hE)};function ES(t,e){var n=jE(e),r=1+jE(t)*n;return[n*DE(t)/r,DE(e)/r]}ES.invert=XA((function(t){return 2*OE(t)}));var kS=function(){return zA(ES).scale(250).clipAngle(142)};function AS(t,e){return[SE(NE((mE+e)/2)),-t]}AS.invert=function(t,e){return[-e,2*OE(kE(t))-mE]};var SS=function(){var t=nS(AS),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)},CS=Math.abs,DS=(Math.atan,Math.atan2,Math.ceil,Math.cos),MS=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),TS=(Math.tan,1e-6),NS=Math.PI,FS=NS/2,$S=(Math.SQRT1_2,RS(2));RS(NS);function PS(t){return t>1?FS:t<-1?-FS:Math.asin(t)}function RS(t){return t>0?Math.sqrt(t):0}function LS(t,e){var n,r=t*MS(e),i=30;do{e-=n=(e+MS(e)-r)/(1+DS(e))}while(CS(n)>TS&&--i>0);return e/2}function zS(t,e,n){function r(r,i){return[t*r*DS(i=LS(n,i)),e*MS(i)]}return r.invert=function(r,i){return i=PS(i/e),[r/(t*DS(i)),PS((2*i+MS(2*i))/n)]},r}var BS=zS($S/FS,$S,NS),IS=function(){return zA(BS).scale(169.529)};const US=zk(),qS=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function HS(t,e){return function n(){const r=e();return r.type=t,r.path=zk().projection(r),r.copy=r.copy||function(){const t=n();return qS.forEach(e=>{r[e]&&t[e](r[e]())}),t.path.pointRadius(r.path.pointRadius()),t},r}}function WS(t,e){if(!t||"string"!==typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(YS[t]=HS(t,e),this):YS[t]||null}function GS(t){return t&&t.path||US}const YS={albers:WA,albersusa:YA,azimuthalequalarea:QA,azimuthalequidistant:ZA,conicconformal:oS,conicequalarea:HA,conicequidistant:cS,equalEarth:vS,equirectangular:sS,gnomonic:bS,identity:xS,mercator:eS,mollweide:IS,naturalEarth1:OS,orthographic:jS,stereographic:kS,transversemercator:SS};for(const lG in YS)WS(lG,YS[lG]);function VS(t,e,n){var r=Ds(t,e-hE,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function XS(t,e,n){var r=Ds(t,e-hE,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function JS(){var t,e,n,r,i,o,a,s,u,c,l,f,d=10,h=d,p=90,g=360,m=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Ds(EE(r/p)*p,n,p).map(l).concat(Ds(EE(s/g)*g,a,g).map(f)).concat(Ds(EE(e/d)*d,t,d).filter((function(t){return wE(t%p)>hE})).map(u)).concat(Ds(EE(o/h)*h,i,h).filter((function(t){return wE(t%g)>hE})).map(c))}return v.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(a).slice(1),l(n).reverse().slice(1),f(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),v.precision(m)):[[r,s],[n,a]]},v.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),v.precision(m)):[[e,o],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],v):[p,g]},v.stepMinor=function(t){return arguments.length?(d=+t[0],h=+t[1],v):[d,h]},v.precision=function(d){return arguments.length?(m=+d,u=VS(o,i,90),c=XS(e,t,m),l=VS(s,a,90),f=XS(r,n,m),v):m},v.extentMajor([[-180,-90+hE],[180,90-hE]]).extentMinor([[-180,-80-hE],[180,80+hE]])}function QS(){}const KS=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ZS(){var t=1,e=1,n=s;function r(t,e){return e.map(e=>i(t,e))}function i(t,e){var r=[],i=[];return o(t,e,o=>{n(o,t,e),tC(o)>0?r.push([o]):i.push(o)}),i.forEach(t=>{for(var e,n=0,i=r.length;n<i;++n)if(-1!==eC((e=r[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:e,coordinates:r}}function o(n,r,i){var o,s,u,c,l,f,d=new Array,h=new Array;o=s=-1,c=n[0]>=r,KS[c<<1].forEach(p);while(++o<t-1)u=c,c=n[o+1]>=r,KS[u|c<<1].forEach(p);KS[c<<0].forEach(p);while(++s<e-1){o=-1,c=n[s*t+t]>=r,l=n[s*t]>=r,KS[c<<1|l<<2].forEach(p);while(++o<t-1)u=c,c=n[s*t+t+o+1]>=r,f=l,l=n[s*t+o+1]>=r,KS[u|c<<1|l<<2|f<<3].forEach(p);KS[c|l<<3].forEach(p)}o=-1,l=n[s*t]>=r,KS[l<<2].forEach(p);while(++o<t-1)f=l,l=n[s*t+o+1]>=r,KS[l<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],c=a(r),l=a(u);(e=h[c])?(n=d[l])?(delete h[e.end],delete d[n.start],e===n?(e.ring.push(u),i(e.ring)):d[e.start]=h[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[e.end],e.ring.push(u),h[e.end=l]=e):(e=d[l])?(n=h[c])?(delete d[e.start],delete h[n.end],e===n?(e.ring.push(u),i(e.ring)):d[n.start]=h[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(r),d[e.start=c]=e):d[c]=h[l]={start:c,end:l,ring:[r,u]}}KS[l<<3].forEach(p)}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach(n=>{var o,a=n[0],s=n[1],u=0|a,c=0|s,l=r[c*t+u];a>0&&a<t&&u===a&&(o=r[c*t+u-1],n[0]=a+(i-o)/(l-o)-.5),s>0&&s<e&&c===s&&(o=r[(c-1)*t+u],n[1]=s+(i-o)/(l-o)-.5)})}return r.contour=i,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||Object(g["o"])("invalid size"),t=i,e=o,r},r.smooth=function(t){return arguments.length?(n=t?s:QS,r):n===s},r}function tC(t){var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];while(++e<n)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}function eC(t,e){var n,r=-1,i=e.length;while(++r<i)if(n=nC(t,e[r]))return n;return 0}function nC(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],l=u[1],f=t[s],d=f[0],h=f[1];if(rC(u,f,e))return 0;l>r!==h>r&&n<(d-c)*(r-l)/(h-l)+c&&(i=-i)}return i}function rC(t,e,n){var r;return iC(t,e,n)&&oC(t[r=+(t[0]===e[0])],n[r],e[r])}function iC(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function oC(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function aC(t,e,n){return function(r){var i=Object(g["q"])(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=e?yt(o,a,t):s/(t+1);return Ds(o+u,a,u)}}function sC(t){pa.call(this,null,t)}function uC(t,e,n){const r=aC(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(t.map(t=>ya(e(t).values)))}function cC(t,e,n,r){let i=r.scale||e.scale,o=r.translate||e.translate;if(Object(g["E"])(i)&&(i=i(n,r)),Object(g["E"])(o)&&(o=o(n,r)),(1===i||null==i)&&!o)return;const a=(Object(g["G"])(i)?i:i[0])||1,s=(Object(g["G"])(i)?i:i[1])||1,u=o&&o[0]||0,c=o&&o[1]||0;t.forEach(lC(e,a,s,u,c))}function lC(t,e,n,r,i){const o=t.x1||0,a=t.y1||0,s=e*n<0;function u(t){t.forEach(c)}function c(t){s&&t.reverse(),t.forEach(l)}function l(t){t[0]=(t[0]-o)*e+r,t[1]=(t[1]-a)*n+i}return function(t){return t.coordinates.forEach(u),t}}function fC(t,e,n){const r=t>=0?t:Ta(e,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function dC(t){return Object(g["E"])(t)?t:Object(g["m"])(+t)}function hC(){var t=t=>t[0],e=t=>t[1],n=g["Q"],r=[-1,-1],i=960,o=500,a=2;function s(s,u){const c=fC(r[0],s,t)>>a,l=fC(r[1],s,e)>>a,f=c?c+2:0,d=l?l+2:0,h=2*f+(i>>a),p=2*d+(o>>a),g=new Float32Array(h*p),m=new Float32Array(h*p);let v=g;s.forEach(r=>{const i=f+(+t(r)>>a),o=d+(+e(r)>>a);i>=0&&i<h&&o>=0&&o<p&&(g[i+o*h]+=+n(r))}),c>0&&l>0?(pC(h,p,g,m,c),gC(h,p,m,g,l),pC(h,p,g,m,c),gC(h,p,m,g,l),pC(h,p,g,m,c),gC(h,p,m,g,l)):c>0?(pC(h,p,g,m,c),pC(h,p,m,g,c),pC(h,p,g,m,c),v=m):l>0&&(gC(h,p,g,m,l),gC(h,p,m,g,l),gC(h,p,g,m,l),v=m);const y=u?Math.pow(2,-2*a):1/aj(v);for(let t=0,e=h*p;t<e;++t)v[t]*=y;return{values:v,scale:1<<a,width:h,height:p,x1:f,y1:d,x2:f+(i>>a),y2:d+(o>>a)}}return s.x=function(e){return arguments.length?(t=dC(e),s):t},s.y=function(t){return arguments.length?(e=dC(t),s):e},s.weight=function(t){return arguments.length?(n=dC(t),s):n},s.size=function(t){if(!arguments.length)return[i,o];var e=+t[0],n=+t[1];return e>=0&&n>=0||Object(g["o"])("invalid size"),i=e,o=n,s},s.cellSize=function(t){return arguments.length?((t=+t)>=1||Object(g["o"])("invalid cell size"),a=Math.floor(Math.log(t)/Math.LN2),s):1<<a},s.bandwidth=function(t){return arguments.length?(t=Object(g["i"])(t),1===t.length&&(t=[+t[0],+t[0]]),2!==t.length&&Object(g["o"])("invalid bandwidth"),r=t,s):r},s}function pC(t,e,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let e=0,s=0;e<t+i;++e)e<t&&(s+=n[e+a*t]),e>=i&&(e>=o&&(s-=n[e-o+a*t]),r[e-i+a*t]=s/Math.min(e+1,t-1+o-e,o))}function gC(t,e,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let s=0,u=0;s<e+i;++s)s<e&&(u+=n[a+s*t]),s>=i&&(s>=o&&(u-=n[a+(s-o)*t]),r[a+(s-i)*t]=u/Math.min(s+1,e-1+o-s,o))}function mC(t){pa.call(this,null,t)}sC.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Object(g["z"])(sC,pa,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=t.field||g["y"],o=ZS().smooth(!1!==t.smooth),a=t.thresholds||uC(r,i,t),s=null===t.as?null:t.as||"contour",u=[];return r.forEach(e=>{const n=i(e),r=o.size([n.width,n.height])(n.values,Object(g["B"])(a)?a:a(n.values));cC(r,n,e,t),r.forEach(t=>{u.push(no(e,to(null!=s?{[s]:t}:t)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}}),mC.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const vC=["x","y","weight","size","cellSize","bandwidth"];function yC(t,e){return vC.forEach(n=>null!=e[n]?t[n](e[n]):0),t}function bC(t,e){var n,r,i,o,a,s,u=[],c=t=>t(o);if(null==e)u.push(t);else for(n={},r=0,i=t.length;r<i;++r)o=t[r],a=e.map(c),s=n[a],s||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function xC(t){pa.call(this,null,t)}Object(g["z"])(mC,pa,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=bC(r,t.groupby),o=(t.groupby||[]).map(g["h"]),a=yC(hC(),t),s=t.as||"grid",u=[];function c(t,e){for(let n=0;n<o.length;++n)t[o[n]]=e[n];return t}return u=i.map(e=>to(c({[s]:a(e,t.counts)},e.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}}),xC.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Object(g["z"])(xC,pa,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),o=ZS().smooth(!1!==t.smooth),a=t.values,s=t.thresholds||aC(t.count||10,t.nice,!!a),u=t.size;return a||(a=e.materialize(e.SOURCE).source,n=yC(hC(),t)(a,!0),r=lC(n,n.scale||1,n.scale||1,0,0),u=[n.width,n.height],a=n.values),s=Object(g["B"])(s)?s:s(a),a=o.size(u)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(to),i}});const wC="Feature",OC="FeatureCollection",_C="MultiPoint";function jC(t){pa.call(this,null,t)}function EC(t){pa.call(this,null,t)}function kC(t,e){const n=t.pointRadius();return t.context(null),null!=e&&t.pointRadius(e),n}function AC(t){pa.call(this,null,t)}function SC(t){pa.call(this,null,t)}function CC(t,e,n){const r=null==n?n=>t(e(n)):r=>{var i=t.pointRadius(),o=t.pointRadius(n)(e(r));return t.pointRadius(i),o};return r.context=e=>(t.context(e),r),r}function DC(t){pa.call(this,[],t),this.generator=JS()}function MC(t){pa.call(this,null,t)}function TC(t,e){let n;return Object(g["E"])(t)?(n=n=>Ff(t(n,e)),n.dep=FC(t)):n=Object(g["m"])(Ff(t||"#888")),n}function NC(t,e){let n;return Object(g["E"])(t)?(n=n=>t(n,e),n.dep=FC(t)):t?n=Object(g["m"])(t):(n=t=>t.$value/t.$max||0,n.dep=!0),n}function FC(t){if(!Object(g["E"])(t))return!1;const e=Object(g["fb"])(Object(g["g"])(t));return e.$x||e.$y||e.$value||e.$max}function $C(t,e,n,r){const i=t.width,o=t.height,a=t.x1||0,s=t.y1||0,u=t.x2||i,c=t.y2||o,l=t.values,f=l?t=>l[t]:g["mb"],d=Zl(u-a,c-s),h=d.getContext("2d"),p=h.getImageData(0,0,u-a,c-s),m=p.data;for(let g=s,v=0;g<c;++g){e.$y=g-s;for(let t=a,o=g*i;t<u;++t,v+=4){e.$x=t-a,e.$value=f(t+o);const i=n(e);m[v+0]=i.r,m[v+1]=i.g,m[v+2]=i.b,m[v+3]=~~(255*r(e))}}return h.putImageData(p,0,0),d}function PC(t){pa.call(this,null,t),this.modified(!0)}function RC(t,e){const n=BC(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function LC(t){const e=WS((t||"mercator").toLowerCase());return e||Object(g["o"])("Unrecognized projection type: "+t),e()}function zC(t,e,n){Object(g["E"])(t[e])&&t[e](n)}function BC(t){return t=Object(g["i"])(t),1===t.length?t[0]:{type:OC,features:t.reduce((t,e)=>t.concat(IC(e)),[])}}function IC(t){return t.type===OC?t.features:Object(g["i"])(t).filter(t=>null!=t).map(t=>t.type===wC?t:{type:wC,geometry:t})}jC.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(g["z"])(jC,pa,{transform(t,e){var n,r=this._features,i=this._points,o=t.fields,a=o&&o[0],s=o&&o[1],u=t.geojson||!o&&g["y"],c=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(Object(g["g"])(u))||a&&e.modified(Object(g["g"])(a))||s&&e.modified(Object(g["g"])(s)),this.value&&!n||(c=e.SOURCE,this._features=r=[],this._points=i=[]),u&&e.visit(c,t=>r.push(u(t))),a&&s&&(e.visit(c,t=>{var e=a(t),n=s(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&i.push([e,n])}),r=r.concat({type:wC,geometry:{type:_C,coordinates:i}})),this.value={type:OC,features:r}}}),EC.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(g["z"])(EC,pa,{transform(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||g["y"],o=t.as||"path",a=n.SOURCE;!r||t.modified()?(this.value=r=GS(t.projection),n.materialize().reflow()):a=i===g["y"]||e.modified(i.fields)?n.ADD_MOD:n.ADD;const s=kC(r,t.pointRadius);return n.visit(a,t=>t[o]=r(i(t))),r.pointRadius(s),n.modifies(o)}}),AC.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(g["z"])(AC,pa,{transform(t,e){var n,r=t.projection,i=t.fields[0],o=t.fields[1],a=t.as||["x","y"],s=a[0],u=a[1];function c(t){const e=r([i(t),o(t)]);e?(t[s]=e[0],t[u]=e[1]):(t[s]=void 0,t[u]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,c):(n=e.modified(i.fields)||e.modified(o.fields),e.visit(n?e.ADD_MOD:e.ADD,c)),e.modifies(a)}}),SC.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(g["z"])(SC,pa,{transform(t,e){var n=e.fork(e.ALL),r=this.value,i=t.as||"shape",o=n.ADD;return r&&!t.modified()||(this.value=r=CC(GS(t.projection),t.field||Object(g["u"])("datum"),t.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,t=>t[i]=r),n.modifies(i)}}),DC.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(g["z"])(DC,pa,{transform(t,e){var n,r=this.value,i=this.generator;if(!r.length||t.modified())for(const o in t)Object(g["E"])(i[o])&&i[o](t[o]);return n=i(),r.length?e.mod.push(ro(r[0],n)):e.add.push(to(n)),r[0]=n,e}}),MC.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Object(g["z"])(MC,pa,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,r="shared"===t.resolve,i=t.field||g["y"],o=NC(t.opacity,t),a=TC(t.color,t),s=t.as||"image",u={$x:0,$y:0,$value:0,$max:r?ya(n.map(t=>ya(i(t).values))):0};return n.forEach(t=>{const e=i(t),n=Object(g["p"])({},t,u);r||(n.$max=ya(e.values||[])),t[s]=$C(e,n,a.dep?a:Object(g["m"])(a(n)),o.dep?o:Object(g["m"])(o(n)))}),e.reflow(!0).modifies(s)}}),Object(g["z"])(PC,pa,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=LC(t.type),qS.forEach(e=>{null!=t[e]&&zC(n,e,t[e])})):qS.forEach(e=>{t.modified(e)&&zC(n,e,t[e])}),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&RC(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});var UC=function(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)o=n[i],s+=o.x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)o=n[i],o.x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i},qC=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return HC(this.cover(e,n),e,n,t)};function HC(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,f,d,h=t._root,p={data:r},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!h)return t._root=p,t;while(h.length)if((c=e>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a,i=h,!(h=h[f=l<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,h.data),u=+t._y.call(null,h.data),e===s&&n===u)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a}while((f=l<<1|c)===(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,t}function WC(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));if(u>l||c>f)return this;for(this.cover(u,c).cover(l,f),n=0;n<o;++n)HC(this,a[n],s[n],t[n]);return this}var GC=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{var a,s,u=i-n||1,c=this._root;while(n>t||t>=i||r>e||e>=o)switch(s=(e<r)<<1|t<n,a=new Array(4),a[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},YC=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},VC=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},XC=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},JC=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;g&&p.push(new XC(g,l,f,d,h)),null==n?n=1/0:(l=t-n,f=e-n,d=t+n,h=e+n,n*=n);while(u=p.pop())if(!(!(g=u.node)||(i=u.x0)>d||(o=u.y0)>h||(a=u.x1)<l||(s=u.y1)<f))if(g.length){var m=(i+a)/2,v=(o+s)/2;p.push(new XC(g[3],m,v,a,s),new XC(g[2],i,v,m,s),new XC(g[1],m,o,a,v),new XC(g[0],i,o,m,v)),(c=(e>=v)<<1|t>=m)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);l=t-w,f=e-w,d=t+w,h=e+w,r=g.data}}return r},QC=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,f,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)while(1){if((c=o>=(s=(p+m)/2))?p=s:m=s,(l=a>=(u=(g+v)/2))?g=u:v=u,e=h,!(h=h[f=l<<1|c]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}while(h.data!==t)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)};function KC(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}var ZC=function(){return this._root},tD=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},eD=function(t){var e,n,r,i,o,a,s=[],u=this._root;u&&s.push(new XC(u,this._x0,this._y0,this._x1,this._y1));while(e=s.pop())if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new XC(n,c,l,o,a)),(n=u[2])&&s.push(new XC(n,r,l,c,a)),(n=u[1])&&s.push(new XC(n,c,i,o,l)),(n=u[0])&&s.push(new XC(n,r,i,c,l))}return this},nD=function(t){var e,n=[],r=[];this._root&&n.push(new XC(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,f=(s+c)/2;(o=i[0])&&n.push(new XC(o,a,s,l,f)),(o=i[1])&&n.push(new XC(o,l,s,u,f)),(o=i[2])&&n.push(new XC(o,a,f,l,c)),(o=i[3])&&n.push(new XC(o,l,f,u,c))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this};function rD(t){return t[0]}var iD=function(t){return arguments.length?(this._x=t,this):this._x};function oD(t){return t[1]}var aD=function(t){return arguments.length?(this._y=t,this):this._y};function sD(t,e,n){var r=new uD(null==e?rD:e,null==n?oD:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function uD(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function cD(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var lD=sD.prototype=uD.prototype;lD.copy=function(){var t,e,n=new uD(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=cD(r),n;t=[{source:r,target:n._root=new Array(4)}];while(r=t.pop())for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=cD(e));return n},lD.add=qC,lD.addAll=WC,lD.cover=GC,lD.data=YC,lD.extent=VC,lD.find=JC,lD.remove=QC,lD.removeAll=KC,lD.root=ZC,lD.size=tD,lD.visit=eD,lD.visitAfter=nD,lD.x=iD,lD.y=aD;var fD=function(t){return function(){return t}},dD=function(t){return 1e-6*(t()-.5)};function hD(t){return t.x+t.vx}function pD(t){return t.y+t.vy}var gD=function(t){var e,n,r,i=1,o=1;function a(){for(var t,a,u,c,l,f,d,h=e.length,p=0;p<o;++p)for(a=sD(e,hD,pD).visitAfter(s),t=0;t<h;++t)u=e[t],f=n[u.index],d=f*f,c=u.x+u.vx,l=u.y+u.vy,a.visit(g);function g(t,e,n,o,a){var s=t.data,h=t.r,p=f+h;if(!s)return e>c+p||o<c-p||n>l+p||a<l-p;if(s.index>u.index){var g=c-s.x-s.vx,m=l-s.y-s.vy,v=g*g+m*m;v<p*p&&(0===g&&(g=dD(r),v+=g*g),0===m&&(m=dD(r),v+=m*m),v=(p-(v=Math.sqrt(v)))/v*i,u.vx+=(g*=v)*(p=(h*=h)/(d+h)),u.vy+=(m*=v)*p,s.vx-=g*(p=1-p),s.vy-=m*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=fD(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"===typeof e?e:fD(+e),u(),a):t},a},mD={value:()=>{}};function vD(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new yD(r)}function yD(t){this._=t}function bD(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function xD(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function wD(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=mD,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}yD.prototype=vD.prototype={constructor:yD,on:function(t,e){var n,r=this._,i=bD(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++o<a)if(n=(t=i[o]).type)r[n]=wD(r[n],t.name,e);else if(null==e)for(n in r)r[n]=wD(r[n],t.name,null);return this}while(++o<a)if((n=(t=i[o]).type)&&(n=xD(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new yD(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var OD,_D,jD=vD,ED=0,kD=0,AD=0,SD=1e3,CD=0,DD=0,MD=0,TD="object"===typeof performance&&performance.now?performance:Date,ND="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function FD(){return DD||(ND($D),DD=TD.now()+MD)}function $D(){DD=0}function PD(){this._call=this._time=this._next=null}function RD(t,e,n){var r=new PD;return r.restart(t,e,n),r}function LD(){FD(),++ED;var t,e=OD;while(e)(t=DD-e._time)>=0&&e._call.call(null,t),e=e._next;--ED}function zD(){DD=(CD=TD.now())+MD,ED=kD=0;try{LD()}finally{ED=0,ID(),DD=0}}function BD(){var t=TD.now(),e=t-CD;e>SD&&(MD-=e,CD=t)}function ID(){var t,e,n=OD,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:OD=e);_D=t,UD(r)}function UD(t){if(!ED){kD&&(kD=clearTimeout(kD));var e=t-DD;e>24?(t<1/0&&(kD=setTimeout(zD,t-TD.now()-MD)),AD&&(AD=clearInterval(AD))):(AD||(CD=TD.now(),AD=setInterval(BD,SD)),ED=1,ND(zD))}}PD.prototype=RD.prototype={constructor:PD,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?FD():+n)+(null==e?0:+e),this._next||_D===this||(_D?_D._next=this:OD=this,_D=this),this._call=t,this._time=n,UD()},stop:function(){this._call&&(this._call=null,this._time=1/0,UD())}};const qD=1664525,HD=1013904223,WD=4294967296;var GD=function(){let t=1;return()=>(t=(qD*t+HD)%WD)/WD};function YD(t){return t.x}function VD(t){return t.y}var XD=10,JD=Math.PI*(3-Math.sqrt(5)),QD=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=RD(f),c=jD("tick","end"),l=GD();function f(){d(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function d(r){var u,c,l=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)c=t[u],null==c.fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=XD*Math.sqrt(.5+n),o=n*JD;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),h(),e={tick:d,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(l=t,s.forEach(p),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)s=t[c],i=e-s.x,o=n-s.y,a=i*i+o*o,a<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},KD=function(){var t,e,n,r,i,o=fD(-30),a=1,s=1/0,u=.81;function c(n){var i,o=t.length,a=sD(t,YD,VD).visitAfter(f);for(r=n,i=0;i<o;++i)e=t[i],a.visit(d)}function l(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function f(t){var e,n,r,o,a,s=0,u=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{e=t,e.x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function d(t,o,c,l){if(!t.value)return!0;var f=t.x-e.x,d=t.y-e.y,h=l-o,p=f*f+d*d;if(h*h/u<p)return p<s&&(0===f&&(f=dD(n),p+=f*f),0===d&&(d=dD(n),p+=d*d),p<a&&(p=Math.sqrt(a*p)),e.vx+=f*t.value*r/p,e.vy+=d*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===f&&(f=dD(n),p+=f*f),0===d&&(d=dD(n),p+=d*d),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(h=i[t.data.index]*r/p,e.vx+=f*h,e.vy+=d*h)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,l()},c.strength=function(t){return arguments.length?(o="function"===typeof t?t:fD(+t),l(),c):o},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c};function ZD(t){return t.index}function tM(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}var eM=function(t){var e,n,r,i,o,a,s=ZD,u=f,c=fD(30),l=1;function f(t){return 1/Math.min(i[t.source.index],i[t.target.index])}function d(r){for(var i=0,s=t.length;i<l;++i)for(var u,c,f,d,h,p,g,m=0;m<s;++m)u=t[m],c=u.source,f=u.target,d=f.x+f.vx-c.x-c.vx||dD(a),h=f.y+f.vy-c.y-c.vy||dD(a),p=Math.sqrt(d*d+h*h),p=(p-n[m])/p*r*e[m],d*=p,h*=p,f.vx-=d*(g=o[m]),f.vy-=h*g,c.vx+=d*(g=1-g),c.vy+=h*g}function h(){if(r){var a,u,c=r.length,l=t.length,f=new Map(r.map((t,e)=>[s(t,e,r),t]));for(a=0,i=new Array(c);a<l;++a)u=t[a],u.index=a,"object"!==typeof u.source&&(u.source=tM(f,u.source)),"object"!==typeof u.target&&(u.target=tM(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(l);a<l;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),p(),n=new Array(l),g()}}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function g(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t,e){r=t,a=e,h()},d.links=function(e){return arguments.length?(t=e,h(),d):t},d.id=function(t){return arguments.length?(s=t,d):s},d.iterations=function(t){return arguments.length?(l=+t,d):l},d.strength=function(t){return arguments.length?(u="function"===typeof t?t:fD(+t),p(),d):u},d.distance=function(t){return arguments.length?(c="function"===typeof t?t:fD(+t),g(),d):c},d},nM=function(t){var e,n,r,i=fD(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)i=e[o],i.vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=fD(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:fD(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"===typeof e?e:fD(+e),a(),o):t},o},rM=function(t){var e,n,r,i=fD(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)i=e[o],i.vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=fD(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:fD(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"===typeof e?e:fD(+e),a(),o):t},o};const iM={center:UC,collide:gD,nbody:KD,link:eM,x:nM,y:rM},oM="forces",aM=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],sM=["static","iterations"],uM=["x","y","vx","vy"];function cM(t){pa.call(this,null,t)}function lM(t,e){return()=>t.touch(e).run()}function fM(t,e){const n=QD(t),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),dM(n,e,!0).on("end",()=>o=!0)}function dM(t,e,n,r){var i,o,a,s,u=Object(g["i"])(e.forces);for(i=0,o=aM.length;i<o;++i)a=aM[i],a!==oM&&e.modified(a)&&t[a](e[a]);for(i=0,o=u.length;i<o;++i)s=oM+i,a=n||e.modified(oM,i)?pM(u[i]):r&&hM(u[i],r)?t.force(s):null,a&&t.force(s,a);for(o=t.numForces||0;i<o;++i)t.force(oM+i,null);return t.numForces=u.length,t}function hM(t,e){var n,r;for(n in t)if(Object(g["E"])(r=t[n])&&e.modified(Object(g["g"])(r)))return 1;return 0}function pM(t){var e,n;for(n in Object(g["w"])(iM,t.force)||Object(g["o"])("Unrecognized force: "+t.force),e=iM[t.force](),t)Object(g["E"])(e[n])&&gM(e[n],t[n],t);return e}function gM(t,e,n){t(Object(g["E"])(e)?t=>e(t,n):e)}function mM(t){var e=0,n=t.children,r=n&&n.length;if(r)while(--r>=0)e+=n[r].value;else e=1;t.value=e}cM.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:uM}]},Object(g["z"])(cM,pa,{transform(t,e){var n=this.value,r=e.changed(e.ADD_REM),i=t.modified(aM),o=t.iterations||300;if(n?(r&&(e.modifies("index"),n.nodes(e.source)),(i||e.changed(e.MOD))&&dM(n,t,0,e)):(this.value=n=fM(e.source,t),n.on("tick",lM(e.dataflow,this)),t.static||(r=!0,n.tick()),e.modifies("index")),i||r||t.modified(sM)||e.changed()&&t.restart)if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),t.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return e.StopPropagation;return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let s,u=this._argops,c=0,l=u.length;c<l;++c)if(s=u[c],s.name===oM&&"link"===s.op._argval.force)for(var r,i=s.op._argops,o=0,a=i.length;o<a;++o)if("links"===i[o].name&&(r=i[o].op.source)){n.pulse(r,n.changeset().reflow());break}return e.reflow(t.modified()).modifies(uM)}});var vM=function(){return this.eachAfter(mM)},yM=function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},bM=function(t,e){var n,r,i=this,o=[i],a=-1;while(i=o.pop())if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},xM=function(t,e){var n,r,i,o=this,a=[o],s=[],u=-1;while(o=a.pop())if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);while(o=s.pop())t.call(e,o,++u,this);return this},wM=function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},OM=function(t){return this.eachAfter((function(e){var n=+t(e.data)||0,r=e.children,i=r&&r.length;while(--i>=0)n+=r[i].value;e.value=n}))},_M=function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},jM=function(t){var e=this,n=EM(e,t),r=[e];while(e!==n)e=e.parent,r.push(e);var i=r.length;while(t!==n)r.splice(i,0,t),t=t.parent;return r};function EM(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();while(t===e)i=t,t=n.pop(),e=r.pop();return i}var kM=function(){var t=this,e=[t];while(t=t.parent)e.push(t);return e},AM=function(){return Array.from(this)},SM=function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},CM=function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},DM=function*(){var t,e,n,r,i=this,o=[i];do{t=o.reverse(),o=[];while(i=t.pop())if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)};function MM(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=FM)):void 0===e&&(e=NM);var n,r,i,o,a,s=new RM(t),u=[s];while(n=u.pop())if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new RM(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(PM)}function TM(){return MM(this).eachBefore($M)}function NM(t){return t.children}function FM(t){return Array.isArray(t)?t[1]:null}function $M(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function PM(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function RM(t){this.data=t,this.depth=this.height=0,this.parent=null}RM.prototype=MM.prototype={constructor:RM,count:vM,each:yM,eachAfter:xM,eachBefore:bM,find:wM,sum:OM,sort:_M,path:jM,ancestors:kM,descendants:AM,leaves:SM,links:CM,copy:TM,[Symbol.iterator]:DM};var LM=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)};function zM(t){var e,n,r=t.length;while(r)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}var BM=function(t){var e,n,r=0,i=(t=zM(Array.from(t))).length,o=[];while(r<i)e=t[r],n&&qM(n,e)?++r:(n=WM(o=IM(o,e)),r=0);return n};function IM(t,e){var n,r;if(HM(e,t))return[e];for(n=0;n<t.length;++n)if(UM(e,t[n])&&HM(YM(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(UM(YM(t[n],t[r]),e)&&UM(YM(t[n],e),t[r])&&UM(YM(t[r],e),t[n])&&HM(VM(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function UM(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function qM(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function HM(t,e){for(var n=0;n<e.length;++n)if(!qM(t,e[n]))return!1;return!0}function WM(t){switch(t.length){case 1:return GM(t[0]);case 2:return YM(t[0],t[1]);case 3:return VM(t[0],t[1],t[2])}}function GM(t){return{x:t.x,y:t.y,r:t.r}}function YM(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+o+u/f*l)/2,y:(r+a+c/f*l)/2,r:(f+i+s)/2}}function VM(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,d=r-a,h=r-c,p=i-s,g=i-l,m=u-o,v=f-o,y=r*r+i*i-o*o,b=y-a*a-s*s+u*u,x=y-c*c-l*l+f*f,w=h*p-d*g,O=(p*x-g*b)/(2*w)-r,_=(g*m-p*v)/w,j=(h*b-d*x)/(2*w)-i,E=(d*v-h*m)/w,k=_*_+E*E-1,A=2*(o+O*_+j*E),S=O*O+j*j-o*o,C=-(k?(A+Math.sqrt(A*A-4*k*S))/(2*k):S/A);return{x:r+O+_*C,y:i+j+E*C,r:C}}function XM(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,a*=a,i>a?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function JM(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function QM(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function KM(t){this._=t,this.next=null,this.previous=null}function ZM(t){if(!(i=(t=LM(t)).length))return 0;var e,n,r,i,o,a,s,u,c,l,f;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;XM(n,e,r=t[2]),e=new KM(e),n=new KM(n),r=new KM(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){XM(e._,n._,r=t[s]),r=new KM(r),u=n.next,c=e.previous,l=n._.r,f=e._.r;do{if(l<=f){if(JM(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(JM(c._,r._)){e=c,e.next=n,n.previous=e,--s;continue t}f+=c._.r,c=c.previous}}while(u!==c.next);r.previous=e,r.next=n,e.next=n.previous=n=r,o=QM(e);while((r=r.next)!==n)(a=QM(r))<o&&(e=r,o=a);n=e.next}e=[n._],r=n;while((r=r.next)!==n)e.push(r._);for(r=BM(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function tT(t){return null==t?null:eT(t)}function eT(t){if("function"!==typeof t)throw new Error;return t}function nT(){return 0}var rT=function(t){return function(){return t}};function iT(t){return Math.sqrt(t.value)}var oT=function(){var t=null,e=1,n=1,r=nT;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(aT(t)).eachAfter(sT(r,.5)).eachBefore(uT(1)):i.eachBefore(aT(iT)).eachAfter(sT(nT,1)).eachAfter(sT(r,i.r/Math.min(e,n))).eachBefore(uT(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=tT(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:rT(+t),i):r},i};function aT(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function sT(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=ZM(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function uT(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var cT=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},lT=function(t,e,n,r,i){var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;while(++s<u)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},fT=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(o(e,a)),r&&i.eachBefore(cT),i}function o(t,e){return function(r){r.children&&lT(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},dT={depth:-1},hT={};function pT(t){return t.id}function gT(t){return t.parentId}var mT=function(){var t=pT,e=gT;function n(n){var r,i,o,a,s,u,c,l=Array.from(n),f=l.length,d=new Map;for(i=0;i<f;++i)r=l[i],s=l[i]=new RM(r),null!=(u=t(r,i,n))&&(u+="")&&(c=s.id=u,d.set(c,d.has(c)?hT:s)),null!=(u=e(r,i,n))&&(u+="")&&(s.parent=u);for(i=0;i<f;++i)if(s=l[i],u=s.parent){if(a=d.get(u),!a)throw new Error("missing: "+u);if(a===hT)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=dT,o.eachBefore((function(t){t.depth=t.parent.depth+1,--f})).eachBefore(PM),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=eT(e),n):t},n.parentId=function(t){return arguments.length?(e=eT(t),n):e},n};function vT(t,e){return t.parent===e.parent?1:2}function yT(t){var e=t.children;return e?e[0]:t.t}function bT(t){var e=t.children;return e?e[e.length-1]:t.t}function xT(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function wT(t){var e,n=0,r=0,i=t.children,o=i.length;while(--o>=0)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function OT(t,e,n){return t.a.parent===e.parent?t.a:n}function _T(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function jT(t){var e,n,r,i,o,a=new _T(t,0),s=[a];while(e=s.pop())if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new _T(r[i],i)),n.parent=e;return(a.parent=new _T(null,0)).children=[a],a}_T.prototype=Object.create(RM.prototype);var ET=function(){var t=vT,e=1,n=1,r=null;function i(i){var s=jT(i);if(s.eachAfter(o),s.parent.m=-s.z,s.eachBefore(a),r)i.eachBefore(u);else{var c=i,l=i,f=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>f.depth&&(f=t)}));var d=c===l?1:t(c,l)/2,h=d-c.x,p=e/(l.x+d+h),g=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+h)*p,t.y=t.depth*g}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){wT(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=s(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(e,n,r){if(n){var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,l=a.m,f=s.m,d=u.m;while(s=bT(s),o=yT(o),s&&o)u=yT(u),a=bT(a),a.a=e,i=s.z+f-o.z-c+t(s._,o._),i>0&&(xT(OT(s,e,r),e,i),c+=i,l+=i),f+=s.m,c+=o.m,d+=u.m,l+=a.m;s&&!bT(a)&&(a.t=s,a.m+=f-l),o&&!yT(u)&&(u.t=o,u.m+=c-d,r=e)}return r}function u(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i};function kT(t,e){return t.parent===e.parent?1:2}function AT(t){return t.reduce(ST,0)/t.length}function ST(t,e){return t+e.x}function CT(t){return 1+t.reduce(DT,0)}function DT(t,e){return Math.max(t,e.y)}function MT(t){var e;while(e=t.children)t=e[0];return t}function TT(t){var e;while(e=t.children)t=e[e.length-1];return t}var NT=function(){var t=kT,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=AT(n),e.y=CT(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=MT(i),u=TT(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},FT=function(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;function l(t,e,n,r,i,o,a){if(t>=e-1){var u=s[t];return u.x0=r,u.y0=i,u.x1=o,void(u.y1=a)}var f=c[t],d=n/2+f,h=t+1,p=e-1;while(h<p){var g=h+p>>>1;c[g]<d?h=g+1:p=g}d-c[h-1]<c[h]-d&&t+1<h&&--h;var m=c[h]-f,v=n-m;if(o-r>a-i){var y=n?(r*v+o*m)/n:o;l(t,h,m,r,i,y,a),l(h,e,v,y,i,o,a)}else{var b=n?(i*v+a*m)/n:a;l(t,h,m,r,i,o,b),l(h,e,v,r,b,o,a)}}l(0,u,t.value,e,n,r,i)},$T=function(t,e,n,r,i){var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;while(++s<u)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},PT=function(t,e,n,r,i){(1&t.depth?$T:lT)(t,e,n,r,i)},RT=(1+Math.sqrt(5))/2;function LT(t,e,n,r,i,o){var a,s,u,c,l,f,d,h,p,g,m,v=[],y=e.children,b=0,x=0,w=y.length,O=e.value;while(b<w){u=i-n,c=o-r;do{l=y[x++].value}while(!l&&x<w);for(f=d=l,g=Math.max(c/u,u/c)/(O*t),m=l*l*g,p=Math.max(d/m,m/f);x<w;++x){if(l+=s=y[x].value,s<f&&(f=s),s>d&&(d=s),m=l*l*g,h=Math.max(d/m,m/f),h>p){l-=s;break}p=h}v.push(a={value:l,dice:u<c,children:y.slice(b,x)}),a.dice?lT(a,n,r,i,O?r+=c*l/O:o):$T(a,n,r,O?n+=u*l/O:i,o),O-=l,b=x}return v}var zT=function t(e){function n(t,n,r,i,o){LT(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(RT),BT=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e){var a,s,u,c,l,f=-1,d=a.length,h=t.value;while(++f<d){for(s=a[f],u=s.children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?lT(s,n,r,i,h?r+=(o-r)*s.value/h:o):$T(s,n,r,h?n+=(i-n)*s.value/h:i,o),h-=s.value}}else t._squarify=a=LT(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(RT),IT=function(){var t=zT,e=!1,n=1,r=1,i=[0],o=nT,a=nT,s=nT,u=nT,c=nT;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(cT),t}function f(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,f=e.x1-n,d=e.y1-n;f<r&&(r=f=(r+f)/2),d<l&&(l=d=(l+d)/2),e.x0=r,e.y0=l,e.x1=f,e.y1=d,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,l+=a(e)-n,f-=s(e)-n,d-=u(e)-n,f<r&&(r=f=(r+f)/2),d<l&&(l=d=(l+d)/2),t(e,r,l,f,d))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=eT(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"===typeof t?t:rT(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"===typeof t?t:rT(+t),l):a},l.paddingRight=function(t){return arguments.length?(s="function"===typeof t?t:rT(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"===typeof t?t:rT(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"===typeof t?t:rT(+t),l):c},l};function UT(t,e,n){const r={};return t.each(t=>{const i=t.data;n(i)&&(r[e(i)]=t)}),t.lookup=r,t}function qT(t){pa.call(this,null,t)}qT.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const HT=t=>t.values;function WT(){const t=[],e={entries:t=>r(n(t,0),0),key:n=>(t.push(n),e)};function n(e,r){if(r>=t.length)return e;const i=e.length,o=t[r++],a={},s={};let u,c,l,f=-1;while(++f<i)u=o(c=e[f])+"",(l=a[u])?l.push(c):a[u]=[c];for(u in a)s[u]=n(a[u],r);return s}function r(e,n){if(++n>t.length)return e;const i=[];for(const t in e)i.push({key:t,values:r(e[t],n)});return i}return e}function GT(t){pa.call(this,null,t)}Object(g["z"])(qT,pa,{transform(t,e){e.source||Object(g["o"])("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),o=this.value;return(!o||r||e.changed())&&(o&&o.each(t=>{t.children&&Qi(t.data)&&i.rem.push(t.data)}),this.value=o=MM({values:Object(g["i"])(t.keys).reduce((t,e)=>(t.key(e),t),WT()).entries(i.source)},HT),n&&o.each(t=>{t.children&&(t=to(t.data),i.add.push(t),i.source.push(t))}),UT(o,Ki,Ki)),i.source.root=o,i}});const YT=(t,e)=>t.parent===e.parent?1:2;function VT(t,e,n){for(let r,i=0,o=e.length;i<o;++i)r=e[i],r in n&&t[r](n[r])}function XT(t,e,n){const r=t.data,i=e.length-1;for(let o=0;o<i;++o)r[n[o]]=t[e[o]];r[n[i]]=t.children?t.children.length:0}Object(g["z"])(GT,pa,{transform(t,e){e.source&&e.source.root||Object(g["o"])(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),r=this.fields,i=e.source.root,o=t.as||r;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(io(t.sort,t=>t.data)),VT(n,this.params,t),n.separation&&n.separation(!1!==t.separation?YT:g["Q"]);try{this.value=n(i)}catch(a){Object(g["o"])(a)}return i.each(t=>XT(t,r,o)),e.reflow(t.modified()).modifies(o).modifies("leaf")}});const JT=["x","y","r","depth","children"];function QT(t){GT.call(this,t)}QT.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:JT.length,default:JT}]},Object(g["z"])(QT,GT,{layout:oT,params:["radius","size","padding"],fields:JT});const KT=["x0","y0","x1","y1","depth","children"];function ZT(t){GT.call(this,t)}function tN(t){pa.call(this,null,t)}ZT.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:KT.length,default:KT}]},Object(g["z"])(ZT,GT,{layout:fT,params:["size","round","padding"],fields:KT}),tN.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(g["z"])(tN,pa,{transform(t,e){e.source||Object(g["o"])("Stratify transform requires an upstream data source.");let n=this.value;const r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),o=!n||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?UT(mT().id(t.key).parentId(t.parentKey)(i.source),t.key,g["ib"]):UT(mT()([{}]),t.key,t.key)),i.source.root=this.value=n,i}});const eN={tidy:ET,cluster:NT},nN=["x","y","depth","children"];function rN(t){GT.call(this,t)}function iN(t){pa.call(this,[],t)}rN.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:nN.length,default:nN}]},Object(g["z"])(rN,GT,{layout(t){const e=t||"tidy";if(Object(g["w"])(eN,e))return eN[e]();Object(g["o"])("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:nN}),iN.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(g["z"])(iN,pa,{transform(t,e){const n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),o={};return r||Object(g["o"])("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,t=>o[Ki(t)]=1),r.each(t=>{const e=t.data,n=t.parent&&t.parent.data;n&&o[Ki(e)]&&o[Ki(n)]&&i.add.push(to({source:n,target:e}))}),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,t=>o[Ki(t)]=1),n.forEach(t=>{(o[Ki(t.source)]||o[Ki(t.target)])&&i.mod.push(t)})),i}});const oN={binary:FT,dice:lT,slice:$T,slicedice:PT,squarify:zT,resquarify:BT},aN=["x0","y0","x1","y1","depth","children"];function sN(t){GT.call(this,t)}sN.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:aN.length,default:aN}]},Object(g["z"])(sN,GT,{layout(){const t=IT();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{Object(g["w"])(oN,e)?t.tile(oN[e]):Object(g["o"])("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:aN});const uN=4278190080,cN=268435456,lN=.0625;function fN(t,e){const n=t.bitmap();return(e||[]).forEach(e=>n.set(t(e.boundary[0]),t(e.boundary[3]))),[n,void 0]}function dN(t,e,n,r){const i=t.width,o=t.height,a=n||r,s=Zl(i,o).getContext("2d");e.forEach(t=>hN(s,t,a));const u=new Uint32Array(s.getImageData(0,0,i,o).data.buffer),c=t.bitmap(),l=a&&t.bitmap();let f,d,h,p,g;for(d=0;d<o;++d)for(f=0;f<i;++f)g=u[d*i+f]&uN,g&&(h=t(f),p=t(d),r||c.set(h,p),a&&g^cN&&l.set(h,p));return[c,l]}function hN(t,e,n){if(!e.length)return;const r=e[0].mark.marktype;"group"===r?e.forEach(e=>{e.items.forEach(e=>hN(t,e.items,n))}):fx[r].draw(t,{items:n?e.map(pN):e})}function pN(t){const e=no(t,{});return e.stroke&&(e.strokeOpacity=1),e.fill&&(e.fillOpacity=lN,e.stroke="#000",e.strokeOpacity=1,e.strokeWidth=2),e}const gN=5,mN=31,vN=32,yN=new Uint32Array(vN+1),bN=new Uint32Array(vN+1);bN[0]=0,yN[0]=~bN[0];for(let lG=1;lG<=vN;++lG)bN[lG]=bN[lG-1]<<1|1,yN[lG]=~bN[lG];function xN(t,e){const n=new Uint32Array(~~((t*e+vN)/vN));function r(t,e){n[t]|=e}function i(t,e){n[t]&=e}return{array:n,get:(e,r)=>{const i=r*t+e;return n[i>>>gN]&1<<(i&mN)},set:(e,n)=>{const i=n*t+e;r(i>>>gN,1<<(i&mN))},clear:(e,n)=>{const r=n*t+e;i(r>>>gN,~(1<<(r&mN)))},getRange:(e,r,i,o)=>{let a,s,u,c,l=o;for(;l>=r;--l)if(a=l*t+e,s=l*t+i,u=a>>>gN,c=s>>>gN,u===c){if(n[u]&yN[a&mN]&bN[1+(s&mN)])return!0}else{if(n[u]&yN[a&mN])return!0;if(n[c]&bN[1+(s&mN)])return!0;for(let t=u+1;t<c;++t)if(n[t])return!0}return!1},setRange:(e,n,i,o)=>{let a,s,u,c,l;for(;n<=o;++n)if(a=n*t+e,s=n*t+i,u=a>>>gN,c=s>>>gN,u===c)r(u,yN[a&mN]&bN[1+(s&mN)]);else for(r(u,yN[a&mN]),r(c,bN[1+(s&mN)]),l=u+1;l<c;++l)r(l,4294967295)},clearRange:(e,n,r,o)=>{let a,s,u,c,l;for(;n<=o;++n)if(a=n*t+e,s=n*t+r,u=a>>>gN,c=s>>>gN,u===c)i(u,bN[a&mN]|yN[1+(s&mN)]);else for(i(u,bN[a&mN]),i(c,yN[1+(s&mN)]),l=u+1;l<c;++l)i(l,0)},outOfBounds:(n,r,i,o)=>n<0||r<0||o>=e||i>=t}}function wN(t,e,n){const r=Math.max(1,Math.sqrt(t*e/1e6)),i=~~((t+2*n+r)/r),o=~~((e+2*n+r)/r),a=t=>~~((t+n)/r);return a.invert=t=>t*r-n,a.bitmap=()=>xN(i,o),a.ratio=r,a.padding=n,a.width=t,a.height=e,a}function ON(t,e,n,r){const i=t.width,o=t.height;return function(t){const e=t.datum.datum.items[r].items,n=e.length,a=t.datum.fontSize,s=Lb.width(t.datum,t.datum.text);let u,c,l,f,d,h,p,g=0;for(let r=0;r<n;++r)u=e[r].x,l=e[r].y,c=void 0===e[r].x2?u:e[r].x2,f=void 0===e[r].y2?l:e[r].y2,d=(u+c)/2,h=(l+f)/2,p=Math.abs(c-u+f-l),p>=g&&(g=p,t.x=d,t.y=h);return d=s/2,h=a/2,u=t.x-d,c=t.x+d,l=t.y-h,f=t.y+h,t.align="center",u<0&&c<=i?t.align="left":0<=u&&i<c&&(t.align="right"),t.baseline="middle",l<0&&f<=o?t.baseline="top":0<=l&&o<f&&(t.baseline="bottom"),!0}}function _N(t,e,n,r,i,o){let a=n/2;return t-a<0||t+a>i||e-(a=r/2)<0||e+a>o}function jN(t,e,n,r,i,o,a,s){const u=i*o/(2*r),c=t(e-u),l=t(e+u),f=t(n-(o/=2)),d=t(n+o);return a.outOfBounds(c,f,l,d)||a.getRange(c,f,l,d)||s&&s.getRange(c,f,l,d)}function EN(t,e,n,r){const i=t.width,o=t.height,a=e[0],s=e[1];function u(e,n,r,u,c){const l=t.invert(e),f=t.invert(n);let d,h=r,p=o;if(!_N(l,f,u,c,i,o)&&!jN(t,l,f,c,u,h,a,s)&&!jN(t,l,f,c,u,c,a,null)){while(p-h>=1)d=(h+p)/2,jN(t,l,f,c,u,d,a,s)?p=d:h=d;if(h>r)return[l,f,h,!0]}}return function(e){const s=e.datum.datum.items[r].items,c=s.length,l=e.datum.fontSize,f=Lb.width(e.datum,e.datum.text);let d,h,p,g,m,v,y,b,x,w,O,_,j,E,k,A,S,C=n?l:0,D=!1,M=!1,T=0;for(let r=0;r<c;++r){for(d=s[r].x,p=s[r].y,h=void 0===s[r].x2?d:s[r].x2,g=void 0===s[r].y2?p:s[r].y2,d>h&&(S=d,d=h,h=S),p>g&&(S=p,p=g,g=S),x=t(d),O=t(h),w=~~((x+O)/2),_=t(p),E=t(g),j=~~((_+E)/2),y=w;y>=x;--y)for(b=j;b>=_;--b)A=u(y,b,C,f,l),A&&([e.x,e.y,C,D]=A);for(y=w;y<=O;++y)for(b=j;b<=E;++b)A=u(y,b,C,f,l),A&&([e.x,e.y,C,D]=A);D||n||(k=Math.abs(h-d+g-p),m=(d+h)/2,v=(p+g)/2,k>=T&&!_N(m,v,f,l,i,o)&&!jN(t,m,v,l,f,l,a,null)&&(T=k,e.x=m,e.y=v,M=!0))}return!(!D&&!M)&&(m=f/2,v=l/2,a.setRange(t(e.x-m),t(e.y-v),t(e.x+m),t(e.y+v)),e.align="center",e.baseline="middle",!0)}}const kN=[-1,-1,1,1],AN=[-1,1,-1,1];function SN(t,e,n,r){const i=t.width,o=t.height,a=e[0],s=e[1],u=t.bitmap();return function(e){const c=e.datum.datum.items[r].items,l=c.length,f=e.datum.fontSize,d=Lb.width(e.datum,e.datum.text),h=[];let p,g,m,v,y,b,x,w,O,_,j,E,k=n?f:0,A=!1,S=!1,C=0;for(let r=0;r<l;++r){p=c[r].x,m=c[r].y,g=void 0===c[r].x2?p:c[r].x2,v=void 0===c[r].y2?m:c[r].y2,h.push([t((p+g)/2),t((m+v)/2)]);while(h.length)if([x,w]=h.pop(),!(a.get(x,w)||s.get(x,w)||u.get(x,w))){u.set(x,w);for(let t=0;t<4;++t)y=x+kN[t],b=w+AN[t],u.outOfBounds(y,b,y,b)||h.push([y,b]);if(y=t.invert(x),b=t.invert(w),O=k,_=o,!_N(y,b,d,f,i,o)&&!jN(t,y,b,f,d,O,a,s)&&!jN(t,y,b,f,d,f,a,null)){while(_-O>=1)j=(O+_)/2,jN(t,y,b,f,d,j,a,s)?_=j:O=j;O>k&&(e.x=y,e.y=b,k=O,A=!0)}}A||n||(E=Math.abs(g-p+v-m),y=(p+g)/2,b=(m+v)/2,E>=C&&!_N(y,b,d,f,i,o)&&!jN(t,y,b,f,d,f,a,null)&&(C=E,e.x=y,e.y=b,S=!0))}return!(!A&&!S)&&(y=d/2,b=f/2,a.setRange(t(e.x-y),t(e.y-b),t(e.x+y),t(e.y+b)),e.align="center",e.baseline="middle",!0)}}const CN=["right","center","left"],DN=["bottom","middle","top"];function MN(t,e,n,r){const i=t.width,o=t.height,a=e[0],s=e[1],u=r.length;return function(e){const c=e.boundary,l=e.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let f,d,h,p,g,m,v,y,b,x,w,O,_,j,E,k=0;for(let i=0;i<u;++i){if(f=(3&n[i])-1,d=(n[i]>>>2&3)-1,h=0===f&&0===d||r[i]<0,p=f&&d?Math.SQRT1_2:1,g=r[i]<0?-1:1,m=c[1+f]+r[i]*f*p,w=c[4+d]+g*l*d/2+r[i]*d*p,y=w-l/2,b=w+l/2,O=t(m),j=t(y),E=t(b),!k){if(!TN(O,O,j,E,a,s,m,m,y,b,c,h))continue;k=Lb.width(e.datum,e.datum.text)}if(x=m+g*k*f/2,m=x-k/2,v=x+k/2,O=t(m),_=t(v),TN(O,_,j,E,a,s,m,v,y,b,c,h))return e.x=f?f*g<0?v:m:x,e.y=d?d*g<0?b:y:w,e.align=CN[f*g+1],e.baseline=DN[d*g+1],a.setRange(O,j,_,E),!0}return!1}}function TN(t,e,n,r,i,o,a,s,u,c,l,f){return!(i.outOfBounds(t,n,e,r)||(f&&o?o.getRange(t,n,e,r)||!NN(a,u,s,c,l):i.getRange(t,n,e,r)))}function NN(t,e,n,r,i){return i[0]<=t&&n<=i[2]&&i[3]<=e&&r<=i[5]}const FN=0,$N=4,PN=8,RN=0,LN=1,zN=2,BN={"top-left":FN+RN,top:FN+LN,"top-right":FN+zN,left:$N+RN,middle:$N+LN,right:$N+zN,"bottom-left":PN+RN,bottom:PN+LN,"bottom-right":PN+zN},IN={naive:ON,"reduced-search":EN,floodfill:SN};function UN(t,e,n,r,i,o,a,s,u,c,l){if(!t.length)return t;const f=Math.max(r.length,i.length),d=qN(r,f),h=HN(i,f),p=WN(t[0].datum),g="group"===p&&t[0].datum.items[u].marktype,m="area"===g,v=GN(p,g,s,u),y=wN(e[0],e[1],c),b=m&&"naive"===l,x=t.map(t=>({datum:t,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(t)}));let w;if(!b){n&&x.sort((t,e)=>n(t.datum,e.datum));let e=!1;for(let t=0;t<h.length&&!e;++t)e=5===h[t]||d[t]<0;p&&(a||m)&&(o=[t.map(t=>t.datum)].concat(o)),w=o.length?dN(y,o,e,m):fN(y,a&&x)}const O=m?IN[l](y,w,a,u):MN(y,w,h,d);return x.forEach(t=>t.opacity=+O(t)),x}function qN(t,e){const n=new Float64Array(e),r=t.length;for(let i=0;i<r;++i)n[i]=t[i]||0;for(let i=r;i<e;++i)n[i]=n[r-1];return n}function HN(t,e){const n=new Int8Array(e),r=t.length;for(let i=0;i<r;++i)n[i]|=BN[t[i]];for(let i=r;i<e;++i)n[i]=n[r-1];return n}function WN(t){return t&&t.mark&&t.mark.marktype}function GN(t,e,n,r){const i=t=>[t.x,t.x,t.x,t.y,t.y,t.y];return t?"line"===t||"area"===t?t=>i(t.datum):"line"===e?t=>{const e=t.datum.items[r].items;return i(e.length?e["start"===n?0:e.length-1]:{x:NaN,y:NaN})}:t=>{const e=t.datum.bounds;return[e.x1,(e.x1+e.x2)/2,e.x2,e.y1,(e.y1+e.y2)/2,e.y2]}:i}const YN=["x","y","opacity","align","baseline"],VN=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function XN(t){pa.call(this,null,t)}function JN(t,e){var n,r,i,o,a,s,u=[],c=function(t){return t(o)};if(null==e)u.push(t);else for(n={},r=0,i=t.length;r<i;++r)o=t[r],a=e.map(c),s=n[a],s||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function QN(t){pa.call(this,null,t)}XN.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:VN},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:YN.length,default:YN}]},Object(g["z"])(XN,pa,{transform(t,e){function n(n){const r=t[n];return Object(g["E"])(r)&&e.modified(r.fields)}const r=t.modified();if(!(r||e.changed(e.ADD_REM)||n("sort")))return;t.size&&2===t.size.length||Object(g["o"])("Size parameter should be specified as a [width, height] array.");const i=t.as||YN;return UN(e.materialize(e.SOURCE).source,t.size,t.sort,Object(g["i"])(t.offset||1),Object(g["i"])(t.anchor||VN),t.avoidMarks||[],!1!==t.avoidBaseMark,t.lineAnchor||"end",t.markIndex||0,t.padding||0,t.method||"naive").forEach(t=>{const e=t.datum;e[i[0]]=t.x,e[i[1]]=t.y,e[i[2]]=t.opacity,e[i[3]]=t.align,e[i[4]]=t.baseline}),e.reflow(r).modifies(i)}}),QN.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(g["z"])(QN,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=JN(r,t.groupby),o=(t.groupby||[]).map(g["h"]),a=o.length,s=t.as||[Object(g["h"])(t.x),Object(g["h"])(t.y)],u=[];i.forEach(e=>{Os(e,t.x,t.y,t.bandwidth||.3).forEach(t=>{const n={};for(let r=0;r<a;++r)n[o[r]]=e.dims[r];n[s[0]]=t[0],n[s[1]]=t[1],u.push(to(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const KN={linear:ds,log:hs,exp:ps,pow:gs,quad:ms,poly:vs},ZN=(t,e)=>"poly"===t?e:"quad"===t?2:1;function tF(t){pa.call(this,null,t)}tF.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(KN)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(g["z"])(tF,pa,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=JN(r,t.groupby),o=(t.groupby||[]).map(g["h"]),a=t.method||"linear",s=t.order||3,u=ZN(a,s),c=t.as||[Object(g["h"])(t.x),Object(g["h"])(t.y)],l=KN[a],f=[];let d=t.extent;Object(g["w"])(KN,a)||Object(g["o"])("Invalid regression method: "+a),null!=d&&"log"===a&&d[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(n=>{const r=n.length;if(r<=u)return void e.dataflow.warn("Skipping regression with more parameters than data points.");const i=l(n,t.x,t.y,s);if(t.params)return void f.push(to({keys:n.dims,coef:i.coef,rSquared:i.rSquared}));const h=d||Object(g["q"])(n,t.x),p=t=>{const e={};for(let r=0;r<o.length;++r)e[o[r]]=n.dims[r];e[c[0]]=t[0],e[c[1]]=t[1],f.push(to(e))};"linear"===a?h.forEach(t=>p([t,i.predict(t)])):As(i.predict,h,25,200).forEach(p)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const eF=Math.pow(2,-52),nF=new Uint32Array(512);class rF{static from(t,e=hF,n=pF){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new rF(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,s=1/0,u=-1/0,c=-1/0;for(let E=0;E<o;E++){const e=t[2*E],n=t[2*E+1];e<a&&(a=e),n<s&&(s=n),e>u&&(u=e),n>c&&(c=n),this._ids[E]=E}const l=(a+u)/2,f=(s+c)/2;let d,h,p,g=1/0;for(let E=0;E<o;E++){const e=oF(l,f,t[2*E],t[2*E+1]);e<g&&(d=E,g=e)}const m=t[2*d],v=t[2*d+1];g=1/0;for(let E=0;E<o;E++){if(E===d)continue;const e=oF(m,v,t[2*E],t[2*E+1]);e<g&&e>0&&(h=E,g=e)}let y=t[2*h],b=t[2*h+1],x=1/0;for(let E=0;E<o;E++){if(E===d||E===h)continue;const e=cF(m,v,y,b,t[2*E],t[2*E+1]);e<x&&(p=E,x=e)}let w=t[2*p],O=t[2*p+1];if(x===1/0){for(let r=0;r<o;r++)this._dists[r]=t[2*r]-t[0]||t[2*r+1]-t[1];fF(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(sF(m,v,y,b,w,O)){const t=h,e=y,n=b;h=p,y=w,b=O,p=t,w=e,O=n}const _=lF(m,v,y,b,w,O);this._cx=_.x,this._cy=_.y;for(let E=0;E<o;E++)this._dists[E]=oF(t[2*E],t[2*E+1],_.x,_.y);fF(this._ids,this._dists,0,o-1),this._hullStart=d;let j=3;n[d]=e[p]=h,n[h]=e[d]=p,n[p]=e[h]=d,r[d]=0,r[h]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,v)]=d,i[this._hashKey(y,b)]=h,i[this._hashKey(w,O)]=p,this.trianglesLen=0,this._addTriangle(d,h,p,-1,-1,-1);for(let E,k,A=0;A<this._ids.length;A++){const o=this._ids[A],a=t[2*o],s=t[2*o+1];if(A>0&&Math.abs(a-E)<=eF&&Math.abs(s-k)<=eF)continue;if(E=a,k=s,o===d||o===h||o===p)continue;let u=0;for(let t=0,e=this._hashKey(a,s);t<this._hashSize;t++)if(u=i[(e+t)%this._hashSize],-1!==u&&u!==n[u])break;u=e[u];let c,l=u;while(c=n[l],!sF(a,s,t[2*l],t[2*l+1],t[2*c],t[2*c+1]))if(l=c,l===u){l=-1;break}if(-1===l)continue;let f=this._addTriangle(l,o,n[l],-1,-1,r[l]);r[o]=this._legalize(f+2),r[l]=f,j++;let g=n[l];while(c=n[g],sF(a,s,t[2*g],t[2*g+1],t[2*c],t[2*c+1]))f=this._addTriangle(g,o,c,r[o],-1,r[g]),r[o]=this._legalize(f+2),n[g]=g,j--,g=c;if(l===u)while(c=e[l],sF(a,s,t[2*c],t[2*c+1],t[2*l],t[2*l+1]))f=this._addTriangle(c,o,l,-1,r[l],r[c]),this._legalize(f+2),r[c]=f,n[l]=l,j--,l=c;this._hullStart=e[o]=l,n[l]=e[g]=o,n[o]=g,i[this._hashKey(a,s)]=o,i[this._hashKey(t[2*l],t[2*l+1])]=l}this.hull=new Uint32Array(j);for(let E=0,k=this._hullStart;E<j;E++)this.hull[E]=k,k=n[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(iF(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;while(1){const a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===i)break;t=nF[--i];continue}const u=a-a%3,c=s+(t+1)%3,l=u+(a+2)%3,f=e[o],d=e[t],h=e[c],p=e[l],g=uF(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1]);if(g){e[t]=p,e[a]=f;const r=n[l];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===l){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(a,n[o]),this._link(o,l);const s=u+(a+1)%3;i<nF.length&&(nF[i++]=s)}else{if(0===i)break;t=nF[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function iF(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function oF(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function aF(t,e,n,r,i,o){const a=(r-e)*(i-t),s=(n-t)*(o-e);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function sF(t,e,n,r,i,o){const a=aF(i,o,t,e,n,r)||aF(t,e,n,r,i,o)||aF(n,r,i,o,t,e);return a<0}function uF(t,e,n,r,i,o,a,s){const u=t-a,c=e-s,l=n-a,f=r-s,d=i-a,h=o-s,p=u*u+c*c,g=l*l+f*f,m=d*d+h*h;return u*(f*m-g*h)-c*(l*m-g*d)+p*(l*h-f*d)<0}function cF(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,f=u*u+c*c,d=.5/(a*c-s*u),h=(c*l-s*f)*d,p=(a*f-u*l)*d;return h*h+p*p}function lF(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,f=u*u+c*c,d=.5/(a*c-s*u),h=t+(c*l-s*f)*d,p=e+(a*f-u*l)*d;return{x:h,y:p}}function fF(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let a=i-1;while(a>=n&&e[t[a]]>o)t[a+1]=t[a--];t[a+1]=r}else{const i=n+r>>1;let o=n+1,a=r;dF(t,i,o),e[t[n]]>e[t[r]]&&dF(t,n,r),e[t[o]]>e[t[r]]&&dF(t,o,r),e[t[n]]>e[t[o]]&&dF(t,n,o);const s=t[o],u=e[s];while(1){do{o++}while(e[t[o]]<u);do{a--}while(e[t[a]]>u);if(a<o)break;dF(t,o,a)}t[n+1]=t[a],t[a]=s,r-o+1>=a-n?(fF(t,e,o,r),fF(t,e,n,a-1)):(fF(t,e,n,a-1),fF(t,e,o,r))}}function dF(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function hF(t){return t[0]}function pF(t){return t[1]}const gF=1e-6;class mF{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){t=+t,e=+e,n=+n;const r=t+n,i=e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>gF||Math.abs(this._y1-i)>gF)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class vF{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class yF{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e))||!((i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let d,h,p=0,g=0,m=n.length;p<m;p+=3,g+=2){const e=2*n[p],r=2*n[p+1],o=2*n[p+2],a=t[e],s=t[e+1],u=t[r],c=t[r+1],l=t[o],f=t[o+1],m=u-a,v=c-s,y=l-a,b=f-s,x=m*m+v*v,w=y*y+b*b,O=2*(m*b-v*y);if(O)if(Math.abs(O)<1e-8)d=(a+l)/2,h=(s+f)/2;else{const t=1/O;d=a+(b*x-v*w)*t,h=s+(m*w-y*x)*t}else d=(a+l)/2-1e8*b,h=(s+f)/2+1e8*y;i[g]=d,i[g+1]=h}let o,a,s,u=e[e.length-1],c=4*u,l=t[2*u],f=t[2*u+1];r.fill(0);for(let d=0;d<e.length;++d)u=e[d],o=c,a=l,s=f,c=4*u,l=t[2*u],f=t[2*u+1],r[o+2]=r[c]=s-f,r[o+3]=r[c+1]=l-a}render(t){const e=null==t?t=new mF:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let c=0,l=n.length;c<l;++c){const e=n[c];if(e<c)continue;const r=2*Math.floor(c/3),i=2*Math.floor(e/3),a=o[r],s=o[r+1],u=o[i],l=o[i+1];this._renderSegment(a,s,u,l,t)}let s,u=i[i.length-1];for(let c=0;c<i.length;++c){s=u,u=i[c];const e=2*Math.floor(r[u]/3),n=o[e],l=o[e+1],f=4*s,d=this._project(n,l,a[f+2],a[f+3]);d&&this._renderSegment(n,l,d[0],d[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new mF:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new mF:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;while(r[0]===r[i-2]&&r[1]===r[i-1]&&i>1)i-=2;for(let o=2;o<i;o+=2)r[o]===r[o-2]&&r[o+1]===r[o-1]||e.lineTo(r[o],r[o+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new vF;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const a=this._regioncode(t,e),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return e=+e,e===e&&(n=+n,n===n)&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(e[r]==t[o]&&e[r+1]==t[o+1]&&e[(r+2)%i]==t[(o+a-2)%a]&&e[(r+3)%i]==t[(o+a-1)%a]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(e[2*n],e[2*n+1]),s=s%3===2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let r,i,o,a,s,u=null,c=e[n-2],l=e[n-1],f=this._regioncode(c,l);for(let d=0;d<n;d+=2)if(r=c,i=l,c=e[d],l=e[d+1],o=f,f=this._regioncode(c,l),0===o&&0===f)a=s,s=0,u?u.push(c,l):u=[c,l];else{let e,n,d,h,p;if(0===o){if(null===(e=this._clipSegment(r,i,c,l,o,f)))continue;[n,d,h,p]=e}else{if(null===(e=this._clipSegment(c,l,r,i,f,o)))continue;[h,p,n,d]=e,a=s,s=this._edgecode(n,d),a&&s&&this._edge(t,a,s,u,u.length),u?u.push(n,d):u=[n,d]}a=s,s=this._edgecode(h,p),a&&s&&this._edge(t,a,s,u,u.length),u?u.push(h,p):u=[h,p]}if(u)a=s,s=this._edgecode(u[0],u[1]),a&&s&&this._edge(t,a,s,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,e,n,r,i,o){while(1){if(0===i&&0===o)return[t,e,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=t+(n-t)*(this.ymax-e)/(r-e),s=this.ymax):4&u?(a=t+(n-t)*(this.ymin-e)/(r-e),s=this.ymin):2&u?(s=e+(r-e)*(this.xmax-t)/(n-t),a=this.xmax):(s=e+(r-e)*(this.xmin-t)/(n-t),a=this.xmin),i?(t=a,e=s,i=this._regioncode(t,e)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let a,s=Array.from(e);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let u,c=0,l=s.length,f=this._edgecode(s[l-2],s[l-1]);c<l;c+=2)u=f,f=this._edgecode(s[c],s[c+1]),u&&f&&(c=this._edge(t,u,f,s,c),l=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){while(e!==n){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin;break}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let o=0;o<r.length;o+=2){const t=(o+2)%r.length,e=(o+4)%r.length;(r[o]===r[t]&&r[t]===r[e]||r[o+1]===r[t+1]&&r[t+1]===r[e+1])&&(r.splice(t,2),o-=2)}return i}_project(t,e,n,r){let i,o,a,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(a=this.ymin,o=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(a=this.ymax,o=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=i)*r)}return[o,a]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const bF=2*Math.PI,xF=Math.pow;function wF(t){return t[0]}function OF(t){return t[1]}function _F(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const t=2*e[r],i=2*e[r+1],o=2*e[r+2],a=(n[o]-n[t])*(n[i+1]-n[t+1])-(n[i]-n[t])*(n[o+1]-n[t+1]);if(a>1e-10)return!1}return!0}function jF(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class EF{static from(t,e=wF,n=OF,r){return new EF("length"in t?kF(t,e,n,r):Float64Array.from(AF(t,e,n,r)))}constructor(t){this._delaunator=new rF(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&_F(t)){this.collinear=Int32Array.from({length:e.length/2},(t,e)=>e).sort((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]);const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let o=0,a=e.length/2;o<a;++o){const t=jF(e[2*o],e[2*o+1],i);e[2*o]=t[0],e[2*o+1]=t[1]}this._delaunator=new rF(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let s=0,u=n.length;s<u;++s){const t=i[s%3===2?s-2:s+1];-1!==n[s]&&-1!==o[t]||(o[t]=s)}for(let s=0,u=r.length;s<u;++s)a[r[s]]=s;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(t){return new yF(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const e=a.indexOf(t);return e>0&&(yield a[e-1]),void(e<a.length-1&&(yield a[e+1]))}const s=e[t];if(-1===s)return;let u=s,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=i[u],-1===u){const e=n[(r[t]+1)%n.length];return void(e!==c&&(yield e))}}while(u!==s)}find(t,e,n=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;const r=n;let i;while((i=this._step(n,t,e))>=0&&i!==n&&i!==r)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let c=t,l=xF(e-u[2*t],2)+xF(n-u[2*t+1],2);const f=r[t];let d=f;do{let r=s[d];const f=xF(e-u[2*r],2)+xF(n-u[2*r+1],2);if(f<l&&(l=f,c=r),d=d%3===2?d-2:d+1,s[d]!==t)break;if(d=a[d],-1===d){if(d=i[(o[t]+1)%i.length],d!==r&&xF(e-u[2*d],2)+xF(n-u[2*d+1],2)<l)return d;break}}while(d!==f);return c}render(t){const e=null==t?t=new mF:void 0,{points:n,halfedges:r,triangles:i}=this;for(let o=0,a=r.length;o<a;++o){const e=r[o];if(e<o)continue;const a=2*i[o],s=2*i[e];t.moveTo(n[a],n[a+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e=2){const n=null==t?t=new mF:void 0,{points:r}=this;for(let i=0,o=r.length;i<o;i+=2){const n=r[i],o=r[i+1];t.moveTo(n+e,o),t.arc(n,o,e,0,bF)}return n&&n.value()}renderHull(t){const e=null==t?t=new mF:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let a=1;a<o;++a){const e=2*n[a];t.lineTo(r[e],r[e+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new vF;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new mF:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[a],r[a+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new vF;return this.renderTriangle(t,e),e.value()}}function kF(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=e.call(r,i,a,t),o[2*a+1]=n.call(r,i,a,t)}return o}function*AF(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}function SF(t){pa.call(this,null,t)}SF.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const CF=[-1e5,-1e5,1e5,1e5];function DF(t){const e=t[0][0],n=t[0][1];let r=t.length-1;for(;t[r][0]===e&&t[r][1]===n;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}Object(g["z"])(SF,pa,{transform(t,e){const n=t.as||"path",r=e.source;if(!r||!r.length)return e;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:CF;const o=this.value=EF.from(r,t.x,t.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){const t=o.cellPolygon(a);r[a][n]=t?DF(t):null}return e.reflow(t.modified()).modifies(n)}});var MF=Math.PI/180,TF=64,NF=2048;function FF(){var t,e,n,r,i,o,a,s=[256,256],u=zF,c=[],l=Math.random,f={};function d(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(TF<<5)/e,t.height=NF/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function h(t,e,n){var r,i,o,a=e.x,c=e.y,f=Math.sqrt(s[0]*s[0]+s[1]*s[1]),d=u(s),h=l()<.5?1:-1,p=-h;while(r=d(p+=h)){if(i=~~r[0],o=~~r[1],Math.min(Math.abs(i),Math.abs(o))>=f)break;if(e.x=a+i,e.y=c+o,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>s[0]||e.y+e.y1>s[1])&&(!n||!PF(e,t,s[0]))&&(!n||LF(e,n))){for(var g,m=e.sprite,v=e.width>>5,y=s[0]>>5,b=e.x-(v<<4),x=127&b,w=32-x,O=e.y1-e.y0,_=(e.y+e.y0)*y+(b>>5),j=0;j<O;j++){g=0;for(var E=0;E<=v;E++)t[_+E]|=g<<w|(E<v?(g=m[j*v+E])>>>x:0);_+=y}return e.sprite=null,!0}}return!1}return f.layout=function(){var u=d(Zl()),f=IF((s[0]>>5)*s[1]),p=null,g=c.length,m=-1,v=[],y=c.map(s=>({text:t(s),font:e(s),style:r(s),weight:i(s),rotate:o(s),size:~~(n(s)+1e-14),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s})).sort((t,e)=>e.size-t.size);while(++m<g){var b=y[m];b.x=s[0]*(l()+.5)>>1,b.y=s[1]*(l()+.5)>>1,$F(u,b,y,m),b.hasText&&h(f,b,p)&&(v.push(b),p?RF(p,b):p=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=s[0]>>1,b.y-=s[1]>>1)}return v},f.words=function(t){return arguments.length?(c=t,f):c},f.size=function(t){return arguments.length?(s=[+t[0],+t[1]],f):s},f.font=function(t){return arguments.length?(e=UF(t),f):e},f.fontStyle=function(t){return arguments.length?(r=UF(t),f):r},f.fontWeight=function(t){return arguments.length?(i=UF(t),f):i},f.rotate=function(t){return arguments.length?(o=UF(t),f):o},f.text=function(e){return arguments.length?(t=UF(e),f):t},f.spiral=function(t){return arguments.length?(u=qF[t]||t,f):u},f.fontSize=function(t){return arguments.length?(n=UF(t),f):n},f.padding=function(t){return arguments.length?(a=UF(t),f):a},f.random=function(t){return arguments.length?(l=t,f):l},f}function $F(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,(TF<<5)/o,NF/o);var a,s,u,c,l,f=0,d=0,h=0,p=n.length;--r;while(++r<p){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font,a=i.measureText(e.text+"m").width*o,u=e.size<<1,e.rotate){var g=Math.sin(e.rotate*MF),m=Math.cos(e.rotate*MF),v=a*m,y=a*g,b=u*m,x=u*g;a=Math.max(Math.abs(v+x),Math.abs(v-x))+31>>5<<5,u=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else a=a+31>>5<<5;if(u>h&&(h=u),f+a>=TF<<5&&(f=0,d+=h,h=0),d+u>=NF)break;i.translate((f+(a>>1))/o,(d+(u>>1))/o),e.rotate&&i.rotate(e.rotate*MF),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=a,e.height=u,e.xoff=f,e.yoff=d,e.x1=a>>1,e.y1=u>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,f+=a}var w=i.getImageData(0,0,(TF<<5)/o,NF/o).data,O=[];while(--r>=0)if(e=n[r],e.hasText){for(a=e.width,s=a>>5,u=e.y1-e.y0,c=0;c<u*s;c++)O[c]=0;if(f=e.xoff,null==f)return;d=e.yoff;var _=0,j=-1;for(l=0;l<u;l++){for(c=0;c<a;c++){var E=s*l+(c>>5),k=w[(d+l)*(TF<<5)+(f+c)<<2]?1<<31-c%32:0;O[E]|=k,_|=k}_?j=l:(e.y0++,u--,l--,d++)}e.y1=e.y0+j,e.sprite=O.slice(0,(e.y1-e.y0)*s)}}}function PF(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),s=127&a,u=32-s,c=t.y1-t.y0,l=(t.y+t.y0)*n+(a>>5),f=0;f<c;f++){r=0;for(var d=0;d<=o;d++)if((r<<u|(d<o?(r=i[f*o+d])>>>s:0))&e[l+d])return!0;l+=n}return!1}function RF(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function LF(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function zF(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function BF(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(t){var o=t<0?-1:1;switch(Math.sqrt(1+4*o*t)-o&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function IF(t){var e=[],n=-1;while(++n<t)e[n]=0;return e}function UF(t){return"function"===typeof t?t:function(){return t}}var qF={archimedean:zF,rectangular:BF};const HF=["x","y","font","fontSize","fontStyle","fontWeight","angle"],WF=["text","font","rotate","fontSize","fontStyle","fontWeight"];function GF(t){pa.call(this,FF(),t)}GF.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:HF}]},Object(g["z"])(GF,pa,{transform(t,e){function n(n){const r=t[n];return Object(g["E"])(r)&&e.modified(r.fields)}!t.size||t.size[0]&&t.size[1]||Object(g["o"])("Wordcloud size dimensions must be non-zero.");const r=t.modified();if(!(r||e.changed(e.ADD_REM)||WF.some(n)))return;const i=e.materialize(e.SOURCE).source,o=this.value,a=t.as||HF;let s,u=t.fontSize||14;if(Object(g["E"])(u)?s=t.fontSizeRange:u=Object(g["m"])(u),s){const t=u,e=dg("sqrt")().domain(Object(g["q"])(i,t)).range(s);u=n=>e(t(n))}i.forEach(t=>{t[a[0]]=NaN,t[a[1]]=NaN,t[a[3]]=0});const c=o.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(u).random(Fa).layout(),l=o.size(),f=l[0]>>1,d=l[1]>>1,h=c.length;for(let p,g,m=0;m<h;++m)p=c[m],g=p.datum,g[a[0]]=p.x+f,g[a[1]]=p.y+d,g[a[2]]=p.font,g[a[3]]=p.size,g[a[4]]=p.style,g[a[5]]=p.weight,g[a[6]]=p.rotate;return e.reflow(r).modifies(a)}});var YF=function(t,e){return Array.from(e,e=>t[e])};const VF=t=>new Uint8Array(t),XF=t=>new Uint16Array(t),JF=t=>new Uint32Array(t);function QF(){let t=8,e=[],n=JF(0),r=ZF(0,t),i=ZF(0,t);return{data:()=>e,seen:()=>n=KF(n,e.length),add(t){for(let n,r=0,i=e.length,o=t.length;r<o;++r)n=t[r],n._index=i++,e.push(n)},remove(t,n){const o=e.length,a=Array(o-t),s=e;let u,c,l;for(c=0;!n[c]&&c<o;++c)a[c]=e[c],s[c]=c;for(l=c;c<o;++c)u=e[c],n[c]?s[c]=-1:(s[c]=l,r[l]=r[c],i[l]=i[c],a[l]=u,u._index=l++),r[c]=0;return e=a,s},size:()=>e.length,curr:()=>r,prev:()=>i,reset:t=>i[t]=r[t],all:()=>t<257?255:t<65537?65535:4294967295,set(t,e){r[t]|=e},clear(t,e){r[t]&=~e},resize(e,n){const o=r.length;(e>o||n>t)&&(t=Math.max(n,t),r=ZF(e,t,r),i=ZF(e,t))}}}function KF(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function ZF(t,e,n){const r=(e<257?VF:e<65537?XF:JF)(t);return n&&r.set(n),r}function t$(t,e,n){const r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(t,e){const n=this,i=n.bisect(n.range,t.value),o=t.index,a=i[0],s=i[1],u=o.length;let c;for(c=0;c<a;++c)e[o[c]]|=r;for(c=s;c<u;++c)e[o[c]]|=r;return n}}}function e$(){let t=JF(0),e=[],n=0;function r(r,i,o){if(!i.length)return[];const a=n,s=i.length,u=JF(s);let c,l,f,d=Array(s);for(f=0;f<s;++f)d[f]=r(i[f]),u[f]=f;if(d=n$(d,u),a)c=e,l=t,e=Array(a+s),t=JF(a+s),r$(o,c,l,a,d,u,s,e,t);else{if(o>0)for(f=0;f<s;++f)u[f]+=o;e=d,t=u}return n=a+s,{index:u,value:d}}function i(r,i){const o=n;let a,s,u;for(s=0;!i[t[s]]&&s<o;++s);for(u=s;s<o;++s)i[a=t[s]]||(t[u]=a,e[u]=e[s],++u);n=o-r}function o(e){for(let r=0,i=n;r<i;++r)t[r]=e[t[r]]}function a(t,r){let i;return r?i=r.length:(r=e,i=n),[rf(r,t[0],0,i),nf(r,t[1],0,i)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>t,size:()=>n}}function n$(t,e){return t.sort.call(e,(e,n)=>{const r=t[e],i=t[n];return r<i?-1:r>i?1:0}),YF(t,e)}function r$(t,e,n,r,i,o,a,s,u){let c,l=0,f=0;for(c=0;l<r&&f<a;++c)e[l]<i[f]?(s[c]=e[l],u[c]=n[l++]):(s[c]=i[f],u[c]=o[f++]+t);for(;l<r;++l,++c)s[c]=e[l],u[c]=n[l];for(;f<a;++f,++c)s[c]=i[f],u[c]=o[f]+t}function i$(t){pa.call(this,QF(),t),this._indices=null,this._dims=null}function o$(t){pa.call(this,null,t)}i$.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},Object(g["z"])(i$,pa,{transform(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(t=>e.modified(t.fields));return n?this.reinit(t,e):this.eval(t,e)}return this.init(t,e)},init(t,e){const n=t.fields,r=t.query,i=this._indices={},o=this._dims=[],a=r.length;let s,u,c=0;for(;c<a;++c)s=n[c].fname,u=i[s]||(i[s]=e$()),o.push(t$(u,c,r[c]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),r=t.fields,i=t.query,o=this._indices,a=this._dims,s=this.value,u=s.curr(),c=s.prev(),l=s.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,m,v,y,b,x,w,O,_;if(c.set(u),e.rem.length&&(b=this.remove(t,e,n)),e.add.length&&s.add(e.add),e.mod.length)for(x={},y=e.mod,w=0,O=y.length;w<O;++w)x[y[w]._index]=1;for(w=0;w<h;++w)_=r[w],(!a[w]||t.modified("fields",w)||e.modified(_.fields))&&(v=_.fname,(g=p[v])||(o[v]=m=e$(),p[v]=g=m.insert(_,e.source,0)),a[w]=t$(m,w,i[w]).onAdd(g,u));for(w=0,O=s.data().length;w<O;++w)b[w]||(c[w]!==u[w]?f.push(w):x[w]&&u[w]!==l&&d.push(w));return s.mask=(1<<h)-1,n},eval(t,e){const n=e.materialize().fork(),r=this._dims.length;let i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},insert(t,e,n){const r=e.add,i=this.value,o=this._dims,a=this._indices,s=t.fields,u={},c=n.add,l=i.size()+r.length,f=o.length;let d,h,p,g=i.size();i.resize(l,f),i.add(r);const m=i.curr(),v=i.prev(),y=i.all();for(d=0;d<f;++d)h=s[d].fname,p=u[h]||(u[h]=a[h].insert(s[d],r,g)),o[d].onAdd(p,m);for(;g<l;++g)v[g]=y,m[g]!==y&&c.push(g)},modify(t,e){const n=e.mod,r=this.value,i=r.curr(),o=r.all(),a=t.mod;let s,u,c;for(s=0,u=a.length;s<u;++s)c=a[s]._index,i[c]!==o&&n.push(c)},remove(t,e,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),u={},c=n.rem,l=e.rem;let f,d,h,p;for(f=0,d=l.length;f<d;++f)h=l[f]._index,u[h]=1,a[h]=p=o[h],o[h]=s,p!==s&&c.push(h);for(h in r)r[h].remove(d,u);return this.reindex(e,d,u),u},reindex(t,e,n){const r=this._indices,i=this.value;t.runAfter(()=>{const t=i.remove(e,n);for(const e in r)r[e].reindex(t)})},update(t,e,n){const r=this._dims,i=t.query,o=e.stamp,a=r.length;let s,u,c=0;for(n.filters=0,u=0;u<a;++u)t.modified("query",u)&&(s=u,++c);if(1===c)c=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(u=0,c=0;u<a;++u)t.modified("query",u)&&(c|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return c},incrementAll(t,e,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),u=t.index(),c=t.bisect(t.range),l=t.bisect(e),f=l[0],d=l[1],h=c[0],p=c[1],g=t.one;let m,v,y;if(f<h)for(m=f,v=Math.min(h,d);m<v;++m)y=u[m],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=g;else if(f>h)for(m=h,v=Math.min(f,p);m<v;++m)y=u[m],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=g;if(d>p)for(m=Math.max(f,p),v=d;m<v;++m)y=u[m],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=g;else if(d<p)for(m=Math.max(h,d),v=p;m<v;++m)y=u[m],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=g;t.range=e.slice()},incrementOne(t,e,n,r){const i=this.value,o=i.curr(),a=t.index(),s=t.bisect(t.range),u=t.bisect(e),c=u[0],l=u[1],f=s[0],d=s[1],h=t.one;let p,g,m;if(c<f)for(p=c,g=Math.min(f,l);p<g;++p)m=a[p],o[m]^=h,n.push(m);else if(c>f)for(p=f,g=Math.min(c,d);p<g;++p)m=a[p],o[m]^=h,r.push(m);if(l>d)for(p=Math.max(c,d),g=l;p<g;++p)m=a[p],o[m]^=h,n.push(m);else if(l<d)for(p=Math.max(f,l),g=d;p<g;++p)m=a[p],o[m]^=h,r.push(m);t.range=e.slice()}}),o$.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(g["z"])(o$,pa,{transform(t,e){const n=~(t.ignore||0),r=t.filter,i=r.mask;if(0===(i&n))return e.StopPropagation;const o=e.fork(e.ALL),a=r.data(),s=r.curr(),u=r.prev(),c=t=>s[t]&n?null:a[t];return o.filter(o.MOD,c),i&i-1?(o.filter(o.ADD,t=>{const e=s[t]&n,r=!e&&e^u[t]&n;return r?a[t]:null}),o.filter(o.REM,t=>{const e=s[t]&n,r=e&&!(e^e^u[t]&n);return r?a[t]:null})):(o.filter(o.ADD,c),o.filter(o.REM,t=>(s[t]&n)===i?a[t]:null)),o.filter(o.SOURCE,t=>c(t._index))}});var a$,s$,u$,c$,l$,f$=n("f7ac"),d$=new dE,h$=new dE,p$={point:PE,lineStart:PE,lineEnd:PE,polygonStart:function(){d$=new dE,p$.lineStart=g$,p$.lineEnd=m$},polygonEnd:function(){var t=+d$;h$.add(t<0?yE+t:t),this.lineStart=this.lineEnd=this.point=PE},sphere:function(){h$.add(yE)}};function g$(){p$.point=v$}function m$(){y$(a$,s$)}function v$(t,e){p$.point=y$,a$=t,s$=e,t*=xE,e*=xE,u$=t,c$=jE(e=e/2+vE),l$=DE(e)}function y$(t,e){t*=xE,e*=xE,e=e/2+vE;var n=t-u$,r=n>=0?1:-1,i=r*n,o=jE(e),a=DE(e),s=l$*a,u=c$*o+s*jE(i),c=s*r*DE(i);d$.add(_E(c,u)),u$=t,c$=o,l$=a}var b$,x$,w$,O$,_$,j$,E$,k$,A$,S$,C$,D$=function(t){return h$=new dE,fE(t,p$),2*h$},M$={point:T$,lineStart:F$,lineEnd:$$,polygonStart:function(){M$.point=P$,M$.lineStart=R$,M$.lineEnd=L$,A$=new dE,p$.polygonStart()},polygonEnd:function(){p$.polygonEnd(),M$.point=T$,M$.lineStart=F$,M$.lineEnd=$$,d$<0?(b$=-(w$=180),x$=-(O$=90)):A$>hE?O$=90:A$<-hE&&(x$=-90),C$[0]=b$,C$[1]=w$},sphere:function(){b$=-(w$=180),x$=-(O$=90)}};function T$(t,e){S$.push(C$=[b$=t,w$=t]),e<x$&&(x$=e),e>O$&&(O$=e)}function N$(t,e){var n=Gk([t*xE,e*xE]);if(k$){var r=Vk(k$,n),i=[r[1],-r[0],0],o=Vk(i,r);Qk(o),o=Wk(o);var a,s=t-_$,u=s>0?1:-1,c=o[0]*bE*u,l=wE(s)>180;l^(u*_$<c&&c<u*t)?(a=o[1]*bE,a>O$&&(O$=a)):(c=(c+360)%360-180,l^(u*_$<c&&c<u*t)?(a=-o[1]*bE,a<x$&&(x$=a)):(e<x$&&(x$=e),e>O$&&(O$=e))),l?t<_$?z$(b$,t)>z$(b$,w$)&&(w$=t):z$(t,w$)>z$(b$,w$)&&(b$=t):w$>=b$?(t<b$&&(b$=t),t>w$&&(w$=t)):t>_$?z$(b$,t)>z$(b$,w$)&&(w$=t):z$(t,w$)>z$(b$,w$)&&(b$=t)}else S$.push(C$=[b$=t,w$=t]);e<x$&&(x$=e),e>O$&&(O$=e),k$=n,_$=t}function F$(){M$.point=N$}function $$(){C$[0]=b$,C$[1]=w$,M$.point=T$,k$=null}function P$(t,e){if(k$){var n=t-_$;A$.add(wE(n)>180?n+(n>0?360:-360):n)}else j$=t,E$=e;p$.point(t,e),N$(t,e)}function R$(){p$.lineStart()}function L$(){P$(j$,E$),p$.lineEnd(),wE(A$)>hE&&(b$=-(w$=180)),C$[0]=b$,C$[1]=w$,k$=null}function z$(t,e){return(e-=t)<0?e+360:e}function B$(t,e){return t[0]-e[0]}function I$(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var U$,q$,H$,W$,G$,Y$,V$,X$,J$,Q$,K$,Z$,tP,eP,nP,rP,iP=function(t){var e,n,r,i,o,a,s;if(O$=w$=-(b$=x$=1/0),S$=[],fE(t,M$),n=S$.length){for(S$.sort(B$),e=1,r=S$[0],o=[r];e<n;++e)i=S$[e],I$(r,i[0])||I$(r,i[1])?(z$(r[0],i[1])>z$(r[0],r[1])&&(r[1]=i[1]),z$(i[0],r[1])>z$(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=z$(r[1],i[0]))>a&&(a=s,b$=i[0],w$=r[1])}return S$=C$=null,b$===1/0||x$===1/0?[[NaN,NaN],[NaN,NaN]]:[[b$,x$],[w$,O$]]},oP={sphere:PE,point:aP,lineStart:uP,lineEnd:fP,polygonStart:function(){oP.lineStart=dP,oP.lineEnd=hP},polygonEnd:function(){oP.lineStart=uP,oP.lineEnd=fP}};function aP(t,e){t*=xE,e*=xE;var n=jE(e);sP(n*jE(t),n*DE(t),DE(e))}function sP(t,e,n){++U$,H$+=(t-H$)/U$,W$+=(e-W$)/U$,G$+=(n-G$)/U$}function uP(){oP.point=cP}function cP(t,e){t*=xE,e*=xE;var n=jE(e);eP=n*jE(t),nP=n*DE(t),rP=DE(e),oP.point=lP,sP(eP,nP,rP)}function lP(t,e){t*=xE,e*=xE;var n=jE(e),r=n*jE(t),i=n*DE(t),o=DE(e),a=_E(TE((a=nP*o-rP*i)*a+(a=rP*r-eP*o)*a+(a=eP*i-nP*r)*a),eP*r+nP*i+rP*o);q$+=a,Y$+=a*(eP+(eP=r)),V$+=a*(nP+(nP=i)),X$+=a*(rP+(rP=o)),sP(eP,nP,rP)}function fP(){oP.point=aP}function dP(){oP.point=pP}function hP(){gP(Z$,tP),oP.point=aP}function pP(t,e){Z$=t,tP=e,t*=xE,e*=xE,oP.point=gP;var n=jE(e);eP=n*jE(t),nP=n*DE(t),rP=DE(e),sP(eP,nP,rP)}function gP(t,e){t*=xE,e*=xE;var n=jE(e),r=n*jE(t),i=n*DE(t),o=DE(e),a=nP*o-rP*i,s=rP*r-eP*o,u=eP*i-nP*r,c=AE(a,s,u),l=$E(c),f=c&&-l/c;J$.add(f*a),Q$.add(f*s),K$.add(f*u),q$+=l,Y$+=l*(eP+(eP=r)),V$+=l*(nP+(nP=i)),X$+=l*(rP+(rP=o)),sP(eP,nP,rP)}var mP=function(t){U$=q$=H$=W$=G$=Y$=V$=X$=0,J$=new dE,Q$=new dE,K$=new dE,fE(t,oP);var e=+J$,n=+Q$,r=+K$,i=AE(e,n,r);return i<pE&&(e=Y$,n=V$,r=X$,q$<hE&&(e=H$,n=W$,r=G$),i=AE(e,n,r),i<pE)?[NaN,NaN]:[_E(n,e)*bE,$E(r/i)*bE]};function vP(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function yP(t){let e=t,n=t;function r(t,e,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const o=r+i>>>1;n(t[o],e)<0?r=o+1:i=o}return r}function i(t,e,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const o=r+i>>>1;n(t[o],e)>0?i=o:r=o+1}return r}function o(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);const a=r(t,n,i,o-1);return a>i&&e(t[a-1],n)>-e(t[a],n)?a-1:a}return 1===t.length&&(e=(e,n)=>t(e)-n,n=bP(t)),{left:r,center:o,right:i}}function bP(t){return(e,n)=>vP(t(e),n)}const xP="intersect",wP="union",OP="vlMulti",_P="vlPoint",jP="or",EP="and",kP="_vgsid_",AP="E",SP="R",CP="R-E",DP="R-LE",MP="R-RE",TP="index:unit";function NP(t,e){for(var n,r,i=e.fields,o=e.values,a=i.length,s=0;s<a;++s)if(r=i[s],r.getter=g["u"].getter||Object(g["u"])(r.field),n=r.getter(t),Object(g["D"])(n)&&(n=Object(g["eb"])(n)),Object(g["D"])(o[s])&&(o[s]=Object(g["eb"])(o[s])),Object(g["D"])(o[s][0])&&(o[s]=o[s].map(g["eb"])),r.type===AP){if(Object(g["B"])(o[s])?o[s].indexOf(n)<0:n!==o[s])return!1}else if(r.type===SP){if(!Object(g["A"])(n,o[s]))return!1}else if(r.type===MP){if(!Object(g["A"])(n,o[s],!0,!1))return!1}else if(r.type===CP){if(!Object(g["A"])(n,o[s],!1,!1))return!1}else if(r.type===DP&&!Object(g["A"])(n,o[s],!1,!0))return!1;return!0}function FP(t,e,n){for(var r,i,o,a,s,u=this.context.data[t],c=u?u.values.value:[],l=u?u[TP]&&u[TP].value:void 0,f=n===xP,d=c.length,h=0;h<d;++h)if(r=c[h],l&&f){if(i=i||{},o=i[a=r.unit]||0,-1===o)continue;if(s=NP(e,r),i[a]=s?-1:++o,s&&1===l.size)return!0;if(!s&&o===l.get(a).count)return!1}else if(s=NP(e,r),f^s)return s;return d&&f}const $P=Object(g["u"])(kP),PP=yP($P),RP=PP.left,LP=PP.right;function zP(t,e,n){const r=this.context.data[t],i=r?r.values.value:[],o=r?r[TP]&&r[TP].value:void 0,a=n===xP,s=$P(e),u=RP(i,s);if(u===i.length)return!1;if($P(i[u])!==s)return!1;if(o&&a){if(1===o.size)return!0;if(LP(i,s)-u<o.size)return!1}return!0}function BP(t,e){return t.map(t=>Object(g["p"])({values:e.fields.map(e=>(e.getter||(e.getter=Object(g["u"])(e.field)))(t.datum))},e))}function IP(t,e,n,r){for(var i,o,a,s,u,c,l,f,d,h,p,m=this.context.data[t],v=m?m.values.value:[],y={},b={},x={},w=v.length,O=0;O<w;++O){for(i=v[O],s=i.unit,o=i.fields,a=i.values,h=0,p=o.length;h<p;++h)u=o[h],c=y[u.field]||(y[u.field]={}),l=c[s]||(c[s]=[]),x[u.field]=f=u.type.charAt(0),d=UP[f+"_union"],c[s]=d(l,Object(g["i"])(a[h]));n&&(l=b[s]||(b[s]=[]),l.push(Object(g["i"])(a).reduce((t,e,n)=>(t[o[n].field]=e,t),{})))}if(e=e||wP,Object.keys(y).forEach(t=>{y[t]=Object.keys(y[t]).map(e=>y[t][e]).reduce((n,r)=>void 0===n?r:UP[x[t]+"_"+e](n,r))}),v=Object.keys(b),n&&v.length){const t=r?_P:OP;y[t]=e===wP?{[jP]:v.reduce((t,e)=>(t.push(...b[e]),t),[])}:{[EP]:v.map(t=>({[jP]:b[t]}))}}return y}var UP={E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(t=>e.indexOf(t)>=0):e},R_union:function(t,e){var n=Object(g["eb"])(e[0]),r=Object(g["eb"])(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=Object(g["eb"])(e[0]),r=Object(g["eb"])(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}};const qP=":",HP="@";function WP(t,e,n,r){e[0].type!==f$["b"]&&Object(g["o"])("First argument to selection functions must be a string literal.");const i=e[0].value,o=e.length>=2&&Object(g["W"])(e).value,a="unit",s=HP+a,u=qP+i;o!==xP||Object(g["w"])(r,s)||(r[s]=n.getData(i).indataRef(n,a)),Object(g["w"])(r,u)||(r[u]=n.getData(i).tuplesRef())}function GP(t){const e=this.context.data[t];return e?e.values.value:[]}function YP(t,e,n){const r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i}function VP(t,e){const n=this.context.dataflow,r=this.context.data[t],i=r.input;return n.pulse(i,n.changeset().remove(g["ib"]).insert(e)),1}function XP(t,e,n){if(t){const n=this.context.dataflow,r=t.mark.source;n.pulse(r,n.changeset().encode(t,e))}return void 0!==n?n:t}const JP=t=>function(e,n){const r=this.context.dataflow.locale();return r[t](n)(e)},QP=JP("format"),KP=JP("timeFormat"),ZP=JP("utcFormat"),tR=JP("timeParse"),eR=JP("utcParse"),nR=new Date(2e3,0,1);function rR(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?(nR.setYear(2e3),nR.setMonth(t),nR.setDate(e),KP.call(this,nR,n)):""}function iR(t){return rR.call(this,t,1,"%B")}function oR(t){return rR.call(this,t,1,"%b")}function aR(t){return rR.call(this,0,2+t,"%A")}function sR(t){return rR.call(this,0,2+t,"%a")}const uR=":",cR="@",lR="%",fR="$";function dR(t,e,n,r){e[0].type!==f$["b"]&&Object(g["o"])("First argument to data functions must be a string literal.");const i=e[0].value,o=uR+i;if(!Object(g["w"])(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(a){}}function hR(t,e,n,r){e[0].type!==f$["b"]&&Object(g["o"])("First argument to indata must be a string literal."),e[1].type!==f$["b"]&&Object(g["o"])("Second argument to indata must be a string literal.");const i=e[0].value,o=e[1].value,a=cR+o;Object(g["w"])(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function pR(t,e,n,r){if(e[0].type===f$["b"])gR(n,r,e[0].value);else for(t in n.scales)gR(n,r,t)}function gR(t,e,n){const r=lR+n;if(!Object(g["w"])(e,r))try{e[r]=t.scaleRef(n)}catch(i){}}function mR(t,e){let n;return Object(g["E"])(t)?t:Object(g["J"])(t)?(n=e.scales[t])&&n.value:void 0}function vR(t,e,n){e.__bandwidth=t=>t&&t.bandwidth?t.bandwidth():0,n._bandwidth=pR,n._range=pR,n._scale=pR;const r=e=>"_["+(e.type===f$["b"]?Object(g["bb"])(lR+e.value):Object(g["bb"])(lR)+"+"+t(e))+"]";return{_bandwidth:t=>"this.__bandwidth(".concat(r(t[0]),")"),_range:t=>"".concat(r(t[0]),".range()"),_scale:e=>"".concat(r(e[0]),"(").concat(t(e[1]),")")}}function yR(t,e){return function(n,r,i){if(n){const e=mR(n,(i||this).context);return e&&e.path[t](r)}return e(r)}}const bR=yR("area",D$),xR=yR("bounds",iP),wR=yR("centroid",mP);function OR(t){const e=this.context.group;let n=!1;if(e)while(t){if(t===e){n=!0;break}t=t.mark.group}return n}function _R(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function jR(){return _R(this.context.dataflow,"warn",arguments)}function ER(){return _R(this.context.dataflow,"info",arguments)}function kR(){return _R(this.context.dataflow,"debug",arguments)}function AR(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function SR(t){const e=Ff(t),n=AR(e.r),r=AR(e.g),i=AR(e.b);return.2126*n+.7152*r+.0722*i}function CR(t,e){const n=SR(t),r=SR(e),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function DR(){const t=[].slice.call(arguments);return t.unshift({}),Object(g["p"])(...t)}function MR(t,e){return t===e||t!==t&&e!==e||(Object(g["B"])(t)?!(!Object(g["B"])(e)||t.length!==e.length)&&TR(t,e):!(!Object(g["H"])(t)||!Object(g["H"])(e))&&NR(t,e))}function TR(t,e){for(let n=0,r=t.length;n<r;++n)if(!MR(t[n],e[n]))return!1;return!0}function NR(t,e){for(const n in t)if(!MR(t[n],e[n]))return!1;return!0}function FR(t){return e=>NR(t,e)}function $R(t,e,n,r,i,o){const a=this.context.dataflow,s=this.context.data[t],u=s.input,c=a.stamp();let l,f,d=s.changes;if(!1===a._trigger||!(u.value.length||e||r))return 0;if((!d||d.stamp<c)&&(s.changes=d=a.changeset(),d.stamp=c,a.runAfter(()=>{s.modified=!0,a.pulse(u,d).run()},!0,1)),n&&(l=!0===n?g["ib"]:Object(g["B"])(n)||Qi(n)?n:FR(n),d.remove(l)),e&&d.insert(e),r&&(l=FR(r),u.value.some(l)?d.remove(l):d.insert(r)),i)for(f in o)d.modify(i,f,o[f]);return 1}function PR(t){const e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)}function RR(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}const LR={};function zR(t,e){const n=LR[e]||(LR[e]=Object(g["u"])(e));return Object(g["B"])(t)?t.map(n):n(t)}function BR(t){return Object(g["B"])(t)||ArrayBuffer.isView(t)?t:null}function IR(t){return BR(t)||(Object(g["J"])(t)?t:null)}function UR(t,...e){return BR(t).join(...e)}function qR(t,...e){return IR(t).indexOf(...e)}function HR(t,...e){return IR(t).lastIndexOf(...e)}function WR(t,...e){return IR(t).slice(...e)}function GR(t,e,n){return Object(g["E"])(n)&&Object(g["o"])("Function argument passed to replace."),String(t).replace(e,n)}function YR(t){return BR(t).slice().reverse()}function VR(t,e,n){return Tp(t||0,e||0,n||0)}function XR(t,e){const n=mR(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function JR(t,e){const n=mR(t,(e||this).context);return n?n.copy():void 0}function QR(t,e){const n=mR(t,(e||this).context);return n?n.domain():[]}function KR(t,e,n){const r=mR(t,(n||this).context);return r?Object(g["B"])(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}function ZR(t,e){const n=mR(t,(e||this).context);return n&&n.range?n.range():[]}function tL(t,e,n){const r=mR(t,(n||this).context);return r?r(e):void 0}function eL(t,e,n,r,i){t=mR(t,(i||this).context);const o=pm(e,n);let a=t.domain(),s=a[0],u=Object(g["W"])(a),c=g["y"];return u-s?c=kg(t,s,u):t=(t.interpolator?dg("sequential")().interpolator(t.interpolator()):dg("linear")().interpolate(t.interpolate()).range(t.range())).domain([s=0,u=1]),t.ticks&&(a=t.ticks(+r||15),s!==a[0]&&a.unshift(s),u!==Object(g["W"])(a)&&a.push(u)),a.forEach(e=>o.stop(c(e),t(e))),o}function nL(t,e,n){const r=mR(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}}function rL(t){let e=null;return function(n){return n?Tm(n,e=e||bm(t)):t}}const iL=t=>t.data;function oL(t,e){const n=GP.call(e,t);return n.root&&n.root.lookup||{}}function aL(t,e,n){const r=oL(t,this),i=r[e],o=r[n];return i&&o?i.path(o).map(iL):void 0}function sL(t,e){const n=oL(t,this)[e];return n?n.ancestors().map(iL):void 0}const uL=()=>"undefined"!==typeof window&&window||null;function cL(){const t=uL();return t?t.screen:{}}function lL(){const t=uL();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function fL(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function dL(t,e,n){if(!t)return[];const[r,i]=t,o=(new Nv).set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return mO(a,o,hL(e))}function hL(t){let e=null;if(t){const n=Object(g["i"])(t.marktype),r=Object(g["i"])(t.markname);e=t=>(!n.length||n.some(e=>t.marktype===e))&&(!r.length||r.some(e=>t.name===e))}return e}const pL={random(){return Fa()},cumulativeNormal:Ga,cumulativeLogNormal:Za,cumulativeUniform:os,densityNormal:Wa,densityLogNormal:Ka,densityUniform:is,quantileNormal:Ya,quantileLogNormal:ts,quantileUniform:as,sampleNormal:Ha,sampleLogNormal:Qa,sampleUniform:rs,isArray:g["B"],isBoolean:g["C"],isDate:g["D"],isDefined(t){return void 0!==t},isNumber:g["G"],isObject:g["H"],isRegExp:g["I"],isString:g["J"],isTuple:Qi,isValid(t){return null!=t&&t===t},toBoolean:g["cb"],toDate:g["db"],toNumber:g["eb"],toString:g["gb"],indexof:qR,join:UR,lastindexof:HR,replace:GR,reverse:YR,slice:WR,flush:g["v"],lerp:g["L"],merge:DR,pad:g["R"],peek:g["W"],pluck:zR,span:g["Z"],inrange:g["A"],truncate:g["hb"],rgb:Ff,lab:rp,hcl:lp,hsl:If,luminance:SR,contrast:CR,sequence:Ds,format:QP,utcFormat:ZP,utcParse:eR,utcOffset:Tn,utcSequence:$n,timeFormat:KP,timeParse:tR,timeOffset:Mn,timeSequence:Fn,timeUnitSpecifier:en,monthFormat:iR,monthAbbrevFormat:oR,dayFormat:aR,dayAbbrevFormat:sR,quarter:g["X"],utcquarter:g["jb"],week:an,utcweek:dn,dayofyear:on,utcdayofyear:fn,warn:jR,info:ER,debug:kR,extent:g["q"],inScope:OR,intersect:dL,clampRange:g["k"],pinchDistance:PR,pinchAngle:RR,screen:cL,containerSize:fL,windowSize:lL,bandspace:VR,setdata:VP,pathShape:rL,panLinear:g["S"],panLog:g["T"],panPow:g["U"],panSymlog:g["V"],zoomLinear:g["nb"],zoomLog:g["ob"],zoomPow:g["pb"],zoomSymlog:g["qb"],encode:XP,modify:$R},gL=["view","item","group","xy","x","y"],mL="event.vega.",vL="this.",yL={},bL={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>"_[".concat(Object(g["bb"])(fR+t),"]"),functions:wL,constants:f$["d"],visitors:yL},xL=Object(f$["c"])(bL);function wL(t){const e=Object(f$["e"])(t);gL.forEach(t=>e[t]=mL+t);for(const n in pL)e[n]=vL+n;return Object(g["p"])(e,vR(t,pL,yL)),e}function OL(t,e,n){return 1===arguments.length?pL[t]:(pL[t]=e,n&&(yL[t]=n),xL&&(xL.functions[t]=vL+t),this)}function _L(t,e){const n={};let r;try{t=Object(g["J"])(t)?t:Object(g["bb"])(t)+"",r=Object(f$["f"])(t)}catch(o){Object(g["o"])("Expression parse error: "+t)}r.visit(t=>{if(t.type!==f$["a"])return;const r=t.callee.name,i=bL.visitors[r];i&&i(r,t.arguments,e,n)});const i=xL(r);return i.globals.forEach(t=>{const r=fR+t;!Object(g["w"])(n,r)&&e.getSignal(t)&&(n[r]=e.signalRef(t))}),{$expr:Object(g["p"])({code:i.code},e.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function jL(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(t=>e.parseOperator(t)),n.forEach(t=>e.parseOperatorParameters(t)),(t.streams||[]).forEach(t=>e.parseStream(t)),(t.updates||[]).forEach(t=>e.parseUpdate(t)),e.resolve()}OL("bandwidth",XR,pR),OL("copy",JR,pR),OL("domain",QR,pR),OL("range",ZR,pR),OL("invert",KR,pR),OL("scale",tL,pR),OL("gradient",eL,pR),OL("geoArea",bR,pR),OL("geoBounds",xR,pR),OL("geoCentroid",wR,pR),OL("geoShape",nL,pR),OL("indata",YP,hR),OL("data",GP,dR),OL("treePath",aL,dR),OL("treeAncestors",sL,dR),OL("vlSelectionTest",FP,WP),OL("vlSelectionIdTest",zP,WP),OL("vlSelectionResolve",IP,WP),OL("vlSelectionTuples",BP);const EL=Object(g["fb"])(["rule"]),kL=Object(g["fb"])(["group","image","rect"]);function AL(t,e){let n="";return EL[e]||(t.x2&&(t.x?(kL[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(kL[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function SL(t){return(t+"").toLowerCase()}function CL(t){return"operator"===SL(t)}function DL(t){return"collect"===SL(t)}function ML(t,e,n){";"!==n[n.length-1]&&(n="return("+n+");");const r=Function(...e.concat(n));return t&&t.functions?r.bind(t.functions):r}function TL(t,e,n,r){return"((u = ".concat(t,") < (v = ").concat(e,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}var NL={operator:(t,e)=>ML(t,["_"],e.code),parameter:(t,e)=>ML(t,["datum","_"],e.code),event:(t,e)=>ML(t,["event"],e.code),handler:(t,e)=>{const n="var datum=event.item&&event.item.datum;return ".concat(e.code,";");return ML(t,["_","event"],n)},encode:(t,e)=>{const{marktype:n,channels:r}=e;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const t="o["+Object(g["bb"])(o)+"]";i+="$=".concat(r[o].code,";if(").concat(t,"!==$)").concat(t,"=$,m=1;")}return i+=AL(r,n),i+="return m;",ML(t,["item","_"],i)},codegen:{get(t){const e="[".concat(t.map(g["bb"]).join("]["),"]"),n=Function("_","return _".concat(e,";"));return n.path=e,n},comparator(t,e){let n;const r=(t,r)=>{const i=e[r];let o,a;return t.path?(o="a".concat(t.path),a="b".concat(t.path)):((n=n||{})["f"+r]=t,o="this.f".concat(r,"(a)"),a="this.f".concat(r,"(b)")),TL(o,a,-i,i)},i=Function("a","b","var u, v; return "+t.map(r).join("")+"0;");return n?i.bind(n):i}}};function FL(t){const e=this;CL(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function $L(t){const e=this;if(t.params){const n=e.get(t.id);n||Object(g["o"])("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function PL(t,e){e=e||{};const n=this;for(const r in t){const i=t[r];e[r]=Object(g["B"])(i)?i.map(t=>RL(t,n,e)):RL(i,n,e)}return e}function RL(t,e,n){if(!t||!Object(g["H"])(t))return t;for(let r,i=0,o=LL.length;i<o;++i)if(r=LL[i],Object(g["w"])(t,r.key))return r.parse(t,e,n);return t}var LL=[{key:"$ref",parse:zL},{key:"$key",parse:IL},{key:"$expr",parse:BL},{key:"$field",parse:UL},{key:"$encode",parse:HL},{key:"$compare",parse:qL},{key:"$context",parse:WL},{key:"$subflow",parse:GL},{key:"$tupleid",parse:YL}];function zL(t,e){return e.get(t.$ref)||Object(g["o"])("Operator not defined: "+t.$ref)}function BL(t,e,n){t.$params&&e.parseParameters(t.$params,n);const r="e:"+t.$expr.code+"_"+t.$name;return e.fn[r]||(e.fn[r]=Object(g["f"])(e.parameterExpression(t.$expr),t.$fields,t.$name))}function IL(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=Object(g["K"])(t.$key,t.$flat,e.expr.codegen))}function UL(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Object(g["u"])(t.$field,t.$name,e.expr.codegen))}function qL(t,e){const n="c:"+t.$compare+"_"+t.$order,r=Object(g["i"])(t.$compare).map(t=>t&&t.$tupleid?Ki:t);return e.fn[n]||(e.fn[n]=Object(g["l"])(r,t.$order,e.expr.codegen))}function HL(t,e){const n=t.$encode,r={};for(const i in n){const t=n[i];r[i]=Object(g["f"])(e.encodeExpression(t.$expr),t.$fields),r[i].output=t.$output}return r}function WL(t,e){return e}function GL(t,e){const n=t.$subflow;return function(t,r,i){const o=e.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=()=>e.detach(o),a}}function YL(){return Ki}function VL(t){var e,n=this,r=null!=t.filter?n.eventExpression(t.filter):void 0,i=null!=t.stream?n.get(t.stream):void 0;t.source?i=n.events(t.source,t.type,r):t.merge&&(e=t.merge.map(t=>n.get(t)),i=e[0].merge.apply(e[0],e.slice(1))),t.between&&(e=t.between.map(t=>n.get(t)),i=i.between(e[0],e[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&Object(g["o"])("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),n.stream(t,i)}function XL(t){var e=this,n=Object(g["H"])(n=t.source)?n.$ref:n,r=e.get(n),i=null,o=t.update,a=void 0;r||Object(g["o"])("Source not defined: "+t.source),i=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),o&&o.$expr&&(o.$params&&(a=e.parseParameters(o.$params)),o=e.handlerExpression(o.$expr)),e.update(t,r,i,o,a)}const JL={skip:!0};function QL(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(n=>{const i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(n=>{const r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(e=>e.getState(t))),n}function KL(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(t=>{n.update(e.signals[t],i[t],JL)}),Object.keys(r||{}).forEach(t=>{n.pulse(e.data[t].input,n.changeset().remove(g["ib"]).insert(r[t]))}),(t.subcontext||[]).forEach((t,n)=>{const r=e.subcontext[n];r&&r.setState(t)})}function ZL(t,e,n,r){return new tz(t,e,n,r)}function tz(t,e,n,r){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=r||NL,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function ez(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}tz.prototype=ez.prototype={fork(){const t=new ez(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(e=>e!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,r=n.dataflow,i=t.value;if(n.set(t.id,e),DL(t.type)&&i&&(i.$ingest?r.ingest(e,i.$ingest,i.$format):i.$request?r.preload(e,i.$request,i.$format):r.pulse(e,r.changeset().insert(i))),t.root&&(n.root=e),t.parent){let i=n.get(t.parent.$ref);i?(r.connect(i,[e]),e.targets().add(i)):(n.unresolved=n.unresolved||[]).push(()=>{i=n.get(t.parent.$ref),r.connect(i,[e]),e.targets().add(i)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const o in t.data){const r=n.data[o]||(n.data[o]={});t.data[o].forEach(t=>r[t]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[SL(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:jL,parseOperator:FL,parseOperatorParameters:$L,parseParameters:PL,parseStream:VL,parseUpdate:XL,getState:QL,setState:KL};var nz=function(t,e,n){var r=new PD,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?FD():+n,r._restart((function o(a){a+=i,r._restart(o,i+=e,n),t(a)}),e,n)},r.restart(t,e,n),r)};function rz(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),iz(e,t.description()))}function iz(t,e){t&&(null==e?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function oz(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}const az="default";function sz(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:az,item:null}));t.on(t.events("view","mousemove"),e,(t,n)=>{const r=e.value,i=r?Object(g["J"])(r)?r:r.user:az,o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}}),t.add(null,(function(e){let n=e.cursor,r=this.value;return Object(g["J"])(n)||(r=n.item,n=n.user),uz(t,n&&n!==az?n:r||n),r}),{cursor:e})}function uz(t,e){const n=t.globalCursor()?"undefined"!==typeof document&&document.body:t.container();if(n)return null==e?n.style.removeProperty("cursor"):n.style.cursor=e}function cz(t,e){var n=t._runtime.data;return Object(g["w"])(n,e)||Object(g["o"])("Unrecognized data set: "+e),n[e]}function lz(t,e){return arguments.length<2?cz(this,t).values.value:fz.call(this,t,ao().remove(g["ib"]).insert(e))}function fz(t,e){oo(e)||Object(g["o"])("Second argument to changes must be a changeset.");const n=cz(this,t);return n.modified=!0,this.pulse(n.input,e)}function dz(t,e){return fz.call(this,t,ao().insert(e))}function hz(t,e){return fz.call(this,t,ao().remove(e))}function pz(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function gz(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function mz(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function vz(t){var e=mz(t),n=pz(t),r=gz(t);t._renderer.background(t.background()),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach(e=>{try{e(n,r)}catch(i){t.error(i)}})}function yz(t,e,n){var r,i,o,a=t._renderer,s=a&&a.canvas();return s&&(o=mz(t),i=e.changedTouches?e.changedTouches[0]:e,r=kx(i,s),r[0]-=o[0],r[1]-=o[1]),e.dataflow=t,e.item=n,e.vega=bz(t,n,r),e}function bz(t,e,n){const r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(t){if(!t)return n;Object(g["J"])(t)&&(t=i(t));const e=n.slice();while(t)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:Object(g["m"])(t),item:Object(g["m"])(e||{}),group:i,xy:o,x:t=>o(t)[0],y:t=>o(t)[1]}}const xz="view",wz="timer",Oz="window",_z={trap:!1};function jz(t){const e=Object(g["p"])({defaults:{}},t),n=(t,e)=>{e.forEach(e=>{Object(g["B"])(t[e])&&(t[e]=Object(g["fb"])(t[e]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function Ez(t,e){var n=t._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}function kz(t,e,n){const r=t._eventConfig&&t._eventConfig[e];return!(!1===r||Object(g["H"])(r)&&!r[n])||(t.warn("Blocked ".concat(e," ").concat(n," event listener.")),!1)}function Az(t,e,n){var r,i=this,o=new xo(n),a=function(n,r){i.runAsync(null,()=>{t===xz&&Ez(i,e)&&n.preventDefault(),o.receive(yz(i,n,r))})};if(t===wz)kz(i,"timer",e)&&i.timer(a,e);else if(t===xz)kz(i,"view",e)&&i.addEventListener(e,a,_z);else if(t===Oz?kz(i,"window",e)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&kz(i,"selector",e)&&(r=document.querySelectorAll(t)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(e,a);i._eventListeners.push({type:e,sources:r,handler:a})}else i.warn("Can not resolve event source: "+t);return o}function Sz(t){return t.item}function Cz(t){return t.item.mark.source}function Dz(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function Mz(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",Sz),Cz,Dz(t)),this.on(this.events("view","mouseout",Sz),Cz,Dz(e)),this}function Tz(){var t,e,n,r=this._tooltip,i=this._timers,o=this._eventListeners;t=i.length;while(--t>=0)i[t].stop();t=o.length;while(--t>=0){n=o[t],e=n.sources.length;while(--e>=0)n.sources[e].removeEventListener(n.type,n.handler)}return r&&r.call(this,this._handler,null,null,null),this}function Nz(t,e,n){const r=document.createElement(t);for(const i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r}const Fz="vega-bind",$z="vega-bind-name",Pz="vega-bind-radio";function Rz(t,e,n){if(!e)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:e=>{e!==t.signal(r.signal)&&t.runAsync(null,()=>{i.source=!0,t.signal(r.signal,e)})}},r.debounce&&(i.update=Object(g["n"])(r.debounce,i.update))),Lz(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0),i}function Lz(t,e,n,r){const i=Nz("div",{class:Fz}),o="radio"===n.input?i:i.appendChild(Nz("label"));o.appendChild(Nz("span",{class:$z},n.name||n.signal)),e.appendChild(i);let a=zz;switch(n.input){case"checkbox":a=Bz;break;case"select":a=Iz;break;case"radio":a=Uz;break;case"range":a=qz;break}a(t,o,n,r)}function zz(t,e,n,r){const i=Nz("input");for(const o in n)"signal"!==o&&"element"!==o&&i.setAttribute("input"===o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=t=>i.value=t}function Bz(t,e,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Nz("input",i);e.appendChild(o),o.addEventListener("change",()=>t.update(o.checked)),t.elements=[o],t.set=t=>o.checked=!!t||null}function Iz(t,e,n,r){const i=Nz("select",{name:n.signal}),o=n.labels||[];n.options.forEach((t,e)=>{const n={value:t};Hz(t,r)&&(n.selected=!0),i.appendChild(Nz("option",n,(o[e]||t)+""))}),e.appendChild(i),i.addEventListener("change",()=>{t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=t=>{for(let e=0,r=n.options.length;e<r;++e)if(Hz(n.options[e],t))return void(i.selectedIndex=e)}}function Uz(t,e,n,r){const i=Nz("span",{class:Pz}),o=n.labels||[];e.appendChild(i),t.elements=n.options.map((e,a)=>{const s={type:"radio",name:n.signal,value:e};Hz(e,r)&&(s.checked=!0);const u=Nz("input",s);u.addEventListener("change",()=>t.update(e));const c=Nz("label",{},(o[a]||e)+"");return c.prepend(u),i.appendChild(c),u}),t.set=e=>{const n=t.elements,r=n.length;for(let t=0;t<r;++t)Hz(n[t].value,e)&&(n[t].checked=!0)}}function qz(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||yt(o,i,100),s=Nz("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const u=Nz("span",{},+r);e.appendChild(s),e.appendChild(u);const c=()=>{u.textContent=s.value,t.update(+s.value)};s.addEventListener("input",c),s.addEventListener("change",c),t.elements=[s],t.set=t=>{s.value=t,u.textContent=t}}function Hz(t,e){return t===e||t+""===e+""}function Wz(t,e,n,r,i,o){return e=e||new r(t.loader()),e.initialize(n,pz(t),gz(t),mz(t),i,o).background(t.background())}function Gz(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function Yz(t,e,n,r){const i=new r(t.loader(),Gz(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,mz(t),t);return e&&e.handlers().forEach(t=>{i.on(t.type,t.handler)}),i}function Vz(t,e){const n=this,r=n._renderType,i=n._eventConfig.bind,o=gO(r);t=n._el=t?Xz(n,t):null,rz(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||Zx,s=t?o.renderer:o.headless;return n._renderer=s?Wz(n,n._renderer,t,s):null,n._handler=Yz(n,n._handler,t,a),n._redraw=!0,t&&"none"!==i&&(e=e?n._elBind=Xz(n,e):t.appendChild(Nz("form",{class:"vega-bindings"})),n._bind.forEach(t=>{t.param.element&&"container"!==i&&(t.element=Xz(n,t.param.element))}),n._bind.forEach(t=>{Rz(n,t.element||e,t)})),n}function Xz(t,e){if("string"===typeof e){if("undefined"===typeof document)return t.error("DOM document instance not found."),null;if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}const Jz=t=>+t||0,Qz=t=>({top:t,bottom:t,left:t,right:t});function Kz(t){return Object(g["H"])(t)?{top:Jz(t.top),bottom:Jz(t.bottom),left:Jz(t.left),right:Jz(t.right)}:Qz(Jz(t))}async function Zz(t,e,n,r){const i=gO(e),o=i&&i.headless;return o||Object(g["o"])("Unrecognized renderer type: "+e),await t.runAsync(),Wz(t,null,null,o,n,r).renderAsync(t._scenegraph.root)}async function tB(t,e){t!==hO.Canvas&&t!==hO.SVG&&t!==hO.PNG&&Object(g["o"])("Unrecognized image type: "+t);const n=await Zz(this,t,e);return t===hO.SVG?eB(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function eB(t,e){const n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}async function nB(t,e){const n=await Zz(this,hO.Canvas,t,e);return n.canvas()}async function rB(t){const e=await Zz(this,hO.SVG,t);return e.svg()}function iB(t,e,n){return ZL(t,ga,pL,n).parse(e)}function oB(t){var e=this._runtime.scales;return Object(g["w"])(e,t)||Object(g["o"])("Unrecognized scale or projection: "+t),e[t].value}var aB="width",sB="height",uB="padding",cB={skip:!0};function lB(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===uB?r.left+r.right:0)}function fB(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===uB?r.top+r.bottom:0)}function dB(t){var e=t._signals,n=e[aB],r=e[sB],i=e[uB];function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,e=>{t._width=e.size,t._viewWidth=lB(t,e.size),o()},{size:n}),t._resizeHeight=t.add(null,e=>{t._height=e.size,t._viewHeight=fB(t,e.size),o()},{size:r});const a=t.add(null,o,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function hB(t,e,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(aB,n,cB),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(sB,r,cB),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==e&&(a._resize=1,a._viewHeight=e),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(t=>t.resize())},!1,1)}function pB(t){return this._runtime.getState(t||{data:gB,signals:mB,recurse:!0})}function gB(t,e){return e.modified&&Object(g["B"])(e.input.value)&&t.indexOf("_:vega:_")}function mB(t,e){return!("parent"===t||e instanceof ga.proxy)}function vB(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},t=>{t._trigger=!0}),this}function yB(t,e){function n(e){t({timestamp:Date.now(),elapsed:e})}this._timers.push(nz(n,e))}function bB(t,e,n,r){const i=t.element();i&&i.setAttribute("title",xB(r))}function xB(t){return null==t?"":Object(g["B"])(t)?OB(t):Object(g["H"])(t)&&!Object(g["D"])(t)?wB(t):t+""}function wB(t){return Object.keys(t).map(e=>{const n=t[e];return e+": "+(Object(g["B"])(n)?OB(n):_B(n))}).join("\n")}function OB(t){return"["+t.map(_B).join(", ")+"]"}function _B(t){return Object(g["B"])(t)?"[â¦]":Object(g["H"])(t)&&!Object(g["D"])(t)?"{â¦}":t}function jB(t,e){const n=this;if(e=e||{},da.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),null!=e.logLevel&&n.logLevel(e.logLevel),e.locale||t.locale){const r=Object(g["p"])({},t.locale,e.locale);n.locale(Ii(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||hO.Canvas,n._scenegraph=new bx;const r=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||bB,n._redraw=!0,n._handler=(new Zx).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=jz(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=iB(n,t,e.expr);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(t=>({state:null,param:Object(g["p"])({},t)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=lB(n,n._width),n._viewHeight=fB(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,dB(n),oz(n),sz(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}function EB(t,e){return Object(g["w"])(t._signals,e)?t._signals[e]:Object(g["o"])("Unrecognized signal name: "+Object(g["bb"])(e))}function kB(t,e){const n=(t._targets||[]).filter(t=>t._update&&t._update.handler===e);return n.length?n[0]:null}function AB(t,e,n,r){let i=kB(n,r);return i||(i=Gz(t,()=>r(e,n.value)),i.handler=r,t.on(n,null,i)),t}function SB(t,e,n){const r=kB(e,n);return r&&e._targets.remove(r),t}Object(g["z"])(jB,da,{async evaluate(t,e,n){if(await da.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,vz(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&Vi(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=null!=t?t+"":null;return e!==this._desc&&iz(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){const r=EB(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",Kz(t)):Kz(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(gO(t)||Object(g["o"])("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(da.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(EB(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:hB,addEventListener(t,e,n){let r=e;return n&&!1===n.trap||(r=Gz(this,e),r.raw=e),this._handler.on(t,r),this},removeEventListener(t,e){var n,r,i=this._handler.handlers(t),o=i.length;while(--o>=0)if(r=i[o].type,n=i[o].handler,t===r&&(e===n||e===n.raw)){this._handler.off(r,n);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return AB(this,t,EB(this,t),e)},removeSignalListener(t,e){return SB(this,EB(this,t),e)},addDataListener(t,e){return AB(this,t,cz(this,t).values,e)},removeDataListener(t,e){return SB(this,cz(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=uz(this,null);this._globalCursor=!!t,e&&uz(this,e)}return this}return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:yB,events:Az,finalize:Tz,hover:Mz,data:lz,change:fz,insert:dz,remove:hz,scale:oB,initialize:Vz,toImageURL:tB,toCanvas:nB,toSVG:rB,getState:pB,setState:vB});var CB=n("5554");function DB(t){return Object(g["H"])(t)?t:{type:t||"pad"}}const MB=t=>+t||0,TB=t=>({top:t,bottom:t,left:t,right:t});function NB(t){return Object(g["H"])(t)?t.signal?t:{top:MB(t.top),bottom:MB(t.bottom),left:MB(t.left),right:MB(t.right)}:TB(MB(t))}const FB=t=>Object(g["H"])(t)&&!Object(g["B"])(t)?Object(g["p"])({},t):{value:t};function $B(t,e,n,r){if(null!=n){const i=Object(g["H"])(n)&&!Object(g["B"])(n)||Object(g["B"])(n)&&n.length&&Object(g["H"])(n[0]);return i?t.update[e]=n:t[r||"enter"][e]={value:n},1}return 0}function PB(t,e,n){for(const r in e)$B(t,r,e[r]);for(const r in n)$B(t,r,n[r],"update")}function RB(t,e,n){for(const r in e)n&&Object(g["w"])(n,r)||(t[r]=Object(g["p"])(t[r]||{},e[r]));return t}function LB(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const zB="mark",BB="frame",IB="scope",UB="axis",qB="axis-domain",HB="axis-grid",WB="axis-label",GB="axis-tick",YB="axis-title",VB="legend",XB="legend-band",JB="legend-entry",QB="legend-gradient",KB="legend-label",ZB="legend-symbol",tI="legend-title",eI="title",nI="title-text",rI="title-subtitle";function iI(t,e,n,r,i){const o={},a={};let s,u,c,l;for(u in u="lineBreak","text"!==e||null==i[u]||LB(u,t)||oI(o,u,i[u]),("legend"==n||String(n).startsWith("axis"))&&(n=null),l=n===BB?i.group:n===zB?Object(g["p"])({},i.mark,i[e]):null,l)c=LB(u,t)||("fill"===u||"stroke"===u)&&(LB("fill",t)||LB("stroke",t)),c||oI(o,u,l[u]);for(u in Object(g["i"])(r).forEach(e=>{const n=i.style&&i.style[e];for(const r in n)LB(r,t)||oI(o,r,n[r])}),t=Object(g["p"])({},t),o)l=o[u],l.signal?(s=s||{})[u]=l:a[u]=l;return t.enter=Object(g["p"])(a,t.enter),s&&(t.update=Object(g["p"])(s,t.update)),t}function oI(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const aI=t=>Object(g["J"])(t)?Object(g["bb"])(t):t.signal?"(".concat(t.signal,")"):dI(t);function sI(t){if(null!=t.gradient)return lI(t);let e=t.signal?"(".concat(t.signal,")"):t.color?cI(t.color):null!=t.field?dI(t.field):void 0!==t.value?Object(g["bb"])(t.value):void 0;return null!=t.scale&&(e=pI(t,e)),void 0===e&&(e=null),null!=t.exponent&&(e="pow(".concat(e,",").concat(fI(t.exponent),")")),null!=t.mult&&(e+="*".concat(fI(t.mult))),null!=t.offset&&(e+="+".concat(fI(t.offset))),t.round&&(e="round(".concat(e,")")),e}const uI=(t,e,n,r)=>"(".concat(t,"(").concat([e,n,r].map(sI).join(","),")+'')");function cI(t){return t.c?uI("hcl",t.h,t.c,t.l):t.h||t.s?uI("hsl",t.h,t.s,t.l):t.l||t.a?uI("lab",t.l,t.a,t.b):t.r||t.g||t.b?uI("rgb",t.r,t.g,t.b):null}function lI(t){const e=[t.start,t.stop,t.count].map(t=>null==t?null:Object(g["bb"])(t));while(e.length&&null==Object(g["W"])(e))e.pop();return e.unshift(aI(t.gradient)),"gradient(".concat(e.join(","),")")}function fI(t){return Object(g["H"])(t)?"("+sI(t)+")":t}function dI(t){return hI(Object(g["H"])(t)?t:{datum:t})}function hI(t){let e,n,r;if(t.signal)e="datum",r=t.signal;else if(t.group||t.parent){n=Math.max(1,t.level||1),e="item";while(n-- >0)e+=".mark.group";t.parent?(r=t.parent,e+=".datum"):r=t.group}else t.datum?(e="datum",r=t.datum):Object(g["o"])("Invalid field reference: "+Object(g["bb"])(t));return t.signal||(r=Object(g["J"])(r)?Object(g["ab"])(r).map(g["bb"]).join("]["):hI(r)),e+"["+r+"]"}function pI(t,e){const n=aI(t.scale);return null!=t.range?e="lerp(_range(".concat(n,"), ").concat(+t.range,")"):(void 0!==e&&(e="_scale(".concat(n,", ").concat(e,")")),t.band&&(e=(e?e+"+":"")+"_bandwidth(".concat(n,")")+(1===+t.band?"":"*"+fI(t.band)),t.extra&&(e="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(e,")"))),null==e&&(e="0")),e}function gI(t){let e="";return t.forEach(t=>{const n=sI(t);e+=t.test?"(".concat(t.test,")?").concat(n,":"):n}),":"===Object(g["W"])(e)&&(e+="null"),e}function mI(t,e,n,r,i,o){const a={};o=o||{},o.encoders={$encode:a},t=iI(t,e,n,r,i.config);for(const s in t)a[s]=vI(t[s],e,o,i);return o}function vI(t,e,n,r){const i={},o={};for(const a in t)null!=t[a]&&(i[a]=bI(yI(t[a]),r,n,o));return{$expr:{marktype:e,channels:i},$fields:Object.keys(o),$output:Object.keys(t)}}function yI(t){return Object(g["B"])(t)?gI(t):sI(t)}function bI(t,e,n,r){const i=_L(t,e);return i.$fields.forEach(t=>r[t]=1),Object(g["p"])(n,i.$params),i.$expr}const xI="outer",wI=["value","update","init","react","bind"];function OI(t,e){Object(g["o"])(t+' for "outer" push: '+Object(g["bb"])(e))}function _I(t,e){const n=t.name;if(t.push===xI)e.signals[n]||OI("No prior signal definition",n),wI.forEach(e=>{void 0!==t[e]&&OI("Invalid property ",e)});else{const r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}}function jI(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function EI(t,e,n,r){return new jI(t,e,n,r)}function kI(t,e){return EI("operator",t,e)}function AI(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function SI(t,e){return e?{$field:t,$name:e}:{$field:t}}const CI=SI("key");function DI(t,e){return{$compare:t,$order:e}}function MI(t,e){const n={$key:t};return e&&(n.$flat=!0),n}const TI="ascending",NI="descending";function FI(t){return Object(g["H"])(t)?(t.order===NI?"-":"+")+$I(t.op,t.field):""}function $I(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const PI="scope",RI="view";function LI(t){return t&&t.signal}function zI(t){return t&&t.expr}function BI(t){if(LI(t))return!0;if(Object(g["H"])(t))for(const e in t)if(BI(t[e]))return!0;return!1}function II(t,e){return null!=t?t:e}function UI(t){return t&&t.signal||t}const qI="timer";function HI(t,e){const n=t.merge?GI:t.stream?YI:t.type?VI:Object(g["o"])("Invalid stream specification: "+Object(g["bb"])(t));return n(t,e)}function WI(t){return t===PI?RI:t||RI}function GI(t,e){const n=t.merge.map(t=>HI(t,e)),r=XI({merge:n},t,e);return e.addStream(r).id}function YI(t,e){const n=HI(t.stream,e),r=XI({stream:n},t,e);return e.addStream(r).id}function VI(t,e){let n;t.type===qI?(n=e.event(qI,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(WI(t.source),t.type);const r=XI({stream:n},t,e);return 1===Object.keys(r).length?n:e.addStream(r).id}function XI(t,e,n){let r=e.between;return r&&(2!==r.length&&Object(g["o"])('Stream "between" parameter must have 2 entries: '+Object(g["bb"])(e)),t.between=[HI(r[0],n),HI(r[1],n)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(JI(e.marktype,e.markname,e.markrole)),e.source===PI&&r.push("inScope(event.item)"),r.length&&(t.filter=_L("("+r.join(")&&(")+")",n).$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}function JI(t,e,n){const r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}const QI={code:"_.$value",ast:{type:"Identifier",value:"value"}};function KI(t,e,n){const r=t.encode,i={target:n};let o=t.events,a=t.update,s=[];o||Object(g["o"])("Signal update missing events specification."),Object(g["J"])(o)&&(o=Object(CB["a"])(o,e.isSubscope()?PI:RI)),o=Object(g["i"])(o).filter(t=>t.signal||t.scale?(s.push(t),0):1),s.length>1&&(s=[tU(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),null!=r&&(a&&Object(g["o"])("Signal encode and update are mutually exclusive."),a="encode(item(),"+Object(g["bb"])(r)+")"),i.update=Object(g["J"])(a)?_L(a,e):null!=a.expr?_L(a.expr,e):null!=a.value?a.value:null!=a.signal?{$expr:QI,$params:{$value:e.signalRef(a.signal)}}:Object(g["o"])("Invalid signal update specification."),t.force&&(i.options={force:!0}),s.forEach(t=>e.addUpdate(Object(g["p"])(ZI(t,e),i)))}function ZI(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):HI(t,e)}}function tU(t){return{signal:"["+t.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function eU(t,e){const n=e.getSignal(t.name);let r=t.update;t.init&&(r?Object(g["o"])("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=_L(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach(t=>KI(t,e,n.id))}const nU=t=>(e,n,r)=>EI(t,n,e||void 0,r),rU=nU("aggregate"),iU=nU("axisticks"),oU=nU("bound"),aU=nU("collect"),sU=nU("compare"),uU=nU("datajoin"),cU=nU("encode"),lU=nU("expression"),fU=nU("facet"),dU=nU("field"),hU=nU("key"),pU=nU("legendentries"),gU=nU("load"),mU=nU("mark"),vU=nU("multiextent"),yU=nU("multivalues"),bU=nU("overlap"),xU=nU("params"),wU=nU("prefacet"),OU=nU("projection"),_U=nU("proxy"),jU=nU("relay"),EU=nU("render"),kU=nU("scale"),AU=nU("sieve"),SU=nU("sortitems"),CU=nU("viewlayout"),DU=nU("values");let MU=0;const TU={min:"min",max:"max",count:"sum"};function NU(t,e){const n=t.type||"linear";hg(n)||Object(g["o"])("Unrecognized scale type: "+Object(g["bb"])(n)),e.addScale(t.name,{type:n,domain:void 0})}function FU(t,e){const n=e.getScale(t.name).params;let r;for(r in n.domain=LU(t.domain,t,e),null!=t.range&&(n.range=JU(t,e,n)),null!=t.interpolate&&XU(t.interpolate,n),null!=t.nice&&(n.nice=VU(t.nice)),null!=t.bins&&(n.bins=YU(t.bins,e)),t)Object(g["w"])(n,r)||"name"===r||(n[r]=$U(t[r],e))}function $U(t,e){return Object(g["H"])(t)?t.signal?e.signalRef(t.signal):Object(g["o"])("Unsupported object: "+Object(g["bb"])(t)):t}function PU(t,e){return t.signal?e.signalRef(t.signal):t.map(t=>$U(t,e))}function RU(t){Object(g["o"])("Can not find data set: "+Object(g["bb"])(t))}function LU(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(Object(g["B"])(t)?zU:t.fields?IU:BU)(t,e,n);null==e.domainMin&&null==e.domainMax||Object(g["o"])("No scale domain defined for domainMin/domainMax to override.")}function zU(t,e,n){return t.map(t=>$U(t,n))}function BU(t,e,n){const r=n.getData(t.data);return r||RU(t.data),mg(e.type)?r.valuesRef(n,t.field,HU(t.sort,!1)):wg(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function IU(t,e,n){const r=t.data,i=t.fields.reduce((t,e)=>(e=Object(g["J"])(e)?{data:r,field:e}:Object(g["B"])(e)||e.signal?UU(e,n):e,t.push(e),t),[]);return(mg(e.type)?qU:wg(e.type)?WU:GU)(t,n,i)}function UU(t,e){const n="_:vega:_"+MU++,r=aU({});if(Object(g["B"])(t))r.value={$ingest:t};else if(t.signal){const i="setdata("+Object(g["bb"])(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,AU({})]),{data:n,field:"data"}}function qU(t,e,n){const r=HU(t.sort,!0);let i,o;const a=n.map(t=>{const n=e.getData(t.data);return n||RU(t.data),n.countsRef(e,t.field,r)}),s={groupby:CI,pulse:a};r&&(i=r.op||"count",o=r.field?$I(i,r.field):"count",s.ops=[TU[i]],s.fields=[e.fieldRef(o)],s.as=[o]),i=e.add(rU(s));const u=e.add(aU({pulse:AI(i)}));return o=e.add(DU({field:CI,sort:e.sortRef(r),pulse:AI(u)})),AI(o)}function HU(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field&&t.op&&!TU[t.op]&&Object(g["o"])("Multiple domain scales can not be sorted using "+t.op):Object(g["o"])("No field provided for sort aggregate op: "+t.op):Object(g["H"])(t)?t.field="key":t={field:"key"}),t}function WU(t,e,n){const r=n.map(t=>{const n=e.getData(t.data);return n||RU(t.data),n.domainRef(e,t.field)});return AI(e.add(yU({values:r})))}function GU(t,e,n){const r=n.map(t=>{const n=e.getData(t.data);return n||RU(t.data),n.extentRef(e,t.field)});return AI(e.add(vU({extents:r})))}function YU(t,e){return t.signal||Object(g["B"])(t)?PU(t,e):e.objectProperty(t)}function VU(t){return Object(g["H"])(t)?{interval:$U(t.interval),step:$U(t.step)}:$U(t)}function XU(t,e){e.interpolate=$U(t.type||t),null!=t.gamma&&(e.interpolateGamma=$U(t.gamma))}function JU(t,e,n){const r=e.config.range;let i=t.range;if(i.signal)return e.signalRef(i.signal);if(Object(g["J"])(i)){if(r&&Object(g["w"])(r,i))return t=Object(g["p"])({},t,{range:r[i]}),JU(t,e,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=mg(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(g["o"])("Unrecognized scale range value: "+Object(g["bb"])(i))}else{if(i.scheme)return n.scheme=Object(g["B"])(i.scheme)?PU(i.scheme,e):$U(i.scheme,e),i.extent&&(n.schemeExtent=PU(i.extent,e)),void(i.count&&(n.schemeCount=$U(i.count,e)));if(i.step)return void(n.rangeStep=$U(i.step,e));if(mg(t.type)&&!Object(g["B"])(i))return LU(i,t,e);Object(g["B"])(i)||Object(g["o"])("Unsupported range type: "+Object(g["bb"])(i))}return i.map(t=>(Object(g["B"])(t)?PU:$U)(t,e))}function QU(t,e){const n=e.config.projection||{},r={};for(const i in t)"name"!==i&&(r[i]=KU(t[i],i,e));for(const i in n)null==r[i]&&(r[i]=KU(n[i],i,e));e.addProjection(t.name,r)}function KU(t,e,n){return Object(g["B"])(t)?t.map(t=>KU(t,e,n)):Object(g["H"])(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:Object(g["o"])("Unsupported parameter object: "+Object(g["bb"])(t)):t}const ZU="top",tq="left",eq="right",nq="bottom",rq="center",iq="vertical",oq="start",aq="middle",sq="end",uq="index",cq="label",lq="offset",fq="perc",dq="perc2",hq="value",pq="guide-label",gq="guide-title",mq="group-title",vq="group-subtitle",yq="symbol",bq="gradient",xq="discrete",wq="size",Oq="shape",_q="fill",jq="stroke",Eq="strokeWidth",kq="strokeDash",Aq="opacity",Sq=[wq,Oq,_q,jq,Eq,kq,Aq],Cq={name:1,style:1,interactive:1},Dq={value:0},Mq={value:1},Tq="group",Nq="rect",Fq="rule",$q="symbol",Pq="text";function Rq(t){return t.type=Tq,t.interactive=t.interactive||!1,t}function Lq(t,e){const n=(n,r)=>II(t[n],II(e[n],r));return n.isVertical=n=>iq===II(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>II(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>II(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>II(t.columns,II(e.columns,+n.isVertical(!0))),n}function zq(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function Bq(t,e,n){const r=e.config.style[n];return r&&r[t]}function Iq(t,e,n){return"item.anchor === '".concat(oq,"' ? ").concat(t," : item.anchor === '").concat(sq,"' ? ").concat(e," : ").concat(n)}const Uq=Iq(Object(g["bb"])(tq),Object(g["bb"])(eq),Object(g["bb"])(rq));function qq(t){const e=t("tickBand");let n,r,i=t("tickOffset");return e?e.signal?(n={signal:"(".concat(e.signal,") === 'extent' ? 1 : 0.5")},r={signal:"(".concat(e.signal,") === 'extent'")},Object(g["H"])(i)||(i={signal:"(".concat(e.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===e?(n=1,r=!0,i=0):(n=.5,r=!1):(n=t("bandPosition"),r=t("tickExtra")),{extra:r,band:n,offset:i}}function Hq(t,e){return e?t?Object(g["H"])(t)?Object.assign({},t,{offset:Hq(t.offset,e)}):{value:t,offset:e}:e:t}function Wq(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=RB(t.encode,e,Cq)):t.interactive=!1,t}function Gq(t,e,n,r){const i=Lq(t,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let u,c,l,f,d;o?(c=[0,1],l=[0,0],f=a,d=s):(c=[0,0],l=[1,0],f=s,d=a);const h={enter:u={opacity:Dq,x:Dq,y:Dq,width:FB(f),height:FB(d)},update:Object(g["p"])({},u,{opacity:Mq,fill:{gradient:e,start:c,stop:l}}),exit:{opacity:Dq}};return PB(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Wq({type:Nq,role:QB,encode:h},r)}function Yq(t,e,n,r,i){const o=Lq(t,n),a=o.isVertical(),s=o.gradientThickness(),u=o.gradientLength();let c,l,f,d,h="";a?(c="y",f="y2",l="x",d="width",h="1-"):(c="x",f="x2",l="y",d="height");const p={opacity:Dq,fill:{scale:e,field:hq}};p[c]={signal:h+"datum."+fq,mult:u},p[l]=Dq,p[f]={signal:h+"datum."+dq,mult:u},p[d]=FB(s);const m={enter:p,update:Object(g["p"])({},p,{opacity:Mq}),exit:{opacity:Dq}};return PB(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Wq({type:Nq,role:XB,key:hq,from:i,encode:m},r)}const Vq="datum.".concat(fq,'<=0?"').concat(tq,'":datum.').concat(fq,'>=1?"').concat(eq,'":"').concat(rq,'"'),Xq="datum.".concat(fq,'<=0?"').concat(nq,'":datum.').concat(fq,'>=1?"').concat(ZU,'":"').concat(aq,'"');function Jq(t,e,n,r){const i=Lq(t,e),o=i.isVertical(),a=FB(i.gradientThickness()),s=i.gradientLength();let u,c,l,f,d=i("labelOverlap"),h="";const p={enter:u={opacity:Dq},update:c={opacity:Mq,text:{field:cq}},exit:{opacity:Dq}};return PB(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:II(t.labelLimit,e.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:Xq},l="y",f="x",h="1-"):(u.align=c.align={signal:Vq},u.baseline={value:"top"},l="x",f="y"),u[l]=c[l]={signal:h+"datum."+fq,mult:s},u[f]=c[f]=a,a.offset=II(t.labelOffset,e.gradientLabelOffset)||0,d=d?{separation:i("labelSeparation"),method:d,order:"datum."+uq}:void 0,Wq({type:Pq,role:KB,style:pq,key:hq,from:r,encode:p,overlap:d},n)}function Qq(t,e,n,r,i){const o=Lq(t,e),a=n.entries,s=!(!a||!a.interactive),u=a?a.name:void 0,c=o("clipHeight"),l=o("symbolOffset"),f={data:"value"},d="(".concat(i,") ? datum.").concat(lq," : datum.").concat(wq),h=c?FB(c):{field:wq},p="datum.".concat(uq),g="max(1, ".concat(i,")");let m,v,y,b,x;h.mult=.5,m={enter:v={opacity:Dq,x:{signal:d,mult:.5,offset:l},y:h},update:y={opacity:Mq,x:v.x,y:v.y},exit:{opacity:Dq}};let w=null,O=null;t.fill||(w=e.symbolBaseFillColor,O=e.symbolBaseStrokeColor),PB(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",O),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),Sq.forEach(e=>{t[e]&&(y[e]=v[e]={scale:t[e],field:hq})});const _=Wq({type:$q,role:ZB,key:hq,from:f,clip:!!c||void 0,encode:m},n.symbols),j=FB(l);j.offset=o("labelOffset"),m={enter:v={opacity:Dq,x:{signal:d,offset:j},y:h},update:y={opacity:Mq,text:{field:cq},x:v.x,y:v.y},exit:{opacity:Dq}},PB(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const E=Wq({type:Pq,role:KB,style:pq,key:hq,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!c},width:Dq,height:c?FB(c):Dq,opacity:Dq},exit:{opacity:Dq},update:y={opacity:Mq,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b="ceil(item.mark.items.length / ".concat(g,")"),y.row.signal="".concat(p,"%").concat(b),y.column.signal="floor(".concat(p," / ").concat(b,")"),x={field:["row",p]}):(y.row.signal="floor(".concat(p," / ").concat(g,")"),y.column.signal="".concat(p," % ").concat(g),x={field:p}),y.column.signal="(".concat(i,")?").concat(y.column.signal,":").concat(p),r={facet:{data:r,name:"value",groupby:uq}},Rq({role:IB,from:r,encode:RB(m,a,Cq),marks:[_,E],name:u,interactive:s,sort:x})}function Kq(t,e){const n=Lq(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Zq='item.orient === "left"',tH='item.orient === "right"',eH="(".concat(Zq," || ").concat(tH,")"),nH="datum.vgrad && ".concat(eH),rH=Iq('"top"','"bottom"','"middle"'),iH=Iq('"right"','"left"','"center"'),oH="datum.vgrad && ".concat(tH," ? (").concat(iH,") : (").concat(eH," && !(datum.vgrad && ").concat(Zq,')) ? "left" : ').concat(Uq),aH="item._anchor || (".concat(eH,' ? "middle" : "start")'),sH="".concat(nH," ? (").concat(Zq," ? -90 : 90) : 0"),uH="".concat(eH," ? (datum.vgrad ? (").concat(tH,' ? "bottom" : "top") : ').concat(rH,') : "top"');function cH(t,e,n,r){const i=Lq(t,e),o={enter:{opacity:Dq},update:{opacity:Mq,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Dq}};return PB(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:aH},angle:{signal:sH},align:{signal:oH},baseline:{signal:uH},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Wq({type:Pq,role:tI,style:gq,from:r,encode:o},n)}function lH(t,e){let n;return Object(g["H"])(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+fH(t.path)+")":t.sphere&&(n="geoShape("+fH(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function fH(t){return Object(g["H"])(t)&&t.signal?t.signal:Object(g["bb"])(t)}function dH(t){const e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")&&e.indexOf("title")?t.type===Tq?IB:e||zB:e}function hH(t){return{marktype:t.type,name:t.name||void 0,role:t.role||dH(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function pH(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t}function gH(t,e){const n=ma(t.type);n||Object(g["o"])("Unrecognized transform type: "+Object(g["bb"])(t.type));const r=EI(n.type.toLowerCase(),null,mH(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r}function mH(t,e,n){const r={},i=t.params.length;for(let o=0;o<i;++o){const i=t.params[o];r[i.name]=vH(i,e,n)}return r}function vH(t,e,n){const r=t.type,i=e[t.name];return"index"===r?bH(t,e,n):void 0!==i?"param"===r?xH(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!LI(i)?i.map(e=>yH(t,e,n)):yH(t,i,n):void(t.required&&Object(g["o"])("Missing required "+Object(g["bb"])(e.type)+" parameter: "+Object(g["bb"])(t.name)))}function yH(t,e,n){const r=t.type;if(LI(e))return EH(r)?Object(g["o"])("Expression references can not be signals."):kH(r)?n.fieldRef(e):AH(r)?n.compareRef(e):n.signalRef(e.signal);{const i=t.expr||kH(r);return i&&OH(e)?n.exprRef(e.expr,e.as):i&&_H(e)?SI(e.field,e.as):EH(r)?_L(e,n):jH(r)?AI(n.getData(e).values):kH(r)?SI(e):AH(r)?n.compareRef(e):e}}function bH(t,e,n){return Object(g["J"])(e.from)||Object(g["o"])('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function xH(t,e,n){const r=e[t.name];return t.array?(Object(g["B"])(r)||Object(g["o"])("Expected an array of sub-parameters. Instead: "+Object(g["bb"])(r)),r.map(e=>wH(t,e,n))):wH(t,r,n)}function wH(t,e,n){const r=t.params.length;let i;for(let a=0;a<r;++a){i=t.params[a];for(const t in i.key)if(i.key[t]!==e[t]){i=null;break}if(i)break}i||Object(g["o"])("Unsupported parameter: "+Object(g["bb"])(e));const o=Object(g["p"])(mH(i,e,n),i.key);return AI(n.add(xU(o)))}const OH=t=>t&&t.expr,_H=t=>t&&t.field,jH=t=>"data"===t,EH=t=>"expr"===t,kH=t=>"field"===t,AH=t=>"compare"===t;function SH(t,e,n){let r,i,o,a,s;return t?(r=t.facet)&&(e||Object(g["o"])("Only group marks can be faceted."),null!=r.field?a=s=CH(r,n):(t.data?s=AI(n.getData(t.data).aggregate):(o=gH(Object(g["p"])({type:"aggregate",groupby:Object(g["i"])(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=CH(r,n),a=s=AI(n.add(o))),i=n.keyRef(r.groupby,!0))):a=AI(n.add(aU(null,[{}]))),a||(a=CH(t,n)),{key:i,pulse:a,parent:s}}function CH(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:AI(e.getData(t.data).output)}function DH(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}function MH(t){return Object(g["J"])(t)?t:null}function TH(t,e,n){const r=$I(n.op,n.field);let i;if(e.ops){for(let o=0,a=e.as.length;o<a;++o)if(e.as[o]===r)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((i=n.op.signal)?t.signalRef(i):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(r))}function NH(t,e,n,r,i,o,a){const s=e[n]||(e[n]={}),u=FI(o);let c,l,f=MH(i);if(null!=f&&(t=e.scope,f+=u?"|"+u:"",c=s[f]),!c){const n=o?{field:CI,pulse:e.countsRef(t,i,o)}:{field:t.fieldRef(i),pulse:AI(e.output)};u&&(n.sort=t.sortRef(o)),l=t.add(EI(r,void 0,n)),a&&(e.index[i]=l),c=AI(l),null!=f&&(s[f]=c)}return c}function FH(t,e,n){const r=t.from.facet,i=r.name,o=CH(r,e);let a;r.name||Object(g["o"])("Facet must have a name: "+Object(g["bb"])(r)),r.data||Object(g["o"])("Facet must reference a data set: "+Object(g["bb"])(r)),r.field?a=e.add(wU({field:e.fieldRef(r.field),pulse:o})):r.groupby?a=e.add(fU({key:e.keyRef(r.groupby),group:AI(e.proxy(n.parent)),pulse:o})):Object(g["o"])("Facet must specify groupby or field: "+Object(g["bb"])(r));const s=e.fork(),u=s.add(aU()),c=s.add(AU({pulse:AI(u)}));s.addData(i,new DH(s,u,u,c)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(t).toRuntime()}}function $H(t,e,n){const r=e.add(wU({pulse:n.pulse})),i=e.fork();i.add(AU()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(t).toRuntime()}}function PH(t,e,n){const r=t.remove,i=t.insert,o=t.toggle,a=t.modify,s=t.values,u=e.add(kI()),c="if("+t.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(t=>null==t?"null":t).join(",")+"),0)",l=_L(c,e);u.update=l.$expr,u.params=l.$params}function RH(t,e){const n=dH(t),r=t.type===Tq,i=t.from&&t.from.facet,o=t.overlap;let a,s,u,c,l,f,d,h=t.layout||n===IB||n===BB;const p=n===zB||h||i,m=SH(t.from,r,e);s=e.add(uU({key:m.key||(t.key?SI(t.key):void 0),pulse:m.pulse,clean:!r}));const v=AI(s);s=u=e.add(aU({pulse:v})),s=e.add(mU({markdef:hH(t),interactive:pH(t.interactive,e),clip:lH(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:AI(s)}));const y=AI(s);s=c=e.add(cU(mI(t.encode,t.type,n,t.style,e,{mod:!1,pulse:y}))),s.params.parent=e.encode(),t.transform&&t.transform.forEach(t=>{const n=gH(t,e),r=n.metadata;(r.generates||r.changes)&&Object(g["o"])("Mark transforms should not generate new data."),r.nomod||(c.params.mod=!0),n.params.pulse=AI(s),e.add(s=n)}),t.sort&&(s=e.add(SU({sort:e.compareRef(t.sort),pulse:AI(s)})));const b=AI(s);(i||h)&&(h=e.add(CU({layout:e.objectProperty(t.layout),legends:e.legends,mark:y,pulse:b})),f=AI(h));const x=e.add(oU({mark:y,pulse:f||b}));d=AI(x),r&&(p&&(a=e.operators,a.pop(),h&&a.pop()),e.pushState(b,f||d,v),i?FH(t,e,m):p?$H(t,e,m):e.parse(t),e.popState(),p&&(h&&a.push(h),a.push(x))),o&&(d=LH(o,d,e));const w=e.add(EU({pulse:d})),O=e.add(AU({pulse:AI(w)},void 0,e.parent()));null!=t.name&&(l=t.name,e.addData(l,new DH(e,u,w,O)),t.on&&t.on.forEach(t=>{(t.insert||t.remove||t.toggle)&&Object(g["o"])("Marks only support modify triggers."),PH(t,e,l)}))}function LH(t,e,n){const r=t.method,i=t.bound,o=t.separation,a={separation:LI(o)?n.signalRef(o.signal):o,method:LI(r)?n.signalRef(r.signal):r,pulse:e};if(t.order&&(a.sort=n.compareRef({field:t.order})),i){const t=i.tolerance;a.boundTolerance=LI(t)?n.signalRef(t.signal):+t,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return AI(n.add(bU(a)))}function zH(t,e){const n=e.config.legend,r=t.encode||{},i=Lq(t,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,u=o.style,c={};let l,f,d,h=0;Sq.forEach(e=>t[e]?(c[e]=t[e],h=h||t[e]):0),h||Object(g["o"])("Missing valid scale for legend.");const p=BH(t,e.scaleType(h)),m={title:null!=t.title,scales:c,type:p,vgrad:"symbol"!==p&&i.isVertical()},v=AI(e.add(aU(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},b=AI(e.add(pU(f={type:p,scale:e.scaleRef(h),count:e.objectProperty(i("tickCount")),limit:e.property(i("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return p===bq?(d=[Gq(t,h,n,r.gradient),Jq(t,n,r.labels,b)],f.count=f.count||e.signalRef("max(2,2*floor((".concat(UI(i.gradientLength()),")/100))"))):p===xq?d=[Yq(t,h,n,r.gradient,b),Jq(t,n,r.labels,b)]:(l=Kq(t,n),d=[Qq(t,n,r,b,UI(l.columns))],f.size=qH(t,e,d[0].marks)),d=[Rq({role:JB,from:v,encode:y,marks:d,layout:l,interactive:s})],m.title&&d.push(cH(t,n,r.title,v)),RH(Rq({role:VB,from:v,encode:RB(UH(i,t,n),o,Cq),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:u}),e)}function BH(t,e){let n=t.type||yq;return t.type||1!==IH(t)||!t.fill&&!t.stroke||(n=gg(e)?bq:vg(e)?xq:yq),n!==bq?n:vg(e)?xq:bq}function IH(t){return Sq.reduce((e,n)=>e+(t[n]?1:0),0)}function UH(t,e,n){const r={enter:{},update:{}};return PB(r,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),r}function qH(t,e,n){const r=UI(HH("size",t,n)),i=UI(HH("strokeWidth",t,n)),o=UI(WH(n[1].encode,e,pq));return _L("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(o,")"),e)}function HH(t,e,n){return e[t]?'scale("'.concat(e[t],'",datum)'):zq(t,n[0].encode)}function WH(t,e,n){return zq("fontSize",t)||Bq("fontSize",e,n)}DH.fromEntries=function(t,e){const n=e.length,r=e[n-1],i=e[n-2];let o=e[0],a=null,s=1;for(o&&"load"===o.type&&(o=e[1]),t.add(e[0]);s<n;++s)e[s].params.pulse=AI(e[s-1]),t.add(e[s]),"aggregate"===e[s].type&&(a=e[s]);return new DH(t,o,i,r,a)},DH.prototype={countsRef(t,e,n){const r=this,i=r.counts||(r.counts={}),o=MH(e);let a,s,u;return null!=o&&(t=r.scope,a=i[o]),a?n&&n.field&&TH(t,a.agg.params,n):(u={groupby:t.fieldRef(e,"key"),pulse:AI(r.output)},n&&n.field&&TH(t,u,n),s=t.add(rU(u)),a=t.add(aU({pulse:AI(s)})),a={agg:s,ref:AI(a)},null!=o&&(i[o]=a)),a.ref},tuplesRef(){return AI(this.values)},extentRef(t,e){return NH(t,this,"extent","extent",e,!1)},domainRef(t,e){return NH(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return NH(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return NH(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return NH(t,this,"indata","tupleindex",e,!0,!0)}};const GH='item.orient==="'.concat(tq,'"?-90:item.orient==="').concat(eq,'"?90:0');function YH(t,e){t=Object(g["J"])(t)?{text:t}:t;const n=Lq(t,e.config.title),r=t.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,u=[],c={},l=AI(e.add(aU(null,[c])));return u.push(JH(t,n,VH(t),l)),t.subtitle&&u.push(QH(t,n,r.subtitle,l)),RH(Rq({role:eI,from:l,encode:XH(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),e)}function VH(t){const e=t.encode;return e&&e.title||Object(g["p"])({name:t.name,interactive:t.interactive,style:t.style},e)}function XH(t,e){const n={enter:{},update:{}};return PB(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:Uq},angle:{signal:GH},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),RB(n,e,Cq)}function JH(t,e,n,r){const i={value:0},o=t.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return PB(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),Wq({type:Pq,role:nI,style:mq,from:r,encode:a},n)}function QH(t,e,n,r){const i={value:0},o=t.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return PB(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),Wq({type:Pq,role:rI,style:vq,from:r,encode:a},n)}function KH(t,e){const n=[];t.transform&&t.transform.forEach(t=>{n.push(gH(t,e))}),t.on&&t.on.forEach(n=>{PH(n,e,t.name)}),e.addDataPipeline(t.name,ZH(t,e,n))}function ZH(t,e,n){const r=[];let i,o,a,s,u,c=null,l=!1,f=!1;for(t.values?LI(t.values)||BI(t.format)?(r.push(eW(e,t)),r.push(c=tW())):r.push(c=tW({$ingest:t.values,$format:t.format})):t.url?BI(t.url)||BI(t.format)?(r.push(eW(e,t)),r.push(c=tW())):r.push(c=tW({$request:t.url,$format:t.format})):t.source&&(c=i=Object(g["i"])(t.source).map(t=>AI(e.getData(t).output)),r.push(null)),o=0,a=n.length;o<a;++o)s=n[o],u=s.metadata,c||u.source||r.push(c=tW()),r.push(s),u.generates&&(f=!0),u.modifies&&!f&&(l=!0),u.source?c=s:u.changes&&(c=null);return i&&(a=i.length-1,r[0]=jU({derive:l,pulse:a?i:i[0]}),(l||a)&&r.splice(1,0,tW())),c||r.push(tW()),r.push(AU({})),r}function tW(t){const e=aU({},t);return e.metadata={source:!0},e}function eW(t,e){return gU({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const nW=t=>t===nq||t===ZU,rW=(t,e,n)=>LI(t)?lW(t.signal,e,n):t===tq||t===ZU?e:n,iW=(t,e,n)=>LI(t)?uW(t.signal,e,n):nW(t)?e:n,oW=(t,e,n)=>LI(t)?cW(t.signal,e,n):nW(t)?n:e,aW=(t,e,n)=>LI(t)?fW(t.signal,e,n):t===ZU?{value:e}:{value:n},sW=(t,e,n)=>LI(t)?dW(t.signal,e,n):t===eq?{value:e}:{value:n},uW=(t,e,n)=>hW("".concat(t," === '").concat(ZU,"' || ").concat(t," === '").concat(nq,"'"),e,n),cW=(t,e,n)=>hW("".concat(t," !== '").concat(ZU,"' && ").concat(t," !== '").concat(nq,"'"),e,n),lW=(t,e,n)=>gW("".concat(t," === '").concat(tq,"' || ").concat(t," === '").concat(ZU,"'"),e,n),fW=(t,e,n)=>gW("".concat(t," === '").concat(ZU,"'"),e,n),dW=(t,e,n)=>gW("".concat(t," === '").concat(eq,"'"),e,n),hW=(t,e,n)=>(e=null!=e?FB(e):e,n=null!=n?FB(n):n,pW(e)&&pW(n)?(e=e?e.signal||Object(g["bb"])(e.value):null,n=n?n.signal||Object(g["bb"])(n.value):null,{signal:"".concat(t," ? (").concat(e,") : (").concat(n,")")}):[Object(g["p"])({test:t},e)].concat(n||[])),pW=t=>null==t||1===Object.keys(t).length,gW=(t,e,n)=>({signal:"".concat(t," ? (").concat(vW(e),") : (").concat(vW(n),")")}),mW=(t,e,n,r,i)=>({signal:(null!=r?"".concat(t," === '").concat(tq,"' ? (").concat(vW(r),") : "):"")+(null!=n?"".concat(t," === '").concat(nq,"' ? (").concat(vW(n),") : "):"")+(null!=i?"".concat(t," === '").concat(eq,"' ? (").concat(vW(i),") : "):"")+(null!=e?"".concat(t," === '").concat(ZU,"' ? (").concat(vW(e),") : "):"")+"(null)"}),vW=t=>LI(t)?t.signal:null==t?null:Object(g["bb"])(t),yW=(t,e)=>0===e?0:LI(t)?{signal:"(".concat(t.signal,") * ").concat(e)}:{value:t*e},bW=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function xW(t,e,n,r){let i;if(e&&Object(g["w"])(e,t))return e[t];if(Object(g["w"])(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return r[gq][i]}if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return r[pq][i]}return null}function wW(t){const e={};for(const n of t)if(n)for(const t in n)e[t]=1;return Object.keys(e)}function OW(t,e){var n,r,i,o=e.config,a=o.style,s=o.axis,u="band"===e.scaleType(t.scale)&&o.axisBand,c=t.orient;if(LI(c)){const t=wW([o.axisX,o.axisY]),e=wW([o.axisTop,o.axisBottom,o.axisLeft,o.axisRight]);for(i of(n={},t))n[i]=iW(c,xW(i,o.axisX,s,a),xW(i,o.axisY,s,a));for(i of(r={},e))r[i]=mW(c.signal,xW(i,o.axisTop,s,a),xW(i,o.axisBottom,s,a),xW(i,o.axisLeft,s,a),xW(i,o.axisRight,s,a))}else n=c===ZU||c===nq?o.axisX:o.axisY,r=o["axis"+c[0].toUpperCase()+c.slice(1)];const l=n||r||u?Object(g["p"])({},s,n,r,u):s;return l}function _W(t,e,n,r){const i=Lq(t,e),o=t.orient;let a,s;const u={enter:a={opacity:Dq},update:s={opacity:Mq},exit:{opacity:Dq}};PB(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const c=jW(t,0),l=jW(t,1);return a.x=s.x=iW(o,c,Dq),a.x2=s.x2=iW(o,l),a.y=s.y=oW(o,c,Dq),a.y2=s.y2=oW(o,l),Wq({type:Fq,role:qB,from:r,encode:u},n)}function jW(t,e){return{scale:t.scale,range:e}}function EW(t,e,n,r,i){const o=Lq(t,e),a=t.orient,s=t.gridScale,u=rW(a,1,-1),c=kW(t.offset,u);let l,f,d;const h={enter:l={opacity:Dq},update:d={opacity:Mq},exit:f={opacity:Dq}};PB(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:t.scale,field:hq,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=iW(a,{signal:"height"},{signal:"width"}),v=s?{scale:s,range:0,mult:u,offset:c}:{value:0,offset:c},y=s?{scale:s,range:1,mult:u,offset:c}:Object(g["p"])(m,{mult:u,offset:c});return l.x=d.x=iW(a,p,v),l.y=d.y=oW(a,p,v),l.x2=d.x2=oW(a,y),l.y2=d.y2=iW(a,y),f.x=iW(a,p),f.y=oW(a,p),Wq({type:Fq,role:HB,key:hq,from:r,encode:h},n)}function kW(t,e){if(1===e);else if(Object(g["H"])(t)){let n=t=Object(g["p"])({},t);while(null!=n.mult){if(!Object(g["H"])(n.mult))return n.mult=LI(e)?{signal:"(".concat(n.mult,") * (").concat(e.signal,")")}:n.mult*e,t;n=n.mult=Object(g["p"])({},n.mult)}n.mult=e}else t=LI(e)?{signal:"(".concat(e.signal,") * (").concat(t||0,")")}:e*(t||0);return t}function AW(t,e,n,r,i,o){const a=Lq(t,e),s=t.orient,u=rW(s,-1,1);let c,l,f;const d={enter:c={opacity:Dq},update:f={opacity:Mq},exit:l={opacity:Dq}};PB(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=FB(i);h.mult=u;const p={scale:t.scale,field:hq,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=c.y=iW(s,Dq,p),f.y2=c.y2=iW(s,h),l.x=iW(s,p),f.x=c.x=oW(s,Dq,p),f.x2=c.x2=oW(s,h),l.y=oW(s,p),Wq({type:Fq,role:GB,key:hq,from:r,encode:d},n)}function SW(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}function CW(t,e,n,r,i,o){const a=Lq(t,e),s=t.orient,u=t.scale,c=rW(s,-1,1),l=UI(a("labelFlush")),f=UI(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let p,g=0===l||!!l;const m=FB(i);m.mult=c,m.offset=FB(a("labelPadding")||0),m.offset.mult=c;const v={scale:u,field:hq,band:.5,offset:Hq(o.offset,a("labelOffset"))},y=iW(s,g?SW(u,l,'"left"','"right"','"center"'):{value:"center"},sW(s,"left","right")),b=iW(s,aW(s,"bottom","top"),g?SW(u,l,'"top"','"bottom"','"middle"'):{value:"middle"}),x=SW(u,l,"-(".concat(f,")"),f,0);g=g&&f;const w={opacity:Dq,x:iW(s,v,m),y:oW(s,v,m)},O={enter:w,update:p={opacity:Mq,text:{field:cq},x:w.x,y:w.y,align:y,baseline:b},exit:{opacity:Dq,x:w.x,y:w.y}};PB(O,{dx:!d&&g?iW(s,x):null,dy:!h&&g?oW(s,x):null}),PB(O,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const _=a("labelBound");let j=a("labelOverlap");return j=j||_?{separation:a("labelSeparation"),method:j,order:"datum.index",bound:_?{scale:u,orient:s,tolerance:_}:null}:void 0,p.align!==y&&(p.align=bW(p.align,y)),p.baseline!==b&&(p.baseline=bW(p.baseline,b)),Wq({type:Pq,role:WB,style:pq,key:hq,from:r,encode:O,overlap:j},n)}function DW(t,e,n,r){const i=Lq(t,e),o=t.orient,a=rW(o,-1,1);let s,u;const c={enter:s={opacity:Dq,anchor:FB(i("titleAnchor",null)),align:{signal:Uq}},update:u=Object(g["p"])({},s,{opacity:Mq,text:FB(t.title)}),exit:{opacity:Dq}},l={signal:'lerp(range("'.concat(t.scale,'"), ').concat(Iq(0,1,.5),")")};return u.x=iW(o,l),u.y=oW(o,l),s.angle=iW(o,Dq,yW(a,90)),s.baseline=iW(o,aW(o,nq,ZU),{value:nq}),u.angle=s.angle,u.baseline=s.baseline,PB(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),MW(i,o,c,n),c.update.align=bW(c.update.align,s.align),c.update.angle=bW(c.update.angle,s.angle),c.update.baseline=bW(c.update.baseline,s.baseline),Wq({type:Pq,role:YB,style:gq,from:r,encode:c},n)}function MW(t,e,n,r){const i=(t,e)=>null!=t?(n.update[e]=bW(FB(t),n.update[e]),!1):!LB(e,r),o=i(t("titleX"),"x"),a=i(t("titleY"),"y");n.enter.auto=a===o?FB(a):iW(e,FB(a),FB(o))}function TW(t,e){const n=OW(t,e),r=t.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,u=Lq(t,n),c=qq(u),l={scale:t.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:null!=t.title},f=AI(e.add(aU({},[l]))),d=AI(e.add(iU({scale:e.scaleRef(t.scale),extra:e.property(c.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),h=[];let p;return l.grid&&h.push(EW(t,n,r.grid,d,c)),l.ticks&&(p=u("tickSize"),h.push(AW(t,n,r.ticks,d,p,c))),l.labels&&(p=l.ticks?p:0,h.push(CW(t,n,r.labels,d,p,c))),l.domain&&h.push(_W(t,n,r.domain,f)),l.title&&h.push(DW(t,n,r.title,f)),RH(Rq({role:UB,from:f,encode:RB(NW(u,t),i,Cq),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:a,style:s}),e)}function NW(t,e){const n={enter:{},update:{}};return PB(n,{orient:t("orient"),offset:t("offset")||0,position:II(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:'abs(span(range("'.concat(e.scale,'")))')},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function FW(t,e,n){const r=Object(g["i"])(t.signals),i=Object(g["i"])(t.scales);return n||r.forEach(t=>_I(t,e)),Object(g["i"])(t.projections).forEach(t=>QU(t,e)),i.forEach(t=>NU(t,e)),Object(g["i"])(t.data).forEach(t=>KH(t,e)),i.forEach(t=>FU(t,e)),(n||r).forEach(t=>eU(t,e)),Object(g["i"])(t.axes).forEach(t=>TW(t,e)),Object(g["i"])(t.marks).forEach(t=>RH(t,e)),Object(g["i"])(t.legends).forEach(t=>zH(t,e)),t.title&&YH(t.title,e),e.parseLambdas(),e}const $W=t=>RB({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function PW(t,e){const n=e.config,r=AI(e.root=e.add(kI())),i=LW(t,n);i.forEach(t=>_I(t,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const o=e.add(aU()),a=e.add(cU(mI($W(t.encode),Tq,BB,t.style,e,{pulse:AI(o)}))),s=e.add(CU({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:r,pulse:AI(a)}));e.operators.pop(),e.pushState(AI(a),AI(s),null),FW(t,e,i),e.operators.push(s);let u=e.add(oU({mark:r,pulse:AI(s)}));return u=e.add(EU({pulse:AI(u)})),u=e.add(AU({pulse:AI(u)})),e.addData("root",new DH(e,o,o,u)),e}function RW(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function LW(t,e){const n=n=>II(t[n],e[n]),r=[RW("background",n("background")),RW("autosize",DB(n("autosize"))),RW("padding",NB(n("padding"))),RW("width",n("width")||0),RW("height",n("height")||0)],i=r.reduce((t,e)=>(t[e.name]=e,t),{}),o={};return Object(g["i"])(t.signals).forEach(t=>{Object(g["w"])(i,t.name)?t=Object(g["p"])(i[t.name],t):r.push(t),o[t.name]=t}),Object(g["i"])(e.signals).forEach(t=>{Object(g["w"])(o,t.name)||Object(g["w"])(i,t.name)||r.push(t)}),r}function zW(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function BW(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function IW(t){return(Object(g["B"])(t)?UW:qW)(t)}function UW(t){const e=t.length;let n="[";for(let r=0;r<e;++r){const e=t[r];n+=(r>0?",":"")+(Object(g["H"])(e)?e.signal||IW(e):Object(g["bb"])(e))}return n+"]"}function qW(t){let e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+Object(g["bb"])(e)+":"+(Object(g["H"])(n)?n.signal||IW(n):Object(g["bb"])(n));return r+"}"}function HW(){const t="sans-serif",e=30,n=2,r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:n},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:t,fontSize:11},trail:{fill:r,size:n},style:{"guide-label":{fill:i,font:t,fontSize:10},"guide-title":{fill:i,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:t,fontSize:12},point:{size:e,strokeWidth:n,shape:"circle"},circle:{size:e,strokeWidth:n},square:{size:e,strokeWidth:n,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function WW(t,e,n){return Object(g["H"])(t)||Object(g["o"])("Input Vega specification must be an object."),e=Object(g["P"])(HW(),e,t.config),PW(t,new zW(e,n)).toRuntime()}zW.prototype=BW.prototype={parse(t){return FW(t,this)},fork(){return new BW(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof jI?AI(t):t;return this.add(_U({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){let r,i;t&&(r=t.data||(t.data={}),i=r[e]||(r[e]=[]),i.push(n))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const r in e.index)n(e.index[r],t,"index:"+r)}return this},pushState(t,e,n){this._encode.push(AI(this.add(AU({pulse:t})))),this._parent.push(e),this._lookup.push(n?AI(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Object(g["W"])(this._parent)},encode(){return Object(g["W"])(this._encode)},lookup(){return Object(g["W"])(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(Object(g["J"])(t))return SI(t,e);t.signal||Object(g["o"])("Unsupported field reference: "+Object(g["bb"])(t));const n=t.signal;let r=this.field[n];if(!r){const t={name:this.signalRef(n)};e&&(t.as=e),this.field[n]=r=AI(this.add(dU(t)))}return r},compareRef(t){let e=!1;const n=t=>LI(t)?(e=!0,this.signalRef(t.signal)):zI(t)?(e=!0,this.exprRef(t.expr)):t,r=Object(g["i"])(t.field).map(n),i=Object(g["i"])(t.order).map(n);return e?AI(this.add(sU({fields:r,orders:i}))):DI(r,i)},keyRef(t,e){let n=!1;const r=t=>LI(t)?(n=!0,AI(i[t.signal])):t,i=this.signals;return t=Object(g["i"])(t).map(r),n?AI(this.add(hU({fields:t,flat:e}))):MI(t,e)},sortRef(t){if(!t)return t;const e=$I(t.op,t.field),n=t.order||TI;return n.signal?AI(this.add(sU({fields:e,orders:this.signalRef(n.signal)}))):DI(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},hasOwnSignal(t){return Object(g["w"])(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&Object(g["o"])("Duplicate signal name: "+Object(g["bb"])(t));const n=e instanceof jI?e:this.add(kI(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||Object(g["o"])("Unrecognized signal name: "+Object(g["bb"])(t)),this.signals[t]},signalRef(t){return this.signals[t]?AI(this.signals[t]):(Object(g["w"])(this.lambdas,t)||(this.lambdas[t]=this.add(kI(null))),AI(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const n=t[e],r=_L(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return t&&Object(g["H"])(t)?this.signalRef(t.signal||IW(t)):t},exprRef(t,e){const n={expr:_L(t,this)};return e&&(n.expr.$name=e),AI(this.add(lU(n)))},addBinding(t,e){this.bindings||Object(g["o"])("Nested signals do not support binding: "+Object(g["bb"])(t)),this.bindings.push(Object(g["p"])({signal:t},e))},addScaleProj(t,e){Object(g["w"])(this.scales,t)&&Object(g["o"])("Duplicate scale or projection name: "+Object(g["bb"])(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,kU(e))},addProjection(t,e){this.addScaleProj(t,OU(e))},getScale(t){return this.scales[t]||Object(g["o"])("Unrecognized scale name: "+Object(g["bb"])(t)),this.scales[t]},scaleRef(t){return AI(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return Object(g["w"])(this.data,t)&&Object(g["o"])("Duplicate data set name: "+Object(g["bb"])(t)),this.data[t]=e},getData(t){return this.data[t]||Object(g["o"])("Undefined data set name: "+Object(g["bb"])(t)),this.data[t]},addDataPipeline(t,e){return Object(g["w"])(this.data,t)&&Object(g["o"])("Duplicate data set name: "+Object(g["bb"])(t)),this.addData(t,DH.fromEntries(this,e))}};var GW="vega",YW="5.19.1",VW="The Vega visualization grammar.",XW=["vega","visualization","interaction","dataflow","library","data","d3"],JW="BSD-3-Clause",QW="UW Interactive Data Lab (http://idl.cs.washington.edu)",KW="build/vega-node.js",ZW="build/vega.module.js",tG="build/vega.min.js",eG="build/vega.min.js",nG="index.d.ts",rG="vega/vega",iG={bundle:"rollup -c --config-bundle",prebuild:"rimraf build && rimraf build-es5",build:"rollup -c --config-core --config-bundle --config-ie",postbuild:"node schema-copy",pretest:"yarn build --config-test",test:"TZ=America/Los_Angeles tape 'test/**/*-test.js'",prepublishOnly:"yarn test && yarn build",postpublish:"./schema-deploy.sh"},oG={"vega-crossfilter":"~4.0.5","vega-dataflow":"~5.7.3","vega-encode":"~4.8.3","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-force":"~4.0.7","vega-format":"~1.0.4","vega-functions":"~5.12.0","vega-geo":"~4.3.8","vega-hierarchy":"~4.0.9","vega-label":"~1.0.0","vega-loader":"~4.4.0","vega-parser":"~6.1.3","vega-projection":"~1.4.5","vega-regression":"~1.0.9","vega-runtime":"~6.1.3","vega-scale":"~7.1.1","vega-scenegraph":"~4.9.3","vega-statistics":"~1.7.9","vega-time":"~2.0.4","vega-transforms":"~4.9.3","vega-typings":"~0.19.2","vega-util":"~1.16.0","vega-view":"~5.9.2","vega-view-transforms":"~4.5.8","vega-voronoi":"~4.1.5","vega-wordcloud":"~4.1.3"},aG={"vega-schema":"*"},sG="f112ee55fc5ddd025df8820fce371803106a3968",uG={name:GW,version:YW,description:VW,keywords:XW,license:JW,author:QW,main:KW,module:ZW,unpkg:tG,jsdelivr:eG,types:nG,repository:rG,scripts:iG,dependencies:oG,devDependencies:aG,gitHead:sG};Object(g["p"])(ga,r,o,a,s,u,l,c,f,d,h,p);const cG=uG.version},e260:function(t,e,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),a=n("69f3"),s=n("7dd0"),u="Array Iterator",c=a.set,l=a.getterFor(u);t.exports=s(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},e2cc:function(t,e,n){var r=n("6eeb");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},e439:function(t,e,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),a=n("06cf").f,s=n("83ab"),u=i((function(){a(1)})),c=!s||u;r({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},e538:function(t,e,n){var r=n("b622");e.f=r},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e6cf:function(t,e,n){"use strict";var r,i,o,a,s=n("23e7"),u=n("c430"),c=n("da84"),l=n("d066"),f=n("fea9"),d=n("6eeb"),h=n("e2cc"),p=n("d44e"),g=n("2626"),m=n("861d"),v=n("1c0b"),y=n("19aa"),b=n("8925"),x=n("2266"),w=n("1c7e"),O=n("4840"),_=n("2cf4").set,j=n("b575"),E=n("cdf9"),k=n("44de"),A=n("f069"),S=n("e667"),C=n("69f3"),D=n("94ca"),M=n("b622"),T=n("605d"),N=n("2d00"),F=M("species"),$="Promise",P=C.get,R=C.set,L=C.getterFor($),z=f,B=c.TypeError,I=c.document,U=c.process,q=l("fetch"),H=A.f,W=H,G=!!(I&&I.createEvent&&c.dispatchEvent),Y="function"==typeof PromiseRejectionEvent,V="unhandledrejection",X="rejectionhandled",J=0,Q=1,K=2,Z=1,tt=2,et=D($,(function(){var t=b(z)!==String(z);if(!t){if(66===N)return!0;if(!T&&!Y)return!0}if(u&&!z.prototype["finally"])return!0;if(N>=51&&/native code/.test(z))return!1;var e=z.resolve(1),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[F]=n,!(e.then((function(){}))instanceof n)})),nt=et||!w((function(t){z.all(t)["catch"]((function(){}))})),rt=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},it=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;j((function(){var r=t.value,i=t.state==Q,o=0;while(n.length>o){var a,s,u,c=n[o++],l=i?c.ok:c.fail,f=c.resolve,d=c.reject,h=c.domain;try{l?(i||(t.rejection===tt&&ut(t),t.rejection=Z),!0===l?a=r:(h&&h.enter(),a=l(r),h&&(h.exit(),u=!0)),a===c.promise?d(B("Promise-chain cycle")):(s=rt(a))?s.call(a,f,d):f(a)):d(r)}catch(p){h&&!u&&h.exit(),d(p)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&at(t)}))}},ot=function(t,e,n){var r,i;G?(r=I.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!Y&&(i=c["on"+t])?i(r):t===V&&k("Unhandled promise rejection",n)},at=function(t){_.call(c,(function(){var e,n=t.facade,r=t.value,i=st(t);if(i&&(e=S((function(){T?U.emit("unhandledRejection",r,n):ot(V,n,r)})),t.rejection=T||st(t)?tt:Z,e.error))throw e.value}))},st=function(t){return t.rejection!==Z&&!t.parent},ut=function(t){_.call(c,(function(){var e=t.facade;T?U.emit("rejectionHandled",e):ot(X,e,t.value)}))},ct=function(t,e,n){return function(r){t(e,r,n)}},lt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=K,it(t,!0))},ft=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw B("Promise can't be resolved itself");var r=rt(e);r?j((function(){var n={done:!1};try{r.call(e,ct(ft,n,t),ct(lt,n,t))}catch(i){lt(n,i,t)}})):(t.value=e,t.state=Q,it(t,!1))}catch(i){lt({done:!1},i,t)}}};et&&(z=function(t){y(this,z,$),v(t),r.call(this);var e=P(this);try{t(ct(ft,e),ct(lt,e))}catch(n){lt(e,n)}},r=function(t){R(this,{type:$,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:J,value:void 0})},r.prototype=h(z.prototype,{then:function(t,e){var n=L(this),r=H(O(this,z));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=T?U.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=J&&it(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=P(t);this.promise=t,this.resolve=ct(ft,e),this.reject=ct(lt,e)},A.f=H=function(t){return t===z||t===o?new i(t):W(t)},u||"function"!=typeof f||(a=f.prototype.then,d(f.prototype,"then",(function(t,e){var n=this;return new z((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof q&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return E(z,q.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:et},{Promise:z}),p(z,$,!1,!0),g($),o=l($),s({target:$,stat:!0,forced:et},{reject:function(t){var e=H(this);return e.reject.call(void 0,t),e.promise}}),s({target:$,stat:!0,forced:u||et},{resolve:function(t){return E(u&&this===o?z:this,t)}}),s({target:$,stat:!0,forced:nt},{all:function(t){var e=this,n=H(e),r=n.resolve,i=n.reject,o=S((function(){var n=v(e.resolve),o=[],a=0,s=1;x(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=H(e),r=n.reject,i=S((function(){var i=v(e.resolve);x(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(t,e,n){var r=n("5135"),i=n("56ef"),o=n("06cf"),a=n("9bf2");t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95a:function(t,e,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},f069:function(t,e,n){"use strict";var r=n("1c0b"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},f0bd:function(t,e,n){"use strict";(function(t){
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var n="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator,r=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(n&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();function i(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}function o(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),r))}}var a=n&&window.Promise,s=a?i:o;function u(t){var e={};return t&&"[object Function]"===e.toString.call(t)}function c(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView,r=n.getComputedStyle(t,null);return e?r[e]:r}function l(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function f(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=c(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?t:f(l(t))}function d(t){return t&&t.referenceNode?t.referenceNode:t}var h=n&&!(!window.MSInputMethodContext||!document.documentMode),p=n&&/MSIE 10/.test(navigator.userAgent);function g(t){return 11===t?h:10===t?p:h||p}function m(t){if(!t)return document.documentElement;var e=g(10)?document.body:null,n=t.offsetParent||null;while(n===e&&t.nextElementSibling)n=(t=t.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===c(n,"position")?m(n):n:t?t.ownerDocument.documentElement:document.documentElement}function v(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||m(t.firstElementChild)===t)}function y(t){return null!==t.parentNode?y(t.parentNode):t}function b(t,e){if(!t||!t.nodeType||!e||!e.nodeType)return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var a=o.commonAncestorContainer;if(t!==a&&e!==a||r.contains(i))return v(a)?a:m(a);var s=y(t);return s.host?b(s.host,e):b(t,y(e).host)}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){var i=t.ownerDocument.documentElement,o=t.ownerDocument.scrollingElement||i;return o[n]}return t[n]}function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=x(e,"top"),i=x(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}function O(t,e){var n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+r+"Width"])}function _(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],g(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function j(t){var e=t.body,n=t.documentElement,r=g(10)&&getComputedStyle(n);return{height:_("Height",e,n,r),width:_("Width",e,n,r)}}var E=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},k=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),A=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function C(t){return S({},t,{right:t.left+t.width,bottom:t.top+t.height})}function D(t){var e={};try{if(g(10)){e=t.getBoundingClientRect();var n=x(t,"top"),r=x(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(d){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?j(t.ownerDocument):{},a=o.width||t.clientWidth||i.width,s=o.height||t.clientHeight||i.height,u=t.offsetWidth-a,l=t.offsetHeight-s;if(u||l){var f=c(t);u-=O(f,"x"),l-=O(f,"y"),i.width-=u,i.height-=l}return C(i)}function M(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(10),i="HTML"===e.nodeName,o=D(t),a=D(e),s=f(t),u=c(e),l=parseFloat(u.borderTopWidth),d=parseFloat(u.borderLeftWidth);n&&i&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var h=C({top:o.top-a.top-l,left:o.left-a.left-d,width:o.width,height:o.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){var p=parseFloat(u.marginTop),m=parseFloat(u.marginLeft);h.top-=l-p,h.bottom-=l-p,h.left-=d-m,h.right-=d-m,h.marginTop=p,h.marginLeft=m}return(r&&!n?e.contains(s):e===s&&"BODY"!==s.nodeName)&&(h=w(h,e)),h}function T(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,r=M(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),a=e?0:x(n),s=e?0:x(n,"left"),u={top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:o};return C(u)}function N(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===c(t,"position"))return!0;var n=l(t);return!!n&&N(n)}function F(t){if(!t||!t.parentElement||g())return document.documentElement;var e=t.parentElement;while(e&&"none"===c(e,"transform"))e=e.parentElement;return e||document.documentElement}function $(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=i?F(t):b(t,d(e));if("viewport"===r)o=T(a,i);else{var s=void 0;"scrollParent"===r?(s=f(l(e)),"BODY"===s.nodeName&&(s=t.ownerDocument.documentElement)):s="window"===r?t.ownerDocument.documentElement:r;var u=M(s,a,i);if("HTML"!==s.nodeName||N(a))o=u;else{var c=j(t.ownerDocument),h=c.height,p=c.width;o.top+=u.top-u.marginTop,o.bottom=h+u.top,o.left+=u.left-u.marginLeft,o.right=p+u.left}}n=n||0;var g="number"===typeof n;return o.left+=g?n:n.left||0,o.top+=g?n:n.top||0,o.right-=g?n:n.right||0,o.bottom-=g?n:n.bottom||0,o}function P(t){var e=t.width,n=t.height;return e*n}function R(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var a=$(n,r,o,i),s={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},u=Object.keys(s).map((function(t){return S({key:t},s[t],{area:P(s[t])})})).sort((function(t,e){return e.area-t.area})),c=u.filter((function(t){var e=t.width,r=t.height;return e>=n.clientWidth&&r>=n.clientHeight})),l=c.length>0?c[0].key:u[0].key,f=t.split("-")[1];return l+(f?"-"+f:"")}function L(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?F(e):b(e,d(n));return M(n,i,r)}function z(t){var e=t.ownerDocument.defaultView,n=e.getComputedStyle(t),r=parseFloat(n.marginTop||0)+parseFloat(n.marginBottom||0),i=parseFloat(n.marginLeft||0)+parseFloat(n.marginRight||0),o={width:t.offsetWidth+i,height:t.offsetHeight+r};return o}function B(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function I(t,e,n){n=n.split("-")[0];var r=z(t),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",u=o?"height":"width",c=o?"width":"height";return i[a]=e[a]+e[u]/2-r[u]/2,i[s]=n===s?e[s]-r[c]:e[B(s)],i}function U(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function q(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var r=U(t,(function(t){return t[e]===n}));return t.indexOf(r)}function H(t,e,n){var r=void 0===n?t:t.slice(0,q(t,"name",n));return r.forEach((function(t){t["function"]&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t["function"]||t.fn;t.enabled&&u(n)&&(e.offsets.popper=C(e.offsets.popper),e.offsets.reference=C(e.offsets.reference),e=n(e,t))})),e}function W(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=R(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=I(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=H(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function G(t,e){return t.some((function(t){var n=t.name,r=t.enabled;return r&&n===e}))}function Y(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+n:t;if("undefined"!==typeof document.body.style[o])return o}return null}function V(){return this.state.isDestroyed=!0,G(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Y("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function X(t){var e=t.ownerDocument;return e?e.defaultView:window}function J(t,e,n,r){var i="BODY"===t.nodeName,o=i?t.ownerDocument.defaultView:t;o.addEventListener(e,n,{passive:!0}),i||J(f(o.parentNode),e,n,r),r.push(o)}function Q(t,e,n,r){n.updateBound=r,X(t).addEventListener("resize",n.updateBound,{passive:!0});var i=f(t);return J(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function K(){this.state.eventsEnabled||(this.state=Q(this.reference,this.options,this.state,this.scheduleUpdate))}function Z(t,e){return X(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function tt(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=Z(this.reference,this.state))}function et(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function nt(t,e){Object.keys(e).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&et(e[n])&&(r="px"),t.style[n]=e[n]+r}))}function rt(t,e){Object.keys(e).forEach((function(n){var r=e[n];!1!==r?t.setAttribute(n,e[n]):t.removeAttribute(n)}))}function it(t){return nt(t.instance.popper,t.styles),rt(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&nt(t.arrowElement,t.arrowStyles),t}function ot(t,e,n,r,i){var o=L(i,e,t,n.positionFixed),a=R(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",a),nt(e,{position:n.positionFixed?"fixed":"absolute"}),n}function at(t,e){var n=t.offsets,r=n.popper,i=n.reference,o=Math.round,a=Math.floor,s=function(t){return t},u=o(i.width),c=o(r.width),l=-1!==["left","right"].indexOf(t.placement),f=-1!==t.placement.indexOf("-"),d=u%2===c%2,h=u%2===1&&c%2===1,p=e?l||f||d?o:a:s,g=e?o:s;return{left:p(h&&!f&&e?r.left-1:r.left),top:g(r.top),bottom:g(r.bottom),right:p(r.right)}}var st=n&&/Firefox/i.test(navigator.userAgent);function ut(t,e){var n=e.x,r=e.y,i=t.offsets.popper,o=U(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:e.gpuAcceleration,s=m(t.instance.popper),u=D(s),c={position:i.position},l=at(t,window.devicePixelRatio<2||!st),f="bottom"===n?"top":"bottom",d="right"===r?"left":"right",h=Y("transform"),p=void 0,g=void 0;if(g="bottom"===f?"HTML"===s.nodeName?-s.clientHeight+l.bottom:-u.height+l.bottom:l.top,p="right"===d?"HTML"===s.nodeName?-s.clientWidth+l.right:-u.width+l.right:l.left,a&&h)c[h]="translate3d("+p+"px, "+g+"px, 0)",c[f]=0,c[d]=0,c.willChange="transform";else{var v="bottom"===f?-1:1,y="right"===d?-1:1;c[f]=g*v,c[d]=p*y,c.willChange=f+", "+d}var b={"x-placement":t.placement};return t.attributes=S({},b,t.attributes),t.styles=S({},c,t.styles),t.arrowStyles=S({},t.offsets.arrow,t.arrowStyles),t}function ct(t,e,n){var r=U(t,(function(t){var n=t.name;return n===e})),i=!!r&&t.some((function(t){return t.name===n&&t.enabled&&t.order<r.order}));if(!i){var o="`"+e+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}function lt(t,e){var n;if(!ct(t.instance.modifiers,"arrow","keepTogether"))return t;var r=e.element;if("string"===typeof r){if(r=t.instance.popper.querySelector(r),!r)return t}else if(!t.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],o=t.offsets,a=o.popper,s=o.reference,u=-1!==["left","right"].indexOf(i),l=u?"height":"width",f=u?"Top":"Left",d=f.toLowerCase(),h=u?"left":"top",p=u?"bottom":"right",g=z(r)[l];s[p]-g<a[d]&&(t.offsets.popper[d]-=a[d]-(s[p]-g)),s[d]+g>a[p]&&(t.offsets.popper[d]+=s[d]+g-a[p]),t.offsets.popper=C(t.offsets.popper);var m=s[d]+s[l]/2-g/2,v=c(t.instance.popper),y=parseFloat(v["margin"+f]),b=parseFloat(v["border"+f+"Width"]),x=m-t.offsets.popper[d]-y-b;return x=Math.max(Math.min(a[l]-g,x),0),t.arrowElement=r,t.offsets.arrow=(n={},A(n,d,Math.round(x)),A(n,h,""),n),t}function ft(t){return"end"===t?"start":"start"===t?"end":t}var dt=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ht=dt.slice(3);function pt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ht.indexOf(t),r=ht.slice(n+1).concat(ht.slice(0,n));return e?r.reverse():r}var gt={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function mt(t,e){if(G(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=$(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],i=B(r),o=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case gt.FLIP:a=[r,i];break;case gt.CLOCKWISE:a=pt(r);break;case gt.COUNTERCLOCKWISE:a=pt(r,!0);break;default:a=e.behavior}return a.forEach((function(s,u){if(r!==s||a.length===u+1)return t;r=t.placement.split("-")[0],i=B(r);var c=t.offsets.popper,l=t.offsets.reference,f=Math.floor,d="left"===r&&f(c.right)>f(l.left)||"right"===r&&f(c.left)<f(l.right)||"top"===r&&f(c.bottom)>f(l.top)||"bottom"===r&&f(c.top)<f(l.bottom),h=f(c.left)<f(n.left),p=f(c.right)>f(n.right),g=f(c.top)<f(n.top),m=f(c.bottom)>f(n.bottom),v="left"===r&&h||"right"===r&&p||"top"===r&&g||"bottom"===r&&m,y=-1!==["top","bottom"].indexOf(r),b=!!e.flipVariations&&(y&&"start"===o&&h||y&&"end"===o&&p||!y&&"start"===o&&g||!y&&"end"===o&&m),x=!!e.flipVariationsByContent&&(y&&"start"===o&&p||y&&"end"===o&&h||!y&&"start"===o&&m||!y&&"end"===o&&g),w=b||x;(d||v||w)&&(t.flipped=!0,(d||v)&&(r=a[u+1]),w&&(o=ft(o)),t.placement=r+(o?"-"+o:""),t.offsets.popper=S({},t.offsets.popper,I(t.instance.popper,t.offsets.reference,t.placement)),t=H(t.instance.modifiers,t,"flip"))})),t}function vt(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",u=a?"left":"top",c=a?"width":"height";return n[s]<o(r[u])&&(t.offsets.popper[u]=o(r[u])-n[c]),n[u]>o(r[s])&&(t.offsets.popper[u]=o(r[s])),t}function yt(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return t;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}var u=C(s);return u[e]/100*o}if("vh"===a||"vw"===a){var c=void 0;return c="vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),c/100*o}return o}function bt(t,e,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),a=t.split(/(\+|\-)/).map((function(t){return t.trim()})),s=a.indexOf(U(a,(function(t){return-1!==t.search(/,|\s/)})));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,c=-1!==s?[a.slice(0,s).concat([a[s].split(u)[0]]),[a[s].split(u)[1]].concat(a.slice(s+1))]:[a];return c=c.map((function(t,r){var i=(1===r?!o:o)?"height":"width",a=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)}),[]).map((function(t){return yt(t,i,e,n)}))})),c.forEach((function(t,e){t.forEach((function(n,r){et(n)&&(i[e]+=n*("-"===t[r-1]?-1:1))}))})),i}function xt(t,e){var n=e.offset,r=t.placement,i=t.offsets,o=i.popper,a=i.reference,s=r.split("-")[0],u=void 0;return u=et(+n)?[+n,0]:bt(n,o,a,s),"left"===s?(o.top+=u[0],o.left-=u[1]):"right"===s?(o.top+=u[0],o.left+=u[1]):"top"===s?(o.left+=u[0],o.top-=u[1]):"bottom"===s&&(o.left+=u[0],o.top+=u[1]),t.popper=o,t}function wt(t,e){var n=e.boundariesElement||m(t.instance.popper);t.instance.reference===n&&(n=m(n));var r=Y("transform"),i=t.instance.popper.style,o=i.top,a=i.left,s=i[r];i.top="",i.left="",i[r]="";var u=$(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);i.top=o,i.left=a,i[r]=s,e.boundaries=u;var c=e.priority,l=t.offsets.popper,f={primary:function(t){var n=l[t];return l[t]<u[t]&&!e.escapeWithReference&&(n=Math.max(l[t],u[t])),A({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=l[n];return l[t]>u[t]&&!e.escapeWithReference&&(r=Math.min(l[n],u[t]-("right"===t?l.width:l.height))),A({},n,r)}};return c.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";l=S({},l,f[e](t))})),t.offsets.popper=l,t}function Ot(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(n),u=s?"left":"top",c=s?"width":"height",l={start:A({},u,o[u]),end:A({},u,o[u]+o[c]-a[c])};t.offsets.popper=S({},a,l[r])}return t}function _t(t){if(!ct(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=U(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}function jt(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=o[n]-(s?i[a?"width":"height"]:0),t.placement=B(e),t.offsets.popper=C(i),t}var Et={shift:{order:100,enabled:!0,fn:Ot},offset:{order:200,enabled:!0,fn:xt,offset:0},preventOverflow:{order:300,enabled:!0,fn:wt,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:vt},arrow:{order:500,enabled:!0,fn:lt,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:mt,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:jt},hide:{order:800,enabled:!0,fn:_t},computeStyle:{order:850,enabled:!0,fn:ut,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:it,onLoad:ot,gpuAcceleration:void 0}},kt={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Et},At=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};E(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=s(this.update.bind(this)),this.options=S({},t.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(S({},t.Defaults.modifiers,i.modifiers)).forEach((function(e){r.options.modifiers[e]=S({},t.Defaults.modifiers[e]||{},i.modifiers?i.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return S({name:t},r.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&u(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)})),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return k(t,[{key:"update",value:function(){return W.call(this)}},{key:"destroy",value:function(){return V.call(this)}},{key:"enableEventListeners",value:function(){return K.call(this)}},{key:"disableEventListeners",value:function(){return tt.call(this)}}]),t}();At.Utils=("undefined"!==typeof window?window:t).PopperUtils,At.placements=dt,At.Defaults=kt,e["a"]=At}).call(this,n("c8ba"))},f195:function(t,e,n){const r=n("3034"),i=(t,e,n)=>0!==r(t,e,n);t.exports=i},f5df:function(t,e,n){var r=n("00ee"),i=n("c6b6"),o=n("b622"),a=o("toStringTag"),s="Arguments"==i(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),a))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},f5ef:function(t,e,n){"use strict";const r=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],i=/^aria-[\w-]*$/i,o={"*":["class","dir","id","lang","role",i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},a=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi,s=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function u(t,e){const n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===r.indexOf(n)||Boolean(t.nodeValue.match(a)||t.nodeValue.match(s));const i=e.filter(t=>t instanceof RegExp);for(let r=0,o=i.length;r<o;r++)if(n.match(i[r]))return!0;return!1}function c(t,e,n){if(0===t.length)return t;if(n&&"function"===typeof n)return n(t);const r=new window.DOMParser,i=r.parseFromString(t,"text/html"),o=Object.keys(e),a=[].slice.call(i.body.querySelectorAll("*"));for(let s=0,c=a.length;s<c;s++){const t=a[s],n=t.nodeName.toLowerCase();if(-1===o.indexOf(t.nodeName.toLowerCase())){t.parentNode.removeChild(t);continue}const r=[].slice.call(t.attributes),i=[].concat(e["*"]||[],e[n]||[]);r.forEach(e=>{u(e,i)||t.removeAttribute(e.nodeName)})}return i.body.innerHTML}var l=n("1157"),f=n.n(l),d=n("f0bd"),h=n("3ec5");const p="tooltip",g="4.6.0",m="bs.tooltip",v="."+m,y=f.a.fn[p],b="bs-tooltip",x=new RegExp(`(^|\\s)${b}\\S+`,"g"),w=["sanitize","whiteList","sanitizeFn"],O={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},_={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},j={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:o,popperConfig:null},E="show",k="out",A={HIDE:"hide"+v,HIDDEN:"hidden"+v,SHOW:"show"+v,SHOWN:"shown"+v,INSERTED:"inserted"+v,CLICK:"click"+v,FOCUSIN:"focusin"+v,FOCUSOUT:"focusout"+v,MOUSEENTER:"mouseenter"+v,MOUSELEAVE:"mouseleave"+v},S="fade",C="show",D=".tooltip-inner",M=".arrow",T="hover",N="focus",F="click",$="manual";class P{constructor(t,e){if("undefined"===typeof d["a"])throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}static get VERSION(){return g}static get Default(){return j}static get NAME(){return p}static get DATA_KEY(){return m}static get Event(){return A}static get EVENT_KEY(){return v}static get DefaultType(){return O}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const e=this.constructor.DATA_KEY;let n=f()(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),f()(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(f()(this.getTipElement()).hasClass(C))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),f.a.removeData(this.element,this.constructor.DATA_KEY),f()(this.element).off(this.constructor.EVENT_KEY),f()(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&f()(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null}show(){if("none"===f()(this.element).css("display"))throw new Error("Please use show on visible elements");const t=f.a.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){f()(this.element).trigger(t);const e=h["a"].findShadowRoot(this.element),n=f.a.contains(null!==e?e:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!n)return;const r=this.getTipElement(),i=h["a"].getUID(this.constructor.NAME);r.setAttribute("id",i),this.element.setAttribute("aria-describedby",i),this.setContent(),this.config.animation&&f()(r).addClass(S);const o="function"===typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,a=this._getAttachment(o);this.addAttachmentClass(a);const s=this._getContainer();f()(r).data(this.constructor.DATA_KEY,this),f.a.contains(this.element.ownerDocument.documentElement,this.tip)||f()(r).appendTo(s),f()(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new d["a"](this.element,r,this._getPopperConfig(a)),f()(r).addClass(C),f()(r).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&f()(document.body).children().on("mouseover",null,f.a.noop);const u=()=>{this.config.animation&&this._fixTransition();const t=this._hoverState;this._hoverState=null,f()(this.element).trigger(this.constructor.Event.SHOWN),t===k&&this._leave(null,this)};if(f()(this.tip).hasClass(S)){const t=h["a"].getTransitionDurationFromElement(this.tip);f()(this.tip).one(h["a"].TRANSITION_END,u).emulateTransitionEnd(t)}else u()}}hide(t){const e=this.getTipElement(),n=f.a.Event(this.constructor.Event.HIDE),r=()=>{this._hoverState!==E&&e.parentNode&&e.parentNode.removeChild(e),this._cleanTipClass(),this.element.removeAttribute("aria-describedby"),f()(this.element).trigger(this.constructor.Event.HIDDEN),null!==this._popper&&this._popper.destroy(),t&&t()};if(f()(this.element).trigger(n),!n.isDefaultPrevented()){if(f()(e).removeClass(C),"ontouchstart"in document.documentElement&&f()(document.body).children().off("mouseover",null,f.a.noop),this._activeTrigger[F]=!1,this._activeTrigger[N]=!1,this._activeTrigger[T]=!1,f()(this.tip).hasClass(S)){const t=h["a"].getTransitionDurationFromElement(e);f()(e).one(h["a"].TRANSITION_END,r).emulateTransitionEnd(t)}else r();this._hoverState=""}}update(){null!==this._popper&&this._popper.scheduleUpdate()}isWithContent(){return Boolean(this.getTitle())}addAttachmentClass(t){f()(this.getTipElement()).addClass(`${b}-${t}`)}getTipElement(){return this.tip=this.tip||f()(this.config.template)[0],this.tip}setContent(){const t=this.getTipElement();this.setElementContent(f()(t.querySelectorAll(D)),this.getTitle()),f()(t).removeClass(`${S} ${C}`)}setElementContent(t,e){"object"!==typeof e||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=c(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?f()(e).parent().is(t)||t.empty().append(e):t.text(f()(e).text())}getTitle(){let t=this.element.getAttribute("data-original-title");return t||(t="function"===typeof this.config.title?this.config.title.call(this.element):this.config.title),t}_getPopperConfig(t){const e={placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:M},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:t=>{t.originalPlacement!==t.placement&&this._handlePopperPlacementChange(t)},onUpdate:t=>this._handlePopperPlacementChange(t)};return{...e,...this.config.popperConfig}}_getOffset(){const t={};return"function"===typeof this.config.offset?t.fn=t=>(t.offsets={...t.offsets,...this.config.offset(t.offsets,this.element)||{}},t):t.offset=this.config.offset,t}_getContainer(){return!1===this.config.container?document.body:h["a"].isElement(this.config.container)?f()(this.config.container):f()(document).find(this.config.container)}_getAttachment(t){return _[t.toUpperCase()]}_setListeners(){const t=this.config.trigger.split(" ");t.forEach(t=>{if("click"===t)f()(this.element).on(this.constructor.Event.CLICK,this.config.selector,t=>this.toggle(t));else if(t!==$){const e=t===T?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,n=t===T?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;f()(this.element).on(e,this.config.selector,t=>this._enter(t)).on(n,this.config.selector,t=>this._leave(t))}}),this._hideModalHandler=()=>{this.element&&this.hide()},f()(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config={...this.config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}_enter(t,e){const n=this.constructor.DATA_KEY;e=e||f()(t.currentTarget).data(n),e||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),f()(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?N:T]=!0),f()(e.getTipElement()).hasClass(C)||e._hoverState===E?e._hoverState=E:(clearTimeout(e._timeout),e._hoverState=E,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(()=>{e._hoverState===E&&e.show()},e.config.delay.show):e.show())}_leave(t,e){const n=this.constructor.DATA_KEY;e=e||f()(t.currentTarget).data(n),e||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),f()(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?N:T]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=k,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(()=>{e._hoverState===k&&e.hide()},e.config.delay.hide):e.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const e=f()(this.element).data();return Object.keys(e).forEach(t=>{-1!==w.indexOf(t)&&delete e[t]}),t={...this.constructor.Default,...e,..."object"===typeof t&&t?t:{}},"number"===typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"===typeof t.title&&(t.title=t.title.toString()),"number"===typeof t.content&&(t.content=t.content.toString()),h["a"].typeCheckConfig(p,t,this.constructor.DefaultType),t.sanitize&&(t.template=c(t.template,t.whiteList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};if(this.config)for(const e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t}_cleanTipClass(){const t=f()(this.getTipElement()),e=t.attr("class").match(x);null!==e&&e.length&&t.removeClass(e.join(""))}_handlePopperPlacementChange(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))}_fixTransition(){const t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(f()(t).removeClass(S),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)}static _jQueryInterface(t){return this.each((function(){const e=f()(this);let n=e.data(m);const r="object"===typeof t&&t;if((n||!/dispose|hide/.test(t))&&(n||(n=new P(this,r),e.data(m,n)),"string"===typeof t)){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}f.a.fn[p]=P._jQueryInterface,f.a.fn[p].Constructor=P,f.a.fn[p].noConflict=()=>(f.a.fn[p]=y,P._jQueryInterface)},f67c:function(t,e,n){const r=n("2a86"),i=n("3034");t.exports=(t,e,n)=>{const o=[];let a=null,s=null;const u=t.sort((t,e)=>i(t,e,n));for(const i of u){const t=r(i,e,n);t?(s=i,a||(a=i)):(s&&o.push([a,s]),s=null,a=null)}a&&o.push([a,null]);const c=[];for(const[r,i]of o)r===i?c.push(r):i||r!==u[0]?i?r===u[0]?c.push("<="+i):c.push(`${r} - ${i}`):c.push(">="+r):c.push("*");const l=c.join(" || "),f="string"===typeof e.raw?e.raw:String(e);return l.length<f.length?l:e}},f71e:function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"===typeof e&&(e={cmp:e});var n="boolean"===typeof e.cycles&&e.cycles,r=e.cmp&&function(t){return function(e){return function(n,r){var i={key:n,value:e[n]},o={key:r,value:e[r]};return t(i,o)}}}(e.cmp),i=[];return function t(e){if(e&&e.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var o,a;if(Array.isArray(e)){for(a="[",o=0;o<e.length;o++)o&&(a+=","),a+=t(e[o])||"null";return a+"]"}if(null===e)return"null";if(-1!==i.indexOf(e)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=i.push(e)-1,u=Object.keys(e).sort(r&&r(e));for(a="",o=0;o<u.length;o++){var c=u[o],l=t(e[c]);l&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l)}return i.splice(s,1),"{"+a+"}"}}(t)}},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},f7ac:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return pe})),n.d(e,"d",(function(){return fe})),n.d(e,"e",(function(){return de})),n.d(e,"f",(function(){return le}));var r=n("fc17");const i="RawCode",o="Literal",a="Property",s="Identifier",u="ArrayExpression",c="BinaryExpression",l="CallExpression",f="ConditionalExpression",d="LogicalExpression",h="MemberExpression",p="ObjectExpression",g="UnaryExpression";function m(t){this.type=t}function v(t){switch(t.type){case u:return t.elements;case c:case d:return[t.left,t.right];case l:return[t.callee].concat(t.arguments);case f:return[t.test,t.consequent,t.alternate];case h:return[t.object,t.property];case p:return t.properties;case a:return[t.key,t.value];case g:return[t.argument];case s:case o:case i:default:return[]}}var y,b,x,w,O;m.prototype.visit=function(t){let e,n,r;if(t(this))return 1;for(e=v(this),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1};var _=1,j=2,E=3,k=4,A=5,S=6,C=7,D=8,M=9;y={},y[_]="Boolean",y[j]="<end>",y[E]="Identifier",y[k]="Keyword",y[A]="Null",y[S]="Numeric",y[C]="Punctuator",y[D]="String",y[M]="RegularExpression";var T="ArrayExpression",N="BinaryExpression",F="CallExpression",$="ConditionalExpression",P="Identifier",R="Literal",L="LogicalExpression",z="MemberExpression",B="ObjectExpression",I="Property",U="UnaryExpression",q="Unexpected token %0",H="Unexpected number",W="Unexpected string",G="Unexpected identifier",Y="Unexpected reserved word",V="Unexpected end of input",X="Invalid regular expression",J="Invalid regular expression: missing /",Q="Octal literals are not allowed in strict mode.",K="Duplicate data property in object literal not allowed in strict mode",Z="ILLEGAL",tt="Disabled.",et=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),nt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function rt(t,e){if(!t)throw new Error("ASSERT: "+e)}function it(t){return t>=48&&t<=57}function ot(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function at(t){return"01234567".indexOf(t)>=0}function st(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function ut(t){return 10===t||13===t||8232===t||8233===t}function ct(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&et.test(String.fromCharCode(t))}function lt(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&nt.test(String.fromCharCode(t))}const ft={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function dt(){while(x<w){const t=b.charCodeAt(x);if(!st(t)&&!ut(t))break;++x}}function ht(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)x<w&&ot(b[x])?(r=b[x++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):It({},q,Z);return String.fromCharCode(i)}function pt(){var t,e,n,r;t=b[x],e=0,"}"===t&&It({},q,Z);while(x<w){if(t=b[x++],!ot(t))break;e=16*e+"0123456789abcdef".indexOf(t.toLowerCase())}return(e>1114111||"}"!==t)&&It({},q,Z),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function gt(){var t,e;t=b.charCodeAt(x++),e=String.fromCharCode(t),92===t&&(117!==b.charCodeAt(x)&&It({},q,Z),++x,t=ht("u"),t&&"\\"!==t&&ct(t.charCodeAt(0))||It({},q,Z),e=t);while(x<w){if(t=b.charCodeAt(x),!lt(t))break;++x,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==b.charCodeAt(x)&&It({},q,Z),++x,t=ht("u"),t&&"\\"!==t&&lt(t.charCodeAt(0))||It({},q,Z),e+=t)}return e}function mt(){var t,e;t=x++;while(x<w){if(e=b.charCodeAt(x),92===e)return x=t,gt();if(!lt(e))break;++x}return b.slice(t,x)}function vt(){var t,e,n;return t=x,e=92===b.charCodeAt(x)?gt():mt(),n=1===e.length?E:ft.hasOwnProperty(e)?k:"null"===e?A:"true"===e||"false"===e?_:E,{type:n,value:e,start:t,end:x}}function yt(){var t,e,n,r,i=x,o=b.charCodeAt(x),a=b[x];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++x,{type:C,value:String.fromCharCode(o),start:i,end:x};default:if(t=b.charCodeAt(x+1),61===t)switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return x+=2,{type:C,value:String.fromCharCode(o)+String.fromCharCode(t),start:i,end:x};case 33:case 61:return x+=2,61===b.charCodeAt(x)&&++x,{type:C,value:b.slice(i,x),start:i,end:x}}}return r=b.substr(x,4),">>>="===r?(x+=4,{type:C,value:r,start:i,end:x}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(x+=3,{type:C,value:n,start:i,end:x}):(e=n.substr(0,2),a===e[1]&&"+-<>&|".indexOf(a)>=0||"=>"===e?(x+=2,{type:C,value:e,start:i,end:x}):("//"===e&&It({},q,Z),"<>=!+-*%&|^/".indexOf(a)>=0?(++x,{type:C,value:a,start:i,end:x}):void It({},q,Z))))}function bt(t){let e="";while(x<w){if(!ot(b[x]))break;e+=b[x++]}return 0===e.length&&It({},q,Z),ct(b.charCodeAt(x))&&It({},q,Z),{type:S,value:parseInt("0x"+e,16),start:t,end:x}}function xt(t){let e="0"+b[x++];while(x<w){if(!at(b[x]))break;e+=b[x++]}return(ct(b.charCodeAt(x))||it(b.charCodeAt(x)))&&It({},q,Z),{type:S,value:parseInt(e,8),octal:!0,start:t,end:x}}function wt(){var t,e,n;if(n=b[x],rt(it(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=x,t="","."!==n){if(t=b[x++],n=b[x],"0"===t){if("x"===n||"X"===n)return++x,bt(e);if(at(n))return xt(e);n&&it(n.charCodeAt(0))&&It({},q,Z)}while(it(b.charCodeAt(x)))t+=b[x++];n=b[x]}if("."===n){t+=b[x++];while(it(b.charCodeAt(x)))t+=b[x++];n=b[x]}if("e"===n||"E"===n)if(t+=b[x++],n=b[x],"+"!==n&&"-"!==n||(t+=b[x++]),it(b.charCodeAt(x)))while(it(b.charCodeAt(x)))t+=b[x++];else It({},q,Z);return ct(b.charCodeAt(x))&&It({},q,Z),{type:S,value:parseFloat(t),start:e,end:x}}function Ot(){var t,e,n,r,i="",o=!1;t=b[x],rt("'"===t||'"'===t,"String literal must starts with a quote"),e=x,++x;while(x<w){if(n=b[x++],n===t){t="";break}if("\\"===n)if(n=b[x++],n&&ut(n.charCodeAt(0)))"\r"===n&&"\n"===b[x]&&++x;else switch(n){case"u":case"x":"{"===b[x]?(++x,i+=pt()):i+=ht(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:at(n)?(r="01234567".indexOf(n),0!==r&&(o=!0),x<w&&at(b[x])&&(o=!0,r=8*r+"01234567".indexOf(b[x++]),"0123".indexOf(n)>=0&&x<w&&at(b[x])&&(r=8*r+"01234567".indexOf(b[x++]))),i+=String.fromCharCode(r)):i+=n;break}else{if(ut(n.charCodeAt(0)))break;i+=n}}return""!==t&&It({},q,Z),{type:D,value:i,octal:o,start:e,end:x}}function _t(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(t,e)=>{if(parseInt(e,16)<=1114111)return"x";It({},X)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){It({},X)}try{return new RegExp(t,e)}catch(i){return null}}function jt(){var t,e,n,r,i;t=b[x],rt("/"===t,"Regular expression literal must start with a slash"),e=b[x++],n=!1,r=!1;while(x<w)if(t=b[x++],e+=t,"\\"===t)t=b[x++],ut(t.charCodeAt(0))&&It({},J),e+=t;else if(ut(t.charCodeAt(0)))It({},J);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||It({},J),i=e.substr(1,e.length-2),{value:i,literal:e}}function Et(){var t,e,n;e="",n="";while(x<w){if(t=b[x],!lt(t.charCodeAt(0)))break;++x,"\\"===t&&x<w?It({},q,Z):(n+=t,e+=t)}return n.search(/[^gimuy]/g)>=0&&It({},X,n),{value:n,literal:e}}function kt(){var t,e,n,r;return O=null,dt(),t=x,e=jt(),n=Et(),r=_t(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:x}}function At(t){return t.type===E||t.type===k||t.type===_||t.type===A}function St(){if(dt(),x>=w)return{type:j,start:x,end:x};const t=b.charCodeAt(x);return ct(t)?vt():40===t||41===t||59===t?yt():39===t||34===t?Ot():46===t?it(b.charCodeAt(x+1))?wt():yt():it(t)?wt():yt()}function Ct(){const t=O;return x=t.end,O=St(),x=t.end,t}function Dt(){const t=x;O=St(),x=t}function Mt(t){const e=new m(T);return e.elements=t,e}function Tt(t,e,n){const r=new m("||"===t||"&&"===t?L:N);return r.operator=t,r.left=e,r.right=n,r}function Nt(t,e){const n=new m(F);return n.callee=t,n.arguments=e,n}function Ft(t,e,n){const r=new m($);return r.test=t,r.consequent=e,r.alternate=n,r}function $t(t){const e=new m(P);return e.name=t,e}function Pt(t){const e=new m(R);return e.value=t.value,e.raw=b.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Rt(t,e,n){const r=new m(z);return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function Lt(t){const e=new m(B);return e.properties=t,e}function zt(t,e,n){const r=new m(I);return r.key=e,r.value=n,r.kind=t,r}function Bt(t,e){const n=new m(U);return n.operator=t,n.argument=e,n.prefix=!0,n}function It(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(t,e)=>(rt(e<r.length,"Message reference must be in range"),r[e]));throw n=new Error(i),n.index=x,n.description=i,n}function Ut(t){t.type===j&&It(t,V),t.type===S&&It(t,H),t.type===D&&It(t,W),t.type===E&&It(t,G),t.type===k&&It(t,Y),It(t,q,t.value)}function qt(t){const e=Ct();e.type===C&&e.value===t||Ut(e)}function Ht(t){return O.type===C&&O.value===t}function Wt(t){return O.type===k&&O.value===t}function Gt(){const t=[];x=O.start,qt("[");while(!Ht("]"))Ht(",")?(Ct(),t.push(null)):(t.push(ue()),Ht("]")||qt(","));return Ct(),Mt(t)}function Yt(){x=O.start;const t=Ct();return t.type===D||t.type===S?(t.octal&&It(t,Q),Pt(t)):$t(t.value)}function Vt(){var t,e,n,r;return x=O.start,t=O,t.type===E?(n=Yt(),qt(":"),r=ue(),zt("init",n,r)):t.type!==j&&t.type!==C?(e=Yt(),qt(":"),r=ue(),zt("init",e,r)):void Ut(t)}function Xt(){var t,e,n,r=[],i={},o=String;x=O.start,qt("{");while(!Ht("}"))t=Vt(),e=t.key.type===P?t.key.name:o(t.key.value),n="$"+e,Object.prototype.hasOwnProperty.call(i,n)?It({},K):i[n]=!0,r.push(t),Ht("}")||qt(",");return qt("}"),Lt(r)}function Jt(){qt("(");const t=ce();return qt(")"),t}const Qt={if:1};function Kt(){var t,e,n;if(Ht("("))return Jt();if(Ht("["))return Gt();if(Ht("{"))return Xt();if(t=O.type,x=O.start,t===E||Qt[O.value])n=$t(Ct().value);else if(t===D||t===S)O.octal&&It(O,Q),n=Pt(Ct());else{if(t===k)throw new Error(tt);t===_?(e=Ct(),e.value="true"===e.value,n=Pt(e)):t===A?(e=Ct(),e.value=null,n=Pt(e)):Ht("/")||Ht("/=")?(n=Pt(kt()),Dt()):Ut(Ct())}return n}function Zt(){const t=[];if(qt("("),!Ht(")"))while(x<w){if(t.push(ue()),Ht(")"))break;qt(",")}return qt(")"),t}function te(){x=O.start;const t=Ct();return At(t)||Ut(t),$t(t.value)}function ee(){return qt("."),te()}function ne(){qt("[");const t=ce();return qt("]"),t}function re(){var t,e,n;for(t=Kt();;)if(Ht("."))n=ee(),t=Rt(".",t,n);else if(Ht("("))e=Zt(),t=Nt(t,e);else{if(!Ht("["))break;n=ne(),t=Rt("[",t,n)}return t}function ie(){const t=re();if(O.type===C&&(Ht("++")||Ht("--")))throw new Error(tt);return t}function oe(){var t,e;if(O.type!==C&&O.type!==k)e=ie();else{if(Ht("++")||Ht("--"))throw new Error(tt);if(Ht("+")||Ht("-")||Ht("~")||Ht("!"))t=Ct(),e=oe(),e=Bt(t.value,e);else{if(Wt("delete")||Wt("void")||Wt("typeof"))throw new Error(tt);e=ie()}}return e}function ae(t){let e=0;if(t.type!==C&&t.type!==k)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function se(){var t,e,n,r,i,o,a,s,u,c;if(t=O,u=oe(),r=O,i=ae(r),0===i)return u;r.prec=i,Ct(),e=[t,O],a=oe(),o=[u,r,a];while((i=ae(O))>0){while(o.length>2&&i<=o[o.length-2].prec)a=o.pop(),s=o.pop().value,u=o.pop(),e.pop(),n=Tt(s,u,a),o.push(n);r=Ct(),r.prec=i,o.push(r),e.push(O),n=oe(),o.push(n)}c=o.length-1,n=o[c],e.pop();while(c>1)e.pop(),n=Tt(o[c-1].value,o[c-2],n),c-=2;return n}function ue(){var t,e,n;return t=se(),Ht("?")&&(Ct(),e=ue(),qt(":"),n=ue(),t=Ft(t,e,n)),t}function ce(){const t=ue();if(Ht(","))throw new Error(tt);return t}function le(t){b=t,x=0,w=b.length,O=null,Dt();const e=ce();if(O.type!==j)throw new Error("Unexpect token after expression.");return e}var fe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function de(t){function e(e,n,r,i){let o=t(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}function n(t,n,r){return i=>e(t,i,n,r)}const i="new Date",o="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&Object(r["o"])("Missing arguments to clamp function."),e.length>3&&Object(r["o"])("Too many arguments to clamp function.");const n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",o,0),lower:n("toLowerCase",o,0),substring:n("substring",o),split:n("split",o),trim:n("trim",o,0),regexp:a,test:n("test",a),if:function(e){e.length<3&&Object(r["o"])("Missing arguments to if function."),e.length>3&&Object(r["o"])("Too many arguments to if function.");const n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function he(t){const e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}function pe(t){t=t||{};const e=t.allowed?Object(r["fb"])(t.allowed):{},n=t.forbidden?Object(r["fb"])(t.forbidden):{},i=t.constants||fe,o=(t.functions||de)(d),a=t.globalvar,s=t.fieldvar,u=Object(r["E"])(a)?a:t=>"".concat(a,'["').concat(t,'"]');let c={},l={},f=0;function d(t){if(Object(r["J"])(t))return t;const e=h[t.type];return null==e&&Object(r["o"])("Unsupported type: "+t.type),e(t)}const h={Literal:t=>t.raw,Identifier:t=>{const o=t.name;return f>0?o:Object(r["w"])(n,o)?Object(r["o"])("Illegal identifier: "+o):Object(r["w"])(i,o)?i[o]:Object(r["w"])(e,o)?o:(c[o]=1,u(o))},MemberExpression:t=>{const e=!t.computed,n=d(t.object);e&&(f+=1);const r=d(t.property);return n===s&&(l[he(r)]=1),e&&(f-=1),n+(e?"."+r:"["+r+"]")},CallExpression:t=>{"Identifier"!==t.callee.type&&Object(r["o"])("Illegal callee type: "+t.callee.type);const e=t.callee.name,n=t.arguments,i=Object(r["w"])(o,e)&&o[e];return i||Object(r["o"])("Unrecognized function: "+e),Object(r["E"])(i)?i(n):i+"("+n.map(d).join(",")+")"},ArrayExpression:t=>"["+t.elements.map(d).join(",")+"]",BinaryExpression:t=>"("+d(t.left)+" "+t.operator+" "+d(t.right)+")",UnaryExpression:t=>"("+t.operator+d(t.argument)+")",ConditionalExpression:t=>"("+d(t.test)+"?"+d(t.consequent)+":"+d(t.alternate)+")",LogicalExpression:t=>"("+d(t.left)+t.operator+d(t.right)+")",ObjectExpression:t=>"{"+t.properties.map(d).join(",")+"}",Property:t=>{f+=1;const e=d(t.key);return f-=1,e+":"+d(t.value)}};function p(t){const e={code:d(t),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},e}return p.functions=o,p.constants=i,p}},fc17:function(t,e,n){"use strict";function r(t,e,n){return t.fields=e||[],t.fname=n,t}function i(t){return null==t?null:t.fname}function o(t){return null==t?null:t.fields}function a(t){return 1===t.length?s(t[0]):u(t)}n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return w})),n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return i})),n.d(e,"i",(function(){return J})),n.d(e,"j",(function(){return et})),n.d(e,"k",(function(){return Q})),n.d(e,"l",(function(){return tt})),n.d(e,"m",(function(){return ot})),n.d(e,"n",(function(){return at})),n.d(e,"o",(function(){return c})),n.d(e,"p",(function(){return st})),n.d(e,"q",(function(){return ut})),n.d(e,"r",(function(){return ct})),n.d(e,"s",(function(){return v})),n.d(e,"t",(function(){return ht})),n.d(e,"u",(function(){return f})),n.d(e,"v",(function(){return pt})),n.d(e,"w",(function(){return ft})),n.d(e,"x",(function(){return d})),n.d(e,"y",(function(){return h})),n.d(e,"z",(function(){return gt})),n.d(e,"A",(function(){return mt})),n.d(e,"B",(function(){return E})),n.d(e,"C",(function(){return vt})),n.d(e,"D",(function(){return yt})),n.d(e,"E",(function(){return K})),n.d(e,"F",(function(){return bt})),n.d(e,"G",(function(){return xt})),n.d(e,"H",(function(){return k})),n.d(e,"I",(function(){return wt})),n.d(e,"J",(function(){return Ot})),n.d(e,"K",(function(){return _t})),n.d(e,"L",(function(){return jt})),n.d(e,"M",(function(){return j})),n.d(e,"N",(function(){return kt})),n.d(e,"O",(function(){return At})),n.d(e,"P",(function(){return S})),n.d(e,"Q",(function(){return g})),n.d(e,"R",(function(){return Ct})),n.d(e,"S",(function(){return z})),n.d(e,"T",(function(){return B})),n.d(e,"U",(function(){return I})),n.d(e,"V",(function(){return U})),n.d(e,"W",(function(){return M})),n.d(e,"X",(function(){return V})),n.d(e,"Y",(function(){return St})),n.d(e,"Z",(function(){return Dt})),n.d(e,"ab",(function(){return l})),n.d(e,"bb",(function(){return Mt})),n.d(e,"cb",(function(){return Tt})),n.d(e,"db",(function(){return Ft})),n.d(e,"eb",(function(){return T})),n.d(e,"fb",(function(){return Pt})),n.d(e,"gb",(function(){return $t})),n.d(e,"hb",(function(){return Rt})),n.d(e,"ib",(function(){return m})),n.d(e,"jb",(function(){return X})),n.d(e,"kb",(function(){return Lt})),n.d(e,"lb",(function(){return C})),n.d(e,"mb",(function(){return p})),n.d(e,"nb",(function(){return H})),n.d(e,"ob",(function(){return W})),n.d(e,"pb",(function(){return G})),n.d(e,"qb",(function(){return Y}));const s=t=>function(e){return e[t]},u=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};function c(t){throw Error(t)}function l(t){const e=[],n=t.length;let r,i,o,a=null,s=0,u="";function l(){e.push(u+t.substring(r,i)),u="",r=i+1}for(t+="",r=i=0;i<n;++i)if(o=t[i],"\\"===o)u+=t.substring(r,i),u+=t.substring(++i,++i),r=i;else if(o===a)l(),a=null,s=-1;else{if(a)continue;r===s&&'"'===o||r===s&&"'"===o?(r=i+1,a=o):"."!==o||s?"["===o?(i>r&&l(),s=r=i+1):"]"===o&&(s||c("Access path missing open bracket: "+t),s>0&&l(),s=0,r=i+1):i>r?l():r=i+1}return s&&c("Access path missing closing bracket: "+t),a&&c("Access path missing closing quote: "+t),i>r&&(i++,l()),e}function f(t,e,n){const i=l(t);return t=1===i.length?i[0]:t,r((n&&n.get||a)(i),[t],e||t)}const d=f("id"),h=r(t=>t,[],"identity"),p=r(()=>0,[],"zero"),g=r(()=>1,[],"one"),m=r(()=>!0,[],"true"),v=r(()=>!1,[],"false");function y(t,e,n){const r=[e].concat([].slice.call(n));console[t].apply(console,r)}const b=0,x=1,w=2,O=3,_=4;function j(t,e){let n=t||b;return{level(t){return arguments.length?(n=+t,this):n},error(){return n>=x&&y(e||"error","ERROR",arguments),this},warn(){return n>=w&&y(e||"warn","WARN",arguments),this},info(){return n>=O&&y(e||"log","INFO",arguments),this},debug(){return n>=_&&y(e||"log","DEBUG",arguments),this}}}var E=Array.isArray;function k(t){return t===Object(t)}const A=t=>"__proto__"!==t;function S(...t){return t.reduce((t,e)=>{for(const n in e)if("signals"===n)t.signals=D(t.signals,e.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;C(t,n,e[n],r)}return t},{})}function C(t,e,n,r){if(!A(e))return;let i,o;if(k(n)&&!E(n))for(i in o=k(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?C(o,i,n[i]):A(i)&&(o[i]=n[i]);else t[e]=n}function D(t,e){if(null==t)return e;const n={},r=[];function i(t){n[t.name]||(n[t.name]=1,r.push(t))}return e.forEach(i),t.forEach(i),r}function M(t){return t[t.length-1]}function T(t){return null==t||""===t?null:+t}const N=t=>e=>t*Math.exp(e),F=t=>e=>Math.log(t*e),$=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),P=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,R=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function L(t,e,n,r){const i=n(t[0]),o=n(M(t)),a=(o-i)*e;return[r(i-a),r(o-a)]}function z(t,e){return L(t,e,T,h)}function B(t,e){var n=Math.sign(t[0]);return L(t,e,F(n),N(n))}function I(t,e,n){return L(t,e,R(n),R(1/n))}function U(t,e,n){return L(t,e,$(n),P(n))}function q(t,e,n,r,i){const o=r(t[0]),a=r(M(t)),s=null!=e?r(e):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function H(t,e,n){return q(t,e,n,T,h)}function W(t,e,n){const r=Math.sign(t[0]);return q(t,e,n,F(r),N(r))}function G(t,e,n,r){return q(t,e,n,R(r),R(1/r))}function Y(t,e,n,r){return q(t,e,n,$(r),P(r))}function V(t){return 1+~~(new Date(t).getMonth()/3)}function X(t){return 1+~~(new Date(t).getUTCMonth()/3)}function J(t){return null!=t?E(t)?t:[t]:[]}function Q(t,e,n){let r,i=t[0],o=t[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]}function K(t){return"function"===typeof t}const Z="descending";function tt(t,e,n){n=n||{},e=J(e)||[];const i=[],a=[],s={},u=n.comparator||nt;return J(t).forEach((t,r)=>{null!=t&&(i.push(e[r]===Z?-1:1),a.push(t=K(t)?t:f(t,null,n)),(o(t)||[]).forEach(t=>s[t]=1))}),0===a.length?null:r(u(a,i),Object.keys(s))}const et=(t,e)=>(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),nt=(t,e)=>1===t.length?rt(t[0],e[0]):it(t,e,t.length),rt=(t,e)=>function(n,r){return et(t(n),t(r))*e},it=(t,e,n)=>(e.push(0),function(r,i){let o,a=0,s=-1;while(0===a&&++s<n)o=t[s],a=et(o(r),o(i));return a*e[s]});function ot(t){return K(t)?t:()=>t}function at(t,e){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(e(r),n=null),t)}}function st(t){for(let e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r],e)t[n]=e[n];return t}function ut(t,e){let n,r,i,o,a=0;if(t&&(n=t.length))if(null==e){for(r=t[a];a<n&&(null==r||r!==r);r=t[++a]);for(i=o=r;a<n;++a)r=t[a],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=e(t[a]);a<n&&(null==r||r!==r);r=e(t[++a]));for(i=o=r;a<n;++a)r=e(t[a]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]}function ct(t,e){const n=t.length;let r,i,o,a,s,u=-1;if(null==e){while(++u<n)if(i=t[u],null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];a=s=u;while(++u<n)i=t[u],null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}else{while(++u<n)if(i=e(t[u],u,t),null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];a=s=u;while(++u<n)i=e(t[u],u,t),null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}return[a,s]}const lt=Object.prototype.hasOwnProperty;function ft(t,e){return lt.call(t,e)}const dt={};function ht(t){let e,n={};function r(t){return ft(n,t)&&n[t]!==dt}const i={size:0,empty:0,object:n,has:r,get(t){return r(t)?n[t]:void 0},set(t,e){return r(t)||(++i.size,n[t]===dt&&--i.empty),n[t]=e,this},delete(t){return r(t)&&(--i.size,++i.empty,n[t]=dt),this},clear(){i.size=i.empty=0,i.object=n={}},test(t){return arguments.length?(e=t,i):e},clean(){const t={};let r=0;for(const i in n){const o=n[i];o===dt||e&&e(o)||(t[i]=o,++r)}i.size=r,i.empty=0,i.object=n=t}};return t&&Object.keys(t).forEach(e=>{i.set(e,t[e])}),i}function pt(t,e,n,r,i,o){if(!n&&0!==n)return o;const a=+n;let s,u=t[0],c=M(t);c<u&&(s=u,u=c,c=s),s=Math.abs(e-u);const l=Math.abs(c-e);return s<l&&s<=a?r:l<=a?i:o}function gt(t,e,n){const r=t.prototype=Object.create(e.prototype);return r.constructor=t,st(r,n)}function mt(t,e,n,r){let i,o=e[0],a=e[e.length-1];return o>a&&(i=o,o=a,a=i),n=void 0===n||n,r=void 0===r||r,(n?o<=t:o<t)&&(r?t<=a:t<a)}function vt(t){return"boolean"===typeof t}function yt(t){return"[object Date]"===Object.prototype.toString.call(t)}function bt(t){return t&&K(t[Symbol.iterator])}function xt(t){return"number"===typeof t}function wt(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function Ot(t){return"string"===typeof t}function _t(t,e,n){t&&(t=e?J(t).map(t=>t.replace(/\\(.)/g,"$1")):J(t));const i=t&&t.length,o=n&&n.get||a,s=t=>o(e?[t]:l(t));let u;if(i)if(1===i){const e=s(t[0]);u=function(t){return""+e(t)}}else{const e=t.map(s);u=function(t){let n=""+e[0](t),r=0;while(++r<i)n+="|"+e[r](t);return n}}else u=function(){return""};return r(u,t,"key")}function jt(t,e){const n=t[0],r=M(t),i=+e;return i?1===i?r:n+i*(r-n):n}const Et=1e4;function kt(t){let e,n,r;t=+t||Et;const i=()=>{e={},n={},r=0},o=(i,o)=>(++r>t&&(n=e,e={},r=1),e[i]=o);return i(),{clear:i,has:t=>ft(e,t)||ft(n,t),get:t=>ft(e,t)?e[t]:ft(n,t)?o(t,n[t]):void 0,set:(t,n)=>ft(e,t)?e[t]=n:o(t,n)}}function At(t,e,n,r){const i=e.length,o=n.length;if(!o)return e;if(!i)return n;const a=r||new e.constructor(i+o);let s=0,u=0,c=0;for(;s<i&&u<o;++c)a[c]=t(e[s],n[u])>0?n[u++]:e[s++];for(;s<i;++s,++c)a[c]=e[s];for(;u<o;++u,++c)a[c]=n[u];return a}function St(t,e){let n="";while(--e>=0)n+=t;return n}function Ct(t,e,n,r){const i=n||" ",o=t+"",a=e-o.length;return a<=0?o:"left"===r?St(i,a)+o:"center"===r?St(i,~~(a/2))+o+St(i,Math.ceil(a/2)):o+St(i,a)}function Dt(t){return t&&M(t)-t[0]||0}function Mt(t){return E(t)?"["+t.map(Mt)+"]":k(t)||Ot(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Tt(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t}const Nt=t=>xt(t)||yt(t)?t:Date.parse(t);function Ft(t,e){return e=e||Nt,null==t||""===t?null:e(t)}function $t(t){return null==t||""===t?null:t+""}function Pt(t){const e={},n=t.length;for(let r=0;r<n;++r)e[t[r]]=!0;return e}function Rt(t,e,n,r){const i=null!=r?r:"â¦",o=t+"",a=o.length,s=Math.max(0,e-i.length);return a<=e?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function Lt(t,e,n){if(t)if(e){const r=t.length;for(let i=0;i<r;++i){const r=e(t[i]);r&&n(r,i,t)}}else t.forEach(n)}},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fd90:function(t,e,n){const r=n("bbfd"),i=n("3fce"),o=(t,e,n)=>{let o=null,a=null,s=null;try{s=new i(e,n)}catch(u){return null}return t.forEach(t=>{s.test(t)&&(o&&1!==a.compare(t)||(o=t,a=new r(o,n)))}),o};t.exports=o},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fdcb:function(t,e,n){"use strict";const r=n("236d"),i=Symbol("max"),o=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),u=Symbol("maxAge"),c=Symbol("dispose"),l=Symbol("noDisposeOnSet"),f=Symbol("lruList"),d=Symbol("cache"),h=Symbol("updateAgeOnGet"),p=()=>1;class g{constructor(t){if("number"===typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!==typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[i]=t.max||1/0;const e=t.length||p;if(this[a]="function"!==typeof e?p:e,this[s]=t.stale||!1,t.maxAge&&"number"!==typeof t.maxAge)throw new TypeError("maxAge must be a number");this[u]=t.maxAge||0,this[c]=t.dispose,this[l]=t.noDisposeOnSet||!1,this[h]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!==typeof t||t<0)throw new TypeError("max must be a non-negative number");this[i]=t||1/0,y(this)}get max(){return this[i]}set allowStale(t){this[s]=!!t}get allowStale(){return this[s]}set maxAge(t){if("number"!==typeof t)throw new TypeError("maxAge must be a non-negative number");this[u]=t,y(this)}get maxAge(){return this[u]}set lengthCalculator(t){"function"!==typeof t&&(t=p),t!==this[a]&&(this[a]=t,this[o]=0,this[f].forEach(t=>{t.length=this[a](t.value,t.key),this[o]+=t.length})),y(this)}get lengthCalculator(){return this[a]}get length(){return this[o]}get itemCount(){return this[f].length}rforEach(t,e){e=e||this;for(let n=this[f].tail;null!==n;){const r=n.prev;w(this,t,n,e),n=r}}forEach(t,e){e=e||this;for(let n=this[f].head;null!==n;){const r=n.next;w(this,t,n,e),n=r}}keys(){return this[f].toArray().map(t=>t.key)}values(){return this[f].toArray().map(t=>t.value)}reset(){this[c]&&this[f]&&this[f].length&&this[f].forEach(t=>this[c](t.key,t.value)),this[d]=new Map,this[f]=new r,this[o]=0}dump(){return this[f].map(t=>!v(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[f]}set(t,e,n){if(n=n||this[u],n&&"number"!==typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,s=this[a](e,t);if(this[d].has(t)){if(s>this[i])return b(this,this[d].get(t)),!1;const a=this[d].get(t),u=a.value;return this[c]&&(this[l]||this[c](t,u.value)),u.now=r,u.maxAge=n,u.value=e,this[o]+=s-u.length,u.length=s,this.get(t),y(this),!0}const h=new x(t,e,s,r,n);return h.length>this[i]?(this[c]&&this[c](t,e),!1):(this[o]+=h.length,this[f].unshift(h),this[d].set(t,this[f].head),y(this),!0)}has(t){if(!this[d].has(t))return!1;const e=this[d].get(t).value;return!v(this,e)}get(t){return m(this,t,!0)}peek(t){return m(this,t,!1)}pop(){const t=this[f].tail;return t?(b(this,t),t.value):null}del(t){b(this,this[d].get(t))}load(t){this.reset();const e=Date.now();for(let n=t.length-1;n>=0;n--){const r=t[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const t=i-e;t>0&&this.set(r.k,r.v,t)}}}prune(){this[d].forEach((t,e)=>m(this,e,!1))}}const m=(t,e,n)=>{const r=t[d].get(e);if(r){const e=r.value;if(v(t,e)){if(b(t,r),!t[s])return}else n&&(t[h]&&(r.value.now=Date.now()),t[f].unshiftNode(r));return e.value}},v=(t,e)=>{if(!e||!e.maxAge&&!t[u])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[u]&&n>t[u]},y=t=>{if(t[o]>t[i])for(let e=t[f].tail;t[o]>t[i]&&null!==e;){const n=e.prev;b(t,e),e=n}},b=(t,e)=>{if(e){const n=e.value;t[c]&&t[c](n.key,n.value),t[o]-=n.length,t[d].delete(n.key),t[f].removeNode(e)}};class x{constructor(t,e,n,r,i){this.key=t,this.value=e,this.length=n,this.now=r,this.maxAge=i||0}}const w=(t,e,n,r)=>{let i=n.value;v(t,i)&&(b(t,n),t[s]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};t.exports=g},fea9:function(t,e,n){var r=n("da84");t.exports=r.Promise}}]);